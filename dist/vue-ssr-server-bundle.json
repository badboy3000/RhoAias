{
  "entry": "server-bundle.js",
  "files": {
    "20.server-bundle.js": "exports.ids=[20],exports.modules={172:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(264),i=r.n(n);for(var s in n)\"default\"!==s&&function(t){r.d(e,t,function(){return n[t]})}(s);var o=r(405);var a=function(t){var e;(e=r(403)).__inject__&&e.__inject__(t)},u=r(2)(i.a,o.a,!1,a,null,\"f6d07914\");e.default=u.exports},264:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n,i=r(36),s=(n=i)&&n.__esModule?n:{default:n};e.default={name:\"invite-user\",components:{SignUpForm:s.default},computed:{inviteUserId:function(){return this.$route.params.id},isGuest:function(){return!this.$store.state.login}}}},403:function(t,e,r){var n=r(404);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var i=r(4);t.exports.__inject__=function(t){i(\"0a060157\",n,!0,t)}},404:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#invite-user .container{padding-bottom:15px}#invite-user .sub-title{margin-top:30px;margin-bottom:15px;margin-left:13px}#invite-user .signed{height:75vh;text-align:center;font-size:14px;color:#6d757a;padding-top:100px;line-height:30px}#invite-user .signed a{color:#00a1d6}\",\"\"])},405:function(t,e,r){\"use strict\";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{attrs:{id:\"invite-user\"}},[this._ssrNode('<div class=\"container\">',\"</div>\",[this.isGuest?[this._ssrNode('<h3 class=\"sub-title\">欢迎注册 calibur.tv</h3>'),e(\"sign-up-form\",{attrs:{\"invite-code\":this.inviteUserId}})]:this._ssrNode('<p class=\"signed\">\\n      你已经是注册用户了 (￣3￣)\\n      <br>\\n      快来邀请小伙伴一起注册 calibur 吧\\n      <br>\\n      点击查看<a href=\"/me/invite\">我的邀请码</a></p>')],2)])},staticRenderFns:[]};e.a=n}};",
    "0.server-bundle.js": "exports.ids=[0],exports.modules={156:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(236),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(337);var s=function(e){var t;(t=a(306)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"00da1201\");t.default=l.exports},181:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,n=a(148),i=(r=n)&&r.__esModule?r:{default:r};t.default={name:\"search-input\",props:{value:{type:String,default:\"\"},type:{type:[String,Number],default:0}},data:function(){return{word:this.value,selectedType:this.type,cacheKey:\"search-history\"}},methods:{handleInputBlur:function(){this.$emit(\"input-blur\"),document.body.scrollTop=0},handleInputFocus:function(){this.$emit(\"input-focus\"),document.body.scrollTop=0},clear:function(){this.word=\"\"},submit:function(){var e=this.word;e&&(this.setHistory(e),this.$router.push({name:\"search-index\",query:{q:e,type:this.selectedType}}))},setHistory:function(e){var t=this;setTimeout(function(){var a=t.getHistory(),r=a.indexOf(e);-1!==r&&a.splice(r,1),a.unshift(e),a.length>10&&a.pop();try{localStorage.setItem(t.cacheKey,(0,i.default)(a))}catch(e){}},0)},getHistory:function(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(e){return[]}}},mounted:function(){var e=this;this.$watch(\"value\",function(t){e.word=t}),this.$watch(\"word\",function(t){e.$emit(\"input\",t)}),this.$watch(\"$route\",function(t){\"search-index\"===t.name&&(e.word=t.query.q,e.selectedType=t.query.type)})}}},194:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=s(a(0)),n=s(a(1)),i=s(a(11)),o=s(a(151));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-footer\",data:function(){return{openFeedbackDrawer:!1,toggleShareModal:!1,options:[{label:\"功能建议\",value:1},{label:\"遇到错误\",value:2},{label:\"资源报错\",value:4},{label:\"求资源\",value:5},{label:\"求偶像\",value:6},{label:\"其它问题\",value:3}],selectedType:1,content:\"\"}},methods:{logout:function(){this.$cookie.remove(\"JWT-TOKEN\"),new i.default(this).logout(),window.location.reload()},login:function(){this.$channel.$emit(\"sign-in\",!1)},register:function(){this.$channel.$emit(\"sign-up\")},submitFeedback:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.content.length){t.next=3;break}return e.$toast.error(\"请先填写反馈信息！\"),t.abrupt(\"return\");case 3:return a=new i.default(e),t.next=6,a.feedback({type:e.selectedType,desc:e.content,ua:navigator.userAgent+navigator.appVersion+navigator.vendor});case 6:e.$toast.success(\"反馈成功，感谢您的反馈！\"),e.openFeedbackDrawer=!1;case 8:case\"end\":return t.stop()}},t,e)}))()},openShareModal:function(){var e=this;this.toggleShareModal=!0,this.$nextTick(function(){var t=new o.default(e.$refs.shareBtn);t.on(\"success\",function(a){e.$toast.success(\"复制成功\"),e.toggleShareModal=!1,t.destroy(),a.clearSelection()})})}},mounted:function(){var e=this;this.$channel.$on(\"open-feedback\",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type,r=t.desc;e.selectedType=a||1,e.content=r||\"\",e.openFeedbackDrawer=!0})}}},195:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(181),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(198);var s=function(e){var t;(t=a(196)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"2f4cbda2\");t.default=l.exports},196:function(e,t,a){var r=a(197);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"379dcb56\",r,!0,e)}},197:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-input-wrap{position:relative;border-radius:8px}.search-input-wrap .clear-btn{float:right;color:#757575;font:27px/25px arial,sans-serif;padding:0 15px 0 5px;line-height:38px;border-top:1px solid #d9d9d9;border-bottom:1px solid #d9d9d9;height:40px}.search-input-wrap .search-btn{float:right;height:40px;width:40px;background-color:#ffafc9;border-top-right-radius:8px;border-bottom-right-radius:8px;font-weight:700;font-size:20px;color:#fff}.search-input-wrap .input-wrap{overflow:hidden;padding:7px 0 6px;border:1px solid #d9d9d9;border-right:0;border-top-left-radius:8px;border-bottom-left-radius:8px;height:40px}.search-input-wrap .input-wrap input{width:100%;height:100%;font-size:18px;color:rgba(0,0,0,.87);word-wrap:break-word;padding:0 0 0 16px}\",\"\"])},198:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"form\",{staticClass:\"search-input-wrap\",attrs:{method:\"get\",action:\"#\"},on:{submit:function(t){t.preventDefault(),e.submit(t)}}},[e._ssrNode('<button type=\"submit\" class=\"search-btn\"><i class=\"iconfont icon-sousuo\"></i></button>'+(e.word?'<button type=\"button\" class=\"clear-btn\">×</button>':\"\\x3c!----\\x3e\")+'<div class=\"input-wrap\"><input maxlength=\"200\" name=\"q\" type=\"search\" aria-autocomplete=\"both\" aria-haspopup=\"false\" autocapitalize=\"off\" autocomplete=\"off\" autocorrect=\"off\" role=\"combobox\" spellcheck=\"false\" placeholder=\"搜索二次元的一切\" aria-label=\"搜索\"'+e._ssrAttr(\"value\",e.word)+\"></div>\")])},staticRenderFns:[]};t.a=r},223:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(194),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(226);var s=function(e){var t;(t=a(224)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"2eb91060\");t.default=l.exports},224:function(e,t,a){var r=a(225);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"77c41a97\",r,!0,e)}},225:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#footer{text-align:center;color:#999;padding:15px;font-size:13px;background-color:#fff}#footer .panel{margin-top:14px}#footer .panel a,#footer .panel button{padding:0 16px;color:#666;font-size:12px}#footer .panel a:not(:last-child),#footer .panel button:not(:last-child){position:relative}#footer .panel a:not(:last-child):after,#footer .panel button:not(:last-child):after{content:\"\";position:absolute;top:0;bottom:0;width:1px;background-color:#ccc;right:0}#footer .beian{margin-top:20px;padding-bottom:8px}#footer .feedback-drawer{text-align:left}#footer .feedback-drawer .desc{margin-top:20px}#footer .feedback-drawer .desc p{margin:8px 0}#footer .feedback-drawer .desc textarea{min-height:120px;background-color:#fafafa;padding:10px}#footer .feedback-drawer .btn-submit{margin-top:15px;margin-bottom:30px}#footer .share-tips-drawer{border-radius:10px 10px 0 0}#footer .share-tips-drawer .container{text-align:left}#footer .share-tips-drawer .container p{margin-top:20px;margin-bottom:20px;line-height:20px;color:#333}#footer .share-tips-drawer .container .btn-submit{margin-top:10px}',\"\"])},226:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"footer\",{attrs:{id:\"footer\"}},[e._ssrNode('<div class=\"panel\">'+(e.$store.state.login?\"<button>退出</button>\":\"<button>登录</button><button>注册</button>\")+'<button>反馈</button><a href=\"/about/hello\">欢迎</a><button>分享</button></div>'),a(\"v-drawer\",{staticClass:\"feedback-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":\"反馈\"},model:{value:e.openFeedbackDrawer,callback:function(t){e.openFeedbackDrawer=t},expression:\"openFeedbackDrawer\"}},[a(\"div\",{staticClass:\"container\"},[a(\"v-radio\",{attrs:{title:\"反馈类型\",options:e.options},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:\"selectedType\"}}),a(\"div\",{staticClass:\"desc\"},[a(\"p\",[e._v(\"详细信息\")]),a(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:e.content,expression:\"content\",modifiers:{trim:!0}}],attrs:{placeholder:\"请填写详细信息\"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})]),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.submitFeedback}},[e._v(\"提交\")])],1)]),a(\"v-drawer\",{staticClass:\"share-tips-drawer\",attrs:{from:\"bottom\",size:\"80%\",\"header-text\":\"分享语\"},model:{value:e.toggleShareModal,callback:function(t){e.toggleShareModal=t},expression:\"toggleShareModal\"}},[a(\"div\",{staticClass:\"container\"},[a(\"p\",[e._v('\\n        【calibur.tv】一个纯粹的二次元社区网站，致力于实现\"天下漫友是一家\"！\\n      ')]),a(\"p\",[e._v(\"\\n        站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送金币（1金币 = 1人民币）！\\n      \")]),a(\"p\",[e._v(\"\\n        快来加入我们吧~\\\\(^o^)/~ 网址：http://calibur.tv\\n      \")]),a(\"button\",{ref:\"shareBtn\",staticClass:\"btn-submit\",attrs:{\"data-clipboard-text\":\"【calibur.tv】一个纯粹的二次元社区网站，致力于实现'天下漫友是一家'！站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送金币（1金币 = 1人民币）！快来加入我们吧~\\\\(^o^)/~ 网址：http://calibur.tv\"}},[e._v(\"点击复制\")])])]),e._ssrNode('<p class=\"beian\">© 沪ICP备17050785号-1</p>')],2)},staticRenderFns:[]};t.a=r},236:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=s(a(308)),n=s(a(223)),i=s(a(320)),o=s(a(324));function s(e){return e&&e.__esModule?e:{default:e}}t.default={components:{vHeader:r.default,vFooter:n.default,ImageReader:i.default,CreatorMenu:o.default}}},237:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,n=a(311),i=(r=n)&&r.__esModule?r:{default:r};t.default={name:\"v-header\",components:{SearchDrawer:i.default},computed:{avatar:function(){return this.$store.state.login?this.user.avatar:this.$cdn.image+\"default/user-avatar\"},computeUserDrawerBg:function(){return this.user.banner.split(\"/default/user-banner\").length>1?{}:{backgroundImage:\"url(\"+this.$resize(this.user.banner,{height:250,mode:2})+\")\"}},user:function(){return this.$store.state.user},notificationCount:function(){var e=this.user.notification-this.$store.state.users.notifications.checked;return e<0?0:e}},data:function(){return{openSearchDrawer:!1}},methods:{openUserDrawer:function(){this.$channel.$emit(\"open-user-drawer\")},openSignDrawer:function(){this.$channel.$emit(\"sign-in\",!1)}}}},238:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(a(195)),n=i(a(314));function i(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-search-drawer\",props:{value:{required:!0,type:Boolean}},components:{vSearch:r.default,vSearchHistory:n.default},computed:{},data:function(){return{open:this.value}},methods:{},mounted:function(){var e=this;this.$watch(\"value\",function(t){e.open=t}),this.$watch(\"open\",function(t){e.$emit(\"input\",t)})}}},239:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,n=a(148),i=(r=n)&&r.__esModule?r:{default:r};t.default={name:\"v-search-history\",data:function(){return{cacheKey:\"search-history\",list:[],maxLen:10}},methods:{query:function(e){this.$router.push({name:\"search-index\",query:{q:e,type:0}})},set:function(e){var t=this;setTimeout(function(){var a=t.get(),r=a.indexOf(e);-1!==r&&a.splice(r,1),a.unshift(e),a.length>t.maxLen&&a.pop(),t.list=a;try{localStorage.setItem(t.cacheKey,(0,i.default)(a))}catch(e){}},0)},get:function(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(e){return[]}},clear:function(){try{localStorage.removeItem(this.cacheKey)}catch(e){}this.list=[]}},mounted:function(){this.list=this.get()}}},240:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"image-reader\",data:function(){return{images:[],index:0,open:!1,maxWidth:0,maxHeight:0,maxWidthHeightRate:0,maxHeightWidthRate:0}},computed:{imageHref:function(){return this.images.length?this.images[this.index].url:\"\"},imageName:function(){return this.imageHref?\"calibur-tv-\"+Date.now()+\".\"+this.imageHref.split(\".\").pop():\"\"}},mounted:function(){var e=this;this.computeMaxSize(),this.$channel.$on(\"open-image-reader\",function(t){var a=t.images,r=t.image;if(a&&r){var n=0;e.images=Array.isArray(a)?a:[a],e.images.forEach(function(e,t){e.url===r.url&&(n=t)}),e.index=n||0,e.open=!0,setTimeout(function(){var t=a.length;t>1&&(t-1===n?e.$channel.$emit(\"image-load-image-reader-\"+(n-1)):0===n?e.$channel.$emit(\"image-load-image-reader-1\"):(e.$channel.$emit(\"image-load-image-reader-\"+(n+1)),e.$channel.$emit(\"image-load-image-reader-\"+(n-1))))},500)}})},methods:{handleChange:function(e){this.index=e,this.$channel.$emit(\"image-load-image-reader-\"+(e+1)),this.$channel.$emit(\"image-load-image-reader-\"+(e-1))},computeMaxSize:function(){this.maxWidth=parseInt(.98*document.body.offsetWidth,10),this.maxHeight=parseInt(.8*document.body.offsetHeight,10),this.maxWidthHeightRate=this.maxWidth/this.maxHeight,this.maxHeightWidthRate=this.maxHeight/this.maxWidth},computeImageType:function(e){var t=e.width,a=e.height;if(!t||!a)return 0;if(t<this.maxWidth&&a<this.maxHeight)return 1;var r=t/a,n=a/t;return this.maxWidthHeightRate>r&&this.maxHeightWidthRate>n?2:this.maxHeightWidthRate<n?3:this.maxWidthHeightRate<r?4:5},computeImageSize:function(e){return 4===this.computeImageType(e)?this.$resize(e.url,{width:this.maxWidth,mode:2}):this.$resize(e.url,{height:this.maxHeight,mode:2})}}}},241:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=o(a(157));a(327);var n=o(a(328)),i=o(a(332));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-creator-menu\",components:{PaletteButton:r.default,vPost:n.default,vImage:i.default},data:function(){return{backdropId:0}},computed:{isGuest:function(){return!this.$store.state.login},pageName:function(){return this.$route.name}},methods:{handlePaletteOpen:function(){var e=this;this.backdropId=this.$backdrop.show({ele:this.$refs.palette.$el,click:function(){e.close()}})},close:function(){this.$refs.palette.collapse()},handlePaletteClose:function(){this.$backdrop.hide(this.backdropId)},handleImageClick:function(){this.close(),this.isGuest?this.$channel.$emit(\"sign-in\"):this.$channel.$emit(\"open-create-image-drawer\")},handlePostClick:function(){this.close(),this.isGuest?this.$channel.$emit(\"sign-in\"):~[\"post-show\"].indexOf(this.pageName)?this.$channel.$emit(\"open-create-comment-drawer\"):this.$channel.$emit(\"drawer-open-write-post\")},handleFeedClick:function(){this.close(),this.$channel.$emit(\"open-feedback\")}}}},242:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=i(a(0)),n=i(a(1));function i(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"create-post-drawer\",data:function(){return{open:!1,uploadHeaders:{token:\"\"},images:[],exceed:4,content:\"\",title:\"\",slots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],selectedBangumi:!1,openBangumisDrawer:!1,loading:!1,submitting:!1,isReply:!0}},watch:{open:function(e){e?(this.$store.state.login&&this.getUpToken(),this.postId&&this.isReply||this.getUserFollowedBangumis()):this.isReply=!0}},computed:{postId:function(){return\"post-show\"===this.$route.name?parseInt(this.$route.params.id,10):0},bangumiId:function(){return\"bangumi-show\"===this.$route.name?parseInt(this.$route.params.id,10):0},currentBangumi:function(){return this.bangumiId?this.$store.state.bangumi.info:null},formatContent:function(){for(var e=this.content;null!==e.match(\"\\n\\n\\n\");)e=e.replace(/\\n\\n\\n/g,\"\\n\\n\");var t=[];return(e=e.split(\"\\n\")).forEach(function(e){t.push(e.trim()?\"<p>\"+e+\"</p>\":\"<p><br/></p>\")}),t.join(\"\")},formatImages:function(){return this.images.map(function(e){return e.img})},bangumiPlaceholder:function(){return this.loading?\"加载中...\":this.selectedBangumi?this.slots[0].values[this.slots[0].defaultIndex].name:\"点击选择番剧\"},followBangumis:function(){return this.$store.state.users.self.followBangumi}},methods:{handleError:function(e,t){var a=this;console.log(e),this.images.forEach(function(e,r){e.id===t.uid&&a.images.splice(r,1)}),this.$toast.error(\"图片：\"+t.name+\" 上传失败\")},handleRemove:function(e){var t=this;this.images.forEach(function(a,r){a.id===e.uid&&t.images.splice(r,1)})},handleSuccess:function(e,t){this.images.push({id:t.uid,img:e.data})},handleExceed:function(){this.$toast.error(\"最多可上传 \"+this.exceed+\" 张图片!\")},beforeUpload:function(e){if(this.$store.state.login){var t=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(e.type),a=e.size/1024/1024<3;return t?a?(this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:\"post\",id:this.postId||0,file:e}),!0):(this.$toast.error(\"图片大小不能超过 3MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},getUpToken:function(){var e=this;return(0,n.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(\"getUpToken\");case 3:e.uploadHeaders.token=e.$store.state.user.uptoken.upToken,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$toast.error(t.t0);case 9:case\"end\":return t.stop()}},t,e,[[0,6]])}))()},submit:function(){var e,t=this;this.submitting||(this.content?this.loading?this.$toast.error(\"番剧加载中\"):this.postId||this.title?(this.submitting=!0,this.$toast.loading(\"加载中\"),this.$captcha({success:(e=(0,n.default)(r.default.mark(function e(a){var n,i,o=a.data;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.postId||!t.isReply){e.next=21;break}return e.prev=1,e.next=4,t.$store.dispatch(\"post/reply\",{postId:t.postId,content:t.formatContent,images:t.formatImages,geetest:o,ctx:t});case 4:t.images=[],t.content=\"\",t.$refs.uploader.clearFiles(),t.$toast.success(\"回复成功！\"),t.open=!1,n=document.querySelectorAll(\".post-reply-item\"),setTimeout(function(){var e=n[n.length-1];e&&t.$scrollToY(e.offsetTop,400)},1e3),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.$toast.error(e.t0);case 16:return e.prev=16,t.submitting=!1,e.finish(16);case 19:e.next=40;break;case 21:return e.prev=21,e.next=24,t.$store.dispatch(\"post/create\",{title:t.title,bangumiId:t.slots[0].values[t.slots[0].defaultIndex].id,desc:t.content.substring(0,120),content:t.formatContent,images:t.formatImages,geetest:o,ctx:t});case 24:i=e.sent,t.images=[],t.title=\"\",t.content=\"\",t.$refs.uploader.clearFiles(),t.$toast.success(\"发布成功！\"),t.open=!1,window.location=t.$alias.post(i),e.next=37;break;case 34:e.prev=34,e.t1=e.catch(21),t.$toast.error(e.t1);case 37:return e.prev=37,t.submitting=!1,e.finish(37);case 40:case\"end\":return e.stop()}},e,t,[[1,13,16,19],[21,34,37,40]])})),function(t){return e.apply(this,arguments)}),ready:function(){t.$toast.stop()},error:function(e){t.$toast.error(e),t.submitting=!1},close:function(){t.submitting=!1}})):this.$toast.error(\"标题不能为空！\"):this.$toast.error(\"内容不能为空！\"))},onValuesChange:function(e,t){t[0]&&this.saveSelectedBangumi(t[0].id)},saveSelectedBangumi:function(e){var t=this;this.slots[0].values.forEach(function(a,r){a.id===e&&(t.slots[0].defaultIndex=r,t.selectedBangumi=!0)})},appendCurrentBangumi:function(){var e=this;this.bangumiId&&!this.slots[0].values.some(function(t){return t.id===e.bangumiId})?(this.slots[0].values.unshift({id:this.currentBangumi.id,name:this.currentBangumi.name,avatar:this.currentBangumi.avatar}),this.slots[0].defaultIndex=0):this.saveSelectedBangumi(this.bangumiId)},getUserFollowedBangumis:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.followBangumis.length){t.next=4;break}return e.slots[0].values=e.slots[0].values.concat(e.followBangumis),e.appendCurrentBangumi(),t.abrupt(\"return\");case 4:if(!e.loading){t.next=6;break}return t.abrupt(\"return\");case 6:return e.loading=!0,t.prev=7,t.next=10,e.$store.dispatch(\"users/getFollowBangumis\",{zone:e.$store.state.user.zone,self:!0});case 10:a=t.sent,e.slots[0].values=e.slots[0].values.concat(a),e.$nextTick(function(){e.appendCurrentBangumi()}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),e.$toast.error(t.t0);case 18:return t.prev=18,e.loading=!1,t.finish(18);case 21:case\"end\":return t.stop()}},t,e,[[7,15,18,21]])}))()},handleBangumiPickerBtnClick:function(){this.slots[0].values.length?this.openBangumisDrawer=!0:this.$toast.error(\"还没有关注任何番剧\")}},mounted:function(){var e=this;this.$channel.$on(\"open-create-post-drawer\",function(t){e.slots[0].values.every(function(e){return e.id!==t.id})&&e.slots[0].values.push(t),e.saveSelectedBangumi(t.id),e.isReply=!1,e.open=!0})}}},243:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=s(a(12)),n=s(a(0)),i=s(a(1)),o=s(a(15));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"create-image-drawer\",computed:{albumBangumiPlaceholder:function(){return this.loadingBangumi?\"加载中...\":this.album.selectedBangumi?this.getSelectedMeta(\"bangumi\",\"name\"):\"点击选择番剧\"},imageBangumiPlaceholder:function(){return this.loadingBangumi?\"加载中...\":this.image.selectedBangumi?this.getSelectedMeta(\"bangumi\",\"name\"):\"点击选择番剧\"},imageTagsPlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.image.selectedTags?this.getSelectedMeta(\"tags\",\"name\"):\"点击选择类型\"},imageSizePlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.image.selectedSize?this.getSelectedMeta(\"size\",\"name\"):\"点击选择尺寸\"},imageRolePlaceholder:function(){return this.loadingBangumiRole?\"加载中...\":this.image.selectedRole?this.getSelectedMeta(\"role\",\"name\"):\"点击选择角色（可选）\"},imageAlbumPlaceholder:function(){return this.loadingUserAlbum?\"加载中...\":this.image.selectedAlbum?this.getSelectedMeta(\"album\",\"name\"):\"点击选择相册（可选）\"},followBangumis:function(){return this.$store.state.users.self.followBangumi},pickerDrawerHeaderText:function(){return this.openBangumisDrawer?\"番剧\":this.openImageTagsDrawer?\"类型\":this.openImageSizeDrawer?\"尺寸\":this.openImageRoleDrawer?\"角色\":this.openImageAlbumDrawer?\"相册\":\"选项卡\"},user:function(){return this.$store.state.user||{}}},data:function(){return{show:!1,sort:\"image\",bangumiRoles:{},loadedUploadType:!1,loadedUserAlbum:!1,loadingBangumi:!1,loadingUploadType:!1,loadingUserAlbum:!1,loadingBangumiRole:!1,openPickerDrawer:!1,openBangumisDrawer:!1,openImageTagsDrawer:!1,openImageSizeDrawer:!1,openImageRoleDrawer:!1,openImageAlbumDrawer:!1,submitting:!1,uploadHeaders:{token:\"\"},bangumiSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],tagsSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sizeSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],roleSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],albumSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],album:{name:\"\",bangumiId:\"\",selectedBangumi:!1,creator:!1,cartoon:!1,poster:[]},image:{creator:!1,selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1,selectedAlbum:!1,data:[]},options:[],pendingUpload:0,exceed:7}},methods:{switchTab:function(e){this.sort=e},handlePosterUploadError:function(e,t){console.log(e),this.album.poster=[],this.$toast.error(\"图片：\"+t.name+\" 上传失败\")},handleImageUploadError:function(e,t){var a=this;console.log(e),this.image.data.forEach(function(e,r){e.id===t.uid&&a.image.data.splice(r,1)}),this.pendingUpload=this.pendingUpload-1,this.$toast.error(\"图片：\"+t.name+\" 上传失败\")},handleExceed:function(){this.$toast.error(\"最多可上传 \"+this.exceed+\" 张图片!\")},beforeImageUpload:function(e){if(this.$store.state.login){var t=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(e.type),a=e.size/1024/1024<5;return t?a?(this.image.data.push({name:e.name,percentage:0,raw:e,size:e.size,status:\"uploading\",uid:e.uid}),this.pendingUpload++,this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:\"image\",id:0,file:e}),!0):(this.$toast.error(\"图片大小不能超过 5MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},handleRemoveImage:function(e){var t=this;this.image.data.forEach(function(a,r){a.id===e.uid&&t.image.data.splice(r,1)})},beforeUpload:function(e){if(this.$store.state.login){var t=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(e.type),a=e.size/1024/1024<5;return t?a?(this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:\"album\",id:0,file:e}),!0):(this.$toast.error(\"图片大小不能超过 5MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},switchPickerDrawer:function(e){this.openBangumisDrawer=!1,this.openImageTagsDrawer=!1,this.openImageSizeDrawer=!1,this.openImageRoleDrawer=!1,this.openImageAlbumDrawer=!1,this[e]=!0,this.openPickerDrawer=!0},handleImageBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.image.selectedBangumi=!0,this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleAlbumBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.album.selectedBangumi=!0,this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleRolePickerBtnClick:function(){this.image.selectedBangumi?this.loadingBangumiRole?this.$toast.error(\"数据加载中\"):this.roleSlots[0].values.length?(this.image.selectedRole=!0,this.switchPickerDrawer(\"openImageRoleDrawer\")):this.$toast.error(\"该番剧下没用可选角色\"):this.$toast.error(\"请先选择番剧\")},handleAlbumPickerBtnClick:function(){this.loadingUserAlbum?this.$toast.error(\"数据加载中\"):this.albumSlots[0].values.length?(this.image.selectedAlbum=!0,this.switchPickerDrawer(\"openImageAlbumDrawer\")):this.$toast.error(\"还没有创建相册\")},handleImageTagsPickerBtnClick:function(){this.image.selectedTags=!0,this.switchPickerDrawer(\"openImageTagsDrawer\")},handleImageSizePickerBtnClick:function(){this.image.selectedSize=!0,this.switchPickerDrawer(\"openImageSizeDrawer\")},onBangumiValuesChange:function(e,t){var a=this;if(t[0]){var r=t[0].id;this.bangumiSlots[0].values.forEach(function(e,t){e.id===r&&(a.bangumiSlots[0].defaultIndex=t)}),\"image\"===this.sort&&this.getBangumiRoles(this.getSelectedMeta(\"bangumi\",\"id\"))}},getBangumiRoles:function(e){var t=this;return(0,i.default)(n.default.mark(function a(){var r;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.bangumiRoles[e]){a.next=3;break}return t.roleSlots[0].values=t.bangumiRoles[e],a.abrupt(\"return\");case 3:return t.loadingBangumiRole=!0,a.prev=4,a.next=7,t.$store.dispatch(\"bangumi/getRoles\",{ctx:t,bangumiId:e});case 7:r=a.sent,t.bangumiRoles[e]=r,t.roleSlots[0].values=r,t.roleSlots[0].defaultIndex=0,t.image.selectedRole=!1,t.image.roleId=\"\",a.next=18;break;case 15:a.prev=15,a.t0=a.catch(4),t.$toast.error(a.t0);case 18:return a.prev=18,t.loadingBangumiRole=!1,a.finish(18);case 21:case\"end\":return a.stop()}},a,t,[[4,15,18,21]])}))()},onTagsValuesChange:function(e,t){var a=this;if(t[0]){var r=t[0].id;this.tagsSlots[0].values.forEach(function(e,t){e.id===r&&(a.tagsSlots[0].defaultIndex=t)})}},onSizeValuesChange:function(e,t){var a=this;if(t[0]){var r=t[0].id;this.sizeSlots[0].values.forEach(function(e,t){e.id===r&&(a.sizeSlots[0].defaultIndex=t)})}},onRoleValuesChange:function(e,t){var a=this;if(t[0]){var r=t[0].id;this.roleSlots[0].values.forEach(function(e,t){e.id===r&&(a.roleSlots[0].defaultIndex=t)})}},onAlbumValuesChange:function(e,t){var a=this;if(t[0]){var r=t[0].id;this.albumSlots[0].values.forEach(function(e,t){e.id===r&&(a.albumSlots[0].defaultIndex=t)})}},getUpToken:function(){var e=this;return(0,i.default)(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(\"getUpToken\");case 3:e.uploadHeaders.token=e.$store.state.user.uptoken.upToken,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$toast.error(t.t0);case 9:case\"end\":return t.stop()}},t,e,[[0,6]])}))()},getUserFollowedBangumis:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.followBangumis.length){t.next=3;break}return e.bangumiSlots[0].values=e.bangumiSlots[0].values.concat(e.followBangumis),t.abrupt(\"return\");case 3:if(!e.loadingBangumi){t.next=5;break}return t.abrupt(\"return\");case 5:return e.loadingBangumi=!0,t.prev=6,t.next=9,e.$store.dispatch(\"users/getFollowBangumis\",{zone:e.user.zone,self:!0});case 9:a=t.sent,e.bangumiSlots[0].values=e.bangumiSlots[0].values.concat(a),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),e.$toast.error(t.t0);case 16:return t.prev=16,e.loadingBangumi=!1,t.finish(16);case 19:case\"end\":return t.stop()}},t,e,[[6,13,16,19]])}))()},handleAlbumUploadSuccess:function(e,t){this.album.poster=[{name:t.name,data:e.data,url:this.$resize(e.data.key,{width:100})}]},handleAlbumPosterRemove:function(){this.$refs.albumUploader.clearFiles()},handleImageUploadSuccess:function(e,t){var a=this;this.image.data.forEach(function(n,i){n.uid===t.uid&&(a.image.data[i]=(0,r.default)(n,{data:e.data,status:\"success\",url:a.$resize(e.data.key,{width:100})}))}),this.pendingUpload--},createAlbum:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var a,r,i;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.album.name){t.next=3;break}return e.$toast.error(\"请填写相册名称\"),t.abrupt(\"return\");case 3:if(!(e.album.name.length>20)){t.next=6;break}return e.$toast.error(\"专题名称请缩减至20字以内\"),t.abrupt(\"return\");case 6:if(e.album.selectedBangumi){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(a=e.album.poster.length?e.album.poster[0].data:null){t.next=13;break}return e.$toast.error(\"请先上传封面\"),t.abrupt(\"return\");case 13:if(!e.submitting){t.next=15;break}return t.abrupt(\"return\");case 15:return e.submitting=!0,e.$toast.loading(\"创建中\"),r=new o.default(e),t.prev=18,t.next=21,r.createAlbum({bangumiId:e.getSelectedMeta(\"bangumi\",\"id\"),isCartoon:e.album.cartoon,name:e.album.name,url:a?a.key:\"\",width:a?a.width:0,height:a?a.height:0,creator:e.album.creator});case 21:i=t.sent,e.albumSlots[0].values.unshift(i),e.albumSlots[0].defaultIndex=0,e.$toast.success(\"相册创建成功！\"),e.$store.commit(\"image/CREATE_ALBUM\",i),e.sort=\"image\",e.image.albumId=i.id,e.image.selectedAlbum=!0,e.album={name:\"\",bangumiId:\"\",selectedBangumi:!1,creator:!1,cartoon:!1,poster:[]},e.$refs.albumUploader.clearFiles(),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(18),e.$toast.error(t.t0);case 36:return t.prev=36,e.submitting=!1,t.finish(36);case 39:case\"end\":return t.stop()}},t,e,[[18,33,36,39]])}))()},getUploadType:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var a,r;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loadingUploadType&&!e.loadedUploadType){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loadingUploadType=!0,a=new o.default(e),t.prev=4,t.next=7,a.getUploadType();case 7:r=t.sent,e.tagsSlots[0].values=r.tags,e.sizeSlots[0].values=r.size,e.loadedUploadType=!0;case 11:return t.prev=11,e.loadingUploadType=!1,t.finish(11);case 14:case\"end\":return t.stop()}},t,e,[[4,,11,14]])}))()},getUserAlbum:function(){var e=this;return(0,i.default)(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loadingUserAlbum&&!e.loadedUserAlbum){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loadingUserAlbum=!0,t.prev=3,t.next=6,e.$store.dispatch(\"image/userAlbum\",{ctx:e});case 6:e.albumSlots[0].values=t.sent,e.loadedUserAlbum=!0;case 8:return t.prev=8,e.loadingUserAlbum=!1,t.finish(8);case 11:case\"end\":return t.stop()}},t,e,[[3,,8,11]])}))()},createImage:function(){var e=this;return(0,i.default)(n.default.mark(function t(){var a,r;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.image.selectedSize){t.next=3;break}return e.$toast.error(\"请先选择尺寸\"),t.abrupt(\"return\");case 3:if(e.image.selectedTags){t.next=6;break}return e.$toast.error(\"请先选择类型\"),t.abrupt(\"return\");case 6:if(e.image.data.length){t.next=9;break}return e.$toast.error(\"请先上传图片\"),t.abrupt(\"return\");case 9:if(e.image.selectedBangumi){t.next=12;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 12:if(!e.pendingUpload){t.next=15;break}return e.$toast.error(\"等待图片上传完成\"),t.abrupt(\"return\");case 15:if(!e.submitting){t.next=17;break}return t.abrupt(\"return\");case 17:return e.submitting=!0,e.$toast.loading(\"上传中...\"),a=new o.default(e),t.prev=20,t.next=23,a.uploadImage({creator:e.image.creator,bangumiId:e.getSelectedMeta(\"bangumi\",\"id\"),tags:e.getSelectedMeta(\"tags\",\"id\"),size:e.getSelectedMeta(\"size\",\"id\"),roleId:e.image.selectedRole?e.getSelectedMeta(\"role\",\"id\"):0,albumId:e.image.selectedAlbum?e.getSelectedMeta(\"album\",\"id\"):0,images:e.image.data.map(function(e){return e.data})});case 23:r=t.sent,e.$toast.success(\"图片上传成功！\"),e.image={creator:!1,selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1,selectedAlbum:!1,data:[]},e.$refs.imageUploader.clearFiles(),e.$store.commit(\"image/CREATE_WATERFALL\",r),e.show=!1,t.next=34;break;case 31:t.prev=31,t.t0=t.catch(20),e.$toast.error(t.t0);case 34:return t.prev=34,e.submitting=!1,t.finish(34);case 37:case\"end\":return t.stop()}},t,e,[[20,31,34,37]])}))()},getSelectedMeta:function(e,t){var a=e+\"Slots\";return this[a][0].values.length?this[a][0].values[this[a][0].defaultIndex][t]:0}},mounted:function(){var e=this;this.$channel.$on(\"open-create-image-drawer\",function(){e.getUpToken(),e.getUserFollowedBangumis(),e.getUploadType(),e.getUserAlbum(),e.show=!0})}}},306:function(e,t,a){var r=a(307);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"5da7f41d\",r,!0,e)}},307:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#layout-default{background-color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}#layout-default>.main-view{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;margin-top:40px}\",\"\"])},308:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(237),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(319);var s=function(e){var t;(t=a(309)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"4feb7452\");t.default=l.exports},309:function(e,t,a){var r=a(310);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"45ed816c\",r,!0,e)}},310:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#header-wrap{position:fixed;left:0;top:0;width:100%;height:40px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1);background-color:#fff;z-index:90}#header-wrap .header-main{height:100%;line-height:40px}#header-wrap .logo{height:28px;margin-top:6px;display:block;float:left}#header-wrap .logo img{height:100%;width:auto}#header-wrap .header-right{text-align:right;overflow:hidden;height:100%;font-size:0}#header-wrap .header-right .open-search-btn{display:inline-block;vertical-align:middle;margin-left:24px;margin-top:2px}#header-wrap .header-right .open-search-btn i{font-size:24px;line-height:24px}#header-wrap .header-right .nav-avatar{position:relative;margin-left:15px;display:inline-block;vertical-align:middle;width:24px;height:24px}#header-wrap .header-right .nav-avatar img{display:block;width:100%;height:100%;border-radius:12px}#header-wrap .header-right .nav-avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #e5e9ef;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}#header-wrap .header-right .nav-avatar .badge{display:block;position:absolute;top:0;right:0;width:10px;height:10px;border-radius:50%;background-color:red}#header-wrap .header-right .nav-avatar .badge:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}#header-wrap .header-right .faker-avatar{margin-left:15px;width:24px;height:24px;font-size:23px;line-height:24px;vertical-align:middle;color:#333}#header-wrap .header-right .search-drawer{border-radius:0 0 5px 5px}#header-wrap .header-right .search-drawer .search-wrap{margin-top:8px;margin-bottom:8px;height:24px;line-height:24px;font-size:12px}#header-wrap .header-right .search-drawer .search-wrap .cancel{float:right;padding-top:5px;padding-left:10px}#header-wrap .header-right .search-drawer .search-wrap .content{overflow:hidden;background-color:#f4f4f4;border-radius:4px}#header-wrap .header-right .search-drawer .search-wrap .content .iconfont{float:left;margin:6px 10px 0}#header-wrap .header-right .search-drawer .search-wrap .content .clear{display:block;float:right;margin:5px 10px;width:14px;height:14px;text-align:center;line-height:13px;font-size:12px;background-color:#999;color:#fff;border-radius:50%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#header-wrap .header-right .search-drawer .search-wrap .content .input-wrap{height:100%;overflow:hidden}#header-wrap .header-right .search-drawer .search-wrap .content .input-wrap input{height:24px;background-color:transparent;display:block}',\"\"])},311:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(238),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(318);var s=function(e){var t;(t=a(312)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"4ef80cc5\");t.default=l.exports},312:function(e,t,a){var r=a(313);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"e2ed6edc\",r,!0,e)}},313:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-drawer .search-input-wrap{margin-bottom:10px}\",\"\"])},314:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(239),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(317);var s=function(e){var t;(t=a(315)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"157e7528\");t.default=l.exports},315:function(e,t,a){var r=a(316);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"a06b30f2\",r,!0,e)}},316:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-history .title{margin-top:10px;height:30px;line-height:30px;font-size:12px;color:#999}.search-history li{position:relative;color:#505050;height:40px;line-height:39px;font-size:12px}.search-history li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:0;margin-right:0}.search-history .clear-btn{width:100%;height:40px;line-height:40px;text-align:center;font-size:12px;color:#999}',\"\"])},317:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.list.length?a(\"div\",{staticClass:\"search-history\"},[e._ssrNode('<p class=\"title\">搜索历史</p><ul>'+e._ssrList(e.list,function(t){return'<li><i class=\"iconfont icon-lishijilu\"></i>'+e._ssrEscape(\"\\n      \"+e._s(t)+\"\\n    \")+\"</li>\"})+'</ul><button class=\"clear-btn\">清除历史记录</button>')]):e._e()},staticRenderFns:[]};t.a=r},318:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"v-drawer\",{staticClass:\"search-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":\"搜索\"},model:{value:e.open,callback:function(t){e.open=t},expression:\"open\"}},[a(\"div\",{staticClass:\"container\"},[a(\"v-search\"),a(\"div\",{staticClass:\"hr\"}),a(\"v-search-history\")],1)])},staticRenderFns:[]};t.a=r},319:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"header\",{staticClass:\"container\",attrs:{id:\"header-wrap\"}},[e._ssrNode('<div class=\"header-main\"><a href=\"/\" class=\"logo\"><img'+e._ssrAttr(\"src\",e.$resize(e.$cdn.image+\"owner/logo\",{height:56,mode:2}))+' alt=\"logo\"></a><div class=\"header-right\"><button class=\"open-search-btn\"><i class=\"iconfont icon-sousuo\"></i></button>'+(e.user?'<button class=\"nav-avatar\"><img'+e._ssrAttr(\"src\",e.$resize(e.avatar,{width:48}))+' alt=\"avatar\">'+(e.notificationCount?'<span class=\"badge\"></span>':\"\\x3c!----\\x3e\")+\"</button>\":'<button class=\"faker-avatar iconfont icon-avatar\"></button>')+\"</div></div>\"),a(\"search-drawer\",{model:{value:e.openSearchDrawer,callback:function(t){e.openSearchDrawer=t},expression:\"openSearchDrawer\"}})],2)},staticRenderFns:[]};t.a=r},320:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(240),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(323);var s=function(e){var t;(t=a(321)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"3a71cfce\");t.default=l.exports},321:function(e,t,a){var r=a(322);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"6695a7d6\",r,!0,e)}},322:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.image-reader-wrapper{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100;background-color:#000}.image-reader-wrapper .index{position:absolute;left:0;top:0;width:100%;text-align:center;color:#fff;margin-top:15px;font-size:12px}.image-reader-wrapper .images-wrapper{width:100%;height:80%;margin-top:15%;position:relative}.image-reader-wrapper .images-wrapper .mint-swipe{overflow:visible}.image-reader-wrapper .images-wrapper .mint-swipe-indicators{bottom:-5%}.image-reader-wrapper .images-wrapper .mint-swipe-indicators .is-active{opacity:.5}.image-reader-wrapper .images-wrapper .view-image{position:relative;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:block}.image-reader-wrapper .images-wrapper .view-image.is-width{width:98%;height:auto}.image-reader-wrapper .images-wrapper .view-image.is-height{height:100%;width:auto}.image-reader-wrapper #download-btn{position:absolute;bottom:15px;width:80px;color:#fff;text-align:center;font-size:12px;opacity:.8;padding:10px 0;left:50%;margin-left:-40px}\",\"\"])},323:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.open?a(\"div\",{staticClass:\"image-reader-wrapper\",on:{click:function(t){e.open=!1}}},[e._ssrNode('<div class=\"index\">'+e._ssrEscape(e._s(e.index+1)+\" / \"+e._s(e.images.length))+\"</div>\"),e._ssrNode('<div class=\"images-wrapper\">',\"</div>\",[a(\"mt-swipe\",{attrs:{auto:0,speed:50,defaultIndex:e.index,showIndicators:!1,continuous:!1},on:{change:e.handleChange}},e._l(e.images,function(t,r){return a(\"mt-swipe-item\",{key:r},[a(\"v-img\",{staticClass:\"view-image\",class:[3===e.computeImageType(t)?\"is-height\":\"is-width\"],attrs:{src:e.computeImageSize(t),id:\"image-reader-\"+r,loading:!0,full:!0,source:t}})],1)}))],1),e._ssrNode('<a id=\"download-btn\" target=\"_blank\"'+e._ssrAttr(\"href\",e.imageHref)+e._ssrAttr(\"download\",e.imageName)+\">下载原图</a>\")],2):e._e()},staticRenderFns:[]};t.a=r},324:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(241),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(336);var s=function(e){var t;(t=a(325)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"9d1d6672\");t.default=l.exports},325:function(e,t,a){var r=a(326);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"c988fd36\",r,!0,e)}},326:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#creator-menu-wrap{z-index:94;position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none}#creator-menu-wrap .backdrop{pointer-events:auto}#creator-menu-wrap .mint-palette-button{pointer-events:auto;position:absolute;left:50%;bottom:20px;margin-left:-25px;width:50px;height:50px;color:#fff;z-index:100}#creator-menu-wrap .mint-main-button{background-color:#00b5e5;line-height:50px;-webkit-box-shadow:0 2px 5px rgba(26,26,26,.25);box-shadow:0 2px 5px rgba(26,26,26,.25)}#creator-menu-wrap .mint-main-button:after{content:\"\";position:absolute;left:50%;top:50%;width:40%;height:2px;-webkit-transform:translate(-50%,-1px);-ms-transform:translate(-50%,-1px);transform:translate(-50%,-1px);background-color:#fff;border-radius:2px}#creator-menu-wrap .mint-main-button:before{content:\"\";position:absolute;left:50%;top:50%;width:2px;height:40%;-webkit-transform:translate(-1px,-50%);-ms-transform:translate(-1px,-50%);transform:translate(-1px,-50%);background-color:#fff;border-radius:2px}#creator-menu-wrap .ic-btn{width:30px;height:30px;line-height:30px;border-radius:50%;color:#fff;text-align:center;pointer-events:auto}#creator-menu-wrap .ic-btn.icon-tupian{background-color:red}#creator-menu-wrap .ic-btn.icon-pinglun{background-color:#9266f9}#creator-menu-wrap .ic-btn.icon-pinglun1{background-color:#16c2c2}',\"\"])},327:function(e,t){},328:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(242),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(331);var s=function(e){var t;(t=a(329)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"5cf8834a\");t.default=l.exports},329:function(e,t,a){var r=a(330);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"96f2cf84\",r,!0,e)}},330:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.post-write-drawer{text-align:left;line-height:40px}.post-write-drawer .title{font-size:16px;color:#000;line-height:20px;padding-top:20px}.post-write-drawer .bangumi{font-size:16px}.post-write-drawer .bangumi span{color:#666;float:left}.post-write-drawer .bangumi div{color:#000;overflow:hidden}.post-write-drawer .content{font-size:16px;line-height:24px;color:#000;font-weight:400;height:120px;padding-top:10px}.post-write-drawer .el-upload--picture-card,.post-write-drawer .el-upload-list__item{width:15vw;height:15vw;line-height:15vw}.post-write-drawer .btn-submit{margin-top:15px}\",\"\"])},331:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"v-drawer\",{staticClass:\"post-write-drawer\",attrs:{from:\"right\",size:\"100%\",id:\"write-post\",\"header-text\":e.postId&&e.isReply?\"发表回复\":\"发帖\"},model:{value:e.open,callback:function(t){e.open=t},expression:\"open\"}},[a(\"div\",{staticClass:\"container\"},[e.postId&&e.isReply?e._e():[a(\"input\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:e.title,expression:\"title\",modifiers:{trim:!0}}],staticClass:\"title\",attrs:{type:\"text\",maxlength:\"40\",placeholder:\"加个标题哟~\"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),a(\"div\",{staticClass:\"bangumi\"},[a(\"span\",[e._v(\"发布到：\")]),a(\"div\",{domProps:{textContent:e._s(e.bangumiPlaceholder)},on:{click:e.handleBangumiPickerBtnClick}})]),a(\"v-drawer\",{staticClass:\"bangumis-drawer\",attrs:{from:\"bottom\",size:\"250px\",\"header-text\":\"选择番剧\"},model:{value:e.openBangumisDrawer,callback:function(t){e.openBangumisDrawer=t},expression:\"openBangumisDrawer\"}},[a(\"mt-picker\",{attrs:{slots:e.slots,valueKey:\"name\"},on:{change:e.onValuesChange}})],1)],a(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:e.content,expression:\"content\",modifiers:{trim:!0}}],staticClass:\"content\",attrs:{placeholder:e.postId?\"也来说两句（1000字以内）\":\"来吧，尽情的（在1000字以内）发挥吧\",maxlength:\"1000\"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),a(\"el-upload\",{ref:\"uploader\",attrs:{action:\"https://upload.qiniup.com\",multiple:\"\",\"list-type\":\"picture-card\",disabled:!0,data:e.uploadHeaders,\"on-error\":e.handleError,\"on-remove\":e.handleRemove,\"on-success\":e.handleSuccess,\"on-exceed\":e.handleExceed,limit:e.exceed,\"before-upload\":e.beforeUpload}},[e._v(\"\\n      +\\n    \")]),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.submit}},[e._v(\"发布\")])],2)])},staticRenderFns:[]};t.a=r},332:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(243),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var o=a(335);var s=function(e){var t;(t=a(333)).__inject__&&t.__inject__(e)},l=a(2)(n.a,o.a,!1,s,null,\"858d013a\");t.default=l.exports},333:function(e,t,a){var r=a(334);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"1de061af\",r,!0,e)}},334:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.create-image-drawer .field{font-size:16px;line-height:48px}.create-image-drawer .field span{float:left}.create-image-drawer .field div{color:#000;overflow:hidden}.create-image-drawer .field .mint-switch{height:48px}.create-image-drawer .field .mint-switch .mint-switch-input:checked+.mint-switch-core{background-color:#00b5e5}.create-image-drawer .el-upload--picture-card,.create-image-drawer .el-upload-list__item{width:15vw;height:15vw;line-height:15vw}.create-image-drawer .el-upload-list__item-delete{float:none!important}.create-image-drawer .btn-submit{margin-top:15px}\",\"\"])},335:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"v-drawer\",{staticClass:\"create-image-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":\"上传图片\"},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[a(\"div\",{staticClass:\"tabs\"},[a(\"button\",{class:{active:\"image\"===e.sort},on:{click:function(t){e.switchTab(\"image\")}}},[e._v(\"上传图片\")]),a(\"button\",{class:{active:\"album\"===e.sort},on:{click:function(t){e.switchTab(\"album\")}}},[e._v(\"新建相册\")])]),a(\"div\",{staticClass:\"container\"},[a(\"v-drawer\",{staticClass:\"bangumis-drawer\",attrs:{from:\"bottom\",size:\"250px\",\"header-text\":e.pickerDrawerHeaderText},model:{value:e.openPickerDrawer,callback:function(t){e.openPickerDrawer=t},expression:\"openPickerDrawer\"}},[e.openBangumisDrawer?a(\"mt-picker\",{attrs:{slots:e.bangumiSlots,valueKey:\"name\"},on:{change:e.onBangumiValuesChange}}):e.openImageTagsDrawer?a(\"mt-picker\",{attrs:{slots:e.tagsSlots,valueKey:\"name\"},on:{change:e.onTagsValuesChange}}):e.openImageSizeDrawer?a(\"mt-picker\",{attrs:{slots:e.sizeSlots,valueKey:\"name\"},on:{change:e.onSizeValuesChange}}):e.openImageRoleDrawer?a(\"mt-picker\",{attrs:{slots:e.roleSlots,valueKey:\"name\"},on:{change:e.onRoleValuesChange}}):e.openImageAlbumDrawer?a(\"mt-picker\",{attrs:{slots:e.albumSlots,valueKey:\"name\"},on:{change:e.onAlbumValuesChange}}):e._e()],1),\"image\"===e.sort?[a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"类型：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageTagsPlaceholder)},on:{click:e.handleImageTagsPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"尺寸：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageSizePlaceholder)},on:{click:e.handleImageSizePickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageBangumiPlaceholder)},on:{click:e.handleImageBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"角色：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageRolePlaceholder)},on:{click:e.handleRolePickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"相册：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageAlbumPlaceholder)},on:{click:e.handleAlbumPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"原创：\")]),a(\"mt-switch\",{model:{value:e.image.creator,callback:function(t){e.$set(e.image,\"creator\",t)},expression:\"image.creator\"}})],1),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"图片：\")]),a(\"el-upload\",{ref:\"imageUploader\",attrs:{action:\"https://upload.qiniup.com\",\"list-type\":\"picture-card\",data:e.uploadHeaders,disabled:!0,\"on-error\":e.handleImageUploadError,\"on-remove\":e.handleRemoveImage,\"on-success\":e.handleImageUploadSuccess,\"before-upload\":e.beforeImageUpload,\"file-list\":e.image.data,\"on-exceed\":e.handleExceed,multiple:\"\",limit:e.exceed}},[e._v(\"+\")])],1),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.createImage}},[e._v(\"确认上传\")])]:\"album\"===e.sort?[a(\"v-field\",{attrs:{label:\"名称\",placeholder:\"请填写相册名称\",\"label-size\":\"48px\"},model:{value:e.album.name,callback:function(t){e.$set(e.album,\"name\",t)},expression:\"album.name\"}}),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.albumBangumiPlaceholder)},on:{click:e.handleAlbumBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"原创：\")]),a(\"mt-switch\",{model:{value:e.album.creator,callback:function(t){e.$set(e.album,\"creator\",t)},expression:\"album.creator\"}})],1),e.user.faker?a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"漫画：\")]),a(\"mt-switch\",{model:{value:e.album.cartoon,callback:function(t){e.$set(e.album,\"cartoon\",t)},expression:\"album.cartoon\"}})],1):e._e(),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"封面：\")]),a(\"el-upload\",{ref:\"albumUploader\",attrs:{action:\"https://upload.qiniup.com\",\"list-type\":\"picture-card\",data:e.uploadHeaders,disabled:!0,\"on-error\":e.handlePosterUploadError,\"on-success\":e.handleAlbumUploadSuccess,\"before-upload\":e.beforeUpload,\"on-remove\":e.handleAlbumPosterRemove,\"file-list\":e.album.poster}},[e._v(\"+\")])],1),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.createAlbum}},[e._v(\"确认\")])]:e._e()],2)])},staticRenderFns:[]};t.a=r},336:function(e,t,a){\"use strict\";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"creators-container\"},[this._ssrNode('<div id=\"creator-menu-wrap\">',\"</div>\",[t(\"palette-button\",{ref:\"palette\",attrs:{content:\"\",direction:\"t\"},on:{expand:this.handlePaletteOpen,collapse:this.handlePaletteClose}},[t(\"button\",{staticClass:\"ic-btn iconfont icon-tupian\",on:{click:this.handleImageClick}}),t(\"button\",{staticClass:\"ic-btn iconfont icon-pinglun\",on:{click:this.handlePostClick}}),t(\"button\",{staticClass:\"ic-btn iconfont icon-pinglun1\",on:{click:this.handleFeedClick}})])],1),t(\"v-post\"),t(\"v-image\")],1)},staticRenderFns:[]};t.a=r},337:function(e,t,a){\"use strict\";var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{attrs:{id:\"layout-default\"}},[t(\"v-header\"),t(\"router-view\",{staticClass:\"main-view\"}),this._ssrNode('<div class=\"hr\"></div>'),t(\"v-footer\"),t(\"no-ssr\",[t(\"creator-menu\")],1),t(\"image-reader\")],2)},staticRenderFns:[]};t.a=r}};",
    "1.server-bundle.js": "exports.ids=[1],exports.modules={169:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(259),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(396);var i=function(t){var e;(e=r(386)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"4c29d9f1\");e.default=m.exports},184:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=i(r(0)),n=i(r(1)),s=i(r(206)),a=i(r(210));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"v-comment-main\",props:{id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:function(t){return~[\"post\",\"video\",\"image\"].indexOf(t)}},onlySeeMaster:{type:Boolean,default:!1},emptyText:{type:String,default:\"暂无评论，快来抢沙发吧╮(￣▽￣)╭！\"},masterId:{required:!0,type:Number},bottomAppendComment:{type:Boolean,default:!0}},components:{CommentCreateForm:s.default,CommentItem:a.default},computed:{store:function(){return this.$store.state.comment},list:function(){return this.store.list},noMore:function(){return this.store.noMore},total:function(){return this.store.total},focusComment:function(){var t=this;return this.focusCommentId?this.list.filter(function(e){return e.id===t.focusCommentId})[0]:null},currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0}},data:function(){return{loadingMainComment:!1,focusCommentId:0,openFocusCommentDrawer:!1,loadingSubComment:!1,replyForm:{id:\"\",content:\"\",targetUserId:0,targetUserName:\"\",open:!1,replying:!1,liking:!1},openCreateCommentDrawer:!1}},methods:{loadMoreMainComment:function(){var t=this;return(0,n.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingMainComment){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loadingMainComment=!0,e.prev=3,e.next=6,t.$store.dispatch(\"comment/getMainComments\",{ctx:t,type:t.type,id:t.id,onlySeeMaster:t.onlySeeMaster?1:0});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loadingMainComment=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()},loadMoreSubComment:function(){var t=this;return(0,n.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingSubComment){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loadingSubComment=!0,e.prev=3,e.next=6,t.$store.dispatch(\"comment/getSubComments\",{ctx:t,type:t.type,parentId:t.focusCommentId});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loadingSubComment=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()},commentToComment:function(t){this.handleSubCommentReply({id:t.parent_id,targetUserId:t.from_user_id,targetUserName:t.from_user_name})},handleCommentBtnClick:function(){this.handleSubCommentReply({id:this.focusComment.parent_id,targetUserId:this.focusComment.from_user_id,targetUserName:this.focusComment.from_user_name})},handleSubCommentReply:function(t){var e=t.id,r=t.targetUserId,o=t.targetUserName;this.currentUserId?(this.replyForm.id=e,this.replyForm.targetUserId=r,this.replyForm.targetUserName=o,this.replyForm.open=!0,setTimeout(function(){document.body.scrollTop=0},200)):this.$channel.$emit(\"sign-in\")},toggleFocusCommentLike:function(){var t=this;return(0,n.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.replyForm.liking){e.next=5;break}return e.abrupt(\"return\");case 5:return t.replyForm.liking=!0,e.prev=6,e.next=9,t.$store.dispatch(\"comment/toggleLikeMainComment\",{ctx:t,type:t.type,id:t.focusCommentId});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return e.prev=13,t.replyForm.liking=!1,e.finish(13);case 16:case\"end\":return e.stop()}},e,t,[[6,11,13,16]])}))()},handleReplyDrawerClose:function(){document.getElementById(\"reply-comment-textarea\").style.display=\"none\"},handleReplySubmit:function(){var t=this;return(0,n.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(t.replyForm.content){e.next=5;break}return e.abrupt(\"return\");case 5:if(!t.replyForm.replying){e.next=7;break}return e.abrupt(\"return\");case 7:return t.replyForm.replying=!0,t.$toast.loading(\"提交中...\"),e.prev=9,e.next=12,t.$store.dispatch(\"comment/createSubComment\",{ctx:t,id:t.replyForm.id,type:t.type,content:t.replyForm.content,targetUserId:t.replyForm.targetUserId});case 12:t.replyForm.open=!1,t.replyForm.content=\"\",t.$toast.success(\"回复成功\"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),t.$toast.error(e.t0);case 20:return e.prev=20,t.replyForm.replying=!1,t.handleReplyDrawerClose(),e.finish(20);case 24:case\"end\":return e.stop()}},e,t,[[9,17,20,24]])}))()},writeComment:function(){this.$channel.$emit(\"open-create-comment-drawer\")},closeCommentDrawer:function(){this.openCreateCommentDrawer=!1}},mounted:function(){var t=this;this.$channel.$on(\"load-all-sub-comment\",function(e){var r=e.id;t.focusCommentId=r,t.openFocusCommentDrawer=!0}),this.$channel.$on(\"open-create-comment-drawer\",function(){t.currentUserId?t.openCreateCommentDrawer=!0:t.$channel.$emit(\"sign-in\")}),this.$channel.$on(\"reply-comment\",function(e){var r=e.id,o=e.targetUserId,n=e.targetUserName;t.handleSubCommentReply({id:r,targetUserId:o,targetUserName:n})}),document.getElementById(\"comment-wrap\").addEventListener(\"click\",function(t){if(/reply-btn/.test(t.target.className)){var e=document.getElementById(\"reply-comment-textarea\");e.style.display=\"block\",e.focus()}})}}},185:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=s(r(0)),n=s(r(1));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"comment-create-form\",props:{type:{required:!0,type:String},id:{required:!0,type:Number}},computed:{isGuest:function(){return!this.$store.state.login},formatContent:function(){for(var t=this.content;null!==t.match(\"\\n\\n\\n\");)t=t.replace(/\\n\\n\\n/g,\"\\n\\n\");var e=[];return(t=t.split(\"\\n\")).forEach(function(t){e.push(t?\"<p>\"+t+\"</p>\":\"<p><br/></p>\")}),e.join(\"\")},submitting:function(){return this.$store.state.comment.submitting}},data:function(){return{content:\"\"}},methods:{submit:function(){var t=this;return(0,n.default)(o.default.mark(function e(){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isGuest){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(t.formatContent){e.next=6;break}return t.$emit(\"close\"),e.abrupt(\"return\");case 6:if(!t.submitting){e.next=8;break}return e.abrupt(\"return\");case 8:return t.$store.commit(\"comment/SET_SUBMITTING\",{result:!0}),e.prev=9,e.next=12,t.$store.dispatch(\"comment/createMainComment\",{content:t.formatContent,images:[],type:t.type,id:t.id,ctx:t});case 12:r=e.sent,t.$toast.success(\"评论成功\"),t.$emit(\"close\"),t.content=\"\",setTimeout(function(){var e=document.getElementById(\"comment-\"+r.id);e&&t.$scrollToY(t.$utils.getOffsetTop(e)-100,600)},400),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(9),console.log(e.t0),t.$toast.error(e.t0);case 23:return e.prev=23,t.$store.commit(\"comment/SET_SUBMITTING\",{result:!1}),e.finish(23);case 26:case\"end\":return e.stop()}},e,t,[[9,19,23,26]])}))()},handleAreaFocus:function(){document.body.scrollTop=0}}}},186:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=a(r(0)),n=a(r(1)),s=a(r(193));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"comment-comment-item\",props:{comment:{required:!0,type:Object},masterId:{required:!0,type:Number},type:{required:!0,type:String}},components:{SubCommentList:s.default},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0},isMine:function(){return this.currentUserId===this.comment.from_user_id},canDelete:function(){return this.isMine||this.currentUserId===this.masterId},actions:function(){var t=[];return this.canDelete&&t.push({name:\"删除\",method:this.deleteComment}),t.push({name:this.comment.liked?\"取消赞\":\"点赞\",method:this.toggleLike}),t}},data:function(){return{deleting:!1,liking:!1,showControlPanel:!1}},methods:{toggleLike:function(){var t=this;return(0,n.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.liking){e.next=5;break}return e.abrupt(\"return\");case 5:return t.liking=!0,e.prev=6,e.next=9,t.$store.dispatch(\"comment/toggleLikeMainComment\",{ctx:t,type:t.type,id:t.comment.id});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return e.prev=13,t.liking=!1,e.finish(13);case 16:case\"end\":return e.stop()}},e,t,[[6,11,13,16]])}))()},deleteComment:function(){var t=this;this.deleting||(this.deleting=!0,this.$confirm(\"删除后无法找回, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.$store.dispatch(\"comment/deleteMainComment\",{ctx:t,type:t.type,id:t.comment.id})}).catch(function(e){t.deleting=!1,\"cancel\"!==e&&t.$toast.error(e)}))},handleCommentBtnClick:function(){this.$channel.$emit(\"reply-comment\",{id:this.comment.id,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})}}}},187:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o,n=r(215),s=(o=n)&&o.__esModule?o:{default:o};e.default={name:\"post-sub-comment-list\",props:{parentComment:{required:!0,type:Object},type:{required:!0,type:String}},components:{SubCommentItem:s.default},computed:{comments:function(){return this.parentComment.comments},authorId:function(){return this.parentComment.from_user_id},hasComment:function(){return!!this.comments.list.length},filterComments:function(){var t=this.comments,e=t.list,r=e.slice(0,5);if(e.every(function(e){return e.id<=t.maxId}))return r;var o=r.map(function(t){return t.id});return r.concat(e.filter(function(e){return e.id>t.maxId&&-1===o.indexOf(e.id)}))}},methods:{loadAllComment:function(){this.$channel.$emit(\"load-all-sub-comment\",{id:this.parentComment.id})}}}},188:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"sub-comment-item\",props:{comment:{required:!0,type:Object},parentUserId:{required:!0,type:Number},parentCommentId:{required:!0,type:Number},type:{required:!0,type:String}},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0},isMine:function(){return this.currentUserId===this.comment.from_user_id},canDelete:function(){return this.isMine||this.currentUserId===this.parentUserId}},data:function(){return{deleting:!1}},methods:{handleSubCommentClick:function(){this.isMine?this.deleteComment():this.currentUserId&&this.$channel.$emit(\"reply-comment\",{id:this.parentCommentId,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})},deleteComment:function(){var t=this;this.canDelete&&(this.deleting||(this.deleting=!0,this.$confirm(\"删除后无法找回, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.$store.dispatch(\"comment/deleteSubComment\",{ctx:t,type:t.type,id:t.comment.id,parentId:t.comment.parent_id})}).catch(function(e){t.deleting=!1,\"cancel\"!==e&&t.$toast.error(e)})))}}}},193:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(187),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(219);var i=function(t){var e;(e=r(213)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"2bbb59ee\");e.default=m.exports},203:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(184),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(221);var i=function(t){var e;(e=r(204)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"71b0fa1c\");e.default=m.exports},204:function(t,e,r){var o=r(205);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"773349ef\",o,!0,t)}},205:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#comment-wrap .sub-title{margin-top:15px;margin-bottom:15px}#comment-wrap .sub-title .write-btn{float:right;font-weight:700;font-size:13px}#comment-wrap #comment-list-footer{margin-left:-15px;margin-right:-15px}#comment-wrap .focus-comment-drawer .reply .user{padding-top:5px}#comment-wrap .focus-comment-drawer .reply .user .avatar{float:left;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}#comment-wrap .focus-comment-drawer .reply .user .avatar img{display:block;width:100%;height:100%}#comment-wrap .focus-comment-drawer .reply .user .summary{overflow:hidden}#comment-wrap .focus-comment-drawer .reply .user .summary .nickname{font-size:14px;color:#333}#comment-wrap .focus-comment-drawer .reply .user .summary .info{line-height:16px;font-size:12px;color:#999}#comment-wrap .focus-comment-drawer .reply .user .summary .info span{margin-right:5px}#comment-wrap .focus-comment-drawer .reply .content{font-size:16px;line-height:24px;padding-top:16px;margin-bottom:16px;color:#000}#comment-wrap .focus-comment-drawer .reply .content .image-area{margin:16px 0}#comment-wrap .focus-comment-drawer .reply .content .image-area img{width:100%;height:auto}#comment-wrap .focus-comment-drawer .reply .social{margin-bottom:15px;font-size:12px}#comment-wrap .focus-comment-drawer .reply .social .reply-liked-btn{color:#0381aa}#comment-wrap .focus-comment-drawer .reply .social button{color:#666;margin-left:3px}#comment-wrap .focus-comment-drawer .total{height:40px;line-height:40px;color:#000;font-size:16px}#comment-wrap .focus-comment-drawer .comments li{padding:17px 0 13px;position:relative}#comment-wrap .focus-comment-drawer .comments li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#comment-wrap .focus-comment-drawer .comments li .from-user .avatar{float:left;display:block;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}#comment-wrap .focus-comment-drawer .comments li .from-user .avatar img{display:block;width:100%;height:100%}#comment-wrap .focus-comment-drawer .comments li .from-user .summary{overflow:hidden}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .users{font-size:14px;margin-bottom:6px;margin-top:2px;line-height:14px}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .users .nickname{color:#0381aa}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .info{font-size:12px;line-height:12px;color:#999}#comment-wrap .focus-comment-drawer .comments li .main{margin-left:45px;padding-top:10px}#comment-wrap .focus-comment-drawer .comments li .main .content{font-size:14px;line-height:21px;word-break:break-all}#comment-wrap .reply-comment-drawer-wrap #reply-comment-textarea{position:fixed;left:0;top:60px;width:100%;height:250px;background-color:transparent;font-size:16px;line-height:24px;color:#000;font-weight:400;z-index:101;padding-left:15px;padding-right:15px;display:none;opacity:0}#comment-wrap .reply-comment-drawer-wrap #reply-comment-textarea.fade-in{opacity:1;-webkit-transition-delay:.4s;-o-transition-delay:.4s;transition-delay:.4s}#comment-wrap .append-comment-btn{width:100%;padding:15px 0;font-size:13px}#comment-wrap .no-content{text-align:center;margin-top:30px;margin-bottom:30px;font-size:12px;color:#99a2aa}',\"\"])},206:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(185),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(209);var i=function(t){var e;(e=r(207)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"1d31a883\");e.default=m.exports},207:function(t,e,r){var o=r(208);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"52eb9288\",o,!0,t)}},208:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.comment-create-form .content{font-size:16px;line-height:24px;color:#000;font-weight:400;height:250px;margin-bottom:5px}.comment-create-form .submit-btn{margin-top:15px;width:100%}\",\"\"])},209:function(t,e,r){\"use strict\";var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"comment-create-form\"},[this._ssrNode('<textarea placeholder=\"来吧，尽情的（在1000字以内）发挥吧\" maxlength=\"1000\" class=\"content\"></textarea>'),e(\"el-button\",{staticClass:\"submit-btn\",attrs:{type:\"primary\",loading:this.submitting},on:{click:this.submit}},[this._v(\"发布\")])],2)},staticRenderFns:[]};e.a=o},210:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(186),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(220);var i=function(t){var e;(e=r(211)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"8f3d9b14\");e.default=m.exports},211:function(t,e,r){var o=r(212);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"29cb5539\",o,!0,t)}},212:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.comment-item{position:relative;margin-top:15px;padding-bottom:15px}.comment-item:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}.comment-item .avatar{float:left;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}.comment-item .avatar img{display:block;width:100%;height:100%}.comment-item .content{overflow:hidden}.comment-item .content .header .tools-btn{float:right;line-height:16px;font-size:12px;color:#535353;margin-top:9px;margin-left:4px}.comment-item .content .header .user .nickname{font-size:14px;line-height:21px;display:block;color:#333}.comment-item .content .header .user .info{color:#999;line-height:14px;font-size:12px}.comment-item .content .header .user .info span{margin-right:5px}.comment-item .content .main{font-size:16px;margin:10px 0 4px;color:#333;line-height:24px;min-height:65px}.comment-item .content .main .image-area{margin:10px 0}.comment-item .content .main .image-area img{width:100%;height:auto}.comment-item .content .footer .social{margin-top:15px;font-size:12px}.comment-item .content .footer .social .reply-liked-btn{color:#0381aa}.comment-item .content .footer .social button{color:#666;margin-left:3px}',\"\"])},213:function(t,e,r){var o=r(214);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"1aa8e4ee\",o,!0,t)}},214:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sub-comment-list-wrap{position:relative;background-color:#f7f8fa;border-radius:5px}.sub-comment-list-wrap .sub-comment-list{padding:7px 0 7.5px;margin-top:5px}.sub-comment-list-wrap .load-all-comment{position:relative;margin-top:6px;font-size:12px;margin-bottom:0;padding:0 10px;color:#999;width:100%;text-align:left}.sub-comment-list-wrap .load-all-comment:after{content:\"\";position:absolute;top:50%;border:3px solid #f5f5f5;border-left-color:#999;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);margin-left:4px}',\"\"])},215:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(188),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(218);var i=function(t){var e;(e=r(216)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"3fc64a04\");e.default=m.exports},216:function(t,e,r){var o=r(217);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"c05931bc\",o,!0,t)}},217:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sub-comment-item{padding:2px 10px;font-size:14px;line-height:18px}.sub-comment-item .nickname{color:#0381aa}.sub-comment-item .comment-content{margin-right:6px;word-break:break-all}\",\"\"])},218:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"div\",{staticClass:\"sub-comment-item\"},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"nickname\">'+t._ssrEscape(t._s(t.comment.from_user_name))+\"</a>\"+(t.comment.to_user_zone?\"\\n    回复\\n    <a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.to_user_zone))+' class=\"nickname\">'+t._ssrEscape(t._s(t.comment.to_user_name))+\"</a>\":\"\\x3c!----\\x3e\")+'\\n  :\\n  <span class=\"reply-btn comment-content\">'+t._ssrEscape(t._s(t.comment.content))+\"</span>\")])},staticRenderFns:[]};e.a=o},219:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"sub-comment-list-wrap\"},[t.hasComment?t._ssrNode('<div class=\"sub-comment-list\">',\"</div>\",[t._l(t.filterComments,function(e){return r(\"sub-comment-item\",{key:e.id,attrs:{comment:e,\"parent-user-id\":t.authorId,\"parent-comment-id\":t.parentComment.id,type:t.type}})}),t._ssrNode(!t.comments.noMore||t.comments.list.length>5?'<button class=\"load-all-comment\">'+t._ssrEscape(\"\\n      查看全部\"+t._s(t.comments.total)+\"条评论\\n    \")+\"</button>\":\"\\x3c!----\\x3e\")],2):t._e()])},staticRenderFns:[]};e.a=o},220:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"comment-item\",attrs:{id:\"comment-\"+t.comment.id}},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"avatar\">',\"</a>\",[r(\"v-img\",{attrs:{src:t.comment.from_user_avatar,width:80,height:80}})],1),t._ssrNode('<div class=\"content\">',\"</div>\",[t._ssrNode('<div class=\"header\">',\"</div>\",[t._ssrNode('<button class=\"tools-btn\">···</button>'),t._ssrNode('<div class=\"user\">',\"</div>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"nickname oneline\">'+t._ssrEscape(t._s(t.comment.from_user_name))+\"</a>\"),t._ssrNode('<div class=\"info\">',\"</div>\",[t._ssrNode(\"<span>\"+t._ssrEscape(\"第\"+t._s(t.comment.floor_count-1)+\"楼\")+\"</span><span>·</span>\"),r(\"v-time\",{model:{value:t.comment.created_at,callback:function(e){t.$set(t.comment,\"created_at\",e)},expression:\"comment.created_at\"}})],2)],2)],2),t._ssrNode('<div class=\"main\">'+t._s(t.comment.content)+\"</div>\"),t._ssrNode('<div class=\"footer\">',\"</div>\",[r(\"sub-comment-list\",{attrs:{\"parent-comment\":t.comment,type:t.type}}),t._ssrNode('<div class=\"social\"><button'+t._ssrClass(null,[t.comment.liked?\"reply-liked-btn\":\"reply-like-btn\"])+'><i class=\"iconfont icon-icon_good\"></i>'+t._ssrEscape(\"\\n          \"+t._s(t.comment.liked?\"已赞\":\"赞\")+\"\\n          \")+(t.comment.like_count?\"<span>\"+t._ssrEscape(\"(\"+t._s(t.comment.like_count)+\")\")+\"</span>\":\"\\x3c!----\\x3e\")+'</button><button class=\"reply-btn fr\">\\n          回复\\n        </button></div>')],2),r(\"mt-actionsheet\",{attrs:{actions:t.actions},model:{value:t.showControlPanel,callback:function(e){t.showControlPanel=e},expression:\"showControlPanel\"}})],2)])},staticRenderFns:[]};e.a=o},221:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"comment-wrap\"}},[t._t(\"header\",[r(\"div\",{staticClass:\"hr\"}),r(\"h3\",{staticClass:\"sub-title\"},[t._v(\"\\n      评论\"+t._s(t.total?\"(\"+t.total+\")\":\"\")+\"\\n      \"),r(\"button\",{staticClass:\"write-btn\",on:{click:t.writeComment}},[t._v(\"写评论\")])])]),t.list.length?[t._ssrNode('<div id=\"comment-list-wrap\">',\"</div>\",t._l(t.list,function(e){return t._ssrNode('<div class=\"comment-item-wrap\">',\"</div>\",[t._t(\"comment-item\",[r(\"comment-item\",{attrs:{type:t.type,comment:e,\"master-id\":t.masterId}})],{comment:e,reply:t.handleSubCommentReply})],2)})),t._ssrNode('<div id=\"comment-list-footer\">',\"</div>\",[t._ssrNode(t.bottomAppendComment?'<button class=\"append-comment-btn\">写评论</button>':\"\\x3c!----\\x3e\"),r(\"more-btn\",{attrs:{\"no-more\":t.noMore,loading:t.loadingMainComment},on:{fetch:t.loadMoreMainComment}})],2)]:t.emptyText?t._ssrNode('<p class=\"no-content\">'+t._ssrEscape(t._s(t.emptyText))+\"</p>\"):t._e(),r(\"v-drawer\",{staticClass:\"focus-comment-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":\"评论列表\"+(t.focusComment&&t.focusComment.floor_count?\" - \"+t.focusComment.floor_count+\" 楼\":\"\"),backdrop:!1},model:{value:t.openFocusCommentDrawer,callback:function(e){t.openFocusCommentDrawer=e},expression:\"openFocusCommentDrawer\"}},[t.focusComment?[r(\"div\",{staticClass:\"container\"},[r(\"div\",{staticClass:\"reply\"},[r(\"div\",{staticClass:\"user clearfix\"},[r(\"a\",{staticClass:\"avatar\",attrs:{href:t.$alias.user(t.focusComment.from_user_zone)}},[r(\"img\",{attrs:{src:t.$resize(t.focusComment.from_user_avatar,{width:70})}})]),r(\"div\",{staticClass:\"summary\"},[r(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(t.focusComment.from_user_zone)},domProps:{textContent:t._s(t.focusComment.from_user_name)}}),r(\"div\",{staticClass:\"info\"},[r(\"v-time\",{model:{value:t.focusComment.created_at,callback:function(e){t.$set(t.focusComment,\"created_at\",e)},expression:\"focusComment.created_at\"}})],1)])]),r(\"div\",{staticClass:\"content\"},[r(\"div\",{staticClass:\"text-area\",domProps:{innerHTML:t._s(t.focusComment.content)}}),r(\"div\",{staticClass:\"image-area\"},t._l(t.focusComment.images,function(e,o){return r(\"div\",{key:o,staticClass:\"image-package\",on:{click:function(e){t.$previewImages(t.focusComment.images,o)}}},[r(\"v-img\",{staticClass:\"image\",attrs:{src:e.url,width:\"150\",mode:\"2\"}})],1)}))]),r(\"div\",{staticClass:\"social\"},[r(\"button\",{class:[t.focusComment.liked?\"reply-liked-btn\":\"reply-like-btn\"],on:{click:t.toggleFocusCommentLike}},[r(\"i\",{staticClass:\"iconfont icon-icon_good\"}),t._v(\"\\n              \"+t._s(t.focusComment.liked?\"已赞\":\"赞\")+\"\\n              \"),t.focusComment.like_count?r(\"span\",[t._v(\"(\"+t._s(t.focusComment.like_count)+\")\")]):t._e()]),r(\"button\",{staticClass:\"reply-btn fr\",on:{click:t.handleCommentBtnClick}},[t._v(\"\\n              回复\\n            \")])])]),r(\"div\",{staticClass:\"hr\"}),r(\"p\",{staticClass:\"total\"},[t._v(t._s(t.focusComment.comments.total)+\"条回复\")]),r(\"ul\",{staticClass:\"comments\"},t._l(t.focusComment.comments.list,function(e){return r(\"li\",{key:e.id},[r(\"div\",{staticClass:\"from-user\"},[r(\"a\",{staticClass:\"avatar\",attrs:{href:t.$alias.user(e.from_user_zone)}},[r(\"img\",{attrs:{src:t.$resize(e.from_user_avatar,{width:70})}})]),r(\"div\",{staticClass:\"summary\"},[r(\"div\",{staticClass:\"users oneline\"},[r(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(e.from_user_zone)},domProps:{textContent:t._s(e.from_user_name)}}),e.to_user_zone?[t._v(\"\\n                    回复\\n                    \"),r(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(e.to_user_zone)},domProps:{textContent:t._s(e.to_user_name)}})]:t._e(),t._v(\"\\n                  :\\n                \")],2),r(\"div\",{staticClass:\"info\"},[r(\"v-time\",{model:{value:e.created_at,callback:function(r){t.$set(e,\"created_at\",r)},expression:\"item.created_at\"}})],1)])]),r(\"div\",{staticClass:\"main\"},[r(\"div\",{staticClass:\"content reply-btn\",domProps:{textContent:t._s(e.content)},on:{click:function(r){t.commentToComment(e)}}})])])}))]),r(\"more-btn\",{attrs:{\"no-more\":t.focusComment.comments.noMore,loading:t.loadingSubComment},on:{fetch:t.loadMoreSubComment}})]:t._e()],2),t._ssrNode('<div class=\"reply-comment-drawer-wrap\">',\"</div>\",[r(\"v-drawer\",{staticClass:\"reply-comment-drawer\",attrs:{from:\"right\",size:\"100%\",\"header-text\":t.currentUserId===t.replyForm.targetUserId?\"回复\":\"回复：\"+t.replyForm.targetUserName,backdrop:!1,submitText:\"发布\"},on:{cancel:t.handleReplyDrawerClose,submit:t.handleReplySubmit},model:{value:t.replyForm.open,callback:function(e){t.$set(t.replyForm,\"open\",e)},expression:\"replyForm.open\"}}),t._ssrNode('<textarea id=\"reply-comment-textarea\" placeholder=\"100字以内任意发挥\" maxlength=\"100\"'+t._ssrClass(null,{\"fade-in\":t.replyForm.open})+\"></textarea>\")],2),r(\"v-drawer\",{attrs:{from:\"right\",size:\"100%\",\"header-text\":\"发表评论\"},model:{value:t.openCreateCommentDrawer,callback:function(e){t.openCreateCommentDrawer=e},expression:\"openCreateCommentDrawer\"}},[t.openCreateCommentDrawer?r(\"div\",{staticClass:\"container\"},[t._t(\"reply-form\",[t.openCreateCommentDrawer?r(\"comment-create-form\",{attrs:{id:t.id,type:t.type},on:{close:t.closeCommentDrawer}}):t._e()],{close:t.closeCommentDrawer})],2):t._e()])],2)},staticRenderFns:[]};e.a=o},259:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=c(r(0)),n=c(r(35)),s=c(r(1)),a=c(r(203)),i=c(r(388)),m=c(r(392));function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"post-show\",asyncData:function(t){var e=this,r=t.route,a=t.store,i=t.ctx;return(0,s.default)(o.default.mark(function t(){var s,m;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=r.query.only&&parseInt(r.query.only,10)?1:0,m=r.params.id,t.next=4,n.default.all([a.dispatch(\"post/getPost\",{id:m,ctx:i,only:s}),a.dispatch(\"comment/getMainComments\",{ctx:i,id:m,type:\"post\",onlySeeMaster:s,seeReplyId:r.query.reply})]);case 4:case\"end\":return t.stop()}},t,e)}))()},components:{CommentMain:a.default,PostCommentItem:i.default,PostCommentForm:m.default},head:function(){return{title:this.post.title+\" - 帖子\"}},computed:{resource:function(){return this.$store.state.post.info},bangumi:function(){return this.resource.bangumi},post:function(){return this.resource.post},master:function(){return this.resource.user},total:function(){return this.$store.state.comment.total+1},onlySeeMaster:function(){return!!parseInt(this.$route.query.only,10)},isMaster:function(){return!!this.$store.state.login&&this.$store.state.user.id===this.master.id},actions:function(){var t=[{name:\"回复\",method:this.handleReplyBtnClick}];return this.isMaster?t.push({name:\"删除\",method:this.deletePost}):(t.push({name:this.post.liked?\"取消喜欢\":\"喜欢\",method:this.toggleLike}),t.push({name:this.post.marked?\"取消收藏\":\"收藏\",method:this.toggleMark})),t.push({name:this.onlySeeMaster?\"取消只看楼主\":\"只看楼主\",method:this.switchOnlyMaster}),t}},data:function(){return{loadingToggleLike:!1,loadingToggleMark:!1,showPostActionSheet:!1}},methods:{handleBangumiFollow:function(t){this.$store.commit(\"post/FOLLOW_BANGUMI\",{id:this.post.id,result:t})},switchOnlyMaster:function(){window.location=this.$alias.post(this.post.id,{only:this.onlySeeMaster?0:1})},deletePost:function(){var t=this;this.$confirm(\"删除后无法找回, 是否继续?\").then((0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch(\"post/deletePost\",{ctx:t,id:t.post.id});case 2:window.location=t.$alias.bangumi(t.bangumi.id);case 3:case\"end\":return e.stop()}},e,t)}))).catch(function(e){t.$toast.error(e)})},toggleLike:function(){var t=this;return(0,s.default)(o.default.mark(function e(){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$store.state.login){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.isMaster){e.next=6;break}return t.$toast.error(\"不能赞赏自己的帖子\"),e.abrupt(\"return\");case 6:if(!(r=!t.post.liked)||t.$store.state.user.coin){e.next=10;break}return t.$toast.error(\"金币不足\"),e.abrupt(\"return\");case 10:if(!t.loadingToggleLike){e.next=12;break}return e.abrupt(\"return\");case 12:return t.loadingToggleLike=!0,e.prev=13,e.next=16,t.$store.dispatch(\"post/toggleLike\",{ctx:t,id:t.post.id});case 16:r&&t.$store.commit(\"USE_COIN\"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(13),t.$toast.error(e.t0);case 22:return e.prev=22,t.loadingToggleLike=!1,e.finish(22);case 25:case\"end\":return e.stop()}},e,t,[[13,19,22,25]])}))()},toggleMark:function(){var t=this;return(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$store.state.login){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.isMaster){e.next=6;break}return t.$toast.error(\"不能收藏自己的帖子\"),e.abrupt(\"return\");case 6:if(!t.loadingToggleMark){e.next=8;break}return e.abrupt(\"return\");case 8:return t.loadingToggleMark=!0,e.prev=9,e.next=12,t.$store.dispatch(\"post/toggleMark\",{ctx:t,id:t.post.id});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),t.$toast.error(e.t0);case 17:return e.prev=17,t.loadingToggleMark=!1,e.finish(17);case 20:case\"end\":return e.stop()}},e,t,[[9,14,17,20]])}))()},handleReplyBtnClick:function(){this.$channel.$emit(\"open-create-comment-drawer\")},scrollToReply:function(){var t=this,e=this.$route.query.reply;if(e){var r=document.getElementById(\"comment-\"+e);r&&setTimeout(function(){t.$scrollToY(t.$utils.getOffsetTop(r)-100,600)},400)}}},mounted:function(){this.scrollToReply()}}},260:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=a(r(0)),n=a(r(1)),s=a(r(193));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"post-comment-item\",props:{post:{required:!0,type:Object},masterId:{required:!0,type:Number},preview:{type:Array,required:!0}},components:{SubCommentList:s.default},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0},isMine:function(){return this.currentUserId===this.post.from_user_id},canDelete:function(){return this.isMine||this.currentUserId===this.masterId},actions:function(){var t=[];return this.canDelete&&t.push({name:\"删除\",method:this.deletePost}),t.push({name:this.post.liked?\"取消赞\":\"点赞\",method:this.toggleLike}),t}},data:function(){return{deleting:!1,liking:!1,showControlPanel:!1}},methods:{toggleLike:function(){var t=this;return(0,n.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.liking){e.next=5;break}return e.abrupt(\"return\");case 5:return t.liking=!0,e.prev=6,e.next=9,t.$store.dispatch(\"comment/toggleLikeMainComment\",{ctx:t,type:\"post\",id:t.post.id});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return e.prev=13,t.liking=!1,e.finish(13);case 16:case\"end\":return e.stop()}},e,t,[[6,11,13,16]])}))()},deletePost:function(){var t=this;this.deleting||(this.deleting=!0,this.$confirm(\"删除后无法找回, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.$store.dispatch(\"comment/deleteMainComment\",{type:\"post\",ctx:t,id:t.post.id})}).catch(function(e){t.deleting=!1,\"cancel\"!==e&&t.$toast.error(e)}))},handleCommentBtnClick:function(){this.$channel.$emit(\"reply-comment\",{id:this.post.id,targetUserId:this.post.from_user_id,targetUserName:this.post.from_user_name})}}}},261:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=s(r(0)),n=s(r(1));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"post-comment-form\",props:{type:{required:!0,type:String},id:{required:!0,type:Number}},computed:{isGuest:function(){return!this.$store.state.login},formatContent:function(){for(var t=this.forms.content;null!==t.match(\"\\n\\n\\n\");)t=t.replace(/\\n\\n\\n/g,\"\\n\\n\");var e=[];return(t=t.split(\"\\n\")).forEach(function(t){e.push(t?\"<p>\"+t+\"</p>\":\"<p><br/></p>\")}),e.join(\"\")},formatImages:function(){return this.images.map(function(t){return t.img})},submitting:function(){return this.$store.state.comment.submitting}},data:function(){return{forms:{content:\"\"},uploadHeaders:{token:\"\"},images:[],exceed:5}},methods:{submit:function(){var t=this;return(0,n.default)(o.default.mark(function e(){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isGuest){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(t.formatContent){e.next=6;break}return t.$emit(\"close\"),e.abrupt(\"return\");case 6:if(!t.submitting){e.next=8;break}return e.abrupt(\"return\");case 8:return t.$store.commit(\"comment/SET_SUBMITTING\",{result:!0}),e.prev=9,e.next=12,t.$store.dispatch(\"comment/createMainComment\",{content:t.formatContent,images:t.formatImages,type:t.type,id:t.id,ctx:t});case 12:r=e.sent,t.$emit(\"close\"),t.forms={content:\"\"},t.images=[],t.$refs.uploader.clearFiles(),t.$toast.success(\"评论成功\"),setTimeout(function(){var e=document.getElementById(\"comment-\"+r.id);e&&t.$scrollToY(t.$utils.getOffsetTop(e)-100,600)},400),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(9),t.$toast.error(e.t0);case 24:return e.prev=24,t.$store.commit(\"comment/SET_SUBMITTING\",{result:!1}),e.finish(24);case 27:case\"end\":return e.stop()}},e,t,[[9,21,24,27]])}))()},handleError:function(t,e){console.log(t),this.$toast.error(\"图片：\"+e.name+\" 上传失败\")},handleRemove:function(t){var e=this;this.images.forEach(function(r,o){r.id===t.uid&&e.images.splice(o,1)})},handleSuccess:function(t,e){this.images.push({id:e.uid,img:t.data})},handleExceed:function(){this.$toast.error(\"最多可上传 \"+this.exceed+\" 张图片!\")},beforeUpload:function(t){if(!this.isGuest){var e=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(t.type),r=t.size/1024/1024<5;return e?r?(this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:this.type,id:this.postId,file:t}),!0):(this.$toast.error(\"图片大小不能超过 5MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},getUpToken:function(){var t=this;return(0,n.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch(\"getUpToken\",t);case 3:t.uploadHeaders.token=t.$store.state.user.uptoken.upToken,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.$toast.error(e.t0);case 9:case\"end\":return e.stop()}},e,t,[[0,6]])}))()},handleAreaFocus:function(){document.body.scrollTop=0}},mounted:function(){this.isGuest||this.getUpToken()}}},386:function(t,e,r){var o=r(387);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"6464a9f1\",o,!0,t)}},387:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#post-show .post .title{color:#000;font-size:18px;font-weight:700;line-height:28px;margin:8px 0 15px}#post-show .post .user{position:relative}#post-show .post .user .avatar{float:left;margin-right:9px;width:35px;height:35px}#post-show .post .user .avatar img{display:block;width:100%;height:100%;border-radius:17.5px}#post-show .post .user .tool-btn{position:absolute;right:5px;top:0;line-height:16px;font-size:12px;color:#535353}#post-show .post .user .summary{overflow:hidden}#post-show .post .user .summary .nickname{overflow:hidden;display:inline-block;font-size:14px;color:#333}#post-show .post .user .summary .info{line-height:16px;font-size:12px;color:#999}#post-show .post .user .summary .info span{margin-right:5px}#post-show .post .content{color:#000;font-size:16px;margin:22px 0;line-height:24px}#post-show .post .content .image-area{margin:16px 0}#post-show .post .content .image-area img{width:100%;height:auto}#post-show .post .footer{text-align:center;margin-bottom:30px}#post-show .post .footer button{margin:0 5px;font-size:13px}#post-show .post .footer button i{font-size:12px;line-height:16px}#post-show .post .footer .post-like-btn{position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:#fa5555;border-radius:8px;white-space:nowrap}#post-show .post .footer .post-like-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#post-show .post .footer .post-liked-btn{position:relative;padding:4px 10px;font-size:14px;color:#fa5555;background-color:transparent;border-radius:8px;white-space:nowrap}#post-show .post .footer .post-liked-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fa5555;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#post-show .post .footer .post-mark-btn{position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:#eb9e05;border-radius:8px;white-space:nowrap}#post-show .post .footer .post-mark-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#post-show .post .footer .post-marked-btn{position:relative;padding:4px 10px;font-size:14px;color:#eb9e05;background-color:transparent;border-radius:8px;white-space:nowrap}#post-show .post .footer .post-marked-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #eb9e05;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#post-show .post .footer .post-comment-btn{position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:#00a1d6;border-radius:8px;white-space:nowrap}#post-show .post .footer .post-comment-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#post-show .post-comment-drawer .reply .user{padding-top:15px}#post-show .post-comment-drawer .reply .user .avatar{float:left;margin-right:9px;width:35px;height:35px}#post-show .post-comment-drawer .reply .user .avatar img{display:block;width:100%;height:100%;border-radius:17.5px}#post-show .post-comment-drawer .reply .user .summary{overflow:hidden}#post-show .post-comment-drawer .reply .user .summary .nickname{font-size:14px;color:#333}#post-show .post-comment-drawer .reply .user .summary .info{line-height:16px;font-size:12px;color:#999}#post-show .post-comment-drawer .reply .user .summary .info span{margin-right:5px}#post-show .post-comment-drawer .reply .content{font-size:16px;line-height:24px;padding-top:16px;padding-bottom:16px;color:#000}#post-show .post-comment-drawer .reply .content .image-area{margin:16px 0}#post-show .post-comment-drawer .reply .content .image-area img{width:100%;height:auto}#post-show .post-comment-drawer .total{height:40px;line-height:40px;color:#000;font-size:16px}#post-show .post-comment-drawer .comments li{padding:17px 0 13px;position:relative}#post-show .post-comment-drawer .comments li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#post-show .post-comment-drawer .comments li .from-user .avatar{float:left;display:block;margin-right:9px;width:35px;height:35px}#post-show .post-comment-drawer .comments li .from-user .avatar img{display:block;width:100%;height:100%;border-radius:17.5px}#post-show .post-comment-drawer .comments li .from-user .summary{overflow:hidden}#post-show .post-comment-drawer .comments li .from-user .summary .nickname{display:inline-block;font-size:14px;line-height:14px;margin-bottom:6px;margin-top:2px;color:#0381aa}#post-show .post-comment-drawer .comments li .from-user .summary .info{font-size:12px;line-height:12px;color:#999}#post-show .post-comment-drawer .comments li .content{padding-top:11px;font-size:16px;line-height:24px;margin-left:45px}#post-show .post-comment-drawer .comments li .content a{font-size:16px}#post-show .create-post-comment-drawer{border-radius:0 0 5px 5px}#post-show .create-post-comment-drawer .container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%;margin-top:-46px;padding-top:46px;z-index:-1}#post-show .create-post-comment-drawer textarea{font-size:16px;line-height:24px;color:#000;font-weight:400;padding-top:10px;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}#post-show .create-post-comment-drawer .btn-submit{margin-top:15px;margin-bottom:15px}#post-show .bangumi-panel{padding-top:15px;padding-bottom:15px}#post-show .bangumi-panel .summary{font-size:12px;color:#666;line-height:13px;max-height:26px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',\"\"])},388:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(260),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(391);var i=function(t){var e;(e=r(389)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"03233fe2\");e.default=m.exports},389:function(t,e,r){var o=r(390);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"263436d1\",o,!0,t)}},390:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.post-reply-item{position:relative;margin-top:15px;padding-bottom:15px}.post-reply-item:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}.post-reply-item .avatar{float:left;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}.post-reply-item .avatar img{display:block;width:100%;height:100%}.post-reply-item .content{overflow:hidden}.post-reply-item .content .header .tools-btn{float:right;line-height:16px;font-size:12px;color:#535353;margin-top:9px;margin-left:4px}.post-reply-item .content .header .user .nickname{font-size:14px;line-height:21px;display:block;color:#333}.post-reply-item .content .header .user .info{color:#999;line-height:14px;font-size:12px}.post-reply-item .content .header .user .info span{margin-right:5px}.post-reply-item .content .main{font-size:16px;margin:10px 0 4px;color:#333;line-height:24px;min-height:65px}.post-reply-item .content .main .image-area{margin:10px 0}.post-reply-item .content .main .image-area img{width:100%;height:auto}.post-reply-item .content .footer .social{margin-top:15px;font-size:12px}.post-reply-item .content .footer .social .reply-liked-btn{color:#0381aa}.post-reply-item .content .footer .social button{color:#666;margin-left:3px}',\"\"])},391:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"post-reply-item\",attrs:{id:\"comment-\"+t.post.id}},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.post.from_user_zone))+' class=\"avatar\">',\"</a>\",[r(\"v-img\",{attrs:{src:t.post.from_user_avatar,width:80,height:80}})],1),t._ssrNode('<div class=\"content\">',\"</div>\",[t._ssrNode('<div class=\"header\">',\"</div>\",[t._ssrNode('<button class=\"tools-btn\">···</button>'),t._ssrNode('<div class=\"user\">',\"</div>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.post.from_user_zone))+' class=\"nickname oneline\">'+t._ssrEscape(t._s(t.post.from_user_name))+\"</a>\"),t._ssrNode('<div class=\"info\">',\"</div>\",[t._ssrNode(\"<span>\"+t._ssrEscape(\"第\"+t._s(t.post.floor_count)+\"楼\")+\"</span><span>·</span>\"),r(\"v-time\",{model:{value:t.post.created_at,callback:function(e){t.$set(t.post,\"created_at\",e)},expression:\"post.created_at\"}})],2)],2)],2),t._ssrNode('<div class=\"main\">',\"</div>\",[t._ssrNode('<div class=\"text-area\">'+t._s(t.post.content)+\"</div>\"),t._ssrNode('<div class=\"image-area\">',\"</div>\",t._l(t.post.images,function(e,o){return t._ssrNode('<div class=\"image-package\">',\"</div>\",[r(\"v-img\",{attrs:{width:\"150\",mode:\"2\",src:e.url,full:!0,source:e,aspect:t.$computeImageAspect(e)}})],1)}))],2),t._ssrNode('<div class=\"footer\">',\"</div>\",[r(\"sub-comment-list\",{attrs:{\"parent-comment\":t.post,type:\"post\"}}),t._ssrNode('<div class=\"social\"><button'+t._ssrClass(null,[t.post.liked?\"reply-liked-btn\":\"reply-like-btn\"])+'><i class=\"iconfont icon-icon_good\"></i>'+t._ssrEscape(\"\\n          \"+t._s(t.post.liked?\"已赞\":\"赞\")+\"\\n          \")+(t.post.like_count?\"<span>\"+t._ssrEscape(\"(\"+t._s(t.post.like_count)+\")\")+\"</span>\":\"\\x3c!----\\x3e\")+'</button><button class=\"reply-btn fr\">\\n          回复\\n        </button></div>')],2),r(\"mt-actionsheet\",{attrs:{actions:t.actions},model:{value:t.showControlPanel,callback:function(e){t.showControlPanel=e},expression:\"showControlPanel\"}})],1)])},staticRenderFns:[]};e.a=o},392:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(261),n=r.n(o);for(var s in o)\"default\"!==s&&function(t){r.d(e,t,function(){return o[t]})}(s);var a=r(395);var i=function(t){var e;(e=r(393)).__inject__&&e.__inject__(t)},m=r(2)(n.a,a.a,!1,i,null,\"4da0ddda\");e.default=m.exports},393:function(t,e,r){var o=r(394);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var n=r(4);t.exports.__inject__=function(t){n(\"46ea61d0\",o,!0,t)}},394:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.post-comment-form .content{font-size:16px;line-height:24px;color:#000;font-weight:400;height:250px;margin-bottom:5px}.post-comment-form .el-upload--picture-card,.post-comment-form .el-upload-list__item{width:15vw;height:15vw;line-height:15vw}.post-comment-form .el-upload-list__item-delete{float:none!important}.post-comment-form .submit-btn{margin-top:15px;width:100%}\",\"\"])},395:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"post-comment-form\"},[t._ssrNode('<textarea placeholder=\"来吧，尽情的（在1000字以内）发挥吧\" maxlength=\"1000\" class=\"content\"></textarea>'),r(\"el-upload\",{ref:\"uploader\",attrs:{action:\"https://upload.qiniup.com\",multiple:\"\",\"list-type\":\"picture-card\",disabled:!0,data:t.uploadHeaders,\"on-error\":t.handleError,\"on-remove\":t.handleRemove,\"on-success\":t.handleSuccess,\"on-exceed\":t.handleExceed,limit:t.exceed,\"before-upload\":t.beforeUpload}},[t._v(\"\\n    +\\n  \")]),r(\"el-button\",{staticClass:\"submit-btn\",attrs:{type:\"primary\",loading:t.submitting},on:{click:t.submit}},[t._v(\"发布\")])],2)},staticRenderFns:[]};e.a=o},396:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"post-show\"}},[t._ssrNode('<div class=\"container\">',\"</div>\",[t._ssrNode('<div class=\"post\">',\"</div>\",[t._ssrNode('<h1 class=\"title\">'+t._ssrEscape(t._s(t.post.title))+\"</h1>\"),t._ssrNode('<div class=\"user\">',\"</div>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.master.zone))+' class=\"avatar\"><img'+t._ssrAttr(\"src\",t.$resize(t.master.avatar,{width:70}))+'></a><button class=\"tool-btn\">···</button>'),t._ssrNode('<div class=\"summary\">',\"</div>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.master.zone))+' class=\"nickname\">'+t._ssrEscape(t._s(t.master.nickname))+\"</a>\"),t._ssrNode('<div class=\"info\">',\"</div>\",[t._ssrNode(\"<span>第1楼</span><span>·</span>\"+(t.total>1?\"<span>\"+t._ssrEscape(\"共\"+t._s(t.total)+\"楼\")+\"</span><span>·</span>\":\"\\x3c!----\\x3e\")),r(\"v-time\",{model:{value:t.post.created_at,callback:function(e){t.$set(t.post,\"created_at\",e)},expression:\"post.created_at\"}}),t._ssrNode(t.post.view_count?'<span class=\"fr\"><i class=\"iconfont icon-yuedu\"></i>'+t._ssrEscape(\"\\n              \"+t._s(t.$utils.shortenNumber(t.post.view_count))+\"\\n            \")+\"</span>\":\"\\x3c!----\\x3e\")],2)],2)],2),t._ssrNode('<div class=\"content\">',\"</div>\",[t._ssrNode('<div class=\"text-area\">'+t._s(t.post.content)+\"</div>\"),t._ssrNode('<div class=\"image-area\">',\"</div>\",t._l(t.post.images,function(e,o){return t._ssrNode('<div class=\"image-package\">',\"</div>\",[r(\"v-img\",{attrs:{width:\"300\",mode:\"2\",src:e.url,full:!0,source:e,aspect:t.$computeImageAspect(e)}})],1)}))],2),t._ssrNode('<div class=\"footer\"><button'+t._ssrClass(null,[t.post.liked?\"post-liked-btn\":\"post-like-btn\"])+'><i class=\"iconfont icon-guanzhu\"></i>'+t._ssrEscape(\"\\n          \"+t._s(t.post.liked?\"已喜欢\":\"喜欢\")+t._s(t.post.like_count?\"(\"+t.post.like_count+\")\":\"\")+\"\\n        \")+\"</button><button\"+t._ssrClass(null,[t.post.marked?\"post-marked-btn\":\"post-mark-btn\"])+'><i class=\"iconfont icon-shoucang\"></i>'+t._ssrEscape(\"\\n          \"+t._s(t.post.marked?\"已收藏\":\"收藏\")+t._s(t.post.mark_count?\"(\"+t.post.mark_count+\")\":\"\")+\"\\n        \")+'</button><button class=\"post-comment-btn\"><i class=\"iconfont icon-pinglun1\"></i>\\n          回复\\n        </button></div>'),r(\"mt-actionsheet\",{attrs:{actions:t.actions},model:{value:t.showPostActionSheet,callback:function(e){t.showPostActionSheet=e},expression:\"showPostActionSheet\"}})],2),t._ssrNode('<div class=\"hr\"></div>'),r(\"comment-main\",{attrs:{type:\"post\",id:t.post.id,\"only-see-master\":t.onlySeeMaster,\"bottom-append-comment\":!1,\"master-id\":t.master.id,\"empty-text\":\"\"},scopedSlots:t._u([{key:\"comment-item\",fn:function(e){var o=e.comment;return r(\"post-comment-item\",{attrs:{post:o,\"master-id\":t.master.id,preview:t.post.preview_images}})}},{key:\"reply-form\",fn:function(e){var o=e.close;return r(\"post-comment-form\",{attrs:{type:\"post\",id:t.post.id},on:{close:o}})}}])},[r(\"div\",{attrs:{slot:\"header\"},slot:\"header\"})])],2),t._ssrNode('<div class=\"hr\"></div>'),t._ssrNode('<div class=\"container bangumi-panel\">',\"</div>\",[t._ssrNode('<h3 class=\"sub-title\">所属番剧：</h3>'),r(\"v-bangumi-panel\",{attrs:{id:t.bangumi.id,avatar:t.bangumi.avatar,name:t.bangumi.name,followed:t.bangumi.followed},on:{follow:t.handleBangumiFollow}},[r(\"p\",{staticClass:\"summary\",domProps:{textContent:t._s(t.bangumi.summary)}})])],2)],2)},staticRenderFns:[]};e.a=o}};",
    "2.server-bundle.js": "exports.ids=[2],exports.modules={158:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(244),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(358),s=a(2)(r.a,n.a,!1,null,null,\"456f5b5e\");t.default=s.exports},180:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=s(a(12)),r=s(a(0)),o=s(a(1)),n=s(a(15));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"ImageWaterfall\",components:{waterfall:function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,149))},\"waterfall-slot\":function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,150))}},props:{loading:{type:Boolean,required:!0},bangumi:{type:Array,default:function(){return[]}},role:{type:Array,default:function(){return[]}}},computed:{page:function(){return this.$route.name},showSortHeader:function(){return!Array.isArray(this.options)},waterfall:function(){return this.$store.state.image.waterfall},list:function(){return this.waterfall.data},noMore:function(){return this.waterfall.noMore},options:function(){return this.waterfall.options},curUserId:function(){return this.$store.state.login?this.$store.state.user.id:-1},zone:function(){return this.$store.state.user.zone},pickerDrawerHeaderText:function(){return this.openBangumisDrawer?\"番剧\":this.openImageTagsDrawer?\"类型\":this.openImageSizeDrawer?\"尺寸\":this.openImageRoleDrawer?\"角色\":this.openImageAlbumDrawer?\"相册\":\"选项卡\"},albumBangumiPlaceholder:function(){var e=this;if(this.loadingBangumi)return\"加载中...\";var t=\"点击选择番剧\";return this.bangumiSlots[0].values.forEach(function(a){a.id===e.albumData.bangumiId&&(t=a.name)}),t},imageBangumiPlaceholder:function(){return this.loadingBangumi?\"加载中...\":this.imageData.selectedBangumi?this.getNameById(\"bangumi\",this.imageData.bangumiId):\"点击选择番剧\"},imageTagsPlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedTags?this.getNameById(\"tags\",this.imageData.tagsId):\"点击选择类型\"},imageSizePlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedSize?this.getNameById(\"size\",this.imageData.sizeId):\"点击选择尺寸\"},imageRolePlaceholder:function(){return this.loadingBangumiRole?\"加载中...\":this.imageData.selectedRole?this.getNameById(\"role\",this.imageData.roleId):\"点击选择角色（可选）\"}},data:function(){return{uploadHeaders:{token:\"\"},openEditModal:!1,openEditAlbumModal:!1,toggleSortDrawer:!1,bangumiRoles:{},loadingUserBangumiFetch:!1,loadingUploadTypeFetch:!1,submitting:!1,selectedTagsId:0,selectedSizeId:0,selectedCreatorId:-1,albumData:{id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[],is_cartoon:!1},originAlbumData:{name:\"\",bangumiId:\"\",url:\"\"},imageData:{id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},originImageData:{bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\"},loadingBangumi:!1,loadingUploadType:!1,loadingBangumiRole:!1,bangumiSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],tagsSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sizeSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],roleSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sortSlots:[{flex:1,values:[],defaultIndex:0,textAlign:\"right\"},{flex:1,values:[],defaultIndex:0,textAlign:\"center\"},{flex:1,values:[{id:-1,name:\"全部\"},{id:1,name:\"仅原创\"},{id:0,name:\"仅搬运\"}],defaultIndex:0,textAlign:\"left\"}],openPickerDrawer:!1,openBangumisDrawer:!1,openImageTagsDrawer:!1,openImageSizeDrawer:!1,openImageRoleDrawer:!1,openImageAlbumDrawer:!1,saveSortSelect:[]}},methods:{isMine:function(e){return this.curUserId===e},computeOptions:function(e){var t=[];return t=this.isMine(e.user_id)?t.concat([\"删除\",\"编辑\"]):t.concat([\"举报\"])},computeBoxHeight:function(e){return this.computeImageHeight(e)+(\"role-show\"===this.page?48:\"user-show\"===this.page?e.bangumi_id?93:48:e.bangumi||e.user?93:48)},computeImageHeight:function(e){return parseInt(e.height/e.width*145,10)},computeImageType:function(e){var t=e.tags,a=e.size.id;if(a&&(this.originImageData.sizeId=a,this.imageData.sizeId=a,this.imageData.selectedSize=!0),t.length){var i=t.length?t[0].id:\"\";this.originImageData.tagsId=i,this.imageData.tagsId=i,this.imageData.selectedTags=!0}},handleLoadMoreClick:function(e){e&&this.$store.commit(\"image/SET_WATERFALL_META\",{size:this.selectedSizeId,tags:this.selectedTagsId,bangumiId:-1,roleId:-1,creator:this.selectedCreatorId}),this.$emit(\"fetch\")},deleteImage:function(e){var t=this,a=e.userId,i=e.id;a===this.curUserId&&new n.default(this).deleteImage({id:i}).then(function(){t.$store.commit(\"image/DELETE_WATERFALL\",{id:i})}).catch(function(e){t.$toast.error(e)})},startEditImage:function(e){this.imageData.id=e.id;var t=e.bangumi_id,a=e.role_id;this.getUserBangumis(),t&&(this.originImageData.bangumiId=t,this.imageData.selectedBangumi=!0,this.imageData.bangumiId=t,this.getBangumiRoles(t)),a&&(this.originImageData.roleId=a,this.imageData.roleId=a,this.imageData.selectedRole=!0),this.computeImageType(e),this.openEditModal=!0},startEditAlbum:function(e){this.albumData.is_cartoon=e.is_cartoon,this.albumData.id=e.id,this.albumData.name=e.name,this.albumData.url=e.url,this.originAlbumData.name=e.name,this.originAlbumData.url=e.url;var t=e.bangumi_id;t&&(this.albumData.bangumiId=t,this.originAlbumData.bangumiId=t),this.getUpToken(),this.getUserBangumis(),this.openEditModal=!0},reportImage:function(e){var t=this;this.$prompt(\"请输入举报原因\",\"提示\",{confirmButtonText:\"提交\",cancelButtonText:\"取消\"}).then(function(a){a.value&&new n.default(t).trialReport({id:e.id}).then(function(){t.$toast.success(\"提交成功！\")})}).catch(function(){})},openSortDrawer:function(){var e=this,t=[{id:0,name:\"全部\"}],a=!Array.isArray(this.options),i=a?t.concat(this.options.tags):[],r=a?t.concat(this.options.size):[];this.sortSlots[0].values=i,this.sortSlots[1].values=r,i.forEach(function(t,a){t.id===e.selectedTagsId&&(e.sortSlots[0].defaultIndex=a)}),r.forEach(function(t,a){t.id===e.selectedSizeId&&(e.sortSlots[1].defaultIndex=a)}),this.sortSlots[2].values.forEach(function(t,a){t.id===e.selectedCreatorId&&(e.sortSlots[2].defaultIndex=a)}),this.toggleSortDrawer=!0},handleMenuSelected:function(e,t){var a=this;\"举报\"===e?this.reportImage(t):\"删除\"===e?this.$confirm(\"删除后不可恢复, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.deleteImage({userId:t.user_id,id:t.id})}).catch(function(){}):\"编辑\"===e&&(this.tagsSlots[0].values=this.options.tags,this.sizeSlots[0].values=this.options.size,t.image_count?(this.albumData={id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[]},this.openEditAlbumModal=!0,this.startEditAlbum(t)):(this.imageData={id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},this.openEditAlbumModal=!1,this.startEditImage(t)))},handleLikeBtnClick:function(e,t){var a=this;if(this.$store.state.login)if(this.isMine(t.user_id))this.$toast.error(\"不能为自己的图片点赞\");else{var i=e.currentTarget;if(t.creator&&!t.liked)return this.$store.state.user.coin?void this.$confirm(\"原创图片点赞需要金币, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.submitToggleLike(i,t)}).catch(function(){}):void this.$toast.error(\"金币不足\");this.submitToggleLike(i,t)}else this.$channel.$emit(\"sign-in\")},handleImageClick:function(e){e.image_count?window.location=this.$alias.imageAlbum(e.id):this.$previewImages(e,e)},handleRolePickerBtnClick:function(){this.imageData.selectedBangumi?this.loadingBangumiRole?this.$toast.error(\"数据加载中\"):this.roleSlots[0].values.length?(this.imageData.selectedRole=!0,this.imageData.roleId||(this.imageData.roleId=this.getSelectedMeta(\"role\",\"id\")),this.switchPickerDrawer(\"openImageRoleDrawer\")):this.$toast.error(\"该番剧下没用可选角色\"):this.$toast.error(\"请先选择番剧\")},handleAlbumBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.albumData.bangumiId||(this.albumData.bangumiId=this.getSelectedMeta(\"bangumi\",\"id\")),this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.imageData.selectedBangumi=!0,this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageTagsPickerBtnClick:function(){this.imageData.selectedTags=!0,this.switchPickerDrawer(\"openImageTagsDrawer\")},handleImageSizePickerBtnClick:function(){this.imageData.selectedSize=!0,this.switchPickerDrawer(\"openImageSizeDrawer\")},switchPickerDrawer:function(e){this.openBangumisDrawer=!1,this.openImageTagsDrawer=!1,this.openImageSizeDrawer=!1,this.openImageRoleDrawer=!1,this.openImageAlbumDrawer=!1,this[e]=!0,this.openPickerDrawer=!0},getUpToken:function(){var e=this;return(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(\"getUpToken\",e);case 3:e.uploadHeaders.token=e.$store.state.user.uptoken.upToken,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$toast.error(t.t0);case 9:case\"end\":return t.stop()}},t,e,[[0,6]])}))()},submitToggleLike:function(e,t){var a=this;return(0,o.default)(r.default.mark(function i(){var o,s;return r.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.setAttribute(\"disabled\",\"disabled\"),o=new n.default(a),i.prev=2,t.creator||a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:!t.liked}),i.next=6,o.toggleLike({id:t.id});case 6:s=i.sent,t.creator&&(a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:s}),s&&a.$store.commit(\"USE_COIN\"),a.$toast.success(\"操作成功\")),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),a.$toast.error(i.t0);case 13:return i.prev=13,e.removeAttribute(\"disabled\"),i.finish(13);case 16:case\"end\":return i.stop()}},i,a,[[2,10,13,16]])}))()},getUserBangumis:function(){var e=this;return(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.bangumiSlots[0].values.length){t.next=2;break}return t.abrupt(\"return\");case 2:if(!e.loadingUserBangumiFetch){t.next=4;break}return t.abrupt(\"return\");case 4:return e.loadingUserBangumiFetch=!0,t.prev=5,t.next=8,e.$store.dispatch(\"users/getFollowBangumis\",{ctx:e,zone:e.zone});case 8:e.bangumiSlots[0].values=t.sent;case 9:return t.prev=9,e.loadingUserBangumiFetch=!1,t.finish(9);case 12:case\"end\":return t.stop()}},t,e,[[5,,9,12]])}))()},getBangumiRoles:function(e){var t=this;return(0,o.default)(r.default.mark(function a(){var i;return r.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt(\"return\");case 2:if(!t.bangumiRoles[e]){a.next=5;break}return t.roleSlots[0].values=t.bangumiRoles[e],a.abrupt(\"return\");case 5:return a.next=7,t.$store.dispatch(\"bangumi/getRoles\",{ctx:t,bangumiId:e});case 7:i=a.sent,t.bangumiRoles[e]=i,t.roleSlots[0].values=i;case 10:case\"end\":return a.stop()}},a,t)}))()},handleImageEditDone:function(){var e=this;return(0,o.default)(r.default.mark(function t(){var a,i,o;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.imageData.selectedSize){t.next=3;break}return e.$toast.error(\"请先选择尺寸\"),t.abrupt(\"return\");case 3:if(e.imageData.selectedTags){t.next=6;break}return e.$toast.error(\"请先选择类型\"),t.abrupt(\"return\");case 6:if(e.imageData.selectedBangumi){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.imageData.bangumiId!==e.originImageData.bangumiId||e.imageData.roleId!==e.originImageData.roleId||e.imageData.sizeId!==e.originImageData.sizeId||e.imageData.tagsId!==e.originImageData.tagsId){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!0,e.$toast.loading(\"修改中...\"),a=new n.default(e),t.prev=17,i=e.imageData.id,t.next=21,a.editImage({id:i,bangumiId:e.imageData.bangumiId||0,roleId:e.imageData.selectedRole&&e.imageData.roleId||0,tags:e.imageData.tagsId,size:e.imageData.sizeId});case 21:o=t.sent,e.$toast.success(\"图片编辑成功！\"),e.$store.commit(\"image/EDIT_WATERFALL\",{id:i,data:o}),e.openEditModal=!1,t.next=30;break;case 27:t.prev=27,t.t0=t.catch(17),e.$toast.error(t.t0);case 30:return t.prev=30,e.submitting=!1,t.finish(30);case 33:case\"end\":return t.stop()}},t,e,[[17,27,30,33]])}))()},handleAlbumEditDone:function(){var e=this;return(0,o.default)(r.default.mark(function t(){var a,o,s,l;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.albumData.name){t.next=3;break}return e.$toast.error(\"请填写专辑名称\"),t.abrupt(\"return\");case 3:if(!(e.albumData.name.length>20)){t.next=6;break}return e.$toast.error(\"专题名称请缩减至20字以内\"),t.abrupt(\"return\");case 6:if(e.albumData.bangumiId){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.albumData.bangumiId!==e.originAlbumData.bangumiId||e.albumData.name!==e.originAlbumData.name||0!==e.albumData.poster.length){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!1,e.$toast.loading(\"修改中...\"),a=new n.default(e),o=e.albumData.id,s=e.albumData.poster.length?e.albumData.poster[0].url:null,t.prev=19,t.next=22,a.editAlbum((0,i.default)({id:o,bangumiId:e.albumData.bangumiId||0,name:e.albumData.name},s?{url:s.key,width:s.width,height:s.height}:{}));case 22:l=t.sent,e.$store.commit(\"image/EDIT_ALBUM\",{id:o,data:l}),e.$store.commit(\"image/EDIT_WATERFALL\",{id:o,data:l}),e.$toast.success(\"专辑编辑成功！\"),e.openEditModal=!1,e.$refs.uploader.clearFiles(),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(19),e.$toast.error(t.t0);case 33:return t.prev=33,e.submitting=!1,t.finish(33);case 36:case\"end\":return t.stop()}},t,e,[[19,30,33,36]])}))()},handleError:function(e,t){console.log(e),this.albumData.poster=[],this.$toast.error(\"图片：\"+t.name+\" 上传失败\")},beforeUpload:function(e){if(this.$store.state.login){var t=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(e.type),a=e.size/1024/1024<5;return t?a?(this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:\"album\",id:this.albumData.id,file:e}),!0):(this.$toast.error(\"图片大小不能超过 5MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},handleAlbumPosterRemove:function(){this.albumData.poster=[]},handleAlbumUploadSuccess:function(e,t){this.albumData.poster=[{name:t.name,url:e.data}]},openCreateImageModal:function(){this.$store.state.login?this.$channel.$emit(\"open-create-image-drawer\"):this.$channel.$emit(\"sign-in\")},getSelectedMeta:function(e,t){var a=e+\"Slots\";return this[a][0].values.length?this[a][0].values[this[a][0].defaultIndex][t]:0},getNameById:function(e,t){var a=e+\"Slots\",i=\"\";return this[a][0].values.length?(this[a][0].values.forEach(function(e){e.id===t&&(i=e.name)}),i):i},onTagsValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.tagsId=i,this.tagsSlots[0].values.forEach(function(e,t){e.id===i&&(a.tagsSlots[0].defaultIndex=t)})}},onSizeValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.sizeId=i,this.sizeSlots[0].values.forEach(function(e,t){e.id===i&&(a.sizeSlots[0].defaultIndex=t)})}},onRoleValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.roleId=i,this.roleSlots[0].values.forEach(function(e,t){e.id===i&&(a.roleSlots[0].defaultIndex=t)})}},onBangumiValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.bangumiSlots[0].values.forEach(function(e,t){e.id===i&&(a.bangumiSlots[0].defaultIndex=t)}),this.openEditAlbumModal?this.albumData.bangumiId=i:(this.imageData.bangumiId=i,this.imageData.selectedRole=!1,this.getBangumiRoles(this.getSelectedMeta(\"bangumi\",\"id\")))}},onSortValuesChange:function(e,t){this.saveSortSelect=t},handleSelectedSort:function(){var e=this.saveSortSelect[0].id,t=this.saveSortSelect[1].id,a=this.saveSortSelect[2].id;this.selectedTagsId===e&&this.selectedSizeId===t&&this.selectedCreatorId===a||(this.selectedTagsId=e,this.selectedSizeId=t,this.selectedCreatorId=a,this.handleLoadMoreClick(!0))}}}},182:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"post-flow-item\",props:{item:{required:!0,type:Object}},methods:{imageFilter:function(e){return e.slice(0,3)}}}},189:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(180),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(192);var s=function(e){var t;(t=a(190)).__inject__&&t.__inject__(e)},l=a(2)(r.a,n.a,!1,s,null,\"5cb66ef0\");t.default=l.exports},190:function(e,t,a){var i=a(191);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"527e3153\",i,!0,e)}},191:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#image-waterfall{margin-right:-5px;background-color:#fff}#image-waterfall .image-container{position:relative;width:310px;margin:0 auto 15px}#image-waterfall .image-item{padding-right:10px;padding-bottom:10px;margin-left:3px;margin-top:3px}#image-waterfall .image-item .item-wrap{font-size:0;position:relative}#image-waterfall .image-item .item-wrap.album-wrap{cursor:pointer}#image-waterfall .image-item .item-wrap.album-wrap:after{content:\"\";position:absolute;bottom:0;left:0;width:100%;height:50px;opacity:.3;background-color:transparent;background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(20%,rgba(0,0,0,.1)),color-stop(35%,rgba(0,0,0,.2)),color-stop(65%,rgba(0,0,0,.6)),to(rgba(0,0,0,.9)));background-image:-o-linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9));background-image:linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9))}#image-waterfall .image-item .item-wrap .creator{font-size:20px;position:absolute;left:5px;top:2px;z-index:1;color:#ffcf00}#image-waterfall .image-item .item-wrap .album-info{position:absolute;left:7px;bottom:4px;z-index:1;color:#fff;line-height:20px}#image-waterfall .image-item .item-wrap .album-info i{font-size:20px;vertical-align:middle}#image-waterfall .image-item .item-wrap .album-info .image-count{margin-left:5px;font-size:14px;vertical-align:middle}#image-waterfall .image-item .item-wrap .v-select-wrap{position:absolute;right:0;top:0;width:58px;line-height:16px;font-size:12px;color:#fff;z-index:1;margin-top:7px;margin-right:6px}#image-waterfall .image-item .item-wrap .v-select-wrap .iconfont{text-shadow:0 1px 10px grey}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-wrap{background-color:#fff;border:1px solid #f0f0f0;border-radius:4px;top:18px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item{height:36px;line-height:35px;color:#535353;font-size:12px;padding-left:15px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item:not(:last-child){border-bottom:1px solid #f0f0f0}#image-waterfall .image-item .image{width:100%;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.2);box-shadow:0 1px 3px rgba(0,0,0,.2);overflow:hidden}#image-waterfall .image-item .image .desc{padding:5px 8px;height:48px}#image-waterfall .image-item .image .desc .name{max-width:140px;margin-bottom:7px;display:block;font-size:12px;line-height:18px}#image-waterfall .image-item .image .desc .tags{margin-bottom:7px}#image-waterfall .image-item .image .desc .tags .el-tag{margin-right:7px;max-width:60px;font-size:12px}#image-waterfall .image-item .image .desc .meta{font-size:11px;color:#ccd0d7;overflow:hidden;text-align:right;margin-top:1px}#image-waterfall .image-item .image .desc .meta .like{display:block;text-align:left;width:100%;color:#ccd0d7;font-size:12px;line-height:12px}#image-waterfall .image-item .image .desc .meta .like.liked{color:#f25d8e}#image-waterfall .image-item .image .desc .meta time{margin-top:3px}#image-waterfall .image-item .image .detail{padding:8px;border-top:1px solid #f2f2f2;background-color:#fafafa;font-size:12px;line-height:14px;color:#999}#image-waterfall .image-item .image .detail .margin-top{margin-top:8px}#image-waterfall .image-item .image .detail .info{overflow:hidden}#image-waterfall .image-item .image .detail a{display:block;color:#777;font-size:12px}#image-waterfall .image-item .image .bangumi .avatar{float:left;margin-right:8px}#image-waterfall .image-item .image .bangumi .avatar img{width:28px;height:28px}#image-waterfall .image-item .image .user .avatar{float:left;margin-right:8px;overflow:hidden;border:1px solid #f0f0f0;border-radius:50%;width:28px;height:28px}#image-waterfall .image-item .image .user .avatar img{display:block;width:100%;height:100%;border-radius:14px}#image-waterfall .image-item .image .user .extra{margin-top:3px}#image-waterfall .edit-image-modal .field{font-size:16px;line-height:48px}#image-waterfall .edit-image-modal .field span{float:left}#image-waterfall .edit-image-modal .field div{color:#000;overflow:hidden}#image-waterfall .edit-image-modal .btn-submit{margin-top:15px}#image-waterfall .el-upload--picture-card,#image-waterfall .el-upload-list__item{width:15vw;height:15vw;line-height:15vw}#image-waterfall .el-upload-list__item-delete{float:none!important}#image-waterfall .btn-sort{width:100%;padding-bottom:5px;margin-bottom:10px;padding-top:15px}#image-waterfall .btn-sort span{float:left;margin-left:8px;font-size:13px}#image-waterfall .btn-sort .iconfont{float:right;margin-right:13px;font-size:12px}#image-waterfall .sort-image-drawer{border-radius:5px 5px 0 0}',\"\"])},192:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.list.length?a(\"div\",{attrs:{id:\"image-waterfall\"}},[a(\"no-ssr\",[a(\"div\",{staticClass:\"image-container\"},[e.showSortHeader?[a(\"button\",{staticClass:\"btn-sort clearfix\",on:{click:e.openSortDrawer}},[a(\"span\",[e._v(\"筛选\")]),a(\"i\",{staticClass:\"iconfont icon-101\"})]),a(\"v-drawer\",{staticClass:\"sort-image-drawer\",attrs:{\"header-text\":\"图片筛选\",from:\"bottom\",size:\"250px\",\"submit-text\":\"确认\"},on:{submit:e.handleSelectedSort},model:{value:e.toggleSortDrawer,callback:function(t){e.toggleSortDrawer=t},expression:\"toggleSortDrawer\"}},[a(\"mt-picker\",{attrs:{slots:e.sortSlots,valueKey:\"name\"},on:{change:e.onSortValuesChange}})],1)]:e._e(),a(\"waterfall\",{attrs:{\"line-gap\":155,\"auto-resize\":!1}},e._l(e.list,function(t,i){return a(\"waterfall-slot\",{key:t.id,staticClass:\"image-item\",attrs:{width:\"145\",height:e.computeBoxHeight(t),order:i}},[a(\"div\",{staticClass:\"image\"},[a(\"div\",{staticClass:\"item-wrap\",class:[t.image_count?\"album-wrap\":\"image-wrap\"],on:{click:function(a){e.handleImageClick(t)}}},[t.creator?a(\"i\",{staticClass:\"creator iconfont icon-huangguan\"}):e._e(),e.computeOptions(t).length?a(\"div\",{staticClass:\"menu\",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a(\"v-select\",{attrs:{placeholder:\"\",options:e.computeOptions(t),abort:!0},on:{submit:function(a){e.handleMenuSelected(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-101\",attrs:{slot:\"tail\"},slot:\"tail\"})])],1):e._e(),a(\"img\",{attrs:{width:\"145\",height:e.computeImageHeight(t),src:e.$resize(t.url,{width:290,mode:2})}}),t.image_count?a(\"div\",{staticClass:\"album-info\"},[a(\"i\",{staticClass:\"el-icon-picture-outline\"}),a(\"span\",{staticClass:\"image-count\",domProps:{textContent:e._s(t.image_count)}})]):e._e()]),a(\"div\",{staticClass:\"desc\"},[t.image_count?a(\"a\",{staticClass:\"name oneline\",attrs:{href:\"javascript:;\"},domProps:{textContent:e._s(t.name)}}):a(\"div\",{staticClass:\"tags\"},[a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.size.name)}}),e._l(t.tags,function(t){return a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.name)}})})],2),a(\"div\",{staticClass:\"meta\"},[a(\"button\",{staticClass:\"like\",class:{liked:t.liked},on:{click:function(a){e.handleLikeBtnClick(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-msnui-love\"}),e._v(\"\\n                  \"+e._s(t.like_count||\"\")+\"\\n                \")])])]),\"image-trending\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\"},[a(\"a\",{staticClass:\"oneline\",class:{\"margin-top\":!t.bangumi},attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.bangumi_id?a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}):e._e()])]):\"user-show\"===e.page?[t.bangumi_id?a(\"div\",{staticClass:\"detail bangumi clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.bangumi(t.bangumi.id)}},[a(\"img\",{attrs:{src:e.$resize(t.bangumi.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}),t.role?a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}}):e._e()])]):e._e()]:\"bangumi-show\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.role_id?a(\"a\",{attrs:{href:e.$alias.cartoonRole(t.role_id)}},[a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}})]):e._e()])]):e._e()],2)])}))],2)]),a(\"more-btn\",{attrs:{\"no-more\":e.noMore,loading:e.loading,length:e.list.length},on:{fetch:function(t){e.handleLoadMoreClick(!1)}}}),a(\"v-drawer\",{staticClass:\"edit-image-modal\",attrs:{\"header-text\":e.openEditAlbumModal?\"编辑相册\":\"编辑图片\",from:\"bottom\",size:\"100%\",backdrop:!1},model:{value:e.openEditModal,callback:function(t){e.openEditModal=t},expression:\"openEditModal\"}},[a(\"div\",{staticClass:\"container\"},[e.openEditAlbumModal?[a(\"div\",{staticClass:\"field\"},[a(\"v-field\",{attrs:{label:\"名称\",placeholder:\"请填写相册名称\",\"label-size\":\"48px\"},model:{value:e.albumData.name,callback:function(t){e.$set(e.albumData,\"name\",t)},expression:\"albumData.name\"}})],1),e.albumData.is_cartoon?e._e():a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.albumBangumiPlaceholder)},on:{click:e.handleAlbumBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"封面：\")]),a(\"el-upload\",{ref:\"albumUploader\",attrs:{action:\"https://upload.qiniup.com\",\"list-type\":\"picture-card\",data:e.uploadHeaders,disabled:!0,\"on-error\":e.handleError,\"before-upload\":e.beforeUpload,\"on-remove\":e.handleAlbumPosterRemove,\"on-success\":e.handleAlbumUploadSuccess}},[e._v(\"+\")])],1),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleAlbumEditDone}},[e._v(\"确认修改\")])]:[a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"类型：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageTagsPlaceholder)},on:{click:e.handleImageTagsPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"尺寸：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageSizePlaceholder)},on:{click:e.handleImageSizePickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageBangumiPlaceholder)},on:{click:e.handleImageBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"角色：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageRolePlaceholder)},on:{click:e.handleRolePickerBtnClick}})]),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleImageEditDone}},[e._v(\"确认修改\")])]],2),a(\"v-drawer\",{staticClass:\"bangumis-drawer\",attrs:{from:\"bottom\",size:\"250px\",\"header-text\":e.pickerDrawerHeaderText},model:{value:e.openPickerDrawer,callback:function(t){e.openPickerDrawer=t},expression:\"openPickerDrawer\"}},[e.openBangumisDrawer?a(\"mt-picker\",{attrs:{slots:e.bangumiSlots,valueKey:\"name\"},on:{change:e.onBangumiValuesChange}}):e.openImageTagsDrawer?a(\"mt-picker\",{attrs:{slots:e.tagsSlots,valueKey:\"name\"},on:{change:e.onTagsValuesChange}}):e.openImageSizeDrawer?a(\"mt-picker\",{attrs:{slots:e.sizeSlots,valueKey:\"name\"},on:{change:e.onSizeValuesChange}}):e.openImageRoleDrawer?a(\"mt-picker\",{attrs:{slots:e.roleSlots,valueKey:\"name\"},on:{change:e.onRoleValuesChange}}):e._e()],1)],1)],1):a(\"more-btn\",{attrs:{\"no-more\":e.noMore,length:e.list.length,loading:!1}},[a(\"button\",{on:{click:e.openCreateImageModal}},[e._v(\"上传图片\")])])},staticRenderFns:[]};t.a=i},199:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(182),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(202);var s=function(e){var t;(t=a(200)).__inject__&&t.__inject__(e)},l=a(2)(r.a,n.a,!1,s,null,\"23db1e41\");t.default=l.exports},200:function(e,t,a){var i=a(201);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"04594909\",i,!0,e)}},201:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.post-item{background-color:#fff;padding-top:15px;padding-left:15px;padding-right:15px}.post-item .header{height:35px;margin-bottom:9px}.post-item .header .avatar{margin-right:7px;display:block;float:left;position:relative;width:35px;height:35px}.post-item .header .avatar img{display:block;width:100%;height:100%;border-radius:17.5px}.post-item .header .avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #e5e9ef;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}.post-item .header .face{margin-right:10px;display:block;float:left;width:35px;height:35px}.post-item .header .face img{display:block;width:100%;height:auto;overflow:hidden}.post-item .header .name{vertical-align:middle;display:block;overflow:hidden}.post-item .header .name p{margin-bottom:2px;margin-top:2px;font-size:14px;color:#333;line-height:15px}.post-item .header .name span,.post-item .header .name time{color:#999;font-size:11px}.post-item .body{display:block}.post-item .body .content{color:#000;font-size:16px;margin-bottom:4px;line-height:24px;max-height:48px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.post-item .body .images .image-full{height:190px;width:100%;background-color:#eee}.post-item .body .images .image-list img{width:32%;height:auto}.post-item .body .images .image-list img:not(:last-child){margin-right:2%}.post-item .footer{height:44px;line-height:44px}.post-item .footer .bangumi{color:#999;font-size:12px;display:block;margin-right:8px}.post-item .footer .stats{height:100%;color:#666;float:right;margin-top:-2px}.post-item .footer .stats span{margin-left:10px;font-size:12px;margin-right:2px}.post-item .footer .stats i{font-size:12px;display:inline-block;vertical-align:middle}.post-item .footer .stats .done{color:#00a1d6}.post-item .footer .stats .icon-shoucang{margin-top:-3px}',\"\"])},202:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"li\",{staticClass:\"post-item\"},[e._ssrNode('<div class=\"header\">',\"</div>\",[e.item.user?[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.user(e.item.user.zone))+' class=\"avatar\">',\"</a>\",[a(\"v-img\",{attrs:{width:\"70\",src:e.item.user.avatar}})],1),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(e.item.id))+' class=\"name\">',\"</a>\",[e._ssrNode('<p class=\"oneline\">'+e._ssrEscape(e._s(e.item.title))+\"</p>\"),e._ssrNode(\"<span>\",\"</span>\",[e._ssrNode(e._ssrEscape(e._s(e.item.user.nickname)+\" · \")),a(\"v-time\",{model:{value:e.item.created_at,callback:function(t){e.$set(e.item,\"created_at\",t)},expression:\"item.created_at\"}})],2)],2)]:[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.bangumi.id))+' class=\"face\">',\"</a>\",[a(\"v-img\",{attrs:{width:\"70\",src:e.item.bangumi.avatar}})],1),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.bangumi.id))+' class=\"name\">',\"</a>\",[e._ssrNode(\"<p>\"+e._ssrEscape(e._s(e.item.bangumi.name))+\"</p><span>发表于 · </span>\"),a(\"v-time\",{model:{value:e.item.created_at,callback:function(t){e.$set(e.item,\"created_at\",t)},expression:\"item.created_at\"}})],2)]],2),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(e.item.id))+' class=\"body\">',\"</a>\",[e._ssrNode('<p class=\"content\">'+e._ssrEscape(e._s(e.item.desc))+\"</p>\"),e.item.images.length?e._ssrNode('<div class=\"images clearfix\">',\"</div>\",[1===e.item.images.length?a(\"v-img\",{staticClass:\"image-full bg\",attrs:{src:e.item.images[0].url,height:\"190\",mode:\"2\",tag:\"div\"}}):a(\"div\",{staticClass:\"image-list\"},e._l(e.imageFilter(e.item.images),function(e,t){return a(\"v-img\",{key:t,attrs:{src:e.url,width:\"110\"}})}))],1):e._e()],2),e._ssrNode('<div class=\"footer\"><div class=\"stats\"><span'+e._ssrClass(null,{done:e.item.liked})+'><i class=\"iconfont icon-guanzhu\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.like_count))+\"\\n      \")+\"</span><span\"+e._ssrClass(null,{done:e.item.marked})+'><i class=\"iconfont icon-shoucang\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.mark_count))+\"\\n      \")+\"</span><span\"+e._ssrClass(null,{done:e.item.commented})+'><i class=\"iconfont icon-pinglun1\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.comment_count))+\"\\n      \")+'</span><span><i class=\"iconfont icon-yuedu\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.view_count))+\"\\n      \")+\"</span></div>\"+(e.item.bangumi&&e.item.user?\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.bangumi.id))+' class=\"bangumi oneline\">'+e._ssrEscape(e._s(e.item.bangumi.name))+\"</a>\":\"\\x3c!----\\x3e\")+'</div><div class=\"hr\"></div>')],2)},staticRenderFns:[]};t.a=i},244:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=m(a(0)),r=m(a(35)),o=m(a(1)),n=m(a(338)),s=m(a(342)),l=m(a(344)),u=m(a(348)),c=m(a(352)),d=m(a(356));function m(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"bangumi-show\",asyncData:function(e){var t=this,a=e.route,n=e.store,s=e.ctx;return(0,o.default)(i.default.mark(function e(){var o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.params.id,e.next=3,r.default.all([n.dispatch(\"bangumi/getBangumi\",{ctx:s,id:o}),n.dispatch(\"bangumi/getPosts\",{ctx:s,id:o})]);case 3:case\"end\":return e.stop()}},e,t)}))()},components:{BangumiHeader:n.default,BangumiPostFlow:s.default,BangumiVideoFlow:l.default,BangumiCartoonFlow:u.default,BangumiRoleFlow:c.default,BangumiImageFlow:d.default},head:function(){if(this.id){var e=this.info.alias;this.tags.forEach(function(t){e+=\",\"+t.name});var t=this.info.name;return e+=e+\", \"+t+\"动漫, \"+t+\"动画片, \"+t+\"全集, \"+t+\"在线观看, \"+t+\"吧\",{title:t+\" - 番剧\",meta:[{hid:\"description\",name:\"description\",content:this.info.summary},{hid:\"keywords\",name:\"keywords\",content:e}]}}},computed:{id:function(){return this.$route.params.id},info:function(){return this.$store.state.bangumi.info},tags:function(){return this.info.tags}},data:function(){return{sort:\"post\"}},methods:{switchTab:function(e){this.sort=e}},mounted:function(){var e=this;this.info.has_video&&setTimeout(function(){e.switchTab(\"video\")},1e3)}}},245:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-bangumi-header\",computed:{info:function(){return this.$store.state.bangumi.info},postTotal:function(){return this.$store.state.bangumi.posts.total}},data:function(){return{loadingFollow:!1}},methods:{actionFollow:function(){var e=this;return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.state.login){t.next=3;break}return e.$channel.$emit(\"sign-in\"),t.abrupt(\"return\");case 3:if(!e.loadingFollow){t.next=5;break}return t.abrupt(\"return\");case 5:return e.loadingFollow=!0,t.prev=6,t.next=9,e.$store.dispatch(\"bangumi/follow\",{ctx:e,id:e.info.id});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(6),e.$toast.error(t.t0);case 14:return t.prev=14,e.loadingFollow=!1,t.finish(14);case 17:case\"end\":return t.stop()}},t,e,[[6,11,14,17]])}))()}}}},246:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(a(0)),r=n(a(1)),o=n(a(199));function n(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-bangumi-post-flow\",components:{PostFlowItem:o.default},computed:{info:function(){return this.$store.state.bangumi.info},posts:function(){return this.$store.state.bangumi.posts}},data:function(){return{loading:!1}},methods:{getPost:function(){var e=this;return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loading=!0,t.prev=3,t.next=6,e.$store.dispatch(\"bangumi/getPosts\",{ctx:e,id:e.info.id});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),e.$toast.error(t.t0);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case\"end\":return t.stop()}},t,e,[[3,8,11,14]])}))()},openCreatePostModal:function(){this.$store.state.login?this.$channel.$emit(\"drawer-open-write-post\"):this.$channel.$emit(\"sign-in\")}}}},247:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"bangumi-video-flow\",computed:{videos:function(){return this.$store.state.bangumi.videos},info:function(){return this.$store.state.bangumi.info}},data:function(){return{loading:!1}},created:function(){this.videos.list.length||this.getVideos()},methods:{openFeedbackForResource:function(){this.$channel.$emit(\"open-feedback\",{type:5,desc:\"我想看《\"+this.info.name+\"》的视频第 ? 集\"})},getVideos:function(){var e=this;return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loading=!0,t.prev=3,t.next=6,e.$store.dispatch(\"bangumi/getVideos\",{ctx:e,id:e.info.id});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),e.$toast.error(t.t0);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case\"end\":return t.stop()}},t,e,[[3,8,11,14]])}))()}}}},248:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(a(0)),r=n(a(1)),o=n(a(15));function n(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-bangumi-cartoon-flow\",computed:{cartoons:function(){return this.$store.state.bangumi.cartoons},info:function(){return this.$store.state.bangumi.info}},data:function(){return{loading:!1}},created:function(){this.cartoons.list.length||this.getCartoons()},methods:{getCartoons:function(){var e=this;return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loading=!0,t.prev=3,t.next=6,e.$store.dispatch(\"bangumi/getCartoons\",{ctx:e,bangumiId:e.info.id});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),e.$toast.error(t.t0);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case\"end\":return t.stop()}},t,e,[[3,8,11,14]])}))()},openFeedbackForCartoon:function(){this.$channel.$emit(\"open-feedback\",{type:7,desc:\"我想看《\"+this.info.name+\"》的漫画第 ? 话\"})},handleLikeCartoon:function(e,t){var a=this;if(this.$store.state.login)if(t.user_id!==this.$store.state.user.id){var i=e.currentTarget;t.liked?this.submitToggleLikeCartoon(i,t):this.$confirm(\"原创图片点赞需要金币, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.submitToggleLikeCartoon(i,t)}).catch(function(){})}else this.$toast.info(\"不能为自己的图片点赞\");else this.$channel.$emit(\"sign-in\")},submitToggleLikeCartoon:function(e,t){var a=this;return(0,r.default)(i.default.mark(function r(){var n,s;return i.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.setAttribute(\"disabled\",\"disabled\"),n=new o.default(a),i.prev=2,i.next=5,n.toggleLike({id:t.id});case 5:s=i.sent,t.creator&&s&&a.$store.commit(\"USE_COIN\"),a.$toast.success(\"操作成功\"),a.$store.commit(\"bangumi/TOGGLE_LIKE_CARTOON\",{id:t.id,result:s}),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(2),a.$toast.error(i.t0);case 14:return i.prev=14,e.removeAttribute(\"disabled\"),i.finish(14);case 17:case\"end\":return i.stop()}},r,a,[[2,11,14,17]])}))()}}}},249:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=o(a(0)),r=o(a(1));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-bangumi-role-flow\",computed:{roles:function(){return this.$store.state.bangumi.roles},info:function(){return this.$store.state.bangumi.info},currentRoleFans:function(){return this.$store.state.cartoonRole.fans[this.focusRoleSort]}},data:function(){return{loading:!1,currentRole:null,openRoleDetailDrawer:!1,loadingRoleFans:!1,focusRoleSort:\"new\"}},created:function(){this.roles.list.length||this.getRoles()},methods:{openFeedbackForRole:function(){this.$channel.$emit(\"open-feedback\",{type:6,desc:\"我想要为《\"+this.info.name+\"》的 ? 应援\"})},showRoleDetail:function(e){this.currentRole=e,this.focusRoleSort=\"new\",this.openRoleDetailDrawer=!0,this.fetchCurrentRoleFans(!0)},switchFocusRoleTab:function(e){this.focusRoleSort=e,this.$store.state.cartoonRole.fans[e].list.length||this.fetchCurrentRoleFans()},getRoles:function(){var e=this;return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loadint){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loadint=!0,t.prev=3,t.next=6,e.$store.dispatch(\"bangumi/getRoles\",{ctx:e,bangumiId:e.info.id});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),e.$toast.error(t.t0);case 11:return t.prev=11,e.loadint=!1,t.finish(11);case 14:case\"end\":return t.stop()}},t,e,[[3,8,11,14]])}))()},handleStarRole:function(e){var t=this;return(0,r.default)(i.default.mark(function a(){return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.$store.state.login){a.next=3;break}return t.$channel.$emit(\"sign-in\"),a.abrupt(\"return\");case 3:if(t.$store.state.user.coin){a.next=6;break}return t.$toast.error(\"金币不足\"),a.abrupt(\"return\");case 6:return a.prev=6,a.next=9,t.$store.dispatch(\"bangumi/starRole\",{bangumiId:t.info.id,roleId:e.id,ctx:t,hasStar:e.has_star});case 9:t.$store.commit(\"USE_COIN\"),t.$toast.info(\"+\"+e.has_star+\"s\"),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(6),t.$toast.error(a.t0);case 16:case\"end\":return a.stop()}},a,t,[[6,13]])}))()},fetchCurrentRoleFans:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.default)(i.default.mark(function a(){return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.loadingRoleFans){a.next=2;break}return a.abrupt(\"return\");case 2:return e.loadingRoleFans=!0,a.prev=3,a.next=6,e.$store.dispatch(\"cartoonRole/getFansList\",{ctx:e,bangumiId:e.info.id,roleId:e.currentRole.id,sort:e.focusRoleSort,reset:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(3),e.$toast.error(a.t0);case 11:return a.prev=11,e.loadingRoleFans=!1,a.finish(11);case 14:case\"end\":return a.stop()}},a,e,[[3,8,11,14]])}))()}}}},250:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(a(0)),r=n(a(1)),o=n(a(189));function n(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"v-bangumi-image-flow\",components:{ImageWaterfall:o.default},computed:{info:function(){return this.$store.state.bangumi.info}},data:function(){return{loading:!1}},created:function(){this.$store.state.image.waterfall.data.length||this.getImages()},methods:{getImages:function(){var e=this;return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loading){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loading=!0,t.prev=3,t.next=6,e.$store.dispatch(\"image/getBangumiImages\",{ctx:e,id:e.info.id,force:!1});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),e.$toast.error(t.t0);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case\"end\":return t.stop()}},t,e,[[3,8,11,14]])}))()}}}},338:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(245),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(341);var s=function(e){var t;(t=a(339)).__inject__&&t.__inject__(e)},l=a(2)(r.a,n.a,!1,s,null,\"5518d43e\");t.default=l.exports},339:function(e,t,a){var i=a(340);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"62c98b5c\",i,!0,e)}},340:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#bangumi-header{position:relative;width:100%;overflow:hidden;-webkit-box-shadow:inset 0 0 15px 0 rgba(0,0,0,.5);box-shadow:inset 0 0 15px 0 rgba(0,0,0,.5);z-index:1;height:140px}#bangumi-header .img{width:110%;height:140px;margin:-70px -55%;position:absolute;top:50%;left:50%;z-index:-1;background-color:#999;-webkit-filter:blur(5px);filter:blur(5px);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius=$size,MakeShadow=false)}#bangumi-header .info{position:absolute;left:0;bottom:0;right:0;color:#fff;text-shadow:0 1px 10px gray;padding:15px}#bangumi-header .info .avatar{width:54px;height:54px;margin-right:12px;float:left;-webkit-box-shadow:0 4px 10px rgba(0,0,0,.2);box-shadow:0 4px 10px rgba(0,0,0,.2)}#bangumi-header .info .follow{float:right;margin-top:13px;margin-left:5px;position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:transparent;border-radius:8px;white-space:nowrap;text-shadow:0 1px 10px gray}#bangumi-header .info .follow:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#bangumi-header .info .summary{overflow:hidden}#bangumi-header .info .summary .title{font-size:16px;line-height:18px;display:block;margin-bottom:7px}#bangumi-header .info .summary span{font-size:13px;margin-right:12px}',\"\"])},341:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.info?a(\"section\",{attrs:{id:\"bangumi-header\"}},[e._ssrNode('<div class=\"img bg\"'+e._ssrStyle(null,{backgroundImage:\"url(\"+e.$resize(e.info.banner,{height:400,mode:2})+\")\"},null)+'></div><div class=\"info\"><img'+e._ssrAttr(\"src\",e.$resize(e.info.avatar,{width:108}))+' alt=\"avatar\" class=\"avatar\"><button'+e._ssrClass(\"follow btn-empty\",[e.info.followed?\"is-followed\":\"not-follow\"])+'><i class=\"iconfont icon-guanzhu\"></i>'+e._ssrEscape(\"\\n      \"+e._s(e.info.followed?\"已关注\":\"关注\")+\"\\n    \")+'</button><div class=\"summary\"><p class=\"title oneline\">'+e._ssrEscape(e._s(e.info.name))+\"</p><span>\"+e._ssrEscape(\"关注 \"+e._s(e.$utils.shortenNumber(e.info.count_like)))+\"</span><span>\"+e._ssrEscape(\"帖子 \"+e._s(e.$utils.shortenNumber(e.postTotal)))+\"</span></div></div>\")]):e._e()},staticRenderFns:[]};t.a=i},342:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(246),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(343),s=a(2)(r.a,n.a,!1,null,null,\"cb574110\");t.default=s.exports},343:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"bangumi-post-flow\"}},[e._ssrNode(\"<ul>\",\"</ul>\",e._l(e.posts.list,function(e){return a(\"post-flow-item\",{key:e.id,attrs:{item:e}})})),a(\"more-btn\",{attrs:{\"no-more\":e.posts.noMore,loading:e.loading,length:e.posts.list.length},on:{fetch:e.getPost}},[a(\"button\",{on:{click:e.openCreatePostModal}},[e._v(\"发表《\"+e._s(e.info.name)+\"》的第一个帖子\")])])],1)},staticRenderFns:[]};t.a=i},344:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(247),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(347);var s=function(e){var t;(t=a(345)).__inject__&&t.__inject__(e)},l=a(2)(r.a,n.a,!1,s,null,\"8b013aa2\");t.default=l.exports},345:function(e,t,a){var i=a(346);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"b465a836\",i,!0,e)}},346:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#bangumi-video-flow .sub-title{margin-top:15px}#bangumi-video-flow .video{margin-bottom:15px;width:100%;display:block}#bangumi-video-flow .video:first-child{margin-top:15px}#bangumi-video-flow .video img{width:128px;height:80px;border-radius:5px;margin-right:10px;float:left}#bangumi-video-flow .video figcaption{overflow:hidden}#bangumi-video-flow .video figcaption .name{line-height:18px;max-height:36px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}#bangumi-video-flow .video p{font-size:16px;line-height:20px;margin-bottom:5px}\",\"\"])},347:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"bangumi-video-flow\"}},[e.videos.has_season?e._ssrNode('<div class=\"container\">',\"</div>\",[e._l(e.videos.list,function(t){return[e._ssrNode('<h3 class=\"sub-title\">'+e._ssrEscape(e._s(t.name))+\"</h3>\"),e._ssrNode(\"<ul>\",\"</ul>\",e._l(t.data,function(i,r){return e._ssrNode('<li class=\"video\">',\"</li>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.video(i.id))+\">\",\"</a>\",[e._ssrNode('<figure class=\"clearfix\">',\"</figure>\",[a(\"v-img\",{staticClass:\"bg\",attrs:{alt:i.name,src:e.$resize(i.poster,{width:128,height:80})}}),e._ssrNode('<figcaption><p class=\"part oneline\">'+e._ssrEscape(\"第\"+e._s(i.part-t.base)+\"话\")+'</p><span class=\"name\">'+e._ssrEscape(e._s(i.name))+\"</span></figcaption>\")],2)])])}))]})],2):e._ssrNode('<ul class=\"container\">',\"</ul>\",e._l(e.videos.list,function(t){return e._ssrNode('<li class=\"video\">',\"</li>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.video(t.id))+\">\",\"</a>\",[e._ssrNode('<figure class=\"clearfix\">',\"</figure>\",[a(\"v-img\",{staticClass:\"bg\",attrs:{alt:t.name,src:e.$resize(t.poster,{width:128,height:80})}}),e._ssrNode('<figcaption><p class=\"part oneline\">'+e._ssrEscape(\"第\"+e._s(t.part)+\"话\")+'</p><span class=\"name\">'+e._ssrEscape(e._s(t.name))+\"</span></figcaption>\")],2)])])})),a(\"more-btn\",{attrs:{\"no-more\":!0,auto:!0,loading:e.loading,length:e.videos.list.length}},[a(\"button\",{on:{click:e.openFeedbackForResource}},[e._v(\"求资源\")])])],1)},staticRenderFns:[]};t.a=i},348:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(248),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(351);var s=function(e){var t;(t=a(349)).__inject__&&t.__inject__(e)},l=a(2)(r.a,n.a,!1,s,null,\"aa84a1bc\");t.default=l.exports},349:function(e,t,a){var i=a(350);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"08ad89d3\",i,!0,e)}},350:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#bangumi-cartoon-flow{background-color:#fff;padding-top:15px}#bangumi-cartoon-flow ul{width:302px;margin:0 auto}#bangumi-cartoon-flow li{width:145px;height:282px;float:left;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.2);box-shadow:0 1px 3px rgba(0,0,0,.2);margin:3px 3px 10px;overflow:hidden}#bangumi-cartoon-flow li .poster-wrap{position:relative;display:block}#bangumi-cartoon-flow li .poster-wrap:after{content:\"\";position:absolute;bottom:0;left:0;width:100%;height:50px;opacity:.3;background-color:transparent;background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(20%,rgba(0,0,0,.1)),color-stop(35%,rgba(0,0,0,.2)),color-stop(65%,rgba(0,0,0,.6)),to(rgba(0,0,0,.9)));background-image:-o-linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9));background-image:linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9))}#bangumi-cartoon-flow li .poster-wrap img{width:100%;height:210px;display:block}#bangumi-cartoon-flow li .poster-wrap .info{position:absolute;left:7px;bottom:4px;z-index:1;color:#fff;line-height:20px}#bangumi-cartoon-flow li .poster-wrap .info i{font-size:20px;vertical-align:middle}#bangumi-cartoon-flow li .poster-wrap .info .image-count{margin-left:5px;font-size:14px;vertical-align:middle}#bangumi-cartoon-flow li .desc{padding:5px 8px;background-color:#fff}#bangumi-cartoon-flow li .desc button{float:right;width:40px;height:20px;line-height:20px;text-align:right;color:#ccd0d7;font-size:12px;margin-right:1px}#bangumi-cartoon-flow li .desc button.liked{color:#ff8eb3}#bangumi-cartoon-flow li .desc a{display:block;overflow:hidden;font-size:12px;line-height:20px}#bangumi-cartoon-flow li .user{display:block;padding:8px;border-top:1px solid #f2f2f2;background-color:#fafafa;font-size:12px;line-height:14px;color:#999;height:42px}#bangumi-cartoon-flow li .user img{border:1px solid #f0f0f0;vertical-align:middle;margin-right:8px;float:left;border-radius:50%;width:26px;height:26px}#bangumi-cartoon-flow li .user img img{display:block;width:100%;height:100%;border-radius:13px}#bangumi-cartoon-flow li .user div{overflow:hidden;font-size:12px;margin-top:6px;color:#999}',\"\"])},351:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"bangumi-cartoon-flow\"}},[e._ssrNode(e.cartoons.list.length?'<ul class=\"clearfix\">'+e._ssrList(e.cartoons.list,function(t){return\"<li><a\"+e._ssrAttr(\"href\",e.$alias.imageAlbum(t.id))+' class=\"poster-wrap\"><img'+e._ssrAttr(\"src\",e.$resize(t.url,{width:290,height:420}))+'><div class=\"info\"><i class=\"el-icon-picture-outline\"></i><span class=\"image-count\">'+e._ssrEscape(e._s(t.image_count))+'</span></div></a><div class=\"desc\"><button'+e._ssrClass(\"like\",{liked:t.liked})+'><i class=\"iconfont icon-msnui-love\"></i>'+e._ssrEscape(\"\\n          \"+e._s(t.like_count||\"\")+\"\\n        \")+\"</button><a\"+e._ssrAttr(\"href\",e.$alias.imageAlbum(t.id))+' class=\"oneline\">'+e._ssrEscape(e._s(t.name))+\"</a></div><a\"+e._ssrAttr(\"href\",e.$alias.user(t.user.zone))+' class=\"user\"><img'+e._ssrAttr(\"src\",e.$resize(t.user.avatar,{width:72}))+'><div class=\"oneline\">'+e._ssrEscape(e._s(t.user.nickname))+\"</div></a></li>\"})+\"</ul>\":\"\\x3c!----\\x3e\"),a(\"more-btn\",{attrs:{\"no-more\":e.cartoons.noMore,length:e.cartoons.list.length,loading:e.loading},on:{fetch:e.getCartoons}},[a(\"button\",{on:{click:e.openFeedbackForCartoon}},[e._v(\"求漫画\")])])],2)},staticRenderFns:[]};t.a=i},352:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(249),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(355);var s=function(e){var t;(t=a(353)).__inject__&&t.__inject__(e)},l=a(2)(r.a,n.a,!1,s,null,\"4bb3114e\");t.default=l.exports},353:function(e,t,a){var i=a(354);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"f177a384\",i,!0,e)}},354:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#bangumi-role-flow .roles li{position:relative;padding-bottom:15px;margin-top:15px}#bangumi-role-flow .roles li:not(:last-child):after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#bangumi-role-flow .roles li .avatar{width:100px;height:100px;display:block;float:left;overflow:hidden;border-radius:5px;margin-right:10px;border:1px solid #e5e9ef}#bangumi-role-flow .roles li .avatar img{width:100%;height:auto}#bangumi-role-flow .roles li .summary{overflow:hidden}#bangumi-role-flow .roles li .summary .role{display:block;font-size:14px;line-height:20px;height:60px;overflow:hidden}#bangumi-role-flow .roles li .summary .role .name{font-weight:700}#bangumi-role-flow .roles li .summary .role .intro{color:#000}#bangumi-role-flow .roles li .summary .star{float:right;margin-top:14px;position:relative;padding:4px 10px;font-size:14px;color:#000;background-color:transparent;border-radius:8px;white-space:nowrap}#bangumi-role-flow .roles li .summary .star:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #000;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#bangumi-role-flow .roles li .footer{margin-top:10px;height:30px;line-height:30px;vertical-align:middle;color:#6d757a;text-align:right}#bangumi-role-flow .roles li .footer img{width:20px;height:20px;border-radius:15px;vertical-align:middle;border:1px solid #e5e9ef;margin-left:5px;margin-top:-3px}#bangumi-role-flow .roles li .footer a{font-size:12px;color:#6d757a}#bangumi-role-flow .roles li .footer span{margin-left:10px;font-size:12px;margin-right:2px}#bangumi-role-flow .role-detail-drawer .info{margin-bottom:20px;text-align:center}#bangumi-role-flow .role-detail-drawer .info .avatar{position:relative;margin:0 auto 15px;width:80px;height:80px}#bangumi-role-flow .role-detail-drawer .info .avatar img{display:block;width:100%;height:100%;border-radius:40px}#bangumi-role-flow .role-detail-drawer .info .avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #e5e9ef;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}#bangumi-role-flow .role-detail-drawer .info .intro{padding:0 50px;font-size:13px}#bangumi-role-flow .role-detail-drawer .info .star{margin-top:10px;position:relative;padding:4px 10px;font-size:14px;color:#000;background-color:transparent;border-radius:8px;white-space:nowrap}#bangumi-role-flow .role-detail-drawer .info .star:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #000;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#bangumi-role-flow .role-detail-drawer .info .stats{font-size:13px;color:#99a2aa;margin-top:10px}#bangumi-role-flow .role-detail-drawer .info .stats span{margin:0 5px}#bangumi-role-flow .role-detail-drawer .lover .sub-title{margin-top:10px}#bangumi-role-flow .role-detail-drawer .lover .lover-user{margin-bottom:10px}#bangumi-role-flow .role-detail-drawer .lover-user{display:block}#bangumi-role-flow .role-detail-drawer .lover-user img{width:40px;height:40px;border-radius:50%;border:1px solid #e5e9ef;margin-right:10px;vertical-align:middle}#bangumi-role-flow .role-detail-drawer #role-fans-list .lover-user{padding:10px 0;position:relative}#bangumi-role-flow .role-detail-drawer #role-fans-list .lover-user:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#bangumi-role-flow .role-detail-drawer #role-fans-list .lover-user .score{float:right;font-size:13px;color:#99a2aa;margin-top:13px}#bangumi-role-flow .role-detail-drawer .total-limit{background-color:#f5f5f5;text-align:center;font-size:12px;color:#999;padding-top:15px}',\"\"])},355:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"bangumi-role-flow\"}},[e.roles.list.length?e._ssrNode('<ul class=\"roles container\">',\"</ul>\",e._l(e.roles.list,function(t){return e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode('<div class=\"clearfix\">',\"</div>\",[e._ssrNode('<div class=\"avatar\">',\"</div>\",[a(\"v-img\",{attrs:{src:t.avatar,width:\"90\",height:\"90\"}})],1),e._ssrNode('<div class=\"summary\"><div class=\"role\"><span class=\"name\">'+e._ssrEscape(e._s(t.name))+'</span><span class=\"intro\">'+e._ssrEscape(\"：\"+e._s(t.intro))+'</span></div><button class=\"star\">为TA应援</button></div>')],2),t.fans_count?e._ssrNode('<div class=\"footer\">',\"</div>\",[e._ssrNode(\"<span>\"+e._ssrEscape(\"\\n              粉丝:\\n              \"+e._s(e.$utils.shortenNumber(t.fans_count))+\"\\n            \")+\"</span><span>\"+e._ssrEscape(\"\\n              金币:\\n              \"+e._s(e.$utils.shortenNumber(t.star_count))+\"\\n            \")+\"</span>\"),t.lover?e._ssrNode(\"<span>\",\"</span>\",[e._ssrNode(\"\\n              守护者：\\n              \"),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.user(t.lover.zone))+\">\",\"</a>\",[e._ssrNode(e._ssrEscape(\"\\n                \"+e._s(t.lover.nickname)+\"\\n                \")),a(\"v-img\",{attrs:{src:t.lover.avatar,width:\"20\",height:\"20\"}})],2)],2):e._e()],2):e._e()])})):e._e(),a(\"more-btn\",{attrs:{\"no-more\":e.roles.noMore,length:e.roles.list.length,loading:e.loading},on:{fetch:e.getRoles}},[a(\"button\",{on:{click:e.openFeedbackForRole}},[e._v(\"求偶像\")])]),e.currentRole?a(\"v-drawer\",{staticClass:\"role-detail-drawer\",attrs:{\"header-text\":e.currentRole.name,from:\"bottom\",size:\"100%\"},model:{value:e.openRoleDetailDrawer,callback:function(t){e.openRoleDetailDrawer=t},expression:\"openRoleDetailDrawer\"}},[a(\"div\",{staticClass:\"info\"},[a(\"div\",{staticClass:\"avatar\"},[a(\"img\",{attrs:{src:e.$resize(e.currentRole.avatar,{width:160})}})]),a(\"p\",{staticClass:\"intro\",domProps:{textContent:e._s(e.currentRole.intro)}}),a(\"button\",{staticClass:\"star\",on:{click:function(t){e.handleStarRole(e.currentRole)}}},[e._v(\"为TA应援\")]),a(\"div\",{staticClass:\"stats\"},[a(\"span\",[e._v(\"粉丝数：\"+e._s(e.currentRole.fans_count))]),a(\"span\",[e._v(\"金币数：\"+e._s(e.currentRole.star_count))])])]),e.currentRole.loverId?a(\"div\",{staticClass:\"lover container\"},[a(\"div\",{staticClass:\"hr\"}),a(\"h3\",{staticClass:\"sub-title\"},[e._v(\"守护者：\")]),a(\"a\",{staticClass:\"lover-user\",attrs:{href:e.$alias.user(e.currentRole.lover.zone)}},[a(\"img\",{attrs:{src:e.$resize(e.currentRole.lover.avatar,{width:80})}}),a(\"span\",{domProps:{textContent:e._s(e.currentRole.lover.nickname)}})])]):e._e(),a(\"div\",{staticClass:\"hr\"}),a(\"div\",{staticClass:\"tabs\"},[a(\"button\",{class:{active:\"new\"===e.focusRoleSort},on:{click:function(t){e.switchFocusRoleTab(\"new\")}}},[e._v(\"最近\")]),a(\"button\",{class:{active:\"hot\"===e.focusRoleSort},on:{click:function(t){e.switchFocusRoleTab(\"hot\")}}},[e._v(\"最多\")])]),a(\"ul\",{staticClass:\"container\",attrs:{id:\"role-fans-list\"}},e._l(e.currentRoleFans.list,function(t){return a(\"li\",{key:t.id},[a(\"a\",{staticClass:\"lover-user\",attrs:{href:e.$alias.user(t.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.avatar,{width:80})}}),a(\"span\",{domProps:{textContent:e._s(t.nickname)}}),\"new\"===e.focusRoleSort?a(\"v-time\",{staticClass:\"score\",model:{value:t.score,callback:function(a){e.$set(t,\"score\",a)},expression:\"item.score\"}}):a(\"span\",{staticClass:\"score\"},[e._v(e._s(t.score)+\"个金币\")])],1)])})),e.currentRoleFans.list.length>=100?a(\"p\",{staticClass:\"total-limit\"},[e._v(\"最多显示100人\")]):e._e(),a(\"more-btn\",{attrs:{\"no-more\":e.currentRoleFans.noMore,length:e.currentRoleFans.list.length,loading:e.loadingRoleFans},on:{fetch:e.fetchCurrentRoleFans}})],1):e._e()],1)},staticRenderFns:[]};t.a=i},356:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(250),r=a.n(i);for(var o in i)\"default\"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);var n=a(357),s=a(2)(r.a,n.a,!1,null,null,\"1bd7178f\");t.default=s.exports},357:function(e,t,a){\"use strict\";var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{attrs:{id:\"bangumi-image-flow\"}},[t(\"image-waterfall\",{attrs:{loading:this.loading},on:{fetch:this.getImages}})],1)},staticRenderFns:[]};t.a=i},358:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"bangumi-show\"}},[a(\"bangumi-header\"),e._ssrNode('<div class=\"hr\"></div>'),e._ssrNode(\"<div>\",\"</div>\",[e._ssrNode('<div class=\"tabs\"><button'+e._ssrClass(null,{active:\"post\"===e.sort})+\">帖子</button>\"+(e.info.has_video?\"<button\"+e._ssrClass(null,{active:\"video\"===e.sort})+\">视频</button>\":\"\\x3c!----\\x3e\")+(e.info.has_cartoon?\"<button\"+e._ssrClass(null,{active:\"cartoon\"===e.sort})+\">漫画</button>\":\"\\x3c!----\\x3e\")+\"<button\"+e._ssrClass(null,{active:\"role\"===e.sort})+\">偶像</button><button\"+e._ssrClass(null,{active:\"image\"===e.sort})+\">相册</button></div>\"),\"post\"===e.sort?a(\"bangumi-post-flow\"):\"video\"===e.sort?a(\"bangumi-video-flow\"):\"cartoon\"===e.sort?a(\"bangumi-cartoon-flow\"):\"role\"===e.sort?a(\"bangumi-role-flow\"):\"image\"===e.sort?a(\"bangumi-image-flow\"):e._e()],2)],2)},staticRenderFns:[]};t.a=i}};",
    "3.server-bundle.js": "exports.ids=[3],exports.modules={155:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(230),a=r.n(i);for(var o in i)\"default\"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var s=r(305);var n=function(e){var t;(t=r(283)).__inject__&&t.__inject__(e)},l=r(2)(a.a,s.a,!1,n,null,\"4ed20556\");t.default=l.exports},181:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,a=r(148),o=(i=a)&&i.__esModule?i:{default:i};t.default={name:\"search-input\",props:{value:{type:String,default:\"\"},type:{type:[String,Number],default:0}},data:function(){return{word:this.value,selectedType:this.type,cacheKey:\"search-history\"}},methods:{handleInputBlur:function(){this.$emit(\"input-blur\"),document.body.scrollTop=0},handleInputFocus:function(){this.$emit(\"input-focus\"),document.body.scrollTop=0},clear:function(){this.word=\"\"},submit:function(){var e=this.word;e&&(this.setHistory(e),this.$router.push({name:\"search-index\",query:{q:e,type:this.selectedType}}))},setHistory:function(e){var t=this;setTimeout(function(){var r=t.getHistory(),i=r.indexOf(e);-1!==i&&r.splice(i,1),r.unshift(e),r.length>10&&r.pop();try{localStorage.setItem(t.cacheKey,(0,o.default)(r))}catch(e){}},0)},getHistory:function(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(e){return[]}}},mounted:function(){var e=this;this.$watch(\"value\",function(t){e.word=t}),this.$watch(\"word\",function(t){e.$emit(\"input\",t)}),this.$watch(\"$route\",function(t){\"search-index\"===t.name&&(e.word=t.query.q,e.selectedType=t.query.type)})}}},195:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(181),a=r.n(i);for(var o in i)\"default\"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var s=r(198);var n=function(e){var t;(t=r(196)).__inject__&&t.__inject__(e)},l=r(2)(a.a,s.a,!1,n,null,\"2f4cbda2\");t.default=l.exports},196:function(e,t,r){var i=r(197);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var a=r(4);e.exports.__inject__=function(e){a(\"379dcb56\",i,!0,e)}},197:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-input-wrap{position:relative;border-radius:8px}.search-input-wrap .clear-btn{float:right;color:#757575;font:27px/25px arial,sans-serif;padding:0 15px 0 5px;line-height:38px;border-top:1px solid #d9d9d9;border-bottom:1px solid #d9d9d9;height:40px}.search-input-wrap .search-btn{float:right;height:40px;width:40px;background-color:#ffafc9;border-top-right-radius:8px;border-bottom-right-radius:8px;font-weight:700;font-size:20px;color:#fff}.search-input-wrap .input-wrap{overflow:hidden;padding:7px 0 6px;border:1px solid #d9d9d9;border-right:0;border-top-left-radius:8px;border-bottom-left-radius:8px;height:40px}.search-input-wrap .input-wrap input{width:100%;height:100%;font-size:18px;color:rgba(0,0,0,.87);word-wrap:break-word;padding:0 0 0 16px}\",\"\"])},198:function(e,t,r){\"use strict\";var i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"form\",{staticClass:\"search-input-wrap\",attrs:{method:\"get\",action:\"#\"},on:{submit:function(t){t.preventDefault(),e.submit(t)}}},[e._ssrNode('<button type=\"submit\" class=\"search-btn\"><i class=\"iconfont icon-sousuo\"></i></button>'+(e.word?'<button type=\"button\" class=\"clear-btn\">×</button>':\"\\x3c!----\\x3e\")+'<div class=\"input-wrap\"><input maxlength=\"200\" name=\"q\" type=\"search\" aria-autocomplete=\"both\" aria-haspopup=\"false\" autocapitalize=\"off\" autocomplete=\"off\" autocorrect=\"off\" role=\"combobox\" spellcheck=\"false\" placeholder=\"搜索二次元的一切\" aria-label=\"搜索\"'+e._ssrAttr(\"value\",e.word)+\"></div>\")])},staticRenderFns:[]};t.a=i},230:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=p(r(0)),a=p(r(1)),o=p(r(195)),s=p(r(285)),n=p(r(289)),l=p(r(293)),c=p(r(297)),d=p(r(301));function p(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"search-index\",asyncData:function(e){var t=this,r=e.store,o=e.route,s=e.ctx;return(0,a.default)(i.default.mark(function e(){var a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.query,e.next=3,r.dispatch(\"search/fetchData\",{ctx:s,type:a.type,q:a.q});case 3:case\"end\":return e.stop()}},e,t)}))()},components:{vSearch:o.default,Flow1:s.default,Flow2:n.default,Flow3:l.default,Flow4:c.default,Flow5:d.default},computed:{resource:function(){return this.$store.state.search.resource[this.selectedType]},loading:function(){return this.resource.loading},list:function(){return this.resource.list},noMore:function(){return this.resource.noMore},total:function(){return this.resource.total},tabs:function(){return this.$store.state.search.tabs},selectedType:function(){return this.$route.query.type},words:function(){return this.$route.query.q}},methods:{switchTab:function(e){this.$router.push({name:\"search-index\",query:{q:this.words,type:e}})},loadMore:function(){var e=this;return(0,a.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(\"search/fetchMore\",{ctx:e,type:e.selectedType});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.$toast.error(t.t0);case 8:case\"end\":return t.stop()}},t,e,[[0,5]])}))()}}}},231:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"search-item-user\",props:{item:{required:!0,type:Object},inCommon:{required:!0,type:Boolean,default:!1}}}},232:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"search-item-bangumi\",props:{item:{required:!0,type:Object},inCommon:{required:!0,type:Boolean,default:!1}}}},233:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"search-item-video\",props:{item:{required:!0,type:Object},inCommon:{required:!0,type:Boolean,default:!1}}}},234:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"search-item-post\",props:{item:{required:!0,type:Object},inCommon:{type:Boolean,required:!0,default:!1}},methods:{imageFilter:function(e){return e.slice(0,3)}}}},235:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"search-item-role\",props:{item:{required:!0,type:Object},inCommon:{required:!0,type:Boolean,default:!1}}}},283:function(e,t,r){var i=r(284);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var a=r(4);e.exports.__inject__=function(e){a(\"e01fb158\",i,!0,e)}},284:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#search-index .search-panel{position:relative;margin:10px;background-color:#fff;-webkit-box-shadow:0 1px 6px rgba(32,33,36,.28);box-shadow:0 1px 6px rgba(32,33,36,.28);border-radius:8px}#search-index .search-panel .input-wrap{border-bottom-left-radius:0}#search-index .search-panel .search-btn{border-bottom-right-radius:0}#search-index .search-panel .tabs-panel{border-bottom-left-radius:8px;border-bottom-right-radius:8px;height:40px;line-height:28px;overflow:hidden;position:relative;font-size:12px}#search-index .search-panel .tabs-panel .tail{background:-webkit-gradient(linear,left top,right top,color-stop(0,hsla(0,0%,100%,0)),color-stop(100%,#fff));border-bottom-right-radius:8px;height:40px;position:absolute;pointer-events:none;right:0;top:0;width:24px;line-height:40px;text-align:center}#search-index .search-panel .tabs-panel .cards{white-space:nowrap;overflow-x:auto;-webkit-overflow-scrolling:touch;height:50px}#search-index .search-panel .tabs-panel .cards button{display:inline-block;line-height:40px;height:40px;margin:0;padding:0 16px;text-align:center}#search-index .search-panel .tabs-panel .cards button.active{border-bottom:2px solid #f25d8e;color:#f25d8e}#search-index .nomore{background-color:#fff}\",\"\"])},285:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(231),a=r.n(i);for(var o in i)\"default\"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var s=r(288);var n=function(e){var t;(t=r(286)).__inject__&&t.__inject__(e)},l=r(2)(a.a,s.a,!1,n,null,\"6fb58ee2\");t.default=l.exports},286:function(e,t,r){var i=r(287);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var a=r(4);e.exports.__inject__=function(e){a(\"979d4b60\",i,!0,e)}},287:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,'.search-item-user:after,.search-item-user:before{content:\"\";clear:both;display:table}@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-item-user{position:relative;padding:12px 0;border-bottom:1px solid #e5e9ef}.search-item-user .avatar{float:left;margin-right:12px;width:60px;height:60px;border-radius:30px;border:1px solid #e5e9ef;overflow:hidden}.search-item-user .avatar img{display:block;width:100%;height:100%}.search-item-user .intro{overflow:hidden}.search-item-user .intro .head{margin-bottom:5px}.search-item-user .intro .head .badge{display:inline-block;height:22px;padding:0 10px;border:1px solid #979797;color:#979797;text-align:center;line-height:21px;border-radius:100px;margin-right:12px;font-size:11px}.search-item-user .intro .head .nickname{color:#222;font-size:16px;margin-right:14px;font-weight:700;line-height:21px}.search-item-user .intro .signature{font-size:12px;color:#6d757a;line-height:16px;max-height:32px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',\"\"])},288:function(e,t,r){\"use strict\";var i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"div\",{staticClass:\"search-item-user\"},[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.user(e.item.zone))+' class=\"avatar\"><img'+e._ssrAttr(\"src\",e.$resize(e.item.avatar,{width:120}))+e._ssrAttr(\"alt\",e.item.nickname)+'></a><div class=\"intro\"><div class=\"head\">'+(e.inCommon?'<span class=\"badge\">用户</span>':\"\\x3c!----\\x3e\")+\"<a\"+e._ssrAttr(\"href\",e.$alias.user(e.item.zone))+' class=\"nickname\">'+e._ssrEscape(e._s(e.item.nickname))+\"</a></div><a\"+e._ssrAttr(\"href\",e.$alias.user(e.item.zone))+'><p class=\"signature\">'+e._ssrEscape(e._s(e.item.signature))+\"</p></a></div>\")])},staticRenderFns:[]};t.a=i},289:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(232),a=r.n(i);for(var o in i)\"default\"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var s=r(292);var n=function(e){var t;(t=r(290)).__inject__&&t.__inject__(e)},l=r(2)(a.a,s.a,!1,n,null,\"6fc3a663\");t.default=l.exports},290:function(e,t,r){var i=r(291);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var a=r(4);e.exports.__inject__=function(e){a(\"f59b9258\",i,!0,e)}},291:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,'.search-item-bangumi:after,.search-item-bangumi:before{content:\"\";clear:both;display:table}@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-item-bangumi{position:relative;padding:12px 0;border-bottom:1px solid #e5e9ef}.search-item-bangumi .avatar{float:left;margin-right:12px;width:60px;height:80px;border-radius:4px;overflow:hidden}.search-item-bangumi .avatar img{width:100%;height:100%}.search-item-bangumi .intro{overflow:hidden}.search-item-bangumi .intro .head{margin-bottom:5px}.search-item-bangumi .intro .head .badge{display:inline-block;height:22px;padding:0 10px;border:1px solid #979797;color:#979797;text-align:center;line-height:21px;border-radius:100px;margin-right:12px;font-size:11px}.search-item-bangumi .intro .head .name{color:#222;font-size:16px;margin-right:14px;font-weight:700;line-height:21px}.search-item-bangumi .intro .summary{font-size:12px;color:#6d757a;line-height:16px;max-height:32px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',\"\"])},292:function(e,t,r){\"use strict\";var i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"div\",{staticClass:\"search-item-bangumi\"},[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.id))+' class=\"avatar\"><img'+e._ssrAttr(\"src\",e.$resize(e.item.avatar,{width:120,height:160}))+e._ssrAttr(\"alt\",e.item.name)+'></a><div class=\"intro\"><div class=\"head\">'+(e.inCommon?'<span class=\"badge\">番剧</span>':\"\\x3c!----\\x3e\")+\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.id))+' class=\"name\">'+e._ssrEscape(e._s(e.item.name))+\"</a></div><a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.id))+'><p class=\"summary\">'+e._ssrEscape(e._s(e.item.summary))+\"</p></a></div>\")])},staticRenderFns:[]};t.a=i},293:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(233),a=r.n(i);for(var o in i)\"default\"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var s=r(296);var n=function(e){var t;(t=r(294)).__inject__&&t.__inject__(e)},l=r(2)(a.a,s.a,!1,n,null,\"6fd1bde4\");t.default=l.exports},294:function(e,t,r){var i=r(295);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var a=r(4);e.exports.__inject__=function(e){a(\"77ea5767\",i,!0,e)}},295:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,'.search-item-video:after,.search-item-video:before{content:\"\";clear:both;display:table}@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-item-video{position:relative;padding:12px 0;border-bottom:1px solid #e5e9ef}.search-item-video .in-common-avatar{float:left;margin-right:12px;width:60px;height:43px;border-radius:4px;overflow:hidden}.search-item-video .in-common-avatar img{width:100%;height:100%}.search-item-video .avatar{float:left;margin-right:12px;width:105px;height:65px;border-radius:4px;overflow:hidden}.search-item-video .avatar img{width:100%;height:100%}.search-item-video .intro{overflow:hidden}.search-item-video .intro .head{margin-bottom:5px}.search-item-video .intro .head .badge{display:inline-block;height:22px;padding:0 10px;border:1px solid #979797;color:#979797;text-align:center;line-height:21px;border-radius:100px;margin-right:12px;font-size:11px}.search-item-video .intro .head .name{color:#222;font-size:16px;margin-right:14px;font-weight:700;line-height:21px}.search-item-video .intro .summary{font-size:12px;color:#6d757a;line-height:16px;max-height:32px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',\"\"])},296:function(e,t,r){\"use strict\";var i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"div\",{staticClass:\"search-item-video\"},[e._ssrNode((e.inCommon?\"<a\"+e._ssrAttr(\"href\",e.$alias.video(e.item.id))+' class=\"in-common-avatar\"><img'+e._ssrAttr(\"src\",e.$resize(e.item.poster,{width:180,height:102}))+e._ssrAttr(\"alt\",e.item.name)+\"></a>\":\"<a\"+e._ssrAttr(\"href\",e.$alias.video(e.item.id))+' class=\"avatar\"><img'+e._ssrAttr(\"src\",e.$resize(e.item.poster,{width:120,height:86}))+e._ssrAttr(\"alt\",e.item.name)+\"></a>\")+'<div class=\"intro\"><div class=\"head\">'+(e.inCommon?'<span class=\"badge\">视频</span>':\"\\x3c!----\\x3e\")+\"<a\"+e._ssrAttr(\"href\",e.$alias.video(e.item.id))+' class=\"name\">'+e._ssrEscape(e._s(e.item.name))+\"</a></div><a\"+e._ssrAttr(\"href\",e.$alias.video(e.item.id))+'><p class=\"summary\">'+e._ssrEscape(e._s(e.item.summary))+\"</p></a></div>\")])},staticRenderFns:[]};t.a=i},297:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(234),a=r.n(i);for(var o in i)\"default\"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var s=r(300);var n=function(e){var t;(t=r(298)).__inject__&&t.__inject__(e)},l=r(2)(a.a,s.a,!1,n,null,\"6fdfd565\");t.default=l.exports},298:function(e,t,r){var i=r(299);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var a=r(4);e.exports.__inject__=function(e){a(\"2cb78235\",i,!0,e)}},299:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,'.search-item-post:after,.search-item-post:before{content:\"\";clear:both;display:table}@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-item-post{position:relative;padding:12px 0;border-bottom:1px solid #e5e9ef}.search-item-post .head{margin-bottom:5px}.search-item-post .head .badge{display:inline-block;height:22px;padding:0 10px;border:1px solid #979797;color:#979797;text-align:center;line-height:21px;border-radius:100px;margin-right:12px;font-size:11px}.search-item-post .head .title{color:#222;font-size:16px;margin-right:14px;font-weight:700;line-height:21px}.search-item-post .desc{font-size:12px;color:#6d757a;margin-bottom:5px;line-height:16px;max-height:32px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.search-item-post .images .image-full{height:190px;width:100%;background-color:#eee}.search-item-post .images .image-list img{width:32%;height:auto}.search-item-post .images .image-list img:not(:last-child){margin-right:2%}',\"\"])},300:function(e,t,r){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{staticClass:\"search-item-post\"},[e._ssrNode('<div class=\"head\">'+(e.inCommon?'<span class=\"badge\">帖子</span>':\"\\x3c!----\\x3e\")+\"<a\"+e._ssrAttr(\"href\",e.$alias.post(e.item.id))+' class=\"title\">'+e._ssrEscape(e._s(e.item.title))+\"</a></div>\"),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(e.item.id))+\">\",\"</a>\",[e._ssrNode('<div class=\"desc\">'+e._ssrEscape(e._s(e.item.desc))+\"</div>\"),e.item.images.length?e._ssrNode('<div class=\"images clearfix\">',\"</div>\",[1===e.item.images.length?r(\"v-img\",{staticClass:\"image-full bg\",attrs:{src:e.item.images[0].url,height:\"190\",mode:\"2\",tag:\"div\"}}):r(\"div\",{staticClass:\"image-list\"},e._l(e.imageFilter(e.item.images),function(e,t){return r(\"v-img\",{key:t,attrs:{src:e.url,width:\"110\"}})}))],1):e._e()],2)],2)},staticRenderFns:[]};t.a=i},301:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=r(235),a=r.n(i);for(var o in i)\"default\"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var s=r(304);var n=function(e){var t;(t=r(302)).__inject__&&t.__inject__(e)},l=r(2)(a.a,s.a,!1,n,null,\"6fedece6\");t.default=l.exports},302:function(e,t,r){var i=r(303);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var a=r(4);e.exports.__inject__=function(e){a(\"79fde282\",i,!0,e)}},303:function(e,t,r){(e.exports=r(3)(!1)).push([e.i,'.search-item-role:after,.search-item-role:before{content:\"\";clear:both;display:table}@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-item-role{position:relative;padding:12px 0;border-bottom:1px solid #e5e9ef}.search-item-role .avatar{float:left;margin-right:12px;width:60px;height:60px;border-radius:30px;border:1px solid #e5e9ef;overflow:hidden}.search-item-role .avatar img{display:block;width:100%;height:100%}.search-item-role .intro{overflow:hidden}.search-item-role .intro .head{margin-bottom:5px}.search-item-role .intro .head .badge{display:inline-block;height:22px;padding:0 10px;border:1px solid #979797;color:#979797;text-align:center;line-height:21px;border-radius:100px;margin-right:12px;font-size:11px}.search-item-role .intro .head .name{color:#222;font-size:16px;margin-right:14px;font-weight:700;line-height:21px}.search-item-role .intro .intro{font-size:12px;color:#6d757a;line-height:16px;max-height:32px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',\"\"])},304:function(e,t,r){\"use strict\";var i={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)(\"div\",{staticClass:\"search-item-role\"},[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.cartoonRole(e.item.id))+' class=\"avatar\"><img'+e._ssrAttr(\"src\",e.$resize(e.item.avatar,{width:120}))+e._ssrAttr(\"alt\",e.item.name)+'></a><div class=\"intro\"><div class=\"head\">'+(e.inCommon?'<span class=\"badge\">偶像</span>':\"\\x3c!----\\x3e\")+\"<a\"+e._ssrAttr(\"href\",e.$alias.cartoonRole(e.item.id))+' class=\"name\">'+e._ssrEscape(e._s(e.item.name))+\"</a></div><a\"+e._ssrAttr(\"href\",e.$alias.cartoonRole(e.item.id))+'><p class=\"intro\">'+e._ssrEscape(e._s(e.item.intro))+\"</p></a></div>\")])},staticRenderFns:[]};t.a=i},305:function(e,t,r){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{attrs:{id:\"search-index\"}},[e._ssrNode('<div class=\"search-panel\">',\"</div>\",[r(\"v-search\",{attrs:{type:e.selectedType},model:{value:e.words,callback:function(t){e.words=t},expression:\"words\"}}),e._ssrNode('<div class=\"tabs-panel\"><div class=\"cards\">'+e._ssrList(e.tabs,function(t,r){return\"<button\"+e._ssrClass(null,{active:e.selectedType==r})+\">\"+e._ssrEscape(e._s(t))+\"</button>\"})+'</div><div class=\"tail\"></div></div>')],2),e._l(e.tabs,function(t,i){return i==e.selectedType?e._ssrNode('<div class=\"container\">',\"</div>\",e._l(e.list,function(t){return r(\"Flow\"+t.type,{key:t.type+\"-\"+t.id,tag:\"component\",attrs:{item:t,\"in-common\":t.type!=e.selectedType}})})):e._e()}),r(\"more-btn\",{attrs:{\"no-more\":e.noMore,loading:e.loading,length:e.list.length},on:{fetch:e.loadMore}})],2)},staticRenderFns:[]};t.a=i}};",
    "4.server-bundle.js": "exports.ids=[4],exports.modules={173:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(265),o=n.n(r);for(var i in r)\"default\"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var a=n(408);var s=function(t){var e;(e=n(406)).__inject__&&e.__inject__(t)},m=n(2)(o.a,a.a,!1,s,null,\"6b30217c\");e.default=m.exports},184:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=s(n(0)),o=s(n(1)),i=s(n(206)),a=s(n(210));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"v-comment-main\",props:{id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:function(t){return~[\"post\",\"video\",\"image\"].indexOf(t)}},onlySeeMaster:{type:Boolean,default:!1},emptyText:{type:String,default:\"暂无评论，快来抢沙发吧╮(￣▽￣)╭！\"},masterId:{required:!0,type:Number},bottomAppendComment:{type:Boolean,default:!0}},components:{CommentCreateForm:i.default,CommentItem:a.default},computed:{store:function(){return this.$store.state.comment},list:function(){return this.store.list},noMore:function(){return this.store.noMore},total:function(){return this.store.total},focusComment:function(){var t=this;return this.focusCommentId?this.list.filter(function(e){return e.id===t.focusCommentId})[0]:null},currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0}},data:function(){return{loadingMainComment:!1,focusCommentId:0,openFocusCommentDrawer:!1,loadingSubComment:!1,replyForm:{id:\"\",content:\"\",targetUserId:0,targetUserName:\"\",open:!1,replying:!1,liking:!1},openCreateCommentDrawer:!1}},methods:{loadMoreMainComment:function(){var t=this;return(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingMainComment){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loadingMainComment=!0,e.prev=3,e.next=6,t.$store.dispatch(\"comment/getMainComments\",{ctx:t,type:t.type,id:t.id,onlySeeMaster:t.onlySeeMaster?1:0});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loadingMainComment=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()},loadMoreSubComment:function(){var t=this;return(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingSubComment){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loadingSubComment=!0,e.prev=3,e.next=6,t.$store.dispatch(\"comment/getSubComments\",{ctx:t,type:t.type,parentId:t.focusCommentId});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loadingSubComment=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()},commentToComment:function(t){this.handleSubCommentReply({id:t.parent_id,targetUserId:t.from_user_id,targetUserName:t.from_user_name})},handleCommentBtnClick:function(){this.handleSubCommentReply({id:this.focusComment.parent_id,targetUserId:this.focusComment.from_user_id,targetUserName:this.focusComment.from_user_name})},handleSubCommentReply:function(t){var e=t.id,n=t.targetUserId,r=t.targetUserName;this.currentUserId?(this.replyForm.id=e,this.replyForm.targetUserId=n,this.replyForm.targetUserName=r,this.replyForm.open=!0,setTimeout(function(){document.body.scrollTop=0},200)):this.$channel.$emit(\"sign-in\")},toggleFocusCommentLike:function(){var t=this;return(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.replyForm.liking){e.next=5;break}return e.abrupt(\"return\");case 5:return t.replyForm.liking=!0,e.prev=6,e.next=9,t.$store.dispatch(\"comment/toggleLikeMainComment\",{ctx:t,type:t.type,id:t.focusCommentId});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return e.prev=13,t.replyForm.liking=!1,e.finish(13);case 16:case\"end\":return e.stop()}},e,t,[[6,11,13,16]])}))()},handleReplyDrawerClose:function(){document.getElementById(\"reply-comment-textarea\").style.display=\"none\"},handleReplySubmit:function(){var t=this;return(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(t.replyForm.content){e.next=5;break}return e.abrupt(\"return\");case 5:if(!t.replyForm.replying){e.next=7;break}return e.abrupt(\"return\");case 7:return t.replyForm.replying=!0,t.$toast.loading(\"提交中...\"),e.prev=9,e.next=12,t.$store.dispatch(\"comment/createSubComment\",{ctx:t,id:t.replyForm.id,type:t.type,content:t.replyForm.content,targetUserId:t.replyForm.targetUserId});case 12:t.replyForm.open=!1,t.replyForm.content=\"\",t.$toast.success(\"回复成功\"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),t.$toast.error(e.t0);case 20:return e.prev=20,t.replyForm.replying=!1,t.handleReplyDrawerClose(),e.finish(20);case 24:case\"end\":return e.stop()}},e,t,[[9,17,20,24]])}))()},writeComment:function(){this.$channel.$emit(\"open-create-comment-drawer\")},closeCommentDrawer:function(){this.openCreateCommentDrawer=!1}},mounted:function(){var t=this;this.$channel.$on(\"load-all-sub-comment\",function(e){var n=e.id;t.focusCommentId=n,t.openFocusCommentDrawer=!0}),this.$channel.$on(\"open-create-comment-drawer\",function(){t.currentUserId?t.openCreateCommentDrawer=!0:t.$channel.$emit(\"sign-in\")}),this.$channel.$on(\"reply-comment\",function(e){var n=e.id,r=e.targetUserId,o=e.targetUserName;t.handleSubCommentReply({id:n,targetUserId:r,targetUserName:o})}),document.getElementById(\"comment-wrap\").addEventListener(\"click\",function(t){if(/reply-btn/.test(t.target.className)){var e=document.getElementById(\"reply-comment-textarea\");e.style.display=\"block\",e.focus()}})}}},185:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(0)),o=i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"comment-create-form\",props:{type:{required:!0,type:String},id:{required:!0,type:Number}},computed:{isGuest:function(){return!this.$store.state.login},formatContent:function(){for(var t=this.content;null!==t.match(\"\\n\\n\\n\");)t=t.replace(/\\n\\n\\n/g,\"\\n\\n\");var e=[];return(t=t.split(\"\\n\")).forEach(function(t){e.push(t?\"<p>\"+t+\"</p>\":\"<p><br/></p>\")}),e.join(\"\")},submitting:function(){return this.$store.state.comment.submitting}},data:function(){return{content:\"\"}},methods:{submit:function(){var t=this;return(0,o.default)(r.default.mark(function e(){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isGuest){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(t.formatContent){e.next=6;break}return t.$emit(\"close\"),e.abrupt(\"return\");case 6:if(!t.submitting){e.next=8;break}return e.abrupt(\"return\");case 8:return t.$store.commit(\"comment/SET_SUBMITTING\",{result:!0}),e.prev=9,e.next=12,t.$store.dispatch(\"comment/createMainComment\",{content:t.formatContent,images:[],type:t.type,id:t.id,ctx:t});case 12:n=e.sent,t.$toast.success(\"评论成功\"),t.$emit(\"close\"),t.content=\"\",setTimeout(function(){var e=document.getElementById(\"comment-\"+n.id);e&&t.$scrollToY(t.$utils.getOffsetTop(e)-100,600)},400),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(9),console.log(e.t0),t.$toast.error(e.t0);case 23:return e.prev=23,t.$store.commit(\"comment/SET_SUBMITTING\",{result:!1}),e.finish(23);case 26:case\"end\":return e.stop()}},e,t,[[9,19,23,26]])}))()},handleAreaFocus:function(){document.body.scrollTop=0}}}},186:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=a(n(0)),o=a(n(1)),i=a(n(193));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"comment-comment-item\",props:{comment:{required:!0,type:Object},masterId:{required:!0,type:Number},type:{required:!0,type:String}},components:{SubCommentList:i.default},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0},isMine:function(){return this.currentUserId===this.comment.from_user_id},canDelete:function(){return this.isMine||this.currentUserId===this.masterId},actions:function(){var t=[];return this.canDelete&&t.push({name:\"删除\",method:this.deleteComment}),t.push({name:this.comment.liked?\"取消赞\":\"点赞\",method:this.toggleLike}),t}},data:function(){return{deleting:!1,liking:!1,showControlPanel:!1}},methods:{toggleLike:function(){var t=this;return(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.liking){e.next=5;break}return e.abrupt(\"return\");case 5:return t.liking=!0,e.prev=6,e.next=9,t.$store.dispatch(\"comment/toggleLikeMainComment\",{ctx:t,type:t.type,id:t.comment.id});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return e.prev=13,t.liking=!1,e.finish(13);case 16:case\"end\":return e.stop()}},e,t,[[6,11,13,16]])}))()},deleteComment:function(){var t=this;this.deleting||(this.deleting=!0,this.$confirm(\"删除后无法找回, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.$store.dispatch(\"comment/deleteMainComment\",{ctx:t,type:t.type,id:t.comment.id})}).catch(function(e){t.deleting=!1,\"cancel\"!==e&&t.$toast.error(e)}))},handleCommentBtnClick:function(){this.$channel.$emit(\"reply-comment\",{id:this.comment.id,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})}}}},187:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,o=n(215),i=(r=o)&&r.__esModule?r:{default:r};e.default={name:\"post-sub-comment-list\",props:{parentComment:{required:!0,type:Object},type:{required:!0,type:String}},components:{SubCommentItem:i.default},computed:{comments:function(){return this.parentComment.comments},authorId:function(){return this.parentComment.from_user_id},hasComment:function(){return!!this.comments.list.length},filterComments:function(){var t=this.comments,e=t.list,n=e.slice(0,5);if(e.every(function(e){return e.id<=t.maxId}))return n;var r=n.map(function(t){return t.id});return n.concat(e.filter(function(e){return e.id>t.maxId&&-1===r.indexOf(e.id)}))}},methods:{loadAllComment:function(){this.$channel.$emit(\"load-all-sub-comment\",{id:this.parentComment.id})}}}},188:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"sub-comment-item\",props:{comment:{required:!0,type:Object},parentUserId:{required:!0,type:Number},parentCommentId:{required:!0,type:Number},type:{required:!0,type:String}},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0},isMine:function(){return this.currentUserId===this.comment.from_user_id},canDelete:function(){return this.isMine||this.currentUserId===this.parentUserId}},data:function(){return{deleting:!1}},methods:{handleSubCommentClick:function(){this.isMine?this.deleteComment():this.currentUserId&&this.$channel.$emit(\"reply-comment\",{id:this.parentCommentId,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})},deleteComment:function(){var t=this;this.canDelete&&(this.deleting||(this.deleting=!0,this.$confirm(\"删除后无法找回, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.$store.dispatch(\"comment/deleteSubComment\",{ctx:t,type:t.type,id:t.comment.id,parentId:t.comment.parent_id})}).catch(function(e){t.deleting=!1,\"cancel\"!==e&&t.$toast.error(e)})))}}}},193:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(187),o=n.n(r);for(var i in r)\"default\"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var a=n(219);var s=function(t){var e;(e=n(213)).__inject__&&e.__inject__(t)},m=n(2)(o.a,a.a,!1,s,null,\"2bbb59ee\");e.default=m.exports},203:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(184),o=n.n(r);for(var i in r)\"default\"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var a=n(221);var s=function(t){var e;(e=n(204)).__inject__&&e.__inject__(t)},m=n(2)(o.a,a.a,!1,s,null,\"71b0fa1c\");e.default=m.exports},204:function(t,e,n){var r=n(205);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var o=n(4);t.exports.__inject__=function(t){o(\"773349ef\",r,!0,t)}},205:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#comment-wrap .sub-title{margin-top:15px;margin-bottom:15px}#comment-wrap .sub-title .write-btn{float:right;font-weight:700;font-size:13px}#comment-wrap #comment-list-footer{margin-left:-15px;margin-right:-15px}#comment-wrap .focus-comment-drawer .reply .user{padding-top:5px}#comment-wrap .focus-comment-drawer .reply .user .avatar{float:left;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}#comment-wrap .focus-comment-drawer .reply .user .avatar img{display:block;width:100%;height:100%}#comment-wrap .focus-comment-drawer .reply .user .summary{overflow:hidden}#comment-wrap .focus-comment-drawer .reply .user .summary .nickname{font-size:14px;color:#333}#comment-wrap .focus-comment-drawer .reply .user .summary .info{line-height:16px;font-size:12px;color:#999}#comment-wrap .focus-comment-drawer .reply .user .summary .info span{margin-right:5px}#comment-wrap .focus-comment-drawer .reply .content{font-size:16px;line-height:24px;padding-top:16px;margin-bottom:16px;color:#000}#comment-wrap .focus-comment-drawer .reply .content .image-area{margin:16px 0}#comment-wrap .focus-comment-drawer .reply .content .image-area img{width:100%;height:auto}#comment-wrap .focus-comment-drawer .reply .social{margin-bottom:15px;font-size:12px}#comment-wrap .focus-comment-drawer .reply .social .reply-liked-btn{color:#0381aa}#comment-wrap .focus-comment-drawer .reply .social button{color:#666;margin-left:3px}#comment-wrap .focus-comment-drawer .total{height:40px;line-height:40px;color:#000;font-size:16px}#comment-wrap .focus-comment-drawer .comments li{padding:17px 0 13px;position:relative}#comment-wrap .focus-comment-drawer .comments li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#comment-wrap .focus-comment-drawer .comments li .from-user .avatar{float:left;display:block;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}#comment-wrap .focus-comment-drawer .comments li .from-user .avatar img{display:block;width:100%;height:100%}#comment-wrap .focus-comment-drawer .comments li .from-user .summary{overflow:hidden}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .users{font-size:14px;margin-bottom:6px;margin-top:2px;line-height:14px}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .users .nickname{color:#0381aa}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .info{font-size:12px;line-height:12px;color:#999}#comment-wrap .focus-comment-drawer .comments li .main{margin-left:45px;padding-top:10px}#comment-wrap .focus-comment-drawer .comments li .main .content{font-size:14px;line-height:21px;word-break:break-all}#comment-wrap .reply-comment-drawer-wrap #reply-comment-textarea{position:fixed;left:0;top:60px;width:100%;height:250px;background-color:transparent;font-size:16px;line-height:24px;color:#000;font-weight:400;z-index:101;padding-left:15px;padding-right:15px;display:none;opacity:0}#comment-wrap .reply-comment-drawer-wrap #reply-comment-textarea.fade-in{opacity:1;-webkit-transition-delay:.4s;-o-transition-delay:.4s;transition-delay:.4s}#comment-wrap .append-comment-btn{width:100%;padding:15px 0;font-size:13px}#comment-wrap .no-content{text-align:center;margin-top:30px;margin-bottom:30px;font-size:12px;color:#99a2aa}',\"\"])},206:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(185),o=n.n(r);for(var i in r)\"default\"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var a=n(209);var s=function(t){var e;(e=n(207)).__inject__&&e.__inject__(t)},m=n(2)(o.a,a.a,!1,s,null,\"1d31a883\");e.default=m.exports},207:function(t,e,n){var r=n(208);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var o=n(4);t.exports.__inject__=function(t){o(\"52eb9288\",r,!0,t)}},208:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.comment-create-form .content{font-size:16px;line-height:24px;color:#000;font-weight:400;height:250px;margin-bottom:5px}.comment-create-form .submit-btn{margin-top:15px;width:100%}\",\"\"])},209:function(t,e,n){\"use strict\";var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"comment-create-form\"},[this._ssrNode('<textarea placeholder=\"来吧，尽情的（在1000字以内）发挥吧\" maxlength=\"1000\" class=\"content\"></textarea>'),e(\"el-button\",{staticClass:\"submit-btn\",attrs:{type:\"primary\",loading:this.submitting},on:{click:this.submit}},[this._v(\"发布\")])],2)},staticRenderFns:[]};e.a=r},210:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(186),o=n.n(r);for(var i in r)\"default\"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var a=n(220);var s=function(t){var e;(e=n(211)).__inject__&&e.__inject__(t)},m=n(2)(o.a,a.a,!1,s,null,\"8f3d9b14\");e.default=m.exports},211:function(t,e,n){var r=n(212);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var o=n(4);t.exports.__inject__=function(t){o(\"29cb5539\",r,!0,t)}},212:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.comment-item{position:relative;margin-top:15px;padding-bottom:15px}.comment-item:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}.comment-item .avatar{float:left;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}.comment-item .avatar img{display:block;width:100%;height:100%}.comment-item .content{overflow:hidden}.comment-item .content .header .tools-btn{float:right;line-height:16px;font-size:12px;color:#535353;margin-top:9px;margin-left:4px}.comment-item .content .header .user .nickname{font-size:14px;line-height:21px;display:block;color:#333}.comment-item .content .header .user .info{color:#999;line-height:14px;font-size:12px}.comment-item .content .header .user .info span{margin-right:5px}.comment-item .content .main{font-size:16px;margin:10px 0 4px;color:#333;line-height:24px;min-height:65px}.comment-item .content .main .image-area{margin:10px 0}.comment-item .content .main .image-area img{width:100%;height:auto}.comment-item .content .footer .social{margin-top:15px;font-size:12px}.comment-item .content .footer .social .reply-liked-btn{color:#0381aa}.comment-item .content .footer .social button{color:#666;margin-left:3px}',\"\"])},213:function(t,e,n){var r=n(214);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var o=n(4);t.exports.__inject__=function(t){o(\"1aa8e4ee\",r,!0,t)}},214:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sub-comment-list-wrap{position:relative;background-color:#f7f8fa;border-radius:5px}.sub-comment-list-wrap .sub-comment-list{padding:7px 0 7.5px;margin-top:5px}.sub-comment-list-wrap .load-all-comment{position:relative;margin-top:6px;font-size:12px;margin-bottom:0;padding:0 10px;color:#999;width:100%;text-align:left}.sub-comment-list-wrap .load-all-comment:after{content:\"\";position:absolute;top:50%;border:3px solid #f5f5f5;border-left-color:#999;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);margin-left:4px}',\"\"])},215:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(188),o=n.n(r);for(var i in r)\"default\"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var a=n(218);var s=function(t){var e;(e=n(216)).__inject__&&e.__inject__(t)},m=n(2)(o.a,a.a,!1,s,null,\"3fc64a04\");e.default=m.exports},216:function(t,e,n){var r=n(217);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var o=n(4);t.exports.__inject__=function(t){o(\"c05931bc\",r,!0,t)}},217:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sub-comment-item{padding:2px 10px;font-size:14px;line-height:18px}.sub-comment-item .nickname{color:#0381aa}.sub-comment-item .comment-content{margin-right:6px;word-break:break-all}\",\"\"])},218:function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"div\",{staticClass:\"sub-comment-item\"},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"nickname\">'+t._ssrEscape(t._s(t.comment.from_user_name))+\"</a>\"+(t.comment.to_user_zone?\"\\n    回复\\n    <a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.to_user_zone))+' class=\"nickname\">'+t._ssrEscape(t._s(t.comment.to_user_name))+\"</a>\":\"\\x3c!----\\x3e\")+'\\n  :\\n  <span class=\"reply-btn comment-content\">'+t._ssrEscape(t._s(t.comment.content))+\"</span>\")])},staticRenderFns:[]};e.a=r},219:function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"sub-comment-list-wrap\"},[t.hasComment?t._ssrNode('<div class=\"sub-comment-list\">',\"</div>\",[t._l(t.filterComments,function(e){return n(\"sub-comment-item\",{key:e.id,attrs:{comment:e,\"parent-user-id\":t.authorId,\"parent-comment-id\":t.parentComment.id,type:t.type}})}),t._ssrNode(!t.comments.noMore||t.comments.list.length>5?'<button class=\"load-all-comment\">'+t._ssrEscape(\"\\n      查看全部\"+t._s(t.comments.total)+\"条评论\\n    \")+\"</button>\":\"\\x3c!----\\x3e\")],2):t._e()])},staticRenderFns:[]};e.a=r},220:function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"comment-item\",attrs:{id:\"comment-\"+t.comment.id}},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"avatar\">',\"</a>\",[n(\"v-img\",{attrs:{src:t.comment.from_user_avatar,width:80,height:80}})],1),t._ssrNode('<div class=\"content\">',\"</div>\",[t._ssrNode('<div class=\"header\">',\"</div>\",[t._ssrNode('<button class=\"tools-btn\">···</button>'),t._ssrNode('<div class=\"user\">',\"</div>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"nickname oneline\">'+t._ssrEscape(t._s(t.comment.from_user_name))+\"</a>\"),t._ssrNode('<div class=\"info\">',\"</div>\",[t._ssrNode(\"<span>\"+t._ssrEscape(\"第\"+t._s(t.comment.floor_count-1)+\"楼\")+\"</span><span>·</span>\"),n(\"v-time\",{model:{value:t.comment.created_at,callback:function(e){t.$set(t.comment,\"created_at\",e)},expression:\"comment.created_at\"}})],2)],2)],2),t._ssrNode('<div class=\"main\">'+t._s(t.comment.content)+\"</div>\"),t._ssrNode('<div class=\"footer\">',\"</div>\",[n(\"sub-comment-list\",{attrs:{\"parent-comment\":t.comment,type:t.type}}),t._ssrNode('<div class=\"social\"><button'+t._ssrClass(null,[t.comment.liked?\"reply-liked-btn\":\"reply-like-btn\"])+'><i class=\"iconfont icon-icon_good\"></i>'+t._ssrEscape(\"\\n          \"+t._s(t.comment.liked?\"已赞\":\"赞\")+\"\\n          \")+(t.comment.like_count?\"<span>\"+t._ssrEscape(\"(\"+t._s(t.comment.like_count)+\")\")+\"</span>\":\"\\x3c!----\\x3e\")+'</button><button class=\"reply-btn fr\">\\n          回复\\n        </button></div>')],2),n(\"mt-actionsheet\",{attrs:{actions:t.actions},model:{value:t.showControlPanel,callback:function(e){t.showControlPanel=e},expression:\"showControlPanel\"}})],2)])},staticRenderFns:[]};e.a=r},221:function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{attrs:{id:\"comment-wrap\"}},[t._t(\"header\",[n(\"div\",{staticClass:\"hr\"}),n(\"h3\",{staticClass:\"sub-title\"},[t._v(\"\\n      评论\"+t._s(t.total?\"(\"+t.total+\")\":\"\")+\"\\n      \"),n(\"button\",{staticClass:\"write-btn\",on:{click:t.writeComment}},[t._v(\"写评论\")])])]),t.list.length?[t._ssrNode('<div id=\"comment-list-wrap\">',\"</div>\",t._l(t.list,function(e){return t._ssrNode('<div class=\"comment-item-wrap\">',\"</div>\",[t._t(\"comment-item\",[n(\"comment-item\",{attrs:{type:t.type,comment:e,\"master-id\":t.masterId}})],{comment:e,reply:t.handleSubCommentReply})],2)})),t._ssrNode('<div id=\"comment-list-footer\">',\"</div>\",[t._ssrNode(t.bottomAppendComment?'<button class=\"append-comment-btn\">写评论</button>':\"\\x3c!----\\x3e\"),n(\"more-btn\",{attrs:{\"no-more\":t.noMore,loading:t.loadingMainComment},on:{fetch:t.loadMoreMainComment}})],2)]:t.emptyText?t._ssrNode('<p class=\"no-content\">'+t._ssrEscape(t._s(t.emptyText))+\"</p>\"):t._e(),n(\"v-drawer\",{staticClass:\"focus-comment-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":\"评论列表\"+(t.focusComment&&t.focusComment.floor_count?\" - \"+t.focusComment.floor_count+\" 楼\":\"\"),backdrop:!1},model:{value:t.openFocusCommentDrawer,callback:function(e){t.openFocusCommentDrawer=e},expression:\"openFocusCommentDrawer\"}},[t.focusComment?[n(\"div\",{staticClass:\"container\"},[n(\"div\",{staticClass:\"reply\"},[n(\"div\",{staticClass:\"user clearfix\"},[n(\"a\",{staticClass:\"avatar\",attrs:{href:t.$alias.user(t.focusComment.from_user_zone)}},[n(\"img\",{attrs:{src:t.$resize(t.focusComment.from_user_avatar,{width:70})}})]),n(\"div\",{staticClass:\"summary\"},[n(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(t.focusComment.from_user_zone)},domProps:{textContent:t._s(t.focusComment.from_user_name)}}),n(\"div\",{staticClass:\"info\"},[n(\"v-time\",{model:{value:t.focusComment.created_at,callback:function(e){t.$set(t.focusComment,\"created_at\",e)},expression:\"focusComment.created_at\"}})],1)])]),n(\"div\",{staticClass:\"content\"},[n(\"div\",{staticClass:\"text-area\",domProps:{innerHTML:t._s(t.focusComment.content)}}),n(\"div\",{staticClass:\"image-area\"},t._l(t.focusComment.images,function(e,r){return n(\"div\",{key:r,staticClass:\"image-package\",on:{click:function(e){t.$previewImages(t.focusComment.images,r)}}},[n(\"v-img\",{staticClass:\"image\",attrs:{src:e.url,width:\"150\",mode:\"2\"}})],1)}))]),n(\"div\",{staticClass:\"social\"},[n(\"button\",{class:[t.focusComment.liked?\"reply-liked-btn\":\"reply-like-btn\"],on:{click:t.toggleFocusCommentLike}},[n(\"i\",{staticClass:\"iconfont icon-icon_good\"}),t._v(\"\\n              \"+t._s(t.focusComment.liked?\"已赞\":\"赞\")+\"\\n              \"),t.focusComment.like_count?n(\"span\",[t._v(\"(\"+t._s(t.focusComment.like_count)+\")\")]):t._e()]),n(\"button\",{staticClass:\"reply-btn fr\",on:{click:t.handleCommentBtnClick}},[t._v(\"\\n              回复\\n            \")])])]),n(\"div\",{staticClass:\"hr\"}),n(\"p\",{staticClass:\"total\"},[t._v(t._s(t.focusComment.comments.total)+\"条回复\")]),n(\"ul\",{staticClass:\"comments\"},t._l(t.focusComment.comments.list,function(e){return n(\"li\",{key:e.id},[n(\"div\",{staticClass:\"from-user\"},[n(\"a\",{staticClass:\"avatar\",attrs:{href:t.$alias.user(e.from_user_zone)}},[n(\"img\",{attrs:{src:t.$resize(e.from_user_avatar,{width:70})}})]),n(\"div\",{staticClass:\"summary\"},[n(\"div\",{staticClass:\"users oneline\"},[n(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(e.from_user_zone)},domProps:{textContent:t._s(e.from_user_name)}}),e.to_user_zone?[t._v(\"\\n                    回复\\n                    \"),n(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(e.to_user_zone)},domProps:{textContent:t._s(e.to_user_name)}})]:t._e(),t._v(\"\\n                  :\\n                \")],2),n(\"div\",{staticClass:\"info\"},[n(\"v-time\",{model:{value:e.created_at,callback:function(n){t.$set(e,\"created_at\",n)},expression:\"item.created_at\"}})],1)])]),n(\"div\",{staticClass:\"main\"},[n(\"div\",{staticClass:\"content reply-btn\",domProps:{textContent:t._s(e.content)},on:{click:function(n){t.commentToComment(e)}}})])])}))]),n(\"more-btn\",{attrs:{\"no-more\":t.focusComment.comments.noMore,loading:t.loadingSubComment},on:{fetch:t.loadMoreSubComment}})]:t._e()],2),t._ssrNode('<div class=\"reply-comment-drawer-wrap\">',\"</div>\",[n(\"v-drawer\",{staticClass:\"reply-comment-drawer\",attrs:{from:\"right\",size:\"100%\",\"header-text\":t.currentUserId===t.replyForm.targetUserId?\"回复\":\"回复：\"+t.replyForm.targetUserName,backdrop:!1,submitText:\"发布\"},on:{cancel:t.handleReplyDrawerClose,submit:t.handleReplySubmit},model:{value:t.replyForm.open,callback:function(e){t.$set(t.replyForm,\"open\",e)},expression:\"replyForm.open\"}}),t._ssrNode('<textarea id=\"reply-comment-textarea\" placeholder=\"100字以内任意发挥\" maxlength=\"100\"'+t._ssrClass(null,{\"fade-in\":t.replyForm.open})+\"></textarea>\")],2),n(\"v-drawer\",{attrs:{from:\"right\",size:\"100%\",\"header-text\":\"发表评论\"},model:{value:t.openCreateCommentDrawer,callback:function(e){t.openCreateCommentDrawer=e},expression:\"openCreateCommentDrawer\"}},[t.openCreateCommentDrawer?n(\"div\",{staticClass:\"container\"},[t._t(\"reply-form\",[t.openCreateCommentDrawer?n(\"comment-create-form\",{attrs:{id:t.id,type:t.type},on:{close:t.closeCommentDrawer}}):t._e()],{close:t.closeCommentDrawer})],2):t._e()])],2)},staticRenderFns:[]};e.a=r},265:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=m(n(0)),o=m(n(35)),i=m(n(1)),a=m(n(38)),s=m(n(203));function m(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"video-show\",head:function(){var t=this.bangumi,e=this.video;if(t&&e)return{title:t.name+\" : 第\"+e.part+\"话 \"+e.name+\" - 视频\",meta:[{hid:\"description\",name:\"description\",content:t.summary},{hid:\"keywords\",name:\"keywords\",content:t.name+\"，第\"+e.part+\"话，\"+e.name+\"，在线观看 动画片大全 动漫在线播放 日本动漫 好看的动漫 二次元网站\"}]}},asyncData:function(t){var e=this,n=t.route,a=t.store,s=t.ctx;return(0,i.default)(r.default.mark(function t(){var i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.params.id,t.next=3,o.default.all([a.dispatch(\"video/getShow\",{id:i,ctx:s}),a.dispatch(\"comment/getMainComments\",{ctx:s,id:i,type:\"video\",seeReplyId:n.query.reply})]);case 3:case\"end\":return t.stop()}},t,e)}))()},components:{CommentMain:s.default},computed:{id:function(){return parseInt(this.$route.params.id,10)},isGuest:function(){return!this.$store.state.login},videoPackage:function(){return this.$store.state.video},video:function(){return this.videoPackage.info},list:function(){return this.videoPackage.list?this.videoPackage.list.videos:[]},bangumi:function(){return this.videoPackage.bangumi},season:function(){return this.videoPackage.season},showMoreBtn:function(){return this.take<this.videos.length},videos:function(){if(!this.season)return this.list;var t=[];return this.list.forEach(function(e){t=t.concat(e.data)}),t},sortVideos:function(){var t=(this.page-1)*this.take;return this.showAll?this.videos:this.videos.slice(t,t+this.take)},useOtherSiteSource:function(){if(!this.bangumi)return!1;if(this.bangumi.others_site_video)return!0;var t=this.video.resource;return!t||!(t.video[720]&&t.video[720].src||t.video[1080]&&t.video[1080].src)},videoSrc:function(){var t=this.video;return t?this.useOtherSiteSource?t.url:t.resource&&(t.resource.video[720]&&t.resource.video[720].src||t.resource.video[1080]&&t.resource.video[1080].src)||t.url:\"\"},isFlv:function(){return!this.useOtherSiteSource&&(!!this.videoSrc&&\"flv\"===this.videoSrc.split(\"?\")[0].split(\".\").pop().toLowerCase())},nextPartVideo:function(){var t=this,e=0;return this.videos.forEach(function(n,r){n.id===t.id&&r!==t.videos.length-1&&(e=t.videos[r+1].id)}),e?this.$alias.video(e):\"\"}},data:function(){return{maxWidth:0,take:4,part:0,page:0,showAll:!1,firstPlay:!0,player:null,playing:!1,notSupport:!1,loading:!1}},methods:{handleBangumiFollow:function(t){this.$store.commit(\"video/followBangumi\",{result:t})},computePage:function(){var t=this;this.videos.forEach(function(e){e.id===t.id&&(t.part=e.part)}),this.page=Math.ceil(this.part/this.take)},handlePlaying:function(){this.firstPlay&&(this.loading=!0,this.firstPlay=!1,new a.default(this).playing(this.id))},togglePlaying:function(){try{this.handlePlaying(),this.playing?(this.player.pause(),this.playing=!1):(this.player.play(),this.playing=!0)}catch(t){this.$alert(\"视频加载失败，建议使用QQ浏览器播放！\")}},handleVideoReportClick:function(){this.$channel.$emit(\"open-feedback\",{type:4,desc:\"【H5】-《\"+this.bangumi.name+\"》第\"+this.part+\"话 视频有错误，错误详情为：\"})},downloadVideo:function(){var t=this;if(!this.useOtherSiteSource)return this.isGuest?(this.$toast.error(\"登录后才能下载\"),void this.$channel.$emit(\"sign-in\")):void this.$alert(\"该视频资源6小时内有效，请在失效前下载至本地\").then(function(){window.open(t.videoSrc)});this.$toast.error(\"第三方资源不支持下载\")}},mounted:function(){var t=this;if(this.computePage(),this.isFlv)this.notSupport=!0;else if(!this.useOtherSiteSource&&!this.isGuest){this.player=this.$refs.video,this.player.controls=!1;try{this.player.load()}catch(t){return void this.$alert(\"视频加载失败，建议使用QQ浏览器播放！\")}this.player.addEventListener(\"pause\",function(){t.playing=!1}),this.player.addEventListener(\"timeupdate\",function(){t.loading=!1}),this.player.addEventListener(\"abort\",function(){t.$alert(\"视频加载失败，建议使用QQ浏览器播放！\")}),this.player.addEventListener(\"error\",function(){t.$alert(\"视频加载失败，建议使用QQ浏览器播放！\")})}}}},406:function(t,e,n){var r=n(407);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var o=n(4);t.exports.__inject__=function(t){o(\"0db01c92\",r,!0,t)}},407:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#video-show .video{width:100%;height:56vw;background-color:#000;color:#fff;text-align:center;position:relative}#video-show .video p{padding-top:20vw}#video-show .video a{margin-top:20px;display:inline-block;border-radius:5px;border:1px solid #fff;padding:10px 15px}#video-show .video video{width:100%;height:100%}#video-show .video .play-btn{overflow:hidden;background-color:hsla(0,0%,100%,.5);text-indent:6px}#video-show .video .play-btn,#video-show .video .video-loading{width:80px;height:80px;border-radius:50%;color:#fff;position:absolute;left:50%;top:50%;margin-left:-40px;margin-top:-40px;font-size:30px}#video-show .video .video-loading{background-color:transparent;line-height:80px;-webkit-animation:rolling 1s infinite linear;animation:rolling 1s infinite linear}#video-show .container #metas{margin-bottom:8px;overflow:hidden;position:relative}#video-show .container #metas .sub-title{margin-top:15px}#video-show .container #metas .sub-title .more,#video-show .container #metas .sub-title .next{float:right;font-size:13px;margin-left:15px;color:#6d757a}#video-show .container #metas ul{margin-bottom:2px}#video-show .container #metas .season-title{padding-bottom:10px;margin-left:2px}#video-show .container #metas ul{margin-left:-10px;margin-right:-10px}#video-show .container #metas li{width:25%;display:inline-block;text-align:center;margin-bottom:10px;padding:0 10px}#video-show .container #metas .meta{border:1px solid #ccd0d7;height:30px;color:#222;border-radius:4px;display:block;font-size:12px;line-height:28px}#video-show .container #metas .a-active{border-color:#00b5e5;background-color:#00b5e5;color:#fff}#video-show .container .bangumi-panel{margin-bottom:15px}#video-show .container .bangumi-panel .part{font-size:14px;display:block;line-height:16px;max-height:32px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}#video-show .container .tip{font-size:12px;color:#6d757a;margin-bottom:5px;line-height:15px}#video-show .container .video-report-btn{width:48%;height:30px;line-height:28px;font-size:13px;text-align:center;border:1px solid #666;border-radius:15px;margin-bottom:15px;margin-top:3px}#video-show .container .video-report-btn:first-child{margin-right:2%}#video-show .container .video-report-btn:last-child{margin-left:2%}\",\"\"])},408:function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{attrs:{id:\"video-show\"}},[t._ssrNode('<div class=\"video\">'+(t.useOtherSiteSource?\"<p>应版权方要求 (⇀‸↼‶)，该视频暂不提供站内播放</p><a\"+t._ssrAttr(\"href\",t.videoSrc)+' target=\"_blank\">播放链接</a>':t.notSupport?\"<p>该视频格式仅支持在电脑上播放 (눈_눈)</p>\":t.isGuest?\"<p>流量压力太大了 (ಥ_ಥ)，需要登录才能看番</p><a>立即登录</a>\":t.video?\"<video\"+t._ssrAttr(\"src\",t.videoSrc)+t._ssrAttr(\"poster\",t.video.poster)+' preload=\"none\" controlsList=\"nodownload\"></video>'+(t.playing?\"\\x3c!----\\x3e\":'<button class=\"play-btn iconfont icon-bofang\"></button>')+(t.loading?'<div class=\"video-loading iconfont icon-jiazailoading-A\"></div>':\"\\x3c!----\\x3e\"):\"\\x3c!----\\x3e\")+\"</div>\"),t._ssrNode('<div class=\"container\">',\"</div>\",[t._ssrNode('<div id=\"metas\"><h3 class=\"sub-title\">'+t._ssrEscape(\"\\n        选集（\"+t._s(t.videos.length)+\"）\\n        \")+(t.nextPartVideo?\"<a\"+t._ssrAttr(\"href\",t.nextPartVideo)+' class=\"next\">下一话</a>':\"\\x3c!----\\x3e\")+(t.showMoreBtn?'<div class=\"more\">'+t._ssrEscape(t._s(t.showAll?\"收起\":\"展开\"))+\"</div>\":\"\\x3c!----\\x3e\")+\"</h3>\"+(t.season&&t.showAll?t._ssrList(t.list,function(e,n){return'<h6 class=\"season-title\">'+t._ssrEscape(t._s(t.season.name[n]))+\"</h6><ul>\"+t._ssrList(e.data,function(n,r){return\"<li><a\"+t._ssrAttr(\"href\",t.$alias.video(n.id))+t._ssrClass(\"meta oneline\",{\"a-active\":t.$route.params.id==n.id})+\">\"+t._ssrEscape(\"\\n                第\"+t._s(n.part-e.base)+\"话\\n              \")+\"</a></li>\"})+\"</ul>\"}):\"<ul>\"+t._ssrList(t.sortVideos,function(e){return\"<li><a\"+t._ssrAttr(\"href\",t.$alias.video(e.id))+t._ssrClass(\"meta oneline\",{\"a-active\":t.$route.params.id==e.id})+\">\"+t._ssrEscape(\"\\n            第\"+t._s(e.part)+\"话\\n          \")+\"</a></li>\"})+\"</ul>\")+'</div><h3 class=\"sub-title\">番剧简介</h3>'),t.bangumi?n(\"v-bangumi-panel\",{staticClass:\"bangumi-panel\",attrs:{id:t.bangumi.id,avatar:t.bangumi.avatar,name:t.bangumi.name,followed:t.bangumi.followed},on:{follow:t.handleBangumiFollow}},[n(\"p\",{staticClass:\"part\"},[t._v(\"第\"+t._s(t.video.part)+\"话 \"+t._s(t.video.name))])]):t._e(),t._ssrNode('<h3 class=\"sub-title\">下载与反馈</h3><p class=\"tip\">1：大家可以加入QQ群 <strong>106402736</strong> 获得最新的资源更新提醒</p><p class=\"tip\">2：安卓用户建议大家使用最新版 QQ 或 UC 浏览器在线播放，不要使用系统自带的浏览器</p><div><button class=\"video-report-btn\">下载视频</button><button class=\"video-report-btn\">视频报错</button></div>'),n(\"comment-main\",{attrs:{id:t.id,\"master-id\":t.video.user_id,type:\"video\"}})],2)],2)},staticRenderFns:[]};e.a=r}};",
    "5.server-bundle.js": "exports.ids=[5],exports.modules={177:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(269),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(418);var s=function(t){var e;(e=r(416)).__inject__&&e.__inject__(t)},m=r(2)(o.a,i.a,!1,s,null,\"2ff95e40\");e.default=m.exports},184:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=s(r(0)),o=s(r(1)),a=s(r(206)),i=s(r(210));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"v-comment-main\",props:{id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:function(t){return~[\"post\",\"video\",\"image\"].indexOf(t)}},onlySeeMaster:{type:Boolean,default:!1},emptyText:{type:String,default:\"暂无评论，快来抢沙发吧╮(￣▽￣)╭！\"},masterId:{required:!0,type:Number},bottomAppendComment:{type:Boolean,default:!0}},components:{CommentCreateForm:a.default,CommentItem:i.default},computed:{store:function(){return this.$store.state.comment},list:function(){return this.store.list},noMore:function(){return this.store.noMore},total:function(){return this.store.total},focusComment:function(){var t=this;return this.focusCommentId?this.list.filter(function(e){return e.id===t.focusCommentId})[0]:null},currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0}},data:function(){return{loadingMainComment:!1,focusCommentId:0,openFocusCommentDrawer:!1,loadingSubComment:!1,replyForm:{id:\"\",content:\"\",targetUserId:0,targetUserName:\"\",open:!1,replying:!1,liking:!1},openCreateCommentDrawer:!1}},methods:{loadMoreMainComment:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingMainComment){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loadingMainComment=!0,e.prev=3,e.next=6,t.$store.dispatch(\"comment/getMainComments\",{ctx:t,type:t.type,id:t.id,onlySeeMaster:t.onlySeeMaster?1:0});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loadingMainComment=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()},loadMoreSubComment:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loadingSubComment){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loadingSubComment=!0,e.prev=3,e.next=6,t.$store.dispatch(\"comment/getSubComments\",{ctx:t,type:t.type,parentId:t.focusCommentId});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loadingSubComment=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()},commentToComment:function(t){this.handleSubCommentReply({id:t.parent_id,targetUserId:t.from_user_id,targetUserName:t.from_user_name})},handleCommentBtnClick:function(){this.handleSubCommentReply({id:this.focusComment.parent_id,targetUserId:this.focusComment.from_user_id,targetUserName:this.focusComment.from_user_name})},handleSubCommentReply:function(t){var e=t.id,r=t.targetUserId,n=t.targetUserName;this.currentUserId?(this.replyForm.id=e,this.replyForm.targetUserId=r,this.replyForm.targetUserName=n,this.replyForm.open=!0,setTimeout(function(){document.body.scrollTop=0},200)):this.$channel.$emit(\"sign-in\")},toggleFocusCommentLike:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.replyForm.liking){e.next=5;break}return e.abrupt(\"return\");case 5:return t.replyForm.liking=!0,e.prev=6,e.next=9,t.$store.dispatch(\"comment/toggleLikeMainComment\",{ctx:t,type:t.type,id:t.focusCommentId});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return e.prev=13,t.replyForm.liking=!1,e.finish(13);case 16:case\"end\":return e.stop()}},e,t,[[6,11,13,16]])}))()},handleReplyDrawerClose:function(){document.getElementById(\"reply-comment-textarea\").style.display=\"none\"},handleReplySubmit:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(t.replyForm.content){e.next=5;break}return e.abrupt(\"return\");case 5:if(!t.replyForm.replying){e.next=7;break}return e.abrupt(\"return\");case 7:return t.replyForm.replying=!0,t.$toast.loading(\"提交中...\"),e.prev=9,e.next=12,t.$store.dispatch(\"comment/createSubComment\",{ctx:t,id:t.replyForm.id,type:t.type,content:t.replyForm.content,targetUserId:t.replyForm.targetUserId});case 12:t.replyForm.open=!1,t.replyForm.content=\"\",t.$toast.success(\"回复成功\"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),t.$toast.error(e.t0);case 20:return e.prev=20,t.replyForm.replying=!1,t.handleReplyDrawerClose(),e.finish(20);case 24:case\"end\":return e.stop()}},e,t,[[9,17,20,24]])}))()},writeComment:function(){this.$channel.$emit(\"open-create-comment-drawer\")},closeCommentDrawer:function(){this.openCreateCommentDrawer=!1}},mounted:function(){var t=this;this.$channel.$on(\"load-all-sub-comment\",function(e){var r=e.id;t.focusCommentId=r,t.openFocusCommentDrawer=!0}),this.$channel.$on(\"open-create-comment-drawer\",function(){t.currentUserId?t.openCreateCommentDrawer=!0:t.$channel.$emit(\"sign-in\")}),this.$channel.$on(\"reply-comment\",function(e){var r=e.id,n=e.targetUserId,o=e.targetUserName;t.handleSubCommentReply({id:r,targetUserId:n,targetUserName:o})}),document.getElementById(\"comment-wrap\").addEventListener(\"click\",function(t){if(/reply-btn/.test(t.target.className)){var e=document.getElementById(\"reply-comment-textarea\");e.style.display=\"block\",e.focus()}})}}},185:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=a(r(0)),o=a(r(1));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"comment-create-form\",props:{type:{required:!0,type:String},id:{required:!0,type:Number}},computed:{isGuest:function(){return!this.$store.state.login},formatContent:function(){for(var t=this.content;null!==t.match(\"\\n\\n\\n\");)t=t.replace(/\\n\\n\\n/g,\"\\n\\n\");var e=[];return(t=t.split(\"\\n\")).forEach(function(t){e.push(t?\"<p>\"+t+\"</p>\":\"<p><br/></p>\")}),e.join(\"\")},submitting:function(){return this.$store.state.comment.submitting}},data:function(){return{content:\"\"}},methods:{submit:function(){var t=this;return(0,o.default)(n.default.mark(function e(){var r;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isGuest){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(t.formatContent){e.next=6;break}return t.$emit(\"close\"),e.abrupt(\"return\");case 6:if(!t.submitting){e.next=8;break}return e.abrupt(\"return\");case 8:return t.$store.commit(\"comment/SET_SUBMITTING\",{result:!0}),e.prev=9,e.next=12,t.$store.dispatch(\"comment/createMainComment\",{content:t.formatContent,images:[],type:t.type,id:t.id,ctx:t});case 12:r=e.sent,t.$toast.success(\"评论成功\"),t.$emit(\"close\"),t.content=\"\",setTimeout(function(){var e=document.getElementById(\"comment-\"+r.id);e&&t.$scrollToY(t.$utils.getOffsetTop(e)-100,600)},400),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(9),console.log(e.t0),t.$toast.error(e.t0);case 23:return e.prev=23,t.$store.commit(\"comment/SET_SUBMITTING\",{result:!1}),e.finish(23);case 26:case\"end\":return e.stop()}},e,t,[[9,19,23,26]])}))()},handleAreaFocus:function(){document.body.scrollTop=0}}}},186:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(r(0)),o=i(r(1)),a=i(r(193));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"comment-comment-item\",props:{comment:{required:!0,type:Object},masterId:{required:!0,type:Number},type:{required:!0,type:String}},components:{SubCommentList:a.default},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0},isMine:function(){return this.currentUserId===this.comment.from_user_id},canDelete:function(){return this.isMine||this.currentUserId===this.masterId},actions:function(){var t=[];return this.canDelete&&t.push({name:\"删除\",method:this.deleteComment}),t.push({name:this.comment.liked?\"取消赞\":\"点赞\",method:this.toggleLike}),t}},data:function(){return{deleting:!1,liking:!1,showControlPanel:!1}},methods:{toggleLike:function(){var t=this;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentUserId){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.liking){e.next=5;break}return e.abrupt(\"return\");case 5:return t.liking=!0,e.prev=6,e.next=9,t.$store.dispatch(\"comment/toggleLikeMainComment\",{ctx:t,type:t.type,id:t.comment.id});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(6);case 13:return e.prev=13,t.liking=!1,e.finish(13);case 16:case\"end\":return e.stop()}},e,t,[[6,11,13,16]])}))()},deleteComment:function(){var t=this;this.deleting||(this.deleting=!0,this.$confirm(\"删除后无法找回, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.$store.dispatch(\"comment/deleteMainComment\",{ctx:t,type:t.type,id:t.comment.id})}).catch(function(e){t.deleting=!1,\"cancel\"!==e&&t.$toast.error(e)}))},handleCommentBtnClick:function(){this.$channel.$emit(\"reply-comment\",{id:this.comment.id,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})}}}},187:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n,o=r(215),a=(n=o)&&n.__esModule?n:{default:n};e.default={name:\"post-sub-comment-list\",props:{parentComment:{required:!0,type:Object},type:{required:!0,type:String}},components:{SubCommentItem:a.default},computed:{comments:function(){return this.parentComment.comments},authorId:function(){return this.parentComment.from_user_id},hasComment:function(){return!!this.comments.list.length},filterComments:function(){var t=this.comments,e=t.list,r=e.slice(0,5);if(e.every(function(e){return e.id<=t.maxId}))return r;var n=r.map(function(t){return t.id});return r.concat(e.filter(function(e){return e.id>t.maxId&&-1===n.indexOf(e.id)}))}},methods:{loadAllComment:function(){this.$channel.$emit(\"load-all-sub-comment\",{id:this.parentComment.id})}}}},188:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"sub-comment-item\",props:{comment:{required:!0,type:Object},parentUserId:{required:!0,type:Number},parentCommentId:{required:!0,type:Number},type:{required:!0,type:String}},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0},isMine:function(){return this.currentUserId===this.comment.from_user_id},canDelete:function(){return this.isMine||this.currentUserId===this.parentUserId}},data:function(){return{deleting:!1}},methods:{handleSubCommentClick:function(){this.isMine?this.deleteComment():this.currentUserId&&this.$channel.$emit(\"reply-comment\",{id:this.parentCommentId,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})},deleteComment:function(){var t=this;this.canDelete&&(this.deleting||(this.deleting=!0,this.$confirm(\"删除后无法找回, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.$store.dispatch(\"comment/deleteSubComment\",{ctx:t,type:t.type,id:t.comment.id,parentId:t.comment.parent_id})}).catch(function(e){t.deleting=!1,\"cancel\"!==e&&t.$toast.error(e)})))}}}},193:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(187),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(219);var s=function(t){var e;(e=r(213)).__inject__&&e.__inject__(t)},m=r(2)(o.a,i.a,!1,s,null,\"2bbb59ee\");e.default=m.exports},203:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(184),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(221);var s=function(t){var e;(e=r(204)).__inject__&&e.__inject__(t)},m=r(2)(o.a,i.a,!1,s,null,\"71b0fa1c\");e.default=m.exports},204:function(t,e,r){var n=r(205);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"773349ef\",n,!0,t)}},205:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#comment-wrap .sub-title{margin-top:15px;margin-bottom:15px}#comment-wrap .sub-title .write-btn{float:right;font-weight:700;font-size:13px}#comment-wrap #comment-list-footer{margin-left:-15px;margin-right:-15px}#comment-wrap .focus-comment-drawer .reply .user{padding-top:5px}#comment-wrap .focus-comment-drawer .reply .user .avatar{float:left;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}#comment-wrap .focus-comment-drawer .reply .user .avatar img{display:block;width:100%;height:100%}#comment-wrap .focus-comment-drawer .reply .user .summary{overflow:hidden}#comment-wrap .focus-comment-drawer .reply .user .summary .nickname{font-size:14px;color:#333}#comment-wrap .focus-comment-drawer .reply .user .summary .info{line-height:16px;font-size:12px;color:#999}#comment-wrap .focus-comment-drawer .reply .user .summary .info span{margin-right:5px}#comment-wrap .focus-comment-drawer .reply .content{font-size:16px;line-height:24px;padding-top:16px;margin-bottom:16px;color:#000}#comment-wrap .focus-comment-drawer .reply .content .image-area{margin:16px 0}#comment-wrap .focus-comment-drawer .reply .content .image-area img{width:100%;height:auto}#comment-wrap .focus-comment-drawer .reply .social{margin-bottom:15px;font-size:12px}#comment-wrap .focus-comment-drawer .reply .social .reply-liked-btn{color:#0381aa}#comment-wrap .focus-comment-drawer .reply .social button{color:#666;margin-left:3px}#comment-wrap .focus-comment-drawer .total{height:40px;line-height:40px;color:#000;font-size:16px}#comment-wrap .focus-comment-drawer .comments li{padding:17px 0 13px;position:relative}#comment-wrap .focus-comment-drawer .comments li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#comment-wrap .focus-comment-drawer .comments li .from-user .avatar{float:left;display:block;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}#comment-wrap .focus-comment-drawer .comments li .from-user .avatar img{display:block;width:100%;height:100%}#comment-wrap .focus-comment-drawer .comments li .from-user .summary{overflow:hidden}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .users{font-size:14px;margin-bottom:6px;margin-top:2px;line-height:14px}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .users .nickname{color:#0381aa}#comment-wrap .focus-comment-drawer .comments li .from-user .summary .info{font-size:12px;line-height:12px;color:#999}#comment-wrap .focus-comment-drawer .comments li .main{margin-left:45px;padding-top:10px}#comment-wrap .focus-comment-drawer .comments li .main .content{font-size:14px;line-height:21px;word-break:break-all}#comment-wrap .reply-comment-drawer-wrap #reply-comment-textarea{position:fixed;left:0;top:60px;width:100%;height:250px;background-color:transparent;font-size:16px;line-height:24px;color:#000;font-weight:400;z-index:101;padding-left:15px;padding-right:15px;display:none;opacity:0}#comment-wrap .reply-comment-drawer-wrap #reply-comment-textarea.fade-in{opacity:1;-webkit-transition-delay:.4s;-o-transition-delay:.4s;transition-delay:.4s}#comment-wrap .append-comment-btn{width:100%;padding:15px 0;font-size:13px}#comment-wrap .no-content{text-align:center;margin-top:30px;margin-bottom:30px;font-size:12px;color:#99a2aa}',\"\"])},206:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(185),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(209);var s=function(t){var e;(e=r(207)).__inject__&&e.__inject__(t)},m=r(2)(o.a,i.a,!1,s,null,\"1d31a883\");e.default=m.exports},207:function(t,e,r){var n=r(208);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"52eb9288\",n,!0,t)}},208:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.comment-create-form .content{font-size:16px;line-height:24px;color:#000;font-weight:400;height:250px;margin-bottom:5px}.comment-create-form .submit-btn{margin-top:15px;width:100%}\",\"\"])},209:function(t,e,r){\"use strict\";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{staticClass:\"comment-create-form\"},[this._ssrNode('<textarea placeholder=\"来吧，尽情的（在1000字以内）发挥吧\" maxlength=\"1000\" class=\"content\"></textarea>'),e(\"el-button\",{staticClass:\"submit-btn\",attrs:{type:\"primary\",loading:this.submitting},on:{click:this.submit}},[this._v(\"发布\")])],2)},staticRenderFns:[]};e.a=n},210:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(186),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(220);var s=function(t){var e;(e=r(211)).__inject__&&e.__inject__(t)},m=r(2)(o.a,i.a,!1,s,null,\"8f3d9b14\");e.default=m.exports},211:function(t,e,r){var n=r(212);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"29cb5539\",n,!0,t)}},212:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.comment-item{position:relative;margin-top:15px;padding-bottom:15px}.comment-item:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}.comment-item .avatar{float:left;margin-right:9px;width:35px;height:35px;border-radius:17.5px;border:1px solid #e5e9ef;overflow:hidden}.comment-item .avatar img{display:block;width:100%;height:100%}.comment-item .content{overflow:hidden}.comment-item .content .header .tools-btn{float:right;line-height:16px;font-size:12px;color:#535353;margin-top:9px;margin-left:4px}.comment-item .content .header .user .nickname{font-size:14px;line-height:21px;display:block;color:#333}.comment-item .content .header .user .info{color:#999;line-height:14px;font-size:12px}.comment-item .content .header .user .info span{margin-right:5px}.comment-item .content .main{font-size:16px;margin:10px 0 4px;color:#333;line-height:24px;min-height:65px}.comment-item .content .main .image-area{margin:10px 0}.comment-item .content .main .image-area img{width:100%;height:auto}.comment-item .content .footer .social{margin-top:15px;font-size:12px}.comment-item .content .footer .social .reply-liked-btn{color:#0381aa}.comment-item .content .footer .social button{color:#666;margin-left:3px}',\"\"])},213:function(t,e,r){var n=r(214);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"1aa8e4ee\",n,!0,t)}},214:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sub-comment-list-wrap{position:relative;background-color:#f7f8fa;border-radius:5px}.sub-comment-list-wrap .sub-comment-list{padding:7px 0 7.5px;margin-top:5px}.sub-comment-list-wrap .load-all-comment{position:relative;margin-top:6px;font-size:12px;margin-bottom:0;padding:0 10px;color:#999;width:100%;text-align:left}.sub-comment-list-wrap .load-all-comment:after{content:\"\";position:absolute;top:50%;border:3px solid #f5f5f5;border-left-color:#999;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);margin-left:4px}',\"\"])},215:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(188),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(218);var s=function(t){var e;(e=r(216)).__inject__&&e.__inject__(t)},m=r(2)(o.a,i.a,!1,s,null,\"3fc64a04\");e.default=m.exports},216:function(t,e,r){var n=r(217);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"c05931bc\",n,!0,t)}},217:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sub-comment-item{padding:2px 10px;font-size:14px;line-height:18px}.sub-comment-item .nickname{color:#0381aa}.sub-comment-item .comment-content{margin-right:6px;word-break:break-all}\",\"\"])},218:function(t,e,r){\"use strict\";var n={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"div\",{staticClass:\"sub-comment-item\"},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"nickname\">'+t._ssrEscape(t._s(t.comment.from_user_name))+\"</a>\"+(t.comment.to_user_zone?\"\\n    回复\\n    <a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.to_user_zone))+' class=\"nickname\">'+t._ssrEscape(t._s(t.comment.to_user_name))+\"</a>\":\"\\x3c!----\\x3e\")+'\\n  :\\n  <span class=\"reply-btn comment-content\">'+t._ssrEscape(t._s(t.comment.content))+\"</span>\")])},staticRenderFns:[]};e.a=n},219:function(t,e,r){\"use strict\";var n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"sub-comment-list-wrap\"},[t.hasComment?t._ssrNode('<div class=\"sub-comment-list\">',\"</div>\",[t._l(t.filterComments,function(e){return r(\"sub-comment-item\",{key:e.id,attrs:{comment:e,\"parent-user-id\":t.authorId,\"parent-comment-id\":t.parentComment.id,type:t.type}})}),t._ssrNode(!t.comments.noMore||t.comments.list.length>5?'<button class=\"load-all-comment\">'+t._ssrEscape(\"\\n      查看全部\"+t._s(t.comments.total)+\"条评论\\n    \")+\"</button>\":\"\\x3c!----\\x3e\")],2):t._e()])},staticRenderFns:[]};e.a=n},220:function(t,e,r){\"use strict\";var n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"comment-item\",attrs:{id:\"comment-\"+t.comment.id}},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"avatar\">',\"</a>\",[r(\"v-img\",{attrs:{src:t.comment.from_user_avatar,width:80,height:80}})],1),t._ssrNode('<div class=\"content\">',\"</div>\",[t._ssrNode('<div class=\"header\">',\"</div>\",[t._ssrNode('<button class=\"tools-btn\">···</button>'),t._ssrNode('<div class=\"user\">',\"</div>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.comment.from_user_zone))+' class=\"nickname oneline\">'+t._ssrEscape(t._s(t.comment.from_user_name))+\"</a>\"),t._ssrNode('<div class=\"info\">',\"</div>\",[t._ssrNode(\"<span>\"+t._ssrEscape(\"第\"+t._s(t.comment.floor_count-1)+\"楼\")+\"</span><span>·</span>\"),r(\"v-time\",{model:{value:t.comment.created_at,callback:function(e){t.$set(t.comment,\"created_at\",e)},expression:\"comment.created_at\"}})],2)],2)],2),t._ssrNode('<div class=\"main\">'+t._s(t.comment.content)+\"</div>\"),t._ssrNode('<div class=\"footer\">',\"</div>\",[r(\"sub-comment-list\",{attrs:{\"parent-comment\":t.comment,type:t.type}}),t._ssrNode('<div class=\"social\"><button'+t._ssrClass(null,[t.comment.liked?\"reply-liked-btn\":\"reply-like-btn\"])+'><i class=\"iconfont icon-icon_good\"></i>'+t._ssrEscape(\"\\n          \"+t._s(t.comment.liked?\"已赞\":\"赞\")+\"\\n          \")+(t.comment.like_count?\"<span>\"+t._ssrEscape(\"(\"+t._s(t.comment.like_count)+\")\")+\"</span>\":\"\\x3c!----\\x3e\")+'</button><button class=\"reply-btn fr\">\\n          回复\\n        </button></div>')],2),r(\"mt-actionsheet\",{attrs:{actions:t.actions},model:{value:t.showControlPanel,callback:function(e){t.showControlPanel=e},expression:\"showControlPanel\"}})],2)])},staticRenderFns:[]};e.a=n},221:function(t,e,r){\"use strict\";var n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"comment-wrap\"}},[t._t(\"header\",[r(\"div\",{staticClass:\"hr\"}),r(\"h3\",{staticClass:\"sub-title\"},[t._v(\"\\n      评论\"+t._s(t.total?\"(\"+t.total+\")\":\"\")+\"\\n      \"),r(\"button\",{staticClass:\"write-btn\",on:{click:t.writeComment}},[t._v(\"写评论\")])])]),t.list.length?[t._ssrNode('<div id=\"comment-list-wrap\">',\"</div>\",t._l(t.list,function(e){return t._ssrNode('<div class=\"comment-item-wrap\">',\"</div>\",[t._t(\"comment-item\",[r(\"comment-item\",{attrs:{type:t.type,comment:e,\"master-id\":t.masterId}})],{comment:e,reply:t.handleSubCommentReply})],2)})),t._ssrNode('<div id=\"comment-list-footer\">',\"</div>\",[t._ssrNode(t.bottomAppendComment?'<button class=\"append-comment-btn\">写评论</button>':\"\\x3c!----\\x3e\"),r(\"more-btn\",{attrs:{\"no-more\":t.noMore,loading:t.loadingMainComment},on:{fetch:t.loadMoreMainComment}})],2)]:t.emptyText?t._ssrNode('<p class=\"no-content\">'+t._ssrEscape(t._s(t.emptyText))+\"</p>\"):t._e(),r(\"v-drawer\",{staticClass:\"focus-comment-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":\"评论列表\"+(t.focusComment&&t.focusComment.floor_count?\" - \"+t.focusComment.floor_count+\" 楼\":\"\"),backdrop:!1},model:{value:t.openFocusCommentDrawer,callback:function(e){t.openFocusCommentDrawer=e},expression:\"openFocusCommentDrawer\"}},[t.focusComment?[r(\"div\",{staticClass:\"container\"},[r(\"div\",{staticClass:\"reply\"},[r(\"div\",{staticClass:\"user clearfix\"},[r(\"a\",{staticClass:\"avatar\",attrs:{href:t.$alias.user(t.focusComment.from_user_zone)}},[r(\"img\",{attrs:{src:t.$resize(t.focusComment.from_user_avatar,{width:70})}})]),r(\"div\",{staticClass:\"summary\"},[r(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(t.focusComment.from_user_zone)},domProps:{textContent:t._s(t.focusComment.from_user_name)}}),r(\"div\",{staticClass:\"info\"},[r(\"v-time\",{model:{value:t.focusComment.created_at,callback:function(e){t.$set(t.focusComment,\"created_at\",e)},expression:\"focusComment.created_at\"}})],1)])]),r(\"div\",{staticClass:\"content\"},[r(\"div\",{staticClass:\"text-area\",domProps:{innerHTML:t._s(t.focusComment.content)}}),r(\"div\",{staticClass:\"image-area\"},t._l(t.focusComment.images,function(e,n){return r(\"div\",{key:n,staticClass:\"image-package\",on:{click:function(e){t.$previewImages(t.focusComment.images,n)}}},[r(\"v-img\",{staticClass:\"image\",attrs:{src:e.url,width:\"150\",mode:\"2\"}})],1)}))]),r(\"div\",{staticClass:\"social\"},[r(\"button\",{class:[t.focusComment.liked?\"reply-liked-btn\":\"reply-like-btn\"],on:{click:t.toggleFocusCommentLike}},[r(\"i\",{staticClass:\"iconfont icon-icon_good\"}),t._v(\"\\n              \"+t._s(t.focusComment.liked?\"已赞\":\"赞\")+\"\\n              \"),t.focusComment.like_count?r(\"span\",[t._v(\"(\"+t._s(t.focusComment.like_count)+\")\")]):t._e()]),r(\"button\",{staticClass:\"reply-btn fr\",on:{click:t.handleCommentBtnClick}},[t._v(\"\\n              回复\\n            \")])])]),r(\"div\",{staticClass:\"hr\"}),r(\"p\",{staticClass:\"total\"},[t._v(t._s(t.focusComment.comments.total)+\"条回复\")]),r(\"ul\",{staticClass:\"comments\"},t._l(t.focusComment.comments.list,function(e){return r(\"li\",{key:e.id},[r(\"div\",{staticClass:\"from-user\"},[r(\"a\",{staticClass:\"avatar\",attrs:{href:t.$alias.user(e.from_user_zone)}},[r(\"img\",{attrs:{src:t.$resize(e.from_user_avatar,{width:70})}})]),r(\"div\",{staticClass:\"summary\"},[r(\"div\",{staticClass:\"users oneline\"},[r(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(e.from_user_zone)},domProps:{textContent:t._s(e.from_user_name)}}),e.to_user_zone?[t._v(\"\\n                    回复\\n                    \"),r(\"a\",{staticClass:\"nickname\",attrs:{href:t.$alias.user(e.to_user_zone)},domProps:{textContent:t._s(e.to_user_name)}})]:t._e(),t._v(\"\\n                  :\\n                \")],2),r(\"div\",{staticClass:\"info\"},[r(\"v-time\",{model:{value:e.created_at,callback:function(r){t.$set(e,\"created_at\",r)},expression:\"item.created_at\"}})],1)])]),r(\"div\",{staticClass:\"main\"},[r(\"div\",{staticClass:\"content reply-btn\",domProps:{textContent:t._s(e.content)},on:{click:function(r){t.commentToComment(e)}}})])])}))]),r(\"more-btn\",{attrs:{\"no-more\":t.focusComment.comments.noMore,loading:t.loadingSubComment},on:{fetch:t.loadMoreSubComment}})]:t._e()],2),t._ssrNode('<div class=\"reply-comment-drawer-wrap\">',\"</div>\",[r(\"v-drawer\",{staticClass:\"reply-comment-drawer\",attrs:{from:\"right\",size:\"100%\",\"header-text\":t.currentUserId===t.replyForm.targetUserId?\"回复\":\"回复：\"+t.replyForm.targetUserName,backdrop:!1,submitText:\"发布\"},on:{cancel:t.handleReplyDrawerClose,submit:t.handleReplySubmit},model:{value:t.replyForm.open,callback:function(e){t.$set(t.replyForm,\"open\",e)},expression:\"replyForm.open\"}}),t._ssrNode('<textarea id=\"reply-comment-textarea\" placeholder=\"100字以内任意发挥\" maxlength=\"100\"'+t._ssrClass(null,{\"fade-in\":t.replyForm.open})+\"></textarea>\")],2),r(\"v-drawer\",{attrs:{from:\"right\",size:\"100%\",\"header-text\":\"发表评论\"},model:{value:t.openCreateCommentDrawer,callback:function(e){t.openCreateCommentDrawer=e},expression:\"openCreateCommentDrawer\"}},[t.openCreateCommentDrawer?r(\"div\",{staticClass:\"container\"},[t._t(\"reply-form\",[t.openCreateCommentDrawer?r(\"comment-create-form\",{attrs:{id:t.id,type:t.type},on:{close:t.closeCommentDrawer}}):t._e()],{close:t.closeCommentDrawer})],2):t._e()])],2)},staticRenderFns:[]};e.a=n},269:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=m(r(0)),o=m(r(35)),a=m(r(1)),i=m(r(15)),s=m(r(203));function m(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"image-album\",asyncData:function(t){var e=this,r=t.store,i=t.route,s=t.ctx;return(0,a.default)(n.default.mark(function t(){var a;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.params.id,t.next=3,o.default.all([r.dispatch(\"image/getAlbumData\",{ctx:s,id:a}),r.dispatch(\"comment/getMainComments\",{ctx:s,id:a,type:\"image\",seeReplyId:i.query.reply})]);case 3:case\"end\":return t.stop()}},t,e)}))()},head:function(){var t=this.info.is_cartoon?\"漫画\":\"相簿\";return{title:this.info.name+\" - \"+t,meta:[{hid:\"description\",name:\"description\",content:this.bangumi.summary},{hid:\"keywords\",name:\"keywords\",content:this.info.name+\"，\"+this.bangumi.name+\"，\"+t+\"，\"+this.user.nickname}]}},components:{CommentMain:s.default},computed:{id:function(){return parseInt(this.$route.params.id,10)},album:function(){return this.$store.state.image.albumShow},info:function(){return this.album.info},images:function(){return this.album.images},cartoon:function(){return this.album.cartoon},user:function(){return this.album.user},bangumi:function(){return this.album.bangumi},likeAlbumBtnText:function(){var t=this.info.is_creator?this.info.liked?\"已赞赏\":\"赞赏\":this.info.liked?\"已喜欢\":\"喜欢\";return this.info.like_count?t+\"(\"+this.info.like_count+\")\":t},isMine:function(){return!!this.$store.state.login&&this.user.id===this.$store.state.user.id},showMoreBtn:function(){return this.take<this.cartoon.length},sortCartoons:function(){var t=(this.page-1)*this.take;return this.showAll?this.cartoon:this.cartoon.slice(t,t+this.take)},nextPartUrl:function(){var t=this;if(!this.cartoon.length)return\"\";var e=0;return this.cartoon.forEach(function(r,n){r.id===t.id&&(e=n)}),e>=this.cartoon.length-1?\"\":this.$alias.imageAlbum(this.cartoon[e+1].id)}},data:function(){return{take:4,page:0,part:0,showAll:!1}},methods:{handleBangumiFollow:function(t){this.$store.commit(\"image/FOLLOW_ALBUM_BANGUMI\",{result:t})},computePage:function(){var t=this;this.cartoon.forEach(function(e,r){e.id===t.id&&(t.part=r+1)}),this.page=Math.ceil(this.part/this.take)},toggleLike:function(){var t=this;this.$store.state.login?this.isMine?this.$toast.error(\"不能为自己的相簿点赞\"):this.loadingFollowAlbum||(this.loadingFollowAlbum=!0,!this.info.is_creator||this.info.liked?this.submitLikeRequest():this.$confirm(\"原创相簿点赞需要金币, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){t.submitLikeRequest()}).catch(function(){})):this.$channel.$emit(\"sign-in\")},submitLikeRequest:function(){var t=this;return(0,a.default)(n.default.mark(function e(){var r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new i.default(t),e.prev=1,e.next=4,r.toggleLike({id:t.id});case 4:o=e.sent,t.$store.commit(\"image/ALBUM_LIKE\",{result:o}),t.$toast.success(\"操作成功\"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$toast.error(e.t0);case 12:return e.prev=12,t.loadingFollowAlbum=!1,e.finish(12);case 15:case\"end\":return e.stop()}},e,t,[[1,9,12,15]])}))()}},mounted:function(){this.computePage()}}},416:function(t,e,r){var n=r(417);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"74abc9d9\",n,!0,t)}},417:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#image-album .album-header{margin-top:15px;margin-bottom:15px}#image-album .album-header .title{font-size:20px;margin-bottom:10px}#image-album .album-header .author{font-size:13px}#image-album .album-header .author .avatar{vertical-align:middle;border:1px solid #e5e9ef;border-radius:50%;width:30px;height:30px}#image-album .album-header .author .avatar img{display:block;width:100%;height:100%;border-radius:15px}#image-album .album-body{background-color:#fff}#image-album .album-body .images-wrap .image-package{position:relative}#image-album .album-body .cartoon-list{margin-top:20px;position:relative}#image-album .album-body .cartoon-list .sub-title{margin-left:10px}#image-album .album-body .cartoon-list .sub-title .more,#image-album .album-body .cartoon-list .sub-title .next{float:right;font-size:13px;margin-right:10px;margin-left:15px;color:#6d757a}#image-album .album-body .cartoon-list li{width:50%;display:inline-block;text-align:center;margin-bottom:7px;padding:0 5px}#image-album .album-body .cartoon-list li a{border:1px solid #ccd0d7;height:30px;color:#222;border-radius:4px;display:block;font-size:12px;line-height:28px}#image-album .album-body .cartoon-list li a.active{border-color:#00b5e5;background-color:#00b5e5;color:#fff}#image-album .album-body .reward-panel{text-align:center;margin-top:30px;margin-bottom:30px}#image-album .album-body .reward-panel button{margin:0 5px;font-size:13px}#image-album .album-body .reward-panel button i{font-size:12px;line-height:16px}#image-album .album-body .reward-panel .album-rewarded-btn{position:relative;padding:4px 10px;font-size:14px;color:#eb9e05;background-color:transparent;border-radius:8px;white-space:nowrap}#image-album .album-body .reward-panel .album-rewarded-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #eb9e05;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#image-album .album-body .reward-panel .album-reward-btn{position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:#eb9e05;border-radius:8px;white-space:nowrap}#image-album .album-body .reward-panel .album-reward-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#image-album .album-body .reward-panel .album-liked-btn{position:relative;padding:4px 10px;font-size:14px;color:#fa5555;background-color:transparent;border-radius:8px;white-space:nowrap}#image-album .album-body .reward-panel .album-liked-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fa5555;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#image-album .album-body .reward-panel .album-like-btn{position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:#fa5555;border-radius:8px;white-space:nowrap}#image-album .album-body .reward-panel .album-like-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#image-album .album-footer .bangumi-panel{padding-top:15px;padding-bottom:15px}#image-album .album-footer .bangumi-panel .summary{font-size:12px;color:#666;line-height:13px;max-height:26px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',\"\"])},418:function(t,e,r){\"use strict\";var n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"image-album\"}},[t._ssrNode('<div class=\"container\">',\"</div>\",[t._ssrNode('<div class=\"album-header\">',\"</div>\",[t._ssrNode('<h1 class=\"title oneline\">'+t._ssrEscape(\"\\n        \"+t._s(t.info.is_creator?\"[原创]\":\"[转载]\")+\"\\n        [\"+t._s(t.info.is_cartoon?\"漫画\":\"相册\")+\"]\\n        \"+t._s(t.info.name)+\"\\n      \")+\"</h1>\"),t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.user.zone))+' class=\"author\">',\"</a>\",[t._ssrNode(\"<img\"+t._ssrAttr(\"src\",t.$resize(t.user.avatar,{width:60}))+' class=\"avatar\">'+t._ssrEscape(\"\\n        \"+t._s(t.user.nickname)+\"\\n        ·\\n        \")),r(\"v-time\",{model:{value:t.info.updated_at,callback:function(e){t.$set(t.info,\"updated_at\",e)},expression:\"info.updated_at\"}})],2)],2)]),t._ssrNode('<div class=\"album-body\">',\"</div>\",[t._ssrNode('<div class=\"images-wrap\">',\"</div>\",t._l(t.images,function(e,n){return t._ssrNode('<div class=\"image-package\">',\"</div>\",[r(\"v-img\",{staticClass:\"image\",attrs:{width:\"400\",mode:\"2\",src:e.url,aspect:t.$computeImageAspect(e)}})],1)})),t._ssrNode((t.cartoon.length?'<div class=\"cartoon-list\"><h3 class=\"sub-title\">'+t._ssrEscape(\"\\n        选集（\"+t._s(t.cartoon.length)+\"）\\n        \")+(t.nextPartUrl?\"<a\"+t._ssrAttr(\"href\",t.nextPartUrl)+' class=\"next\">下一话</a>':\"\\x3c!----\\x3e\")+(t.showMoreBtn?'<div class=\"more\">'+t._ssrEscape(t._s(t.showAll?\"收起\":\"展开\"))+\"</div>\":\"\\x3c!----\\x3e\")+\"</h3><ul>\"+t._ssrList(t.sortCartoons,function(e){return\"<li><a\"+t._ssrAttr(\"href\",t.$alias.imageAlbum(e.id))+t._ssrClass(\"oneline\",{active:e.id===t.id})+\">\"+t._ssrEscape(t._s(e.name))+\"</a></li>\"})+\"</ul></div>\":\"\\x3c!----\\x3e\")+'<div class=\"container\"><div class=\"reward-panel\"><button'+t._ssrClass(null,t.info.is_creator?[t.info.liked?\"album-rewarded-btn\":\"album-reward-btn\"]:[t.info.liked?\"album-liked-btn\":\"album-like-btn\"])+'><i class=\"iconfont icon-guanzhu\"></i>'+t._ssrEscape(\"\\n          \"+t._s(t.likeAlbumBtnText)+\"\\n        \")+\"</button></div></div>\")],2),t._ssrNode('<div class=\"container\">',\"</div>\",[r(\"comment-main\",{attrs:{id:t.id,\"master-id\":t.user.id,type:\"image\"}}),t._ssrNode('<div class=\"hr\"></div>'),t._ssrNode('<div class=\"album-footer\">',\"</div>\",[t._ssrNode('<div class=\"bangumi-panel\">',\"</div>\",[t._ssrNode('<h3 class=\"sub-title\">所属番剧：</h3>'),r(\"v-bangumi-panel\",{attrs:{id:t.bangumi.id,avatar:t.bangumi.avatar,name:t.bangumi.name,followed:t.bangumi.followed},on:{follow:t.handleBangumiFollow}},[r(\"p\",{staticClass:\"summary\",domProps:{textContent:t._s(t.bangumi.summary)}})])],2)])],2)])},staticRenderFns:[]};e.a=n}};",
    "6.server-bundle.js": "exports.ids=[6],exports.modules={179:function(e,a,t){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0});var n=t(270),i=t.n(n);for(var r in n)\"default\"!==r&&function(e){t.d(a,e,function(){return n[e]})}(r);var o=t(432);var s=function(e){var a;(a=t(419)).__inject__&&a.__inject__(e)},c=t(2)(i.a,o.a,!1,s,null,\"705daa48\");a.default=c.exports},222:function(e,a){e.exports=function(e){return\"string\"!=typeof e?e:(/^['\"].*['\"]$/.test(e)&&(e=e.slice(1,-1)),/[\"'() \\t\\n]/.test(e)?'\"'+e.replace(/\"/g,'\\\\\"').replace(/\\n/g,\"\\\\n\")+'\"':e)}},270:function(e,a,t){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0});var n=o(t(152)),i=o(t(421)),r=o(t(427));function o(e){return e&&e.__esModule?e:{default:e}}a.default={name:\"campaign-canvas\",components:{OnePiece:i.default,BlackWork:r.default},watch:{selectedTheme:function(){var e=this;setTimeout(function(){e.openSelectThemeDrawer=!1,e.$channel.$emit(\"campaign-canvas-reset\"),e.result=\"\"},300)}},data:function(){return{creating:!1,openSelectThemeDrawer:!1,result:\"\",selectedTheme:\"one-piece\",themes:[{label:\"海贼王 - 通缉令\",value:\"one-piece\"},{label:\"博多豚骨拉面团 - 黑色工作\",value:\"black-work\"}]}},methods:{changeTheme:function(){this.openSelectThemeDrawer=!0},create:function(){var e=this;if(!this.creating){if(this.result)return this.$channel.$emit(\"campaign-canvas-reset\"),void(this.result=\"\");this.creating=!0,this.$channel.$emit(\"campaign-canvas-creating\"),this.$toast.loading(\"制作中...\");var a={allowTaint:!1,useCORS:!0,backgroundColor:null};setTimeout(function(){(0,n.default)(document.querySelector(\".canvas-wrap\"),a).then(function(a){e.result=a.toDataURL(\"image/png\"),e.$toast.success(\"制作成功！长按图片可保持\"),e.creating=!1}).catch(function(){e.$toast.error(\"制作失败~\"),e.creating=!1})},1e3)}}}}},271:function(e,a,t){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0}),a.default={name:\"CampaignOnePiece\",props:{image:{required:!0,type:String},avatar:{type:String,default:\"\"}},data:function(){return{selectedAvatar:this.avatar,name:\"\",dollar:\"\"}},computed:{dollarInputWidth:function(){return{width:10*(this.dollar.length+1)+7+\"px\"}}},methods:{selectAvatar:function(e){var a=this,t=e.target.files[0],n=new FileReader;n.onload=function(e){a.selectedAvatar=e.target.result,a.$refs.uploader.value=\"\"},n.readAsDataURL(t)}},mounted:function(){var e=this;this.$channel.$on(\"campaign-canvas-reset\",function(){e.selectedAvatar=e.avatar}),this.$channel.$on(\"campaign-canvas-creating\",function(){e.name||(e.name=\"無\"),e.dollar||(e.dollar=50)})}}},272:function(e,a,t){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0}),a.default={name:\"BlackWork\",props:{image:{required:!0,type:String},avatar:{type:String,default:\"\"}},data:function(){return{selectedAvatar:this.avatar,name:\"\",dollar:\"\"}},computed:{dollarInputWidth:function(){return{width:5*(this.dollar.length+1)+20+\"px\"}}},methods:{selectAvatar:function(e){var a=this,t=e.target.files[0],n=new FileReader;n.onload=function(e){a.selectedAvatar=e.target.result,a.$refs.uploader.value=\"\"},n.readAsDataURL(t)}},mounted:function(){var e=this;this.$channel.$on(\"campaign-canvas-reset\",function(){e.selectedAvatar=e.avatar}),this.$channel.$on(\"campaign-canvas-creating\",function(){e.name||(e.name=\"無\"),e.dollar||(e.dollar=50)})}}},419:function(e,a,t){var n=t(420);\"string\"==typeof n&&(n=[[e.i,n,\"\"]]),n.locals&&(e.exports=n.locals);var i=t(4);e.exports.__inject__=function(e){i(\"29036850\",n,!0,e)}},420:function(e,a,t){(e.exports=t(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#campaign-canvas{min-height:100vh;position:relative}#campaign-canvas #campaign-header{position:relative;height:30px;width:100%}#campaign-canvas #campaign-header .home{width:90px;height:25px;position:absolute;top:0;left:15px;z-index:9;background-color:#fff;color:#00a1d6;font-size:16px;font-weight:700;padding:2px 10px 5px;border-radius:0 0 5px 5px}#campaign-canvas #campaign-body .creating .file-input-wrap{opacity:0}#campaign-canvas #campaign-body .creating .textarea{outline:none}#campaign-canvas #campaign-body .file-input-wrap{overflow:hidden;position:relative}#campaign-canvas #campaign-body .file-input-wrap input{opacity:0;width:100%;height:100%;display:block}#campaign-canvas #campaign-body .file-input-wrap .text{position:absolute;width:100%;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;z-index:0}#campaign-canvas #campaign-body .textarea{outline-style:dashed;outline-width:2px}#campaign-canvas #campaign-footer{position:fixed;width:100%;height:50px;font-size:0;left:0;bottom:0}#campaign-canvas #campaign-footer button{height:100%;width:50%;text-align:center;font-size:16px}#campaign-canvas #campaign-footer .select-btn{background-color:#fff;color:#6d757a}#campaign-canvas #campaign-footer .create-btn{background:#00a1d6;color:#fff}#campaign-canvas .shim-footer{width:100%;height:50px;background-color:transparent}\",\"\"])},421:function(e,a,t){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0});var n=t(271),i=t.n(n);for(var r in n)\"default\"!==r&&function(e){t.d(a,e,function(){return n[e]})}(r);var o=t(426);var s=function(e){var a;(a=t(422)).__inject__&&a.__inject__(e)},c=t(2)(i.a,o.a,!1,s,null,\"646cb5d8\");a.default=c.exports},422:function(e,a,t){var n=t(423);\"string\"==typeof n&&(n=[[e.i,n,\"\"]]),n.locals&&(e.exports=n.locals);var i=t(4);e.exports.__inject__=function(e){i(\"30225c89\",n,!0,e)}},423:function(e,a,t){var n=t(222);(e.exports=t(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#campaign-one-piece{width:300px;height:434px;margin:30px auto 0;-webkit-box-shadow:0 .3rem 2rem rgba(51,51,51,.15);box-shadow:0 .3rem 2rem rgba(51,51,51,.15);border-radius:5px;overflow:hidden}#campaign-one-piece .canvas-wrap{position:relative;height:100%;width:100%;display:block;background-image:url(\"+n(t(424))+\");color:RGB(78,73,74)}#campaign-one-piece .canvas-wrap .avatar,#campaign-one-piece .canvas-wrap .file-input-wrap{position:absolute;left:27px;top:90px;width:247px;height:186px}#campaign-one-piece .canvas-wrap .file-input-wrap .text{width:80%!important}#campaign-one-piece .canvas-wrap input,#campaign-one-piece .canvas-wrap textarea{background-color:transparent;outline-color:RGB(78,73,74);color:RGB(78,73,74);text-align:center;position:absolute;left:0;top:0;font-family:Baskerville,Times New Roman,Liberation Serif,STFangsong,FangSong,FangSong_GB2312,CWTEX-F,serif;width:100%;height:100%}#campaign-one-piece .canvas-wrap .name-wrap{position:absolute;top:310px;left:30px;right:30px;height:50px;width:auto}#campaign-one-piece .canvas-wrap .name-wrap .name{font-size:42px;line-height:42px;font-weight:700;padding:4px 0}#campaign-one-piece .canvas-wrap .dollar-wrap{position:absolute;top:363px;left:30px;right:30px;height:23px;width:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}#campaign-one-piece .canvas-wrap .dollar-wrap .dollar-icon{width:60px;height:60px;background-image:url(\"+n(t(425))+\")}#campaign-one-piece .canvas-wrap .dollar-wrap .dollar-input{font-size:20px;font-weight:600;position:relative;left:-15px}#campaign-one-piece .canvas-wrap .dollar-wrap .dollar-tail{width:30px;height:50px;line-height:50px;margin-left:-10px}\",\"\"])},424:function(e,a,t){e.exports=t.p+\"src/assets/img/campaign/one-piece.106ca1ec.png\"},425:function(e,a,t){e.exports=t.p+\"src/assets/img/campaign/dollar.24732e83.png\"},426:function(e,a,t){\"use strict\";var n={render:function(){var e=this,a=e.$createElement;return(e._self._c||a)(\"div\",{attrs:{id:\"campaign-one-piece\"}},[e._ssrNode(e.image?\"<img\"+e._ssrAttr(\"src\",e.image)+' class=\"canvas-wrap bg\">':'<div class=\"canvas-wrap bg\">'+(e.selectedAvatar?'<div class=\"avatar bg\"'+e._ssrStyle(null,{backgroundImage:\"url(\"+e.selectedAvatar+\")\"},null)+\"></div>\":\"\\x3c!----\\x3e\")+'<div class=\"file-input-wrap\"><div class=\"textarea text\">点击上传头像</div><input type=\"file\" accept=\"image/png, image/jpeg, image/jpg, image/x-png\"></div><div class=\"name-wrap\"><input placeholder=\"名称\"'+e._ssrAttr(\"value\",e.name)+' class=\"textarea name oneline\"></div><div class=\"dollar-wrap\"><div class=\"dollar-icon bg\"></div><input placeholder=\"金\" type=\"number\"'+e._ssrAttr(\"value\",e.dollar)+' class=\"textarea dollar-input\"'+e._ssrStyle(null,e.dollarInputWidth,null)+'><div class=\"dollar-tail\">一</div></div></div>')])},staticRenderFns:[]};a.a=n},427:function(e,a,t){\"use strict\";Object.defineProperty(a,\"__esModule\",{value:!0});var n=t(272),i=t.n(n);for(var r in n)\"default\"!==r&&function(e){t.d(a,e,function(){return n[e]})}(r);var o=t(431);var s=function(e){var a;(a=t(428)).__inject__&&a.__inject__(e)},c=t(2)(i.a,o.a,!1,s,null,\"4d25d3a0\");a.default=c.exports},428:function(e,a,t){var n=t(429);\"string\"==typeof n&&(n=[[e.i,n,\"\"]]),n.locals&&(e.exports=n.locals);var i=t(4);e.exports.__inject__=function(e){i(\"06709d3e\",n,!0,e)}},429:function(e,a,t){var n=t(222);(e.exports=t(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#campaign-black-work{width:300px;height:830px;margin:30px auto 60px;-webkit-box-shadow:0 .3rem 2rem rgba(51,51,51,.15);box-shadow:0 .3rem 2rem rgba(51,51,51,.15);border-radius:5px;overflow:hidden}#campaign-black-work .canvas-wrap{position:relative;height:100%;width:100%;display:block;background-image:url(\"+n(t(430))+\");color:RGB(78,73,74)}#campaign-black-work .canvas-wrap .the-world{position:absolute;left:27px;top:350px;width:245px}#campaign-black-work .canvas-wrap .the-world .file-input-wrap{position:relative;width:100%;height:245px}#campaign-black-work .canvas-wrap .the-world .avatar{position:absolute;left:0;top:0;width:100%;height:245px}#campaign-black-work .canvas-wrap .the-world .item{margin-top:8px;font-size:13px;height:18px}#campaign-black-work .canvas-wrap .the-world .item span{display:inline-block;vertical-align:middle;width:55px;text-align:right;float:left;line-height:18px;margin-left:10px}#campaign-black-work .canvas-wrap .the-world .item div{overflow:hidden;height:100%}#campaign-black-work .canvas-wrap .the-world .item input{background-color:transparent;width:100%;height:100%;font-size:13px;line-height:18px}\",\"\"])},430:function(e,a,t){e.exports=t.p+\"src/assets/img/campaign/black-work.05edc563.png\"},431:function(e,a,t){\"use strict\";var n={render:function(){var e=this.$createElement;return(this._self._c||e)(\"div\",{attrs:{id:\"campaign-black-work\"}},[this._ssrNode(this.image?\"<img\"+this._ssrAttr(\"src\",this.image)+' class=\"canvas-wrap bg\">':'<div class=\"canvas-wrap bg\"><div class=\"the-world\">'+(this.selectedAvatar?'<div class=\"avatar bg\"'+this._ssrStyle(null,{backgroundImage:\"url(\"+this.selectedAvatar+\")\"},null)+\"></div>\":\"\\x3c!----\\x3e\")+'<div class=\"file-input-wrap textarea\"><div class=\"text\">点击上传头像</div><input type=\"file\" accept=\"image/png, image/jpeg, image/jpg, image/x-png\"></div><div class=\"item sex textarea\"><span>性别：</span><div><input type=\"text\" maxlength=\"2\"></div></div><div class=\"item height textarea\"><span>身長：</span><div><input type=\"text\" maxlength=\"12\"></div></div><div class=\"item face textarea\"><span>特徽：</span><div><input type=\"text\" maxlength=\"12\"></div></div><div class=\"item location textarea\"><span>所在地：</span><div><input type=\"text\" maxlength=\"12\"></div></div></div></div>')])},staticRenderFns:[]};a.a=n},432:function(e,a,t){\"use strict\";var n={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t(\"div\",{attrs:{id:\"campaign-canvas\"}},[e._ssrNode('<div id=\"campaign-header\"><a href=\"/\" id=\"campaign-header\" class=\"home\">\\n      calibur.tv\\n    </a></div>'),e._ssrNode('<div id=\"campaign-body\">',\"</div>\",[t(e.selectedTheme,{tag:\"component\",class:{creating:e.creating},attrs:{image:e.result}})],1),e._ssrNode('<div id=\"campaign-footer\"><button class=\"select-btn\">更换场景</button><button class=\"create-btn\">'+e._ssrEscape(e._s(e.result?\"重新制作\":\"生成海报\"))+'</button></div><div class=\"shim-footer\"></div>'),t(\"v-drawer\",{attrs:{from:\"bottom\",size:\"70%\",\"header-text\":\"选择场景\"},model:{value:e.openSelectThemeDrawer,callback:function(a){e.openSelectThemeDrawer=a},expression:\"openSelectThemeDrawer\"}},[t(\"v-radio\",{attrs:{title:\"选择你喜欢的番剧\",options:e.themes},model:{value:e.selectedTheme,callback:function(a){e.selectedTheme=a},expression:\"selectedTheme\"}})],1)],2)},staticRenderFns:[]};a.a=n}};",
    "7.server-bundle.js": "exports.ids=[7],exports.modules={164:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(254),s=a.n(i);for(var r in i)\"default\"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);var n=a(371);var o=function(e){var t;(t=a(369)).__inject__&&t.__inject__(e)},l=a(2)(s.a,n.a,!1,o,null,\"066ae726\");t.default=l.exports},180:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=o(a(12)),s=o(a(0)),r=o(a(1)),n=o(a(15));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"ImageWaterfall\",components:{waterfall:function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,149))},\"waterfall-slot\":function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,150))}},props:{loading:{type:Boolean,required:!0},bangumi:{type:Array,default:function(){return[]}},role:{type:Array,default:function(){return[]}}},computed:{page:function(){return this.$route.name},showSortHeader:function(){return!Array.isArray(this.options)},waterfall:function(){return this.$store.state.image.waterfall},list:function(){return this.waterfall.data},noMore:function(){return this.waterfall.noMore},options:function(){return this.waterfall.options},curUserId:function(){return this.$store.state.login?this.$store.state.user.id:-1},zone:function(){return this.$store.state.user.zone},pickerDrawerHeaderText:function(){return this.openBangumisDrawer?\"番剧\":this.openImageTagsDrawer?\"类型\":this.openImageSizeDrawer?\"尺寸\":this.openImageRoleDrawer?\"角色\":this.openImageAlbumDrawer?\"相册\":\"选项卡\"},albumBangumiPlaceholder:function(){var e=this;if(this.loadingBangumi)return\"加载中...\";var t=\"点击选择番剧\";return this.bangumiSlots[0].values.forEach(function(a){a.id===e.albumData.bangumiId&&(t=a.name)}),t},imageBangumiPlaceholder:function(){return this.loadingBangumi?\"加载中...\":this.imageData.selectedBangumi?this.getNameById(\"bangumi\",this.imageData.bangumiId):\"点击选择番剧\"},imageTagsPlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedTags?this.getNameById(\"tags\",this.imageData.tagsId):\"点击选择类型\"},imageSizePlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedSize?this.getNameById(\"size\",this.imageData.sizeId):\"点击选择尺寸\"},imageRolePlaceholder:function(){return this.loadingBangumiRole?\"加载中...\":this.imageData.selectedRole?this.getNameById(\"role\",this.imageData.roleId):\"点击选择角色（可选）\"}},data:function(){return{uploadHeaders:{token:\"\"},openEditModal:!1,openEditAlbumModal:!1,toggleSortDrawer:!1,bangumiRoles:{},loadingUserBangumiFetch:!1,loadingUploadTypeFetch:!1,submitting:!1,selectedTagsId:0,selectedSizeId:0,selectedCreatorId:-1,albumData:{id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[],is_cartoon:!1},originAlbumData:{name:\"\",bangumiId:\"\",url:\"\"},imageData:{id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},originImageData:{bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\"},loadingBangumi:!1,loadingUploadType:!1,loadingBangumiRole:!1,bangumiSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],tagsSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sizeSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],roleSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sortSlots:[{flex:1,values:[],defaultIndex:0,textAlign:\"right\"},{flex:1,values:[],defaultIndex:0,textAlign:\"center\"},{flex:1,values:[{id:-1,name:\"全部\"},{id:1,name:\"仅原创\"},{id:0,name:\"仅搬运\"}],defaultIndex:0,textAlign:\"left\"}],openPickerDrawer:!1,openBangumisDrawer:!1,openImageTagsDrawer:!1,openImageSizeDrawer:!1,openImageRoleDrawer:!1,openImageAlbumDrawer:!1,saveSortSelect:[]}},methods:{isMine:function(e){return this.curUserId===e},computeOptions:function(e){var t=[];return t=this.isMine(e.user_id)?t.concat([\"删除\",\"编辑\"]):t.concat([\"举报\"])},computeBoxHeight:function(e){return this.computeImageHeight(e)+(\"role-show\"===this.page?48:\"user-show\"===this.page?e.bangumi_id?93:48:e.bangumi||e.user?93:48)},computeImageHeight:function(e){return parseInt(e.height/e.width*145,10)},computeImageType:function(e){var t=e.tags,a=e.size.id;if(a&&(this.originImageData.sizeId=a,this.imageData.sizeId=a,this.imageData.selectedSize=!0),t.length){var i=t.length?t[0].id:\"\";this.originImageData.tagsId=i,this.imageData.tagsId=i,this.imageData.selectedTags=!0}},handleLoadMoreClick:function(e){e&&this.$store.commit(\"image/SET_WATERFALL_META\",{size:this.selectedSizeId,tags:this.selectedTagsId,bangumiId:-1,roleId:-1,creator:this.selectedCreatorId}),this.$emit(\"fetch\")},deleteImage:function(e){var t=this,a=e.userId,i=e.id;a===this.curUserId&&new n.default(this).deleteImage({id:i}).then(function(){t.$store.commit(\"image/DELETE_WATERFALL\",{id:i})}).catch(function(e){t.$toast.error(e)})},startEditImage:function(e){this.imageData.id=e.id;var t=e.bangumi_id,a=e.role_id;this.getUserBangumis(),t&&(this.originImageData.bangumiId=t,this.imageData.selectedBangumi=!0,this.imageData.bangumiId=t,this.getBangumiRoles(t)),a&&(this.originImageData.roleId=a,this.imageData.roleId=a,this.imageData.selectedRole=!0),this.computeImageType(e),this.openEditModal=!0},startEditAlbum:function(e){this.albumData.is_cartoon=e.is_cartoon,this.albumData.id=e.id,this.albumData.name=e.name,this.albumData.url=e.url,this.originAlbumData.name=e.name,this.originAlbumData.url=e.url;var t=e.bangumi_id;t&&(this.albumData.bangumiId=t,this.originAlbumData.bangumiId=t),this.getUpToken(),this.getUserBangumis(),this.openEditModal=!0},reportImage:function(e){var t=this;this.$prompt(\"请输入举报原因\",\"提示\",{confirmButtonText:\"提交\",cancelButtonText:\"取消\"}).then(function(a){a.value&&new n.default(t).trialReport({id:e.id}).then(function(){t.$toast.success(\"提交成功！\")})}).catch(function(){})},openSortDrawer:function(){var e=this,t=[{id:0,name:\"全部\"}],a=!Array.isArray(this.options),i=a?t.concat(this.options.tags):[],s=a?t.concat(this.options.size):[];this.sortSlots[0].values=i,this.sortSlots[1].values=s,i.forEach(function(t,a){t.id===e.selectedTagsId&&(e.sortSlots[0].defaultIndex=a)}),s.forEach(function(t,a){t.id===e.selectedSizeId&&(e.sortSlots[1].defaultIndex=a)}),this.sortSlots[2].values.forEach(function(t,a){t.id===e.selectedCreatorId&&(e.sortSlots[2].defaultIndex=a)}),this.toggleSortDrawer=!0},handleMenuSelected:function(e,t){var a=this;\"举报\"===e?this.reportImage(t):\"删除\"===e?this.$confirm(\"删除后不可恢复, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.deleteImage({userId:t.user_id,id:t.id})}).catch(function(){}):\"编辑\"===e&&(this.tagsSlots[0].values=this.options.tags,this.sizeSlots[0].values=this.options.size,t.image_count?(this.albumData={id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[]},this.openEditAlbumModal=!0,this.startEditAlbum(t)):(this.imageData={id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},this.openEditAlbumModal=!1,this.startEditImage(t)))},handleLikeBtnClick:function(e,t){var a=this;if(this.$store.state.login)if(this.isMine(t.user_id))this.$toast.error(\"不能为自己的图片点赞\");else{var i=e.currentTarget;if(t.creator&&!t.liked)return this.$store.state.user.coin?void this.$confirm(\"原创图片点赞需要金币, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.submitToggleLike(i,t)}).catch(function(){}):void this.$toast.error(\"金币不足\");this.submitToggleLike(i,t)}else this.$channel.$emit(\"sign-in\")},handleImageClick:function(e){e.image_count?window.location=this.$alias.imageAlbum(e.id):this.$previewImages(e,e)},handleRolePickerBtnClick:function(){this.imageData.selectedBangumi?this.loadingBangumiRole?this.$toast.error(\"数据加载中\"):this.roleSlots[0].values.length?(this.imageData.selectedRole=!0,this.imageData.roleId||(this.imageData.roleId=this.getSelectedMeta(\"role\",\"id\")),this.switchPickerDrawer(\"openImageRoleDrawer\")):this.$toast.error(\"该番剧下没用可选角色\"):this.$toast.error(\"请先选择番剧\")},handleAlbumBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.albumData.bangumiId||(this.albumData.bangumiId=this.getSelectedMeta(\"bangumi\",\"id\")),this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.imageData.selectedBangumi=!0,this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageTagsPickerBtnClick:function(){this.imageData.selectedTags=!0,this.switchPickerDrawer(\"openImageTagsDrawer\")},handleImageSizePickerBtnClick:function(){this.imageData.selectedSize=!0,this.switchPickerDrawer(\"openImageSizeDrawer\")},switchPickerDrawer:function(e){this.openBangumisDrawer=!1,this.openImageTagsDrawer=!1,this.openImageSizeDrawer=!1,this.openImageRoleDrawer=!1,this.openImageAlbumDrawer=!1,this[e]=!0,this.openPickerDrawer=!0},getUpToken:function(){var e=this;return(0,r.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(\"getUpToken\",e);case 3:e.uploadHeaders.token=e.$store.state.user.uptoken.upToken,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$toast.error(t.t0);case 9:case\"end\":return t.stop()}},t,e,[[0,6]])}))()},submitToggleLike:function(e,t){var a=this;return(0,r.default)(s.default.mark(function i(){var r,o;return s.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.setAttribute(\"disabled\",\"disabled\"),r=new n.default(a),i.prev=2,t.creator||a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:!t.liked}),i.next=6,r.toggleLike({id:t.id});case 6:o=i.sent,t.creator&&(a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:o}),o&&a.$store.commit(\"USE_COIN\"),a.$toast.success(\"操作成功\")),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),a.$toast.error(i.t0);case 13:return i.prev=13,e.removeAttribute(\"disabled\"),i.finish(13);case 16:case\"end\":return i.stop()}},i,a,[[2,10,13,16]])}))()},getUserBangumis:function(){var e=this;return(0,r.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.bangumiSlots[0].values.length){t.next=2;break}return t.abrupt(\"return\");case 2:if(!e.loadingUserBangumiFetch){t.next=4;break}return t.abrupt(\"return\");case 4:return e.loadingUserBangumiFetch=!0,t.prev=5,t.next=8,e.$store.dispatch(\"users/getFollowBangumis\",{ctx:e,zone:e.zone});case 8:e.bangumiSlots[0].values=t.sent;case 9:return t.prev=9,e.loadingUserBangumiFetch=!1,t.finish(9);case 12:case\"end\":return t.stop()}},t,e,[[5,,9,12]])}))()},getBangumiRoles:function(e){var t=this;return(0,r.default)(s.default.mark(function a(){var i;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt(\"return\");case 2:if(!t.bangumiRoles[e]){a.next=5;break}return t.roleSlots[0].values=t.bangumiRoles[e],a.abrupt(\"return\");case 5:return a.next=7,t.$store.dispatch(\"bangumi/getRoles\",{ctx:t,bangumiId:e});case 7:i=a.sent,t.bangumiRoles[e]=i,t.roleSlots[0].values=i;case 10:case\"end\":return a.stop()}},a,t)}))()},handleImageEditDone:function(){var e=this;return(0,r.default)(s.default.mark(function t(){var a,i,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.imageData.selectedSize){t.next=3;break}return e.$toast.error(\"请先选择尺寸\"),t.abrupt(\"return\");case 3:if(e.imageData.selectedTags){t.next=6;break}return e.$toast.error(\"请先选择类型\"),t.abrupt(\"return\");case 6:if(e.imageData.selectedBangumi){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.imageData.bangumiId!==e.originImageData.bangumiId||e.imageData.roleId!==e.originImageData.roleId||e.imageData.sizeId!==e.originImageData.sizeId||e.imageData.tagsId!==e.originImageData.tagsId){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!0,e.$toast.loading(\"修改中...\"),a=new n.default(e),t.prev=17,i=e.imageData.id,t.next=21,a.editImage({id:i,bangumiId:e.imageData.bangumiId||0,roleId:e.imageData.selectedRole&&e.imageData.roleId||0,tags:e.imageData.tagsId,size:e.imageData.sizeId});case 21:r=t.sent,e.$toast.success(\"图片编辑成功！\"),e.$store.commit(\"image/EDIT_WATERFALL\",{id:i,data:r}),e.openEditModal=!1,t.next=30;break;case 27:t.prev=27,t.t0=t.catch(17),e.$toast.error(t.t0);case 30:return t.prev=30,e.submitting=!1,t.finish(30);case 33:case\"end\":return t.stop()}},t,e,[[17,27,30,33]])}))()},handleAlbumEditDone:function(){var e=this;return(0,r.default)(s.default.mark(function t(){var a,r,o,l;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.albumData.name){t.next=3;break}return e.$toast.error(\"请填写专辑名称\"),t.abrupt(\"return\");case 3:if(!(e.albumData.name.length>20)){t.next=6;break}return e.$toast.error(\"专题名称请缩减至20字以内\"),t.abrupt(\"return\");case 6:if(e.albumData.bangumiId){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.albumData.bangumiId!==e.originAlbumData.bangumiId||e.albumData.name!==e.originAlbumData.name||0!==e.albumData.poster.length){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!1,e.$toast.loading(\"修改中...\"),a=new n.default(e),r=e.albumData.id,o=e.albumData.poster.length?e.albumData.poster[0].url:null,t.prev=19,t.next=22,a.editAlbum((0,i.default)({id:r,bangumiId:e.albumData.bangumiId||0,name:e.albumData.name},o?{url:o.key,width:o.width,height:o.height}:{}));case 22:l=t.sent,e.$store.commit(\"image/EDIT_ALBUM\",{id:r,data:l}),e.$store.commit(\"image/EDIT_WATERFALL\",{id:r,data:l}),e.$toast.success(\"专辑编辑成功！\"),e.openEditModal=!1,e.$refs.uploader.clearFiles(),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(19),e.$toast.error(t.t0);case 33:return t.prev=33,e.submitting=!1,t.finish(33);case 36:case\"end\":return t.stop()}},t,e,[[19,30,33,36]])}))()},handleError:function(e,t){console.log(e),this.albumData.poster=[],this.$toast.error(\"图片：\"+t.name+\" 上传失败\")},beforeUpload:function(e){if(this.$store.state.login){var t=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(e.type),a=e.size/1024/1024<5;return t?a?(this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:\"album\",id:this.albumData.id,file:e}),!0):(this.$toast.error(\"图片大小不能超过 5MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},handleAlbumPosterRemove:function(){this.albumData.poster=[]},handleAlbumUploadSuccess:function(e,t){this.albumData.poster=[{name:t.name,url:e.data}]},openCreateImageModal:function(){this.$store.state.login?this.$channel.$emit(\"open-create-image-drawer\"):this.$channel.$emit(\"sign-in\")},getSelectedMeta:function(e,t){var a=e+\"Slots\";return this[a][0].values.length?this[a][0].values[this[a][0].defaultIndex][t]:0},getNameById:function(e,t){var a=e+\"Slots\",i=\"\";return this[a][0].values.length?(this[a][0].values.forEach(function(e){e.id===t&&(i=e.name)}),i):i},onTagsValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.tagsId=i,this.tagsSlots[0].values.forEach(function(e,t){e.id===i&&(a.tagsSlots[0].defaultIndex=t)})}},onSizeValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.sizeId=i,this.sizeSlots[0].values.forEach(function(e,t){e.id===i&&(a.sizeSlots[0].defaultIndex=t)})}},onRoleValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.roleId=i,this.roleSlots[0].values.forEach(function(e,t){e.id===i&&(a.roleSlots[0].defaultIndex=t)})}},onBangumiValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.bangumiSlots[0].values.forEach(function(e,t){e.id===i&&(a.bangumiSlots[0].defaultIndex=t)}),this.openEditAlbumModal?this.albumData.bangumiId=i:(this.imageData.bangumiId=i,this.imageData.selectedRole=!1,this.getBangumiRoles(this.getSelectedMeta(\"bangumi\",\"id\")))}},onSortValuesChange:function(e,t){this.saveSortSelect=t},handleSelectedSort:function(){var e=this.saveSortSelect[0].id,t=this.saveSortSelect[1].id,a=this.saveSortSelect[2].id;this.selectedTagsId===e&&this.selectedSizeId===t&&this.selectedCreatorId===a||(this.selectedTagsId=e,this.selectedSizeId=t,this.selectedCreatorId=a,this.handleLoadMoreClick(!0))}}}},182:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"post-flow-item\",props:{item:{required:!0,type:Object}},methods:{imageFilter:function(e){return e.slice(0,3)}}}},189:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(180),s=a.n(i);for(var r in i)\"default\"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);var n=a(192);var o=function(e){var t;(t=a(190)).__inject__&&t.__inject__(e)},l=a(2)(s.a,n.a,!1,o,null,\"5cb66ef0\");t.default=l.exports},190:function(e,t,a){var i=a(191);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var s=a(4);e.exports.__inject__=function(e){s(\"527e3153\",i,!0,e)}},191:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#image-waterfall{margin-right:-5px;background-color:#fff}#image-waterfall .image-container{position:relative;width:310px;margin:0 auto 15px}#image-waterfall .image-item{padding-right:10px;padding-bottom:10px;margin-left:3px;margin-top:3px}#image-waterfall .image-item .item-wrap{font-size:0;position:relative}#image-waterfall .image-item .item-wrap.album-wrap{cursor:pointer}#image-waterfall .image-item .item-wrap.album-wrap:after{content:\"\";position:absolute;bottom:0;left:0;width:100%;height:50px;opacity:.3;background-color:transparent;background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(20%,rgba(0,0,0,.1)),color-stop(35%,rgba(0,0,0,.2)),color-stop(65%,rgba(0,0,0,.6)),to(rgba(0,0,0,.9)));background-image:-o-linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9));background-image:linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9))}#image-waterfall .image-item .item-wrap .creator{font-size:20px;position:absolute;left:5px;top:2px;z-index:1;color:#ffcf00}#image-waterfall .image-item .item-wrap .album-info{position:absolute;left:7px;bottom:4px;z-index:1;color:#fff;line-height:20px}#image-waterfall .image-item .item-wrap .album-info i{font-size:20px;vertical-align:middle}#image-waterfall .image-item .item-wrap .album-info .image-count{margin-left:5px;font-size:14px;vertical-align:middle}#image-waterfall .image-item .item-wrap .v-select-wrap{position:absolute;right:0;top:0;width:58px;line-height:16px;font-size:12px;color:#fff;z-index:1;margin-top:7px;margin-right:6px}#image-waterfall .image-item .item-wrap .v-select-wrap .iconfont{text-shadow:0 1px 10px grey}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-wrap{background-color:#fff;border:1px solid #f0f0f0;border-radius:4px;top:18px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item{height:36px;line-height:35px;color:#535353;font-size:12px;padding-left:15px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item:not(:last-child){border-bottom:1px solid #f0f0f0}#image-waterfall .image-item .image{width:100%;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.2);box-shadow:0 1px 3px rgba(0,0,0,.2);overflow:hidden}#image-waterfall .image-item .image .desc{padding:5px 8px;height:48px}#image-waterfall .image-item .image .desc .name{max-width:140px;margin-bottom:7px;display:block;font-size:12px;line-height:18px}#image-waterfall .image-item .image .desc .tags{margin-bottom:7px}#image-waterfall .image-item .image .desc .tags .el-tag{margin-right:7px;max-width:60px;font-size:12px}#image-waterfall .image-item .image .desc .meta{font-size:11px;color:#ccd0d7;overflow:hidden;text-align:right;margin-top:1px}#image-waterfall .image-item .image .desc .meta .like{display:block;text-align:left;width:100%;color:#ccd0d7;font-size:12px;line-height:12px}#image-waterfall .image-item .image .desc .meta .like.liked{color:#f25d8e}#image-waterfall .image-item .image .desc .meta time{margin-top:3px}#image-waterfall .image-item .image .detail{padding:8px;border-top:1px solid #f2f2f2;background-color:#fafafa;font-size:12px;line-height:14px;color:#999}#image-waterfall .image-item .image .detail .margin-top{margin-top:8px}#image-waterfall .image-item .image .detail .info{overflow:hidden}#image-waterfall .image-item .image .detail a{display:block;color:#777;font-size:12px}#image-waterfall .image-item .image .bangumi .avatar{float:left;margin-right:8px}#image-waterfall .image-item .image .bangumi .avatar img{width:28px;height:28px}#image-waterfall .image-item .image .user .avatar{float:left;margin-right:8px;overflow:hidden;border:1px solid #f0f0f0;border-radius:50%;width:28px;height:28px}#image-waterfall .image-item .image .user .avatar img{display:block;width:100%;height:100%;border-radius:14px}#image-waterfall .image-item .image .user .extra{margin-top:3px}#image-waterfall .edit-image-modal .field{font-size:16px;line-height:48px}#image-waterfall .edit-image-modal .field span{float:left}#image-waterfall .edit-image-modal .field div{color:#000;overflow:hidden}#image-waterfall .edit-image-modal .btn-submit{margin-top:15px}#image-waterfall .el-upload--picture-card,#image-waterfall .el-upload-list__item{width:15vw;height:15vw;line-height:15vw}#image-waterfall .el-upload-list__item-delete{float:none!important}#image-waterfall .btn-sort{width:100%;padding-bottom:5px;margin-bottom:10px;padding-top:15px}#image-waterfall .btn-sort span{float:left;margin-left:8px;font-size:13px}#image-waterfall .btn-sort .iconfont{float:right;margin-right:13px;font-size:12px}#image-waterfall .sort-image-drawer{border-radius:5px 5px 0 0}',\"\"])},192:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.list.length?a(\"div\",{attrs:{id:\"image-waterfall\"}},[a(\"no-ssr\",[a(\"div\",{staticClass:\"image-container\"},[e.showSortHeader?[a(\"button\",{staticClass:\"btn-sort clearfix\",on:{click:e.openSortDrawer}},[a(\"span\",[e._v(\"筛选\")]),a(\"i\",{staticClass:\"iconfont icon-101\"})]),a(\"v-drawer\",{staticClass:\"sort-image-drawer\",attrs:{\"header-text\":\"图片筛选\",from:\"bottom\",size:\"250px\",\"submit-text\":\"确认\"},on:{submit:e.handleSelectedSort},model:{value:e.toggleSortDrawer,callback:function(t){e.toggleSortDrawer=t},expression:\"toggleSortDrawer\"}},[a(\"mt-picker\",{attrs:{slots:e.sortSlots,valueKey:\"name\"},on:{change:e.onSortValuesChange}})],1)]:e._e(),a(\"waterfall\",{attrs:{\"line-gap\":155,\"auto-resize\":!1}},e._l(e.list,function(t,i){return a(\"waterfall-slot\",{key:t.id,staticClass:\"image-item\",attrs:{width:\"145\",height:e.computeBoxHeight(t),order:i}},[a(\"div\",{staticClass:\"image\"},[a(\"div\",{staticClass:\"item-wrap\",class:[t.image_count?\"album-wrap\":\"image-wrap\"],on:{click:function(a){e.handleImageClick(t)}}},[t.creator?a(\"i\",{staticClass:\"creator iconfont icon-huangguan\"}):e._e(),e.computeOptions(t).length?a(\"div\",{staticClass:\"menu\",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a(\"v-select\",{attrs:{placeholder:\"\",options:e.computeOptions(t),abort:!0},on:{submit:function(a){e.handleMenuSelected(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-101\",attrs:{slot:\"tail\"},slot:\"tail\"})])],1):e._e(),a(\"img\",{attrs:{width:\"145\",height:e.computeImageHeight(t),src:e.$resize(t.url,{width:290,mode:2})}}),t.image_count?a(\"div\",{staticClass:\"album-info\"},[a(\"i\",{staticClass:\"el-icon-picture-outline\"}),a(\"span\",{staticClass:\"image-count\",domProps:{textContent:e._s(t.image_count)}})]):e._e()]),a(\"div\",{staticClass:\"desc\"},[t.image_count?a(\"a\",{staticClass:\"name oneline\",attrs:{href:\"javascript:;\"},domProps:{textContent:e._s(t.name)}}):a(\"div\",{staticClass:\"tags\"},[a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.size.name)}}),e._l(t.tags,function(t){return a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.name)}})})],2),a(\"div\",{staticClass:\"meta\"},[a(\"button\",{staticClass:\"like\",class:{liked:t.liked},on:{click:function(a){e.handleLikeBtnClick(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-msnui-love\"}),e._v(\"\\n                  \"+e._s(t.like_count||\"\")+\"\\n                \")])])]),\"image-trending\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\"},[a(\"a\",{staticClass:\"oneline\",class:{\"margin-top\":!t.bangumi},attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.bangumi_id?a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}):e._e()])]):\"user-show\"===e.page?[t.bangumi_id?a(\"div\",{staticClass:\"detail bangumi clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.bangumi(t.bangumi.id)}},[a(\"img\",{attrs:{src:e.$resize(t.bangumi.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}),t.role?a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}}):e._e()])]):e._e()]:\"bangumi-show\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.role_id?a(\"a\",{attrs:{href:e.$alias.cartoonRole(t.role_id)}},[a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}})]):e._e()])]):e._e()],2)])}))],2)]),a(\"more-btn\",{attrs:{\"no-more\":e.noMore,loading:e.loading,length:e.list.length},on:{fetch:function(t){e.handleLoadMoreClick(!1)}}}),a(\"v-drawer\",{staticClass:\"edit-image-modal\",attrs:{\"header-text\":e.openEditAlbumModal?\"编辑相册\":\"编辑图片\",from:\"bottom\",size:\"100%\",backdrop:!1},model:{value:e.openEditModal,callback:function(t){e.openEditModal=t},expression:\"openEditModal\"}},[a(\"div\",{staticClass:\"container\"},[e.openEditAlbumModal?[a(\"div\",{staticClass:\"field\"},[a(\"v-field\",{attrs:{label:\"名称\",placeholder:\"请填写相册名称\",\"label-size\":\"48px\"},model:{value:e.albumData.name,callback:function(t){e.$set(e.albumData,\"name\",t)},expression:\"albumData.name\"}})],1),e.albumData.is_cartoon?e._e():a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.albumBangumiPlaceholder)},on:{click:e.handleAlbumBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"封面：\")]),a(\"el-upload\",{ref:\"albumUploader\",attrs:{action:\"https://upload.qiniup.com\",\"list-type\":\"picture-card\",data:e.uploadHeaders,disabled:!0,\"on-error\":e.handleError,\"before-upload\":e.beforeUpload,\"on-remove\":e.handleAlbumPosterRemove,\"on-success\":e.handleAlbumUploadSuccess}},[e._v(\"+\")])],1),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleAlbumEditDone}},[e._v(\"确认修改\")])]:[a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"类型：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageTagsPlaceholder)},on:{click:e.handleImageTagsPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"尺寸：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageSizePlaceholder)},on:{click:e.handleImageSizePickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageBangumiPlaceholder)},on:{click:e.handleImageBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"角色：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageRolePlaceholder)},on:{click:e.handleRolePickerBtnClick}})]),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleImageEditDone}},[e._v(\"确认修改\")])]],2),a(\"v-drawer\",{staticClass:\"bangumis-drawer\",attrs:{from:\"bottom\",size:\"250px\",\"header-text\":e.pickerDrawerHeaderText},model:{value:e.openPickerDrawer,callback:function(t){e.openPickerDrawer=t},expression:\"openPickerDrawer\"}},[e.openBangumisDrawer?a(\"mt-picker\",{attrs:{slots:e.bangumiSlots,valueKey:\"name\"},on:{change:e.onBangumiValuesChange}}):e.openImageTagsDrawer?a(\"mt-picker\",{attrs:{slots:e.tagsSlots,valueKey:\"name\"},on:{change:e.onTagsValuesChange}}):e.openImageSizeDrawer?a(\"mt-picker\",{attrs:{slots:e.sizeSlots,valueKey:\"name\"},on:{change:e.onSizeValuesChange}}):e.openImageRoleDrawer?a(\"mt-picker\",{attrs:{slots:e.roleSlots,valueKey:\"name\"},on:{change:e.onRoleValuesChange}}):e._e()],1)],1)],1):a(\"more-btn\",{attrs:{\"no-more\":e.noMore,length:e.list.length,loading:!1}},[a(\"button\",{on:{click:e.openCreateImageModal}},[e._v(\"上传图片\")])])},staticRenderFns:[]};t.a=i},199:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(182),s=a.n(i);for(var r in i)\"default\"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);var n=a(202);var o=function(e){var t;(t=a(200)).__inject__&&t.__inject__(e)},l=a(2)(s.a,n.a,!1,o,null,\"23db1e41\");t.default=l.exports},200:function(e,t,a){var i=a(201);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var s=a(4);e.exports.__inject__=function(e){s(\"04594909\",i,!0,e)}},201:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.post-item{background-color:#fff;padding-top:15px;padding-left:15px;padding-right:15px}.post-item .header{height:35px;margin-bottom:9px}.post-item .header .avatar{margin-right:7px;display:block;float:left;position:relative;width:35px;height:35px}.post-item .header .avatar img{display:block;width:100%;height:100%;border-radius:17.5px}.post-item .header .avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #e5e9ef;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}.post-item .header .face{margin-right:10px;display:block;float:left;width:35px;height:35px}.post-item .header .face img{display:block;width:100%;height:auto;overflow:hidden}.post-item .header .name{vertical-align:middle;display:block;overflow:hidden}.post-item .header .name p{margin-bottom:2px;margin-top:2px;font-size:14px;color:#333;line-height:15px}.post-item .header .name span,.post-item .header .name time{color:#999;font-size:11px}.post-item .body{display:block}.post-item .body .content{color:#000;font-size:16px;margin-bottom:4px;line-height:24px;max-height:48px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.post-item .body .images .image-full{height:190px;width:100%;background-color:#eee}.post-item .body .images .image-list img{width:32%;height:auto}.post-item .body .images .image-list img:not(:last-child){margin-right:2%}.post-item .footer{height:44px;line-height:44px}.post-item .footer .bangumi{color:#999;font-size:12px;display:block;margin-right:8px}.post-item .footer .stats{height:100%;color:#666;float:right;margin-top:-2px}.post-item .footer .stats span{margin-left:10px;font-size:12px;margin-right:2px}.post-item .footer .stats i{font-size:12px;display:inline-block;vertical-align:middle}.post-item .footer .stats .done{color:#00a1d6}.post-item .footer .stats .icon-shoucang{margin-top:-3px}',\"\"])},202:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"li\",{staticClass:\"post-item\"},[e._ssrNode('<div class=\"header\">',\"</div>\",[e.item.user?[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.user(e.item.user.zone))+' class=\"avatar\">',\"</a>\",[a(\"v-img\",{attrs:{width:\"70\",src:e.item.user.avatar}})],1),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(e.item.id))+' class=\"name\">',\"</a>\",[e._ssrNode('<p class=\"oneline\">'+e._ssrEscape(e._s(e.item.title))+\"</p>\"),e._ssrNode(\"<span>\",\"</span>\",[e._ssrNode(e._ssrEscape(e._s(e.item.user.nickname)+\" · \")),a(\"v-time\",{model:{value:e.item.created_at,callback:function(t){e.$set(e.item,\"created_at\",t)},expression:\"item.created_at\"}})],2)],2)]:[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.bangumi.id))+' class=\"face\">',\"</a>\",[a(\"v-img\",{attrs:{width:\"70\",src:e.item.bangumi.avatar}})],1),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.bangumi.id))+' class=\"name\">',\"</a>\",[e._ssrNode(\"<p>\"+e._ssrEscape(e._s(e.item.bangumi.name))+\"</p><span>发表于 · </span>\"),a(\"v-time\",{model:{value:e.item.created_at,callback:function(t){e.$set(e.item,\"created_at\",t)},expression:\"item.created_at\"}})],2)]],2),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(e.item.id))+' class=\"body\">',\"</a>\",[e._ssrNode('<p class=\"content\">'+e._ssrEscape(e._s(e.item.desc))+\"</p>\"),e.item.images.length?e._ssrNode('<div class=\"images clearfix\">',\"</div>\",[1===e.item.images.length?a(\"v-img\",{staticClass:\"image-full bg\",attrs:{src:e.item.images[0].url,height:\"190\",mode:\"2\",tag:\"div\"}}):a(\"div\",{staticClass:\"image-list\"},e._l(e.imageFilter(e.item.images),function(e,t){return a(\"v-img\",{key:t,attrs:{src:e.url,width:\"110\"}})}))],1):e._e()],2),e._ssrNode('<div class=\"footer\"><div class=\"stats\"><span'+e._ssrClass(null,{done:e.item.liked})+'><i class=\"iconfont icon-guanzhu\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.like_count))+\"\\n      \")+\"</span><span\"+e._ssrClass(null,{done:e.item.marked})+'><i class=\"iconfont icon-shoucang\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.mark_count))+\"\\n      \")+\"</span><span\"+e._ssrClass(null,{done:e.item.commented})+'><i class=\"iconfont icon-pinglun1\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.comment_count))+\"\\n      \")+'</span><span><i class=\"iconfont icon-yuedu\"></i>'+e._ssrEscape(\"\\n        \"+e._s(e.$utils.shortenNumber(e.item.view_count))+\"\\n      \")+\"</span></div>\"+(e.item.bangumi&&e.item.user?\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(e.item.bangumi.id))+' class=\"bangumi oneline\">'+e._ssrEscape(e._s(e.item.bangumi.name))+\"</a>\":\"\\x3c!----\\x3e\")+'</div><div class=\"hr\"></div>')],2)},staticRenderFns:[]};t.a=i},254:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=l(a(0)),s=l(a(35)),r=l(a(1)),n=l(a(189)),o=l(a(199));function l(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"page-user\",asyncData:function(e){var t=this,a=e.route,n=e.store,o=e.ctx;return(0,r.default)(i.default.mark(function e(){var r,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.params.zone,l=[n.dispatch(\"users/getUser\",{ctx:o,zone:r}),n.dispatch(\"users/getFollowBangumis\",{ctx:o,zone:r})],e.next=4,s.default.all(l);case 4:case\"end\":return e.stop()}},e,t)}))()},head:function(){var e=this.user;if(e)return{title:e.nickname+\" - 用户\",meta:[{hid:\"description\",name:\"description\",content:e.signature},{hid:\"keywords\",name:\"keywords\",content:\"calibur,用户,天下漫友是一家,\"+e.zone+\",\"+e.nickname}]}},components:{ImageWaterfall:n.default,PostFlowItem:o.default},computed:{zone:function(){return this.$route.params.zone},isMe:function(){return!!this.$store.state.login&&this.zone===this.self.zone},self:function(){return this.$store.state.user},user:function(){return this.isMe?this.self:this.$store.state.users.list[this.zone]},bangumis:function(){var e=this.$store.state.users.list[this.zone];return e?e.bangumis:[]},posts:function(){return\"bangumi\"===this.sort?{}:this.$store.state.users.posts[this.sort]},daySigned:function(){return!!this.self&&this.self.daySign},coinCount:function(){return this.self?this.self.coin:0},roles:function(){return this.$store.state.users.roles.data},noMoreRoles:function(){return this.$store.state.users.roles.noMore},images:function(){return this.$store.state.image.waterfall}},data:function(){return{sort:\"bangumi\",signDayLoading:!1,loadingRoles:!1,loadingUserImageFetch:!1,userImageLoaded:!1}},methods:{switchTab:function(e){this.sort=e,\"bangumi\"!==e&&(\"role\"!==e?\"image\"!==e?this.getUserPosts(!0):this.getUserImages(!0):this.getUserRoles(!0))},getUserPosts:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.$store.state.users.posts[this.sort].data.length&&this.$store.state.users.posts.zone===this.user.zone||this.$store.dispatch(\"users/getFollowPosts\",{type:this.sort,zone:this.user.zone})},getUserImages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.default)(i.default.mark(function a(){return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!e.userImageLoaded){a.next=2;break}return a.abrupt(\"return\");case 2:if(!e.loadingUserImageFetch){a.next=4;break}return a.abrupt(\"return\");case 4:return e.loadingUserImageFetch=!0,a.prev=5,a.next=8,e.$store.dispatch(\"image/getUserImages\",{zone:e.user.zone,ctx:e,force:t});case 8:e.userImageLoaded=!0,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(5),e.$toast.error(a.t0);case 14:return a.prev=14,e.loadingUserImageFetch=!1,a.finish(14);case 17:case\"end\":return a.stop()}},a,e,[[5,11,14,17]])}))()},getUserRoles:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.default)(i.default.mark(function a(){return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.loadingRoles){a.next=2;break}return a.abrupt(\"return\");case 2:return e.loadingRoles=!0,a.prev=3,a.next=6,e.$store.dispatch(\"users/getFollowRoles\",{ctx:e,zone:e.user.zone,reset:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(3),e.$toast.error(a.t0);case 11:return a.prev=11,e.loadingRoles=!1,a.finish(11);case 14:case\"end\":return a.stop()}},a,e,[[3,8,11,14]])}))()},handleDaySign:function(){var e=this;return(0,r.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.daySigned&&!e.signDayLoading){t.next=2;break}return t.abrupt(\"return\");case 2:return e.signDayLoading=!0,t.prev=3,t.next=6,e.$store.dispatch(\"users/daySign\",{ctx:e});case 6:e.$store.commit(\"SET_USER_INFO\",{daySign:!0,coin:e.coinCount+1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),e.$toast.error(t.t0);case 12:return t.prev=12,e.signDayLoading=!1,t.finish(12);case 15:case\"end\":return t.stop()}},t,e,[[3,9,12,15]])}))()},imageFilter:function(e){return e.slice(0,3)}}}},369:function(e,t,a){var i=a(370);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var s=a(4);e.exports.__inject__=function(e){s(\"87a7641a\",i,!0,e)}},370:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#user-show .user-banner{position:relative;width:100%;overflow:hidden;z-index:1;height:120px}#user-show .user-banner .img{width:110%;height:120px;margin:-60px -55%;position:absolute;top:50%;left:50%;z-index:-1}#user-show .user-panel{position:relative;z-index:2}#user-show .user-panel .avatar{position:absolute;left:15px;top:-40px;width:80px;height:80px}#user-show .user-panel .avatar img{display:block;width:100%;height:100%;border-radius:40px}#user-show .user-panel .avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}#user-show .user-panel .info{padding-left:90px;padding-bottom:10px}#user-show .user-panel .info .nickname{overflow:hidden;line-height:40px}#user-show .user-panel .info button{margin-top:8px;float:right;position:relative;padding:4px 10px;font-size:14px;color:#00a1d6;background-color:transparent;border-radius:8px;white-space:nowrap}#user-show .user-panel .info button:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #00a1d6;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#user-show .user-panel .faker-tips{margin-bottom:5px;padding:8px 16px;border-radius:4px;background-color:#fef0f0;color:#f56c6c;margin-top:10px}#user-show .user-panel .faker-tips span{font-size:13px;line-height:18px;font-weight:700}#user-show .user-panel .faker-tips p{font-size:12px;margin-top:5px}#user-show .user-panel .signature{font-size:13px;line-height:18px}#user-show #bangumis li{position:relative;height:62px;padding:8px 0}#user-show #bangumis li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#user-show #bangumis li a{display:block}#user-show #bangumis li img{width:46px;height:46px;margin-right:12px;float:left}#user-show #bangumis li p{color:#000;font-size:12px;margin-top:6px;margin-bottom:5px;line-height:14px;max-height:28px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}#user-show #posts-of-reply{background-color:#fff}#user-show #posts-of-reply li{float:none;padding:10px;position:relative}#user-show #posts-of-reply li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#user-show #posts-of-reply li .header{position:relative;height:32px;line-height:32px}#user-show #posts-of-reply li .header .time{float:right;display:block;color:#999;font-size:12px;position:relative;z-index:1;margin-right:12px}#user-show #posts-of-reply li .origin{display:block;background-color:#e5e9ef;padding:10px 20px;margin:10px 0;border-radius:5px}#user-show #posts-of-reply li .reply{display:block;border-left:5px solid #e5e9ef;margin:10px 0;padding-left:10px}#user-show #posts-of-reply li .content{margin-top:3px;color:#666;font-size:12px;line-height:22px;max-height:44px;overflow:hidden}#user-show #posts-of-reply li .images{margin-bottom:5px}#user-show #posts-of-reply li .images .image-full{height:190px;width:100%}#user-show #posts-of-reply li .images .image-list img{width:32%;height:auto}#user-show #posts-of-reply li .images .image-list img:not(:last-child){margin-right:2%}#user-show #posts-of-reply li .footer{color:#a3a8ad;font-size:12px;line-height:24px}#user-show #posts-of-reply li .footer span{margin:0 5px}#user-show #roles-of-mine li{position:relative;margin-top:15px;padding-bottom:15px}#user-show #roles-of-mine li:not(:last-child):after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#user-show #roles-of-mine li .avatar{width:80px;height:80px;display:block;float:left;overflow:hidden;border-radius:5px;margin-right:10px;border:1px solid #e5e9ef}#user-show #roles-of-mine li .avatar img{width:100%;height:auto}#user-show #roles-of-mine li .summary{overflow:hidden}#user-show #roles-of-mine li .summary .role{display:block;font-size:14px;line-height:20px;height:60px;overflow:hidden}#user-show #roles-of-mine li .summary .role .name{font-weight:700}#user-show #roles-of-mine li .summary .role .intro{color:#000}#user-show #roles-of-mine li .summary .lover{height:20px;line-height:20px;vertical-align:middle;font-size:13px;color:#6d757a;overflow:hidden;text-align:right}#user-show #roles-of-mine li .summary .lover span{margin-left:10px;font-size:12px;margin-right:2px}',\"\"])},371:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"user-show\"}},[e._ssrNode('<div class=\"user-banner\"><div class=\"img bg\"'+e._ssrStyle(null,{backgroundImage:\"url(\"+e.$resize(e.user.banner,{height:240,mode:2})+\")\"},null)+'></div></div><div class=\"user-panel container\"><div class=\"avatar\"><img'+e._ssrAttr(\"src\",e.$resize(e.user.avatar,{width:92}))+' alt=\"avatar\"></div><div class=\"info\">'+(e.isMe?\"<button>\"+e._ssrEscape(e._s(e.daySigned?\"已签到\":\"签到\")+e._s(e.coinCount?\" (\"+e.coinCount+\")\":\"\"))+\"</button>\":\"\\x3c!----\\x3e\")+'<p class=\"nickname oneline\">'+e._ssrEscape(e._s(e.user.nickname))+'</p></div><p class=\"signature\"><strong>签名：</strong>'+e._ssrEscape(\"\\n      \"+e._s(e.user.signature||\"这个人还很神秘...\")+\"\\n    \")+\"</p>\"+(e.user.faker?'<div class=\"faker-tips\"><span>重要提醒</span><p>这是一个运营号，并非本人，该账号下所有信息都是搬运而来</p><p>如果你就是该账号本人，可以联系网站工作人员拿回该账号，该账号通过搬运资源获得的金币也将归你所有</p><p>当然，你也有权要求我们删除所有你的内容</p></div>':\"\\x3c!----\\x3e\")+'</div><div class=\"tabs\"><button'+e._ssrClass(null,{active:\"bangumi\"===e.sort})+\">番剧</button><button\"+e._ssrClass(null,{active:\"mine\"===e.sort})+\">发帖</button><button\"+e._ssrClass(null,{active:\"reply\"===e.sort})+\">回复</button><button\"+e._ssrClass(null,{active:\"role\"===e.sort})+\">偶像</button><button\"+e._ssrClass(null,{active:\"image\"===e.sort})+\">相册</button></div>\"),\"bangumi\"===e.sort?[e.bangumis.length?e._ssrNode('<ul id=\"bangumis\" class=\"container\">',\"</ul>\",e._l(e.bangumis,function(t){return e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(t.id))+' class=\"clearfix\">',\"</a>\",[a(\"v-img\",{staticClass:\"bg\",attrs:{alt:t.name,src:e.$resize(t.avatar,{width:160,height:160})}}),e._ssrNode('<p class=\"name\">'+e._ssrEscape(e._s(t.name))+\"</p>\")],2)])})):a(\"more-btn\",{attrs:{\"no-more\":!0,auto:!0,length:0,loading:!1}})]:\"role\"===e.sort?[e._ssrNode('<ul id=\"roles-of-mine\" class=\"container\">',\"</ul>\",e._l(e.roles,function(t){return e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.cartoonRole(t.id))+\">\",\"</a>\",[e._ssrNode('<div class=\"clearfix\">',\"</div>\",[e._ssrNode('<div class=\"avatar\">',\"</div>\",[a(\"v-img\",{attrs:{src:t.avatar,width:\"80\",height:\"80\"}})],1),e._ssrNode('<div class=\"summary\"><div class=\"role\"><span class=\"name\">'+e._ssrEscape(e._s(t.name))+'</span><span class=\"intro\">'+e._ssrEscape(\"：\"+e._s(t.intro))+'</span></div><div class=\"lover\"><span>'+e._ssrEscape(\"\\n                粉丝:\\n                \"+e._s(e.$utils.shortenNumber(t.fans_count))+\"\\n              \")+\"</span><span>\"+e._ssrEscape(\"\\n                金币:\\n                \"+e._s(e.$utils.shortenNumber(t.star_count))+\"\\n              \")+\"</span><span>\"+e._ssrEscape(\"\\n                贡献:\\n                \"+e._s(t.has_star)+\"\\n              \")+\"</span></div></div>\")],2)])])})),a(\"more-btn\",{attrs:{\"no-more\":e.noMoreRoles,loading:e.loadingRoles,length:e.roles.length},on:{fetch:e.getUserRoles}})]:\"image\"===e.sort?[a(\"image-waterfall\",{attrs:{loading:e.loadingUserImageFetch,bangumi:e.bangumis},on:{fetch:function(t){e.getUserImages(!1)}}},[e.isMe?a(\"button\",[e._v(\"上传图片\")]):e._e()])]:[\"mine\"===e.sort?e._ssrNode('<ul id=\"posts-of-mine\">',\"</ul>\",e._l(e.posts.data,function(e){return a(\"post-flow-item\",{key:e.id,attrs:{item:e}})})):\"reply\"===e.sort?e._ssrNode('<ul id=\"posts-of-reply\">',\"</ul>\",e._l(e.posts.data,function(t){return e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(t.post.id))+' class=\"header\">'+e._ssrEscape(e._s(t.post.title))+\"</a>\"),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(t.post.id,{comment:t.post.id}))+' class=\"origin\">',\"</a>\",[e._ssrNode('<div class=\"content\">'+e._s(t.post.content)+\"</div>\"),t.post.images.length?e._ssrNode('<div class=\"images clearfix\">',\"</div>\",[1===t.post.images.length?a(\"v-img\",{staticClass:\"image-full bg\",attrs:{src:t.post.images[0].url,height:\"190\",mode:\"2\",tag:\"div\"}}):a(\"div\",{staticClass:\"image-list\"},e._l(e.imageFilter(t.post.images),function(e,t){return a(\"v-img\",{key:t,attrs:{src:e.url,width:\"110\"}})}))],1):e._e()],2),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.post(t.post.id,{comment:t.post.id,reply:t.id}))+' class=\"reply\">',\"</a>\",[e._ssrNode('<div class=\"content\">'+e._s(t.content)+\"</div>\"),t.images.length?e._ssrNode('<div class=\"images clearfix\">',\"</div>\",[1===t.images.length?a(\"v-img\",{staticClass:\"image-full bg\",attrs:{src:t.images[0].url,height:\"190\",mode:\"2\",tag:\"div\"}}):a(\"div\",{staticClass:\"image-list\"},e._l(e.imageFilter(t.images),function(e,t){return a(\"v-img\",{key:t,attrs:{src:e.url,width:\"110\"}})}))],1):e._e()],2),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.bangumi(t.bangumi.id))+' class=\"footer\">',\"</a>\",[e._ssrNode(\"\\n          回复于\\n          <span>\"+e._ssrEscape(e._s(t.bangumi.name))+\"</span>\"),a(\"v-time\",{model:{value:t.created_at,callback:function(a){e.$set(t,\"created_at\",a)},expression:\"item.created_at\"}})],2)],2)})):e._e(),a(\"more-btn\",{attrs:{\"no-more\":e.posts.noMore,loading:e.posts.loading,length:e.posts.data.length},on:{fetch:e.getUserPosts}})]],2)},staticRenderFns:[]};t.a=i}};",
    "8.server-bundle.js": "exports.ids=[8],exports.modules={153:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(227),a=r.n(o);for(var n in o)\"default\"!==n&&function(t){r.d(e,t,function(){return o[t]})}(n);var i=r(279);var s=function(t){var e;(e=r(273)).__inject__&&e.__inject__(t)},l=r(2)(a.a,i.a,!1,s,null,\"192799cb\");e.default=l.exports},194:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=s(r(0)),a=s(r(1)),n=s(r(11)),i=s(r(151));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"v-footer\",data:function(){return{openFeedbackDrawer:!1,toggleShareModal:!1,options:[{label:\"功能建议\",value:1},{label:\"遇到错误\",value:2},{label:\"资源报错\",value:4},{label:\"求资源\",value:5},{label:\"求偶像\",value:6},{label:\"其它问题\",value:3}],selectedType:1,content:\"\"}},methods:{logout:function(){this.$cookie.remove(\"JWT-TOKEN\"),new n.default(this).logout(),window.location.reload()},login:function(){this.$channel.$emit(\"sign-in\",!1)},register:function(){this.$channel.$emit(\"sign-up\")},submitFeedback:function(){var t=this;return(0,a.default)(o.default.mark(function e(){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.content.length){e.next=3;break}return t.$toast.error(\"请先填写反馈信息！\"),e.abrupt(\"return\");case 3:return r=new n.default(t),e.next=6,r.feedback({type:t.selectedType,desc:t.content,ua:navigator.userAgent+navigator.appVersion+navigator.vendor});case 6:t.$toast.success(\"反馈成功，感谢您的反馈！\"),t.openFeedbackDrawer=!1;case 8:case\"end\":return e.stop()}},e,t)}))()},openShareModal:function(){var t=this;this.toggleShareModal=!0,this.$nextTick(function(){var e=new i.default(t.$refs.shareBtn);e.on(\"success\",function(r){t.$toast.success(\"复制成功\"),t.toggleShareModal=!1,e.destroy(),r.clearSelection()})})}},mounted:function(){var t=this;this.$channel.$on(\"open-feedback\",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.type,o=e.desc;t.selectedType=r||1,t.content=o||\"\",t.openFeedbackDrawer=!0})}}},223:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(194),a=r.n(o);for(var n in o)\"default\"!==n&&function(t){r.d(e,t,function(){return o[t]})}(n);var i=r(226);var s=function(t){var e;(e=r(224)).__inject__&&e.__inject__(t)},l=r(2)(a.a,i.a,!1,s,null,\"2eb91060\");e.default=l.exports},224:function(t,e,r){var o=r(225);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var a=r(4);t.exports.__inject__=function(t){a(\"77c41a97\",o,!0,t)}},225:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#footer{text-align:center;color:#999;padding:15px;font-size:13px;background-color:#fff}#footer .panel{margin-top:14px}#footer .panel a,#footer .panel button{padding:0 16px;color:#666;font-size:12px}#footer .panel a:not(:last-child),#footer .panel button:not(:last-child){position:relative}#footer .panel a:not(:last-child):after,#footer .panel button:not(:last-child):after{content:\"\";position:absolute;top:0;bottom:0;width:1px;background-color:#ccc;right:0}#footer .beian{margin-top:20px;padding-bottom:8px}#footer .feedback-drawer{text-align:left}#footer .feedback-drawer .desc{margin-top:20px}#footer .feedback-drawer .desc p{margin:8px 0}#footer .feedback-drawer .desc textarea{min-height:120px;background-color:#fafafa;padding:10px}#footer .feedback-drawer .btn-submit{margin-top:15px;margin-bottom:30px}#footer .share-tips-drawer{border-radius:10px 10px 0 0}#footer .share-tips-drawer .container{text-align:left}#footer .share-tips-drawer .container p{margin-top:20px;margin-bottom:20px;line-height:20px;color:#333}#footer .share-tips-drawer .container .btn-submit{margin-top:10px}',\"\"])},226:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"footer\",{attrs:{id:\"footer\"}},[t._ssrNode('<div class=\"panel\">'+(t.$store.state.login?\"<button>退出</button>\":\"<button>登录</button><button>注册</button>\")+'<button>反馈</button><a href=\"/about/hello\">欢迎</a><button>分享</button></div>'),r(\"v-drawer\",{staticClass:\"feedback-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":\"反馈\"},model:{value:t.openFeedbackDrawer,callback:function(e){t.openFeedbackDrawer=e},expression:\"openFeedbackDrawer\"}},[r(\"div\",{staticClass:\"container\"},[r(\"v-radio\",{attrs:{title:\"反馈类型\",options:t.options},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:\"selectedType\"}}),r(\"div\",{staticClass:\"desc\"},[r(\"p\",[t._v(\"详细信息\")]),r(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:t.content,expression:\"content\",modifiers:{trim:!0}}],attrs:{placeholder:\"请填写详细信息\"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),r(\"button\",{staticClass:\"btn-submit\",on:{click:t.submitFeedback}},[t._v(\"提交\")])],1)]),r(\"v-drawer\",{staticClass:\"share-tips-drawer\",attrs:{from:\"bottom\",size:\"80%\",\"header-text\":\"分享语\"},model:{value:t.toggleShareModal,callback:function(e){t.toggleShareModal=e},expression:\"toggleShareModal\"}},[r(\"div\",{staticClass:\"container\"},[r(\"p\",[t._v('\\n        【calibur.tv】一个纯粹的二次元社区网站，致力于实现\"天下漫友是一家\"！\\n      ')]),r(\"p\",[t._v(\"\\n        站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送金币（1金币 = 1人民币）！\\n      \")]),r(\"p\",[t._v(\"\\n        快来加入我们吧~\\\\(^o^)/~ 网址：http://calibur.tv\\n      \")]),r(\"button\",{ref:\"shareBtn\",staticClass:\"btn-submit\",attrs:{\"data-clipboard-text\":\"【calibur.tv】一个纯粹的二次元社区网站，致力于实现'天下漫友是一家'！站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送金币（1金币 = 1人民币）！快来加入我们吧~\\\\(^o^)/~ 网址：http://calibur.tv\"}},[t._v(\"点击复制\")])])]),t._ssrNode('<p class=\"beian\">© 沪ICP备17050785号-1</p>')],2)},staticRenderFns:[]};e.a=o},227:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(r(275)),a=n(r(223));function n(t){return t&&t.__esModule?t:{default:t}}e.default={components:{vHeader:o.default,vFooter:a.default},data:function(){return{showFooter:!0}},mounted:function(){var t=this;this.$channel.$on(\"display-layout-footer\",function(e){t.showFooter=e})}}},228:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"new-header\",computed:{currentUser:function(){return this.$store.state.user},notificationCount:function(){if(!this.currentUser)return 0;var t=this.currentUser.notification-this.$store.state.users.notifications.checked;return t<0?0:t}},methods:{openSignDrawer:function(){this.$channel.$emit(\"sign-in\",!1)},openUserDrawer:function(){this.$channel.$emit(\"open-user-drawer\")},handleLogoClick:function(){this.$toast.info(\"calibur.tv\")}}}},273:function(t,e,r){var o=r(274);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var a=r(4);t.exports.__inject__=function(t){a(\"0acc0164\",o,!0,t)}},274:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#layout-def-new{background-color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}#layout-def-new>.main-view{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}\",\"\"])},275:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=r(228),a=r.n(o);for(var n in o)\"default\"!==n&&function(t){r.d(e,t,function(){return o[t]})}(n);var i=r(278);var s=function(t){var e;(e=r(276)).__inject__&&e.__inject__(t)},l=r(2)(a.a,i.a,!1,s,null,\"291f1b98\");e.default=l.exports},276:function(t,e,r){var o=r(277);\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);var a=r(4);t.exports.__inject__=function(t){a(\"19a9e9fe\",o,!0,t)}},277:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#mew-header{height:48px;padding:0 10px;width:100%}#mew-header .nav-left{float:left}#mew-header .nav-left .logo{width:24px;height:24px;margin-right:8px;margin-left:8px;vertical-align:middle}#mew-header .nav-left a{color:#757575;display:inline-block;-webkit-box-flex:0;font-size:12px;font-weight:600;line-height:48px;padding:0 8px;text-align:center}#mew-header .nav-left a.active{color:#f25d8e}#mew-header .nav-right{overflow:hidden;text-align:right;height:100%}#mew-header .nav-right .icon-apps{font-size:22px;color:#757575;margin-right:12px;line-height:48px}#mew-header .nav-right .sign-btn{display:block;background-color:#f8f8f8;border:1px solid #c6c6c6;line-height:28px;padding:0 9px;border-radius:2px;margin-top:9px;float:right}#mew-header .nav-right .nav-avatar{position:relative;margin-top:11px;float:right}#mew-header .nav-right .nav-avatar .avatar{display:block;width:26px;height:26px;border-radius:13px;border:1px solid #e5e9ef;overflow:hidden}#mew-header .nav-right .nav-avatar .avatar img{display:block;width:100%;height:100%}#mew-header .nav-right .nav-avatar .badge{display:block;position:absolute;top:0;right:0;width:10px;height:10px;border-radius:50%;background-color:red}#mew-header .nav-right .nav-avatar .badge:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}',\"\"])},278:function(t,e,r){\"use strict\";var o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"header\",{attrs:{id:\"mew-header\"}},[t._ssrNode('<div class=\"nav-left\"><img src=\"http://image.calibur.tv/owner/logo-new/logo.png?imageMogr2/auto-orient/strip|imageView2/1/w/72/h/72\" alt=\"logo\" class=\"logo\"><a href=\"/\" class=\"active\">首页</a><a href=\"/bangumi/news\">番剧</a></div>'),t._ssrNode('<div class=\"nav-right\">',\"</div>\",[r(\"el-dropdown\",{attrs:{trigger:\"click\"}},[r(\"span\",{staticClass:\"el-dropdown-link\"},[r(\"i\",{staticClass:\"iconfont icon-apps\"})]),r(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[r(\"el-dropdown-item\",[r(\"a\",{attrs:{href:\"/post/trending/active\"}},[t._v(\"\\n            帖子\\n          \")])]),r(\"el-dropdown-item\",[r(\"a\",{attrs:{href:\"/image/trending/new\"}},[t._v(\"\\n            相册\\n          \")])]),r(\"el-dropdown-item\",[r(\"a\",{attrs:{href:\"/role/trending\"}},[t._v(\"\\n            偶像\\n          \")])])],1)],1),t._ssrNode(t.currentUser?'<div class=\"nav-avatar\"><button class=\"avatar\"><img'+t._ssrAttr(\"src\",t.$resize(t.currentUser.avatar,{width:48}))+' alt=\"avatar\"></button>'+(t.notificationCount?'<span class=\"badge\"></span>':\"\\x3c!----\\x3e\")+\"</div>\":'<button class=\"sign-btn\">登录</button>')],2)],2)},staticRenderFns:[]};e.a=o},279:function(t,e,r){\"use strict\";var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{attrs:{id:\"layout-def-new\"}},[e(\"v-header\"),e(\"router-view\",{staticClass:\"main-view\"}),e(\"v-footer\",{directives:[{name:\"show\",rawName:\"v-show\",value:this.showFooter,expression:\"showFooter\"}]})],1)},staticRenderFns:[]};e.a=o}};",
    "9.server-bundle.js": "exports.ids=[9],exports.modules={165:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(255),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a(379);var o=function(e){var t;(t=a(372)).__inject__&&t.__inject__(e)},l=a(2)(n.a,s.a,!1,o,null,\"74689992\");t.default=l.exports},255:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=c(a(12)),n=c(a(0)),i=c(a(1)),s=c(a(11)),o=c(a(15)),l=c(a(374));function c(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"page-user-setting\",components:{ImageCropper:l.default},computed:{user:function(){return this.$store.state.user}},data:function(){return{settingForm:{nickname:\"\",signature:\"\",sex:0,sexSecret:!1,birthday:\"\"},avatarSelector:{loading:!1,file:null,data:\"\",showDrawer:!1},bannerSelector:{loading:!1,file:null,data:\"\"},sexOptions:[{label:\"男 - 公开\",value:1},{label:\"女 - 公开\",value:2},{label:\"男 - 私密\",value:3},{label:\"女 - 私密\",value:4}]}},methods:{selectAvatar:function(e){var t=this,a=e.target.files[0];if(a)if(-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(a.type)){var r=new FileReader;this.avatarSelector.file=a,r.onload=function(e){t.avatarSelector.data=e.target.result,t.avatarSelector.showDrawer=!0},r.readAsDataURL(a)}else this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\");else this.$toast.error(\"图片选择失败\")},cancelAvatarSelect:function(){var e=this;this.avatarSelector.showDrawer=!1,this.avatarSelector.file=null,this.avatarSelector.data=\"\",this.$nextTick(function(){e.$refs.avatarInput.value=\"\"})},submitAvatarChange:function(e){var t=this;return(0,i.default)(n.default.mark(function a(){var r,i,l,c;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.avatarSelector.loading){a.next=2;break}return a.abrupt(\"return\");case 2:return t.$toast.loading(\"上传中...\"),t.avatarSelector.loading=!0,r=t.$utils.createFileName({userId:t.user.id,type:\"avatar\",id:0,file:t.avatarSelector.file}),i=new o.default,a.prev=6,a.next=9,t.$store.dispatch(\"getUpToken\");case 9:return e.append(\"token\",t.user.uptoken.upToken),e.append(\"key\",r),a.next=13,i.uploadToQiniu(e);case 13:return l=a.sent,c=new s.default(t),a.next=17,c.settingImage({type:\"avatar\",url:l.key});case 17:t.$store.commit(\"SET_USER_INFO\",{avatar:\"\"+t.$cdn.image+l.key}),t.$toast.success(\"头像更新成功\"),a.next=24;break;case 21:a.prev=21,a.t0=a.catch(6),\"string\"==typeof a.t0?t.$toast.error(a.t0):t.$toast.error(\"头像更新失败，请刷新网页重试或选择其他图片\");case 24:return a.prev=24,t.avatarSelector.loading=!1,t.cancelAvatarSelect(),a.finish(24);case 28:case\"end\":return a.stop()}},a,t,[[6,21,24,28]])}))()},selectBanner:function(e){var t=this,a=e.target.files[0];if(-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(a.type)){var r=new FileReader;this.bannerSelector.file=a,r.onload=function(e){t.bannerSelector.data=e.target.result},r.readAsDataURL(a)}else this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\")},cancelBannerSelect:function(){var e=this;this.bannerSelector.file=null,this.bannerSelector.data=\"\",this.$nextTick(function(){e.$refs.bannerInput.value=\"\"})},submitBannerChange:function(e){var t=this;return(0,i.default)(n.default.mark(function a(){var r,i,l,c;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t.bannerSelector.loading){a.next=2;break}return a.abrupt(\"return\");case 2:return t.$toast.loading(\"上传中...\"),t.bannerSelector.loading=!0,r=t.$utils.createFileName({userId:t.user.id,type:\"banner\",id:0,file:t.bannerSelector.file}),i=new o.default,a.prev=6,a.next=9,t.$store.dispatch(\"getUpToken\");case 9:return e.append(\"token\",t.user.uptoken.upToken),e.append(\"key\",r),a.next=13,i.uploadToQiniu(e);case 13:return l=a.sent,c=new s.default(t),a.next=17,c.settingImage({type:\"banner\",url:l.key});case 17:t.$store.commit(\"SET_USER_INFO\",{banner:\"\"+t.$cdn.image+l.key}),t.$toast.success(\"背景更新成功\"),a.next=24;break;case 21:a.prev=21,a.t0=a.catch(6),\"string\"==typeof a.t0?t.$toast.error(a.t0):t.$toast.error(\"背景更新失败，请刷新网页重试或选择其他图片\");case 24:return a.prev=24,t.bannerSelector.loading=!1,t.cancelBannerSelect(),a.finish(24);case 28:case\"end\":return a.stop()}},a,t,[[6,21,24,28]])}))()},saveSetting:function(){var e=this,t=this.settingForm.nickname.replace(/([\\u4e00-\\u9fa5])/g,\"aa\").trim().length;if(t>14||t<1)this.$toast.error(\"昵称长度不符合要求\");else{var a=new s.default(this),n={nickname:this.settingForm.nickname,signature:this.settingForm.signature,sex:parseInt(this.settingForm.sex,10)+(this.settingForm.sexSecret?2:0),birthday:0};a.settingProfile(n).then(function(){e.$toast.success(\"设置成功\"),e.$store.commit(\"SET_USER_INFO\",(0,r.default)({},e.user,n))}).catch(function(t){e.$toast.error(t)})}}},mounted:function(){this.$store.state.login||(window.location.href=\"/\"),this.settingForm={nickname:this.user.nickname,signature:this.user.signature,sex:this.user.sex>2?this.user.sex-2:this.user.sex,sexSecret:this.user.sex>2,birthday:this.user.birthday?this.$utils.timeLong(1e3*this.user.birthday).split(\" \").shift():\"\"}}}},256:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=s(a(0)),n=s(a(1)),i=s(a(166));function s(e){return e&&e.__esModule?e:{default:e}}a(377),t.default={name:\"image-cropper\",components:{croppa:i.default.component},props:{width:{type:Number,default:200},height:{type:Number,default:200},autoSize:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},sizeLimit:{type:Number,default:0},initImage:{type:String},type:{type:String,default:\"normal\",validator:function(e){return~[\"avatar\",\"normal\"].indexOf(e)}},uploading:{type:Boolean,default:!1}},data:function(){return{croppa:{}}},methods:{onInit:function(){\"avatar\"===this.type&&this.croppa.addClipPlugin(function(e,t,a,r,n){e.beginPath(),e.arc(t+r/2,a+n/2,r/2,0,2*Math.PI,!0),e.closePath()})},generateImage:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var a,n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.croppa.promisedBlob();case 2:a=t.sent,(n=new FormData).append(\"file\",a),e.$emit(\"submit\",n);case 6:case\"end\":return t.stop()}},t,e)}))()}}}},372:function(e,t,a){var r=a(373);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"4a22f23e\",r,!0,e)}},373:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#user-setting .form-item{padding-top:15px;padding-bottom:15px;background-color:#fff}#user-setting .form-item .sub-title{margin-left:15px}#user-setting .form-item .input-item{position:relative;height:48px}#user-setting .form-item .input-item:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#user-setting .form-item .input-item input{display:block;overflow:hidden;height:100%;padding-left:60px}#user-setting .form-item .label{text-align:left;position:absolute;left:0;top:0;height:100%;width:60px;font-size:16px;line-height:48px}#user-setting .form-item .other-form-wrap{position:relative}#user-setting .form-item .other-form-wrap .mint-radiolist{padding-left:48px}#user-setting .form-item .other-form-wrap .mint-radiolist-title{display:none}#user-setting .form-item #signature{min-height:120px;padding-left:60px;line-height:26px;padding-top:12px}#user-setting .banner-setting{width:100%;position:relative;overflow:hidden;z-index:1;height:120px;text-align:center;background-size:cover;background-repeat:no-repeat;background-position:50%;text-shadow:0 1px 10px gray;margin-bottom:-15px}#user-setting .banner-setting .file-input{margin-top:60px;margin-left:10px;margin-right:10px}#user-setting .banner-setting .cancel-btn{position:absolute;right:100px;bottom:10px}#user-setting .banner-setting .submit-btn{position:absolute;right:15px;bottom:10px}#user-setting .avatar-setting .avatar{position:relative;vertical-align:middle;display:inline-block;margin-right:20px;border-radius:50%;width:80px;height:80px;background-repeat:no-repeat;background-position:50%;background-size:cover}#user-setting .avatar-setting .avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #ccd0d7;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}#user-setting .avatar-setting .submit-btn{position:absolute;top:380px;left:50%;width:200px;margin-left:-100px}#user-setting .avatar-setting .image-cropper-wrap{width:300px;margin:0 auto}#user-setting .change-image-btn{display:inline-block;position:relative;padding:4px 10px;font-size:14px;color:#00a1d6;background-color:transparent;border-radius:8px;white-space:nowrap}#user-setting .change-image-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #00a1d6;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#user-setting .submit-banner-btn{display:inline-block;position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:transparent;border-radius:8px;white-space:nowrap}#user-setting .submit-banner-btn:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#user-setting .btn-submit{margin-top:20px}',\"\"])},374:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=a(256),n=a.n(r);for(var i in r)\"default\"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a(378);var o=function(e){var t;(t=a(375)).__inject__&&t.__inject__(e)},l=a(2)(n.a,s.a,!1,o,null,\"520f7227\");t.default=l.exports},375:function(e,t,a){var r=a(376);\"string\"==typeof r&&(r=[[e.i,r,\"\"]]),r.locals&&(e.exports=r.locals);var n=a(4);e.exports.__inject__=function(e){n(\"3181d99d\",r,!0,e)}},376:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.image-cropper-wrap{width:100%;height:100%}.image-cropper-wrap .croppa-container{background-color:transparent;width:100%;height:100%}.image-cropper-wrap .croppa-container canvas{-webkit-transition:none;-o-transition:none;transition:none}\",\"\"])},377:function(e,t){},378:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"image-cropper-wrap\"},[a(\"croppa\",{attrs:{width:e.width,height:e.height,\"auto-sizing\":e.autoSize,\"show-remove-button\":!1,\"prevent-white-space\":!0,disabled:e.disabled||e.uploading,\"file-size-limit\":e.sizeLimit,\"zoom-speed\":\"avatar\"===e.type?6:2,\"initial-image\":e.initImage,accept:\"image/png, image/jpeg, image/jpg, image/x-png, image/gif\",\"canvas-color\":\"rgba(0, 0, 0, .05)\"},on:{init:e.onInit},model:{value:e.croppa,callback:function(t){e.croppa=t},expression:\"croppa\"}}),e._ssrNode('<div class=\"tools\"></div>'),a(\"el-button\",{staticClass:\"submit-btn\",attrs:{loading:e.uploading,type:\"warning\",size:\"mini\",round:\"\"},on:{click:e.generateImage}},[e._v(\"确认\")])],2)},staticRenderFns:[]};t.a=r},379:function(e,t,a){\"use strict\";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"user-setting\"}},[e._ssrNode('<div class=\"form-item\">',\"</div>\",[e._ssrNode('<p class=\"sub-title\">背景：</p>'),e._ssrNode('<div class=\"banner-setting\"'+e._ssrStyle(null,{backgroundImage:\"url(\"+e.$resize(e.user.banner,{height:120,mode:2})+\")\"},null)+\">\",\"</div>\",[e.bannerSelector.data?[a(\"image-cropper\",{attrs:{\"init-image\":e.bannerSelector.data,uploading:e.bannerSelector.loading,\"auto-size\":!0},on:{submit:e.submitBannerChange}}),a(\"el-button\",{staticClass:\"cancel-btn\",attrs:{size:\"mini\",type:\"info\",disabled:e.bannerSelector.loading,round:\"\"},on:{click:e.cancelBannerSelect}},[e._v(\"取消\")])]:e._ssrNode('<div class=\"submit-banner-btn file-input\">\\n        点击更新背景\\n        <input type=\"file\" accept=\"image/png, image/jpeg, image/jpg, image/x-png, image/gif\" name=\"file\"></div>')],2)],2),e._ssrNode('<div class=\"hr\"></div>'),e._ssrNode('<div class=\"form-item\">',\"</div>\",[e._ssrNode('<p class=\"sub-title\">头像：</p>'),e._ssrNode('<div class=\"container avatar-setting\">',\"</div>\",[a(\"v-drawer\",{attrs:{\"header-text\":\"头像裁剪\",from:\"bottom\",size:\"450px\"},on:{cancel:e.cancelAvatarSelect},model:{value:e.avatarSelector.showDrawer,callback:function(t){e.$set(e.avatarSelector,\"showDrawer\",t)},expression:\"avatarSelector.showDrawer\"}},[e.avatarSelector.showDrawer?a(\"image-cropper\",{attrs:{\"init-image\":e.avatarSelector.data,uploading:e.avatarSelector.loading,width:300,height:300,type:\"avatar\"},on:{submit:e.submitAvatarChange}}):e._e()],1),e._ssrNode('<div class=\"avatar\"'+e._ssrStyle(null,{backgroundImage:\"url(\"+e.$resize(e.user.avatar,{width:80})+\")\"},null)+'></div><div class=\"change-image-btn file-input\">\\n        点击更新头像\\n        <input type=\"file\" accept=\"image/png, image/jpeg, image/jpg, image/x-png, image/gif\" name=\"file\"></div>')],2)],2),e._ssrNode('<div class=\"hr\"></div>'),e._ssrNode('<div class=\"form-item\">',\"</div>\",[e._ssrNode('<p class=\"sub-title\">其它：</p>'),e._ssrNode('<div class=\"container\">',\"</div>\",[e._ssrNode('<div class=\"input-item\"><label for=\"nickname\" class=\"label\">昵称：</label><input name=\"nickname\" id=\"nickname\" type=\"text\" autocomplete=\"off\" placeholder=\"2-14个字符组成\"'+e._ssrAttr(\"value\",e.settingForm.nickname)+' class=\"input\"></div>'),e._ssrNode('<div class=\"other-form-wrap\">',\"</div>\",[e._ssrNode('<label class=\"label\">性别：</label>'),a(\"v-radio\",{attrs:{options:e.sexOptions},model:{value:e.settingForm.sex,callback:function(t){e.$set(e.settingForm,\"sex\",t)},expression:\"settingForm.sex\"}})],2),e._ssrNode('<div class=\"other-form-wrap\"><label for=\"signature\" class=\"label\">签名：</label><textarea id=\"signature\" placeholder=\"用简单的言语，表达深刻的心\" maxlength=\"150\"></textarea></div><button class=\"btn-submit\">保存</button>')],2)],2)],2)},staticRenderFns:[]};t.a=r}};",
    "10.server-bundle.js": "exports.ids=[10],exports.modules={154:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(229),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(282);var s=function(t){var e;(e=r(280)).__inject__&&e.__inject__(t)},u=r(2)(o.a,i.a,!1,s,null,\"3b05e737\");e.default=u.exports},181:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n,o=r(148),a=(n=o)&&n.__esModule?n:{default:n};e.default={name:\"search-input\",props:{value:{type:String,default:\"\"},type:{type:[String,Number],default:0}},data:function(){return{word:this.value,selectedType:this.type,cacheKey:\"search-history\"}},methods:{handleInputBlur:function(){this.$emit(\"input-blur\"),document.body.scrollTop=0},handleInputFocus:function(){this.$emit(\"input-focus\"),document.body.scrollTop=0},clear:function(){this.word=\"\"},submit:function(){var t=this.word;t&&(this.setHistory(t),this.$router.push({name:\"search-index\",query:{q:t,type:this.selectedType}}))},setHistory:function(t){var e=this;setTimeout(function(){var r=e.getHistory(),n=r.indexOf(t);-1!==n&&r.splice(n,1),r.unshift(t),r.length>10&&r.pop();try{localStorage.setItem(e.cacheKey,(0,a.default)(r))}catch(t){}},0)},getHistory:function(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(t){return[]}}},mounted:function(){var t=this;this.$watch(\"value\",function(e){t.word=e}),this.$watch(\"word\",function(e){t.$emit(\"input\",e)}),this.$watch(\"$route\",function(e){\"search-index\"===e.name&&(t.word=e.query.q,t.selectedType=e.query.type)})}}},195:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=r(181),o=r.n(n);for(var a in n)\"default\"!==a&&function(t){r.d(e,t,function(){return n[t]})}(a);var i=r(198);var s=function(t){var e;(e=r(196)).__inject__&&e.__inject__(t)},u=r(2)(o.a,i.a,!1,s,null,\"2f4cbda2\");e.default=u.exports},196:function(t,e,r){var n=r(197);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"379dcb56\",n,!0,t)}},197:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.search-input-wrap{position:relative;border-radius:8px}.search-input-wrap .clear-btn{float:right;color:#757575;font:27px/25px arial,sans-serif;padding:0 15px 0 5px;line-height:38px;border-top:1px solid #d9d9d9;border-bottom:1px solid #d9d9d9;height:40px}.search-input-wrap .search-btn{float:right;height:40px;width:40px;background-color:#ffafc9;border-top-right-radius:8px;border-bottom-right-radius:8px;font-weight:700;font-size:20px;color:#fff}.search-input-wrap .input-wrap{overflow:hidden;padding:7px 0 6px;border:1px solid #d9d9d9;border-right:0;border-top-left-radius:8px;border-bottom-left-radius:8px;height:40px}.search-input-wrap .input-wrap input{width:100%;height:100%;font-size:18px;color:rgba(0,0,0,.87);word-wrap:break-word;padding:0 0 0 16px}\",\"\"])},198:function(t,e,r){\"use strict\";var n={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"form\",{staticClass:\"search-input-wrap\",attrs:{method:\"get\",action:\"#\"},on:{submit:function(e){e.preventDefault(),t.submit(e)}}},[t._ssrNode('<button type=\"submit\" class=\"search-btn\"><i class=\"iconfont icon-sousuo\"></i></button>'+(t.word?'<button type=\"button\" class=\"clear-btn\">×</button>':\"\\x3c!----\\x3e\")+'<div class=\"input-wrap\"><input maxlength=\"200\" name=\"q\" type=\"search\" aria-autocomplete=\"both\" aria-haspopup=\"false\" autocapitalize=\"off\" autocomplete=\"off\" autocorrect=\"off\" role=\"combobox\" spellcheck=\"false\" placeholder=\"搜索二次元的一切\" aria-label=\"搜索\"'+t._ssrAttr(\"value\",t.word)+\"></div>\")])},staticRenderFns:[]};e.a=n},229:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(r(0)),o=i(r(1)),a=i(r(195));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"page-index\",head:{title:\"\"},asyncData:function(t){var e=this,r=t.store,a=t.ctx;return(0,o.default)(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.dispatch(\"homepage/getBanners\",a);case 2:case\"end\":return t.stop()}},t,e)}))()},components:{vSearch:a.default},computed:{banners:function(){return this.$store.state.homepage.banners}},data:function(){return{banner1:null,banner2:null,timer:null,toggle:!0,index:0,options:{width:720,height:0,mode:0},slogan:\"···\",showBanner:!0}},created:function(){this.banner1=this.banners[0]},mounted:function(){this.loopBanner(),this.computeSlogan()},methods:{loopBanner:function(){var t=this;this.timer=setInterval(function(){t.index=1+t.index===t.banners.length?0:t.index+1;var e=t.banners[t.index];t.toggle?t.banner2=e:t.banner1=e,setTimeout(function(){t.toggle=!t.toggle},5e3)},1e4)},computeSlogan:function(){var t=this,e=\"calibur.tv：天下漫友是一家\".length,r=0,n=setInterval(function(){t.slogan=\"calibur.tv：天下漫友是一家\".slice(0,r),++r>e&&clearInterval(n)},900/e)},handleSearchFocus:function(){this.showBanner=!1,this.$channel.$emit(\"display-layout-footer\",!1)},handleSearchBlur:function(){this.showBanner=!0,this.$channel.$emit(\"display-layout-footer\",!0)}},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}}},280:function(t,e,r){var n=r(281);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var o=r(4);t.exports.__inject__=function(t){o(\"5b1bc1d8\",n,!0,t)}},281:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#homepage{position:relative;padding:0 10px}#homepage #banner{height:170px;min-height:50vw;position:relative;margin-top:10px}#homepage #banner div{position:absolute;left:0;top:0;width:100%;height:100%;border-top-left-radius:255px 15px;border-top-right-radius:15px 225px;border-bottom-right-radius:225px 15px;border-bottom-left-radius:15px 255px;opacity:0;-webkit-transition:opacity 1s ease-in-out;-o-transition:opacity 1s ease-in-out;transition:opacity 1s ease-in-out;border:1px solid #757575;background-color:#757575}#homepage #banner div.show{opacity:1}#homepage #main{margin-top:20px}#homepage #main .slogan{text-align:center;margin-top:24px;line-height:28px;font-size:small}\",\"\"])},282:function(t,e,r){\"use strict\";var n={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"homepage\"}},[t._ssrNode('<section id=\"banner\"'+t._ssrStyle(null,null,{display:t.showBanner?\"\":\"none\"})+\"><div\"+t._ssrClass(\"bg\",{show:t.toggle})+t._ssrStyle(null,{backgroundImage:t.banner1?\"url(\"+t.$resize(t.banner1.url,t.options)+\")\":\"\"},null)+\"></div><div\"+t._ssrClass(\"bg\",{show:!t.toggle})+t._ssrStyle(null,{backgroundImage:t.banner2?\"url(\"+t.$resize(t.banner2.url,t.options)+\")\":\"\"},null)+\"></div></section>\"),t._ssrNode('<main id=\"main\">',\"</main>\",[r(\"v-search\",{on:{\"input-focus\":t.handleSearchFocus,\"input-blur\":t.handleSearchBlur}}),t._ssrNode('<div class=\"slogan\">'+t._ssrEscape(\"「 \"+t._s(t.slogan)+\" 」\")+\"</div>\")],2)],2)},staticRenderFns:[]};e.a=n}};",
    "11.server-bundle.js": "exports.ids=[11],exports.modules={175:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(267),r=a.n(i);for(var n in i)\"default\"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);var s=a(414);var o=function(e){var t;(t=a(412)).__inject__&&t.__inject__(e)},l=a(2)(r.a,s.a,!1,o,null,\"72bd3a4a\");t.default=l.exports},180:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=o(a(12)),r=o(a(0)),n=o(a(1)),s=o(a(15));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"ImageWaterfall\",components:{waterfall:function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,149))},\"waterfall-slot\":function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,150))}},props:{loading:{type:Boolean,required:!0},bangumi:{type:Array,default:function(){return[]}},role:{type:Array,default:function(){return[]}}},computed:{page:function(){return this.$route.name},showSortHeader:function(){return!Array.isArray(this.options)},waterfall:function(){return this.$store.state.image.waterfall},list:function(){return this.waterfall.data},noMore:function(){return this.waterfall.noMore},options:function(){return this.waterfall.options},curUserId:function(){return this.$store.state.login?this.$store.state.user.id:-1},zone:function(){return this.$store.state.user.zone},pickerDrawerHeaderText:function(){return this.openBangumisDrawer?\"番剧\":this.openImageTagsDrawer?\"类型\":this.openImageSizeDrawer?\"尺寸\":this.openImageRoleDrawer?\"角色\":this.openImageAlbumDrawer?\"相册\":\"选项卡\"},albumBangumiPlaceholder:function(){var e=this;if(this.loadingBangumi)return\"加载中...\";var t=\"点击选择番剧\";return this.bangumiSlots[0].values.forEach(function(a){a.id===e.albumData.bangumiId&&(t=a.name)}),t},imageBangumiPlaceholder:function(){return this.loadingBangumi?\"加载中...\":this.imageData.selectedBangumi?this.getNameById(\"bangumi\",this.imageData.bangumiId):\"点击选择番剧\"},imageTagsPlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedTags?this.getNameById(\"tags\",this.imageData.tagsId):\"点击选择类型\"},imageSizePlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedSize?this.getNameById(\"size\",this.imageData.sizeId):\"点击选择尺寸\"},imageRolePlaceholder:function(){return this.loadingBangumiRole?\"加载中...\":this.imageData.selectedRole?this.getNameById(\"role\",this.imageData.roleId):\"点击选择角色（可选）\"}},data:function(){return{uploadHeaders:{token:\"\"},openEditModal:!1,openEditAlbumModal:!1,toggleSortDrawer:!1,bangumiRoles:{},loadingUserBangumiFetch:!1,loadingUploadTypeFetch:!1,submitting:!1,selectedTagsId:0,selectedSizeId:0,selectedCreatorId:-1,albumData:{id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[],is_cartoon:!1},originAlbumData:{name:\"\",bangumiId:\"\",url:\"\"},imageData:{id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},originImageData:{bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\"},loadingBangumi:!1,loadingUploadType:!1,loadingBangumiRole:!1,bangumiSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],tagsSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sizeSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],roleSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sortSlots:[{flex:1,values:[],defaultIndex:0,textAlign:\"right\"},{flex:1,values:[],defaultIndex:0,textAlign:\"center\"},{flex:1,values:[{id:-1,name:\"全部\"},{id:1,name:\"仅原创\"},{id:0,name:\"仅搬运\"}],defaultIndex:0,textAlign:\"left\"}],openPickerDrawer:!1,openBangumisDrawer:!1,openImageTagsDrawer:!1,openImageSizeDrawer:!1,openImageRoleDrawer:!1,openImageAlbumDrawer:!1,saveSortSelect:[]}},methods:{isMine:function(e){return this.curUserId===e},computeOptions:function(e){var t=[];return t=this.isMine(e.user_id)?t.concat([\"删除\",\"编辑\"]):t.concat([\"举报\"])},computeBoxHeight:function(e){return this.computeImageHeight(e)+(\"role-show\"===this.page?48:\"user-show\"===this.page?e.bangumi_id?93:48:e.bangumi||e.user?93:48)},computeImageHeight:function(e){return parseInt(e.height/e.width*145,10)},computeImageType:function(e){var t=e.tags,a=e.size.id;if(a&&(this.originImageData.sizeId=a,this.imageData.sizeId=a,this.imageData.selectedSize=!0),t.length){var i=t.length?t[0].id:\"\";this.originImageData.tagsId=i,this.imageData.tagsId=i,this.imageData.selectedTags=!0}},handleLoadMoreClick:function(e){e&&this.$store.commit(\"image/SET_WATERFALL_META\",{size:this.selectedSizeId,tags:this.selectedTagsId,bangumiId:-1,roleId:-1,creator:this.selectedCreatorId}),this.$emit(\"fetch\")},deleteImage:function(e){var t=this,a=e.userId,i=e.id;a===this.curUserId&&new s.default(this).deleteImage({id:i}).then(function(){t.$store.commit(\"image/DELETE_WATERFALL\",{id:i})}).catch(function(e){t.$toast.error(e)})},startEditImage:function(e){this.imageData.id=e.id;var t=e.bangumi_id,a=e.role_id;this.getUserBangumis(),t&&(this.originImageData.bangumiId=t,this.imageData.selectedBangumi=!0,this.imageData.bangumiId=t,this.getBangumiRoles(t)),a&&(this.originImageData.roleId=a,this.imageData.roleId=a,this.imageData.selectedRole=!0),this.computeImageType(e),this.openEditModal=!0},startEditAlbum:function(e){this.albumData.is_cartoon=e.is_cartoon,this.albumData.id=e.id,this.albumData.name=e.name,this.albumData.url=e.url,this.originAlbumData.name=e.name,this.originAlbumData.url=e.url;var t=e.bangumi_id;t&&(this.albumData.bangumiId=t,this.originAlbumData.bangumiId=t),this.getUpToken(),this.getUserBangumis(),this.openEditModal=!0},reportImage:function(e){var t=this;this.$prompt(\"请输入举报原因\",\"提示\",{confirmButtonText:\"提交\",cancelButtonText:\"取消\"}).then(function(a){a.value&&new s.default(t).trialReport({id:e.id}).then(function(){t.$toast.success(\"提交成功！\")})}).catch(function(){})},openSortDrawer:function(){var e=this,t=[{id:0,name:\"全部\"}],a=!Array.isArray(this.options),i=a?t.concat(this.options.tags):[],r=a?t.concat(this.options.size):[];this.sortSlots[0].values=i,this.sortSlots[1].values=r,i.forEach(function(t,a){t.id===e.selectedTagsId&&(e.sortSlots[0].defaultIndex=a)}),r.forEach(function(t,a){t.id===e.selectedSizeId&&(e.sortSlots[1].defaultIndex=a)}),this.sortSlots[2].values.forEach(function(t,a){t.id===e.selectedCreatorId&&(e.sortSlots[2].defaultIndex=a)}),this.toggleSortDrawer=!0},handleMenuSelected:function(e,t){var a=this;\"举报\"===e?this.reportImage(t):\"删除\"===e?this.$confirm(\"删除后不可恢复, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.deleteImage({userId:t.user_id,id:t.id})}).catch(function(){}):\"编辑\"===e&&(this.tagsSlots[0].values=this.options.tags,this.sizeSlots[0].values=this.options.size,t.image_count?(this.albumData={id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[]},this.openEditAlbumModal=!0,this.startEditAlbum(t)):(this.imageData={id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},this.openEditAlbumModal=!1,this.startEditImage(t)))},handleLikeBtnClick:function(e,t){var a=this;if(this.$store.state.login)if(this.isMine(t.user_id))this.$toast.error(\"不能为自己的图片点赞\");else{var i=e.currentTarget;if(t.creator&&!t.liked)return this.$store.state.user.coin?void this.$confirm(\"原创图片点赞需要金币, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.submitToggleLike(i,t)}).catch(function(){}):void this.$toast.error(\"金币不足\");this.submitToggleLike(i,t)}else this.$channel.$emit(\"sign-in\")},handleImageClick:function(e){e.image_count?window.location=this.$alias.imageAlbum(e.id):this.$previewImages(e,e)},handleRolePickerBtnClick:function(){this.imageData.selectedBangumi?this.loadingBangumiRole?this.$toast.error(\"数据加载中\"):this.roleSlots[0].values.length?(this.imageData.selectedRole=!0,this.imageData.roleId||(this.imageData.roleId=this.getSelectedMeta(\"role\",\"id\")),this.switchPickerDrawer(\"openImageRoleDrawer\")):this.$toast.error(\"该番剧下没用可选角色\"):this.$toast.error(\"请先选择番剧\")},handleAlbumBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.albumData.bangumiId||(this.albumData.bangumiId=this.getSelectedMeta(\"bangumi\",\"id\")),this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.imageData.selectedBangumi=!0,this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageTagsPickerBtnClick:function(){this.imageData.selectedTags=!0,this.switchPickerDrawer(\"openImageTagsDrawer\")},handleImageSizePickerBtnClick:function(){this.imageData.selectedSize=!0,this.switchPickerDrawer(\"openImageSizeDrawer\")},switchPickerDrawer:function(e){this.openBangumisDrawer=!1,this.openImageTagsDrawer=!1,this.openImageSizeDrawer=!1,this.openImageRoleDrawer=!1,this.openImageAlbumDrawer=!1,this[e]=!0,this.openPickerDrawer=!0},getUpToken:function(){var e=this;return(0,n.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(\"getUpToken\",e);case 3:e.uploadHeaders.token=e.$store.state.user.uptoken.upToken,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$toast.error(t.t0);case 9:case\"end\":return t.stop()}},t,e,[[0,6]])}))()},submitToggleLike:function(e,t){var a=this;return(0,n.default)(r.default.mark(function i(){var n,o;return r.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.setAttribute(\"disabled\",\"disabled\"),n=new s.default(a),i.prev=2,t.creator||a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:!t.liked}),i.next=6,n.toggleLike({id:t.id});case 6:o=i.sent,t.creator&&(a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:o}),o&&a.$store.commit(\"USE_COIN\"),a.$toast.success(\"操作成功\")),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),a.$toast.error(i.t0);case 13:return i.prev=13,e.removeAttribute(\"disabled\"),i.finish(13);case 16:case\"end\":return i.stop()}},i,a,[[2,10,13,16]])}))()},getUserBangumis:function(){var e=this;return(0,n.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.bangumiSlots[0].values.length){t.next=2;break}return t.abrupt(\"return\");case 2:if(!e.loadingUserBangumiFetch){t.next=4;break}return t.abrupt(\"return\");case 4:return e.loadingUserBangumiFetch=!0,t.prev=5,t.next=8,e.$store.dispatch(\"users/getFollowBangumis\",{ctx:e,zone:e.zone});case 8:e.bangumiSlots[0].values=t.sent;case 9:return t.prev=9,e.loadingUserBangumiFetch=!1,t.finish(9);case 12:case\"end\":return t.stop()}},t,e,[[5,,9,12]])}))()},getBangumiRoles:function(e){var t=this;return(0,n.default)(r.default.mark(function a(){var i;return r.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt(\"return\");case 2:if(!t.bangumiRoles[e]){a.next=5;break}return t.roleSlots[0].values=t.bangumiRoles[e],a.abrupt(\"return\");case 5:return a.next=7,t.$store.dispatch(\"bangumi/getRoles\",{ctx:t,bangumiId:e});case 7:i=a.sent,t.bangumiRoles[e]=i,t.roleSlots[0].values=i;case 10:case\"end\":return a.stop()}},a,t)}))()},handleImageEditDone:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var a,i,n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.imageData.selectedSize){t.next=3;break}return e.$toast.error(\"请先选择尺寸\"),t.abrupt(\"return\");case 3:if(e.imageData.selectedTags){t.next=6;break}return e.$toast.error(\"请先选择类型\"),t.abrupt(\"return\");case 6:if(e.imageData.selectedBangumi){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.imageData.bangumiId!==e.originImageData.bangumiId||e.imageData.roleId!==e.originImageData.roleId||e.imageData.sizeId!==e.originImageData.sizeId||e.imageData.tagsId!==e.originImageData.tagsId){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!0,e.$toast.loading(\"修改中...\"),a=new s.default(e),t.prev=17,i=e.imageData.id,t.next=21,a.editImage({id:i,bangumiId:e.imageData.bangumiId||0,roleId:e.imageData.selectedRole&&e.imageData.roleId||0,tags:e.imageData.tagsId,size:e.imageData.sizeId});case 21:n=t.sent,e.$toast.success(\"图片编辑成功！\"),e.$store.commit(\"image/EDIT_WATERFALL\",{id:i,data:n}),e.openEditModal=!1,t.next=30;break;case 27:t.prev=27,t.t0=t.catch(17),e.$toast.error(t.t0);case 30:return t.prev=30,e.submitting=!1,t.finish(30);case 33:case\"end\":return t.stop()}},t,e,[[17,27,30,33]])}))()},handleAlbumEditDone:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var a,n,o,l;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.albumData.name){t.next=3;break}return e.$toast.error(\"请填写专辑名称\"),t.abrupt(\"return\");case 3:if(!(e.albumData.name.length>20)){t.next=6;break}return e.$toast.error(\"专题名称请缩减至20字以内\"),t.abrupt(\"return\");case 6:if(e.albumData.bangumiId){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.albumData.bangumiId!==e.originAlbumData.bangumiId||e.albumData.name!==e.originAlbumData.name||0!==e.albumData.poster.length){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!1,e.$toast.loading(\"修改中...\"),a=new s.default(e),n=e.albumData.id,o=e.albumData.poster.length?e.albumData.poster[0].url:null,t.prev=19,t.next=22,a.editAlbum((0,i.default)({id:n,bangumiId:e.albumData.bangumiId||0,name:e.albumData.name},o?{url:o.key,width:o.width,height:o.height}:{}));case 22:l=t.sent,e.$store.commit(\"image/EDIT_ALBUM\",{id:n,data:l}),e.$store.commit(\"image/EDIT_WATERFALL\",{id:n,data:l}),e.$toast.success(\"专辑编辑成功！\"),e.openEditModal=!1,e.$refs.uploader.clearFiles(),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(19),e.$toast.error(t.t0);case 33:return t.prev=33,e.submitting=!1,t.finish(33);case 36:case\"end\":return t.stop()}},t,e,[[19,30,33,36]])}))()},handleError:function(e,t){console.log(e),this.albumData.poster=[],this.$toast.error(\"图片：\"+t.name+\" 上传失败\")},beforeUpload:function(e){if(this.$store.state.login){var t=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(e.type),a=e.size/1024/1024<5;return t?a?(this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:\"album\",id:this.albumData.id,file:e}),!0):(this.$toast.error(\"图片大小不能超过 5MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},handleAlbumPosterRemove:function(){this.albumData.poster=[]},handleAlbumUploadSuccess:function(e,t){this.albumData.poster=[{name:t.name,url:e.data}]},openCreateImageModal:function(){this.$store.state.login?this.$channel.$emit(\"open-create-image-drawer\"):this.$channel.$emit(\"sign-in\")},getSelectedMeta:function(e,t){var a=e+\"Slots\";return this[a][0].values.length?this[a][0].values[this[a][0].defaultIndex][t]:0},getNameById:function(e,t){var a=e+\"Slots\",i=\"\";return this[a][0].values.length?(this[a][0].values.forEach(function(e){e.id===t&&(i=e.name)}),i):i},onTagsValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.tagsId=i,this.tagsSlots[0].values.forEach(function(e,t){e.id===i&&(a.tagsSlots[0].defaultIndex=t)})}},onSizeValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.sizeId=i,this.sizeSlots[0].values.forEach(function(e,t){e.id===i&&(a.sizeSlots[0].defaultIndex=t)})}},onRoleValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.roleId=i,this.roleSlots[0].values.forEach(function(e,t){e.id===i&&(a.roleSlots[0].defaultIndex=t)})}},onBangumiValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.bangumiSlots[0].values.forEach(function(e,t){e.id===i&&(a.bangumiSlots[0].defaultIndex=t)}),this.openEditAlbumModal?this.albumData.bangumiId=i:(this.imageData.bangumiId=i,this.imageData.selectedRole=!1,this.getBangumiRoles(this.getSelectedMeta(\"bangumi\",\"id\")))}},onSortValuesChange:function(e,t){this.saveSortSelect=t},handleSelectedSort:function(){var e=this.saveSortSelect[0].id,t=this.saveSortSelect[1].id,a=this.saveSortSelect[2].id;this.selectedTagsId===e&&this.selectedSizeId===t&&this.selectedCreatorId===a||(this.selectedTagsId=e,this.selectedSizeId=t,this.selectedCreatorId=a,this.handleLoadMoreClick(!0))}}}},189:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(180),r=a.n(i);for(var n in i)\"default\"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);var s=a(192);var o=function(e){var t;(t=a(190)).__inject__&&t.__inject__(e)},l=a(2)(r.a,s.a,!1,o,null,\"5cb66ef0\");t.default=l.exports},190:function(e,t,a){var i=a(191);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"527e3153\",i,!0,e)}},191:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#image-waterfall{margin-right:-5px;background-color:#fff}#image-waterfall .image-container{position:relative;width:310px;margin:0 auto 15px}#image-waterfall .image-item{padding-right:10px;padding-bottom:10px;margin-left:3px;margin-top:3px}#image-waterfall .image-item .item-wrap{font-size:0;position:relative}#image-waterfall .image-item .item-wrap.album-wrap{cursor:pointer}#image-waterfall .image-item .item-wrap.album-wrap:after{content:\"\";position:absolute;bottom:0;left:0;width:100%;height:50px;opacity:.3;background-color:transparent;background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(20%,rgba(0,0,0,.1)),color-stop(35%,rgba(0,0,0,.2)),color-stop(65%,rgba(0,0,0,.6)),to(rgba(0,0,0,.9)));background-image:-o-linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9));background-image:linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9))}#image-waterfall .image-item .item-wrap .creator{font-size:20px;position:absolute;left:5px;top:2px;z-index:1;color:#ffcf00}#image-waterfall .image-item .item-wrap .album-info{position:absolute;left:7px;bottom:4px;z-index:1;color:#fff;line-height:20px}#image-waterfall .image-item .item-wrap .album-info i{font-size:20px;vertical-align:middle}#image-waterfall .image-item .item-wrap .album-info .image-count{margin-left:5px;font-size:14px;vertical-align:middle}#image-waterfall .image-item .item-wrap .v-select-wrap{position:absolute;right:0;top:0;width:58px;line-height:16px;font-size:12px;color:#fff;z-index:1;margin-top:7px;margin-right:6px}#image-waterfall .image-item .item-wrap .v-select-wrap .iconfont{text-shadow:0 1px 10px grey}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-wrap{background-color:#fff;border:1px solid #f0f0f0;border-radius:4px;top:18px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item{height:36px;line-height:35px;color:#535353;font-size:12px;padding-left:15px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item:not(:last-child){border-bottom:1px solid #f0f0f0}#image-waterfall .image-item .image{width:100%;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.2);box-shadow:0 1px 3px rgba(0,0,0,.2);overflow:hidden}#image-waterfall .image-item .image .desc{padding:5px 8px;height:48px}#image-waterfall .image-item .image .desc .name{max-width:140px;margin-bottom:7px;display:block;font-size:12px;line-height:18px}#image-waterfall .image-item .image .desc .tags{margin-bottom:7px}#image-waterfall .image-item .image .desc .tags .el-tag{margin-right:7px;max-width:60px;font-size:12px}#image-waterfall .image-item .image .desc .meta{font-size:11px;color:#ccd0d7;overflow:hidden;text-align:right;margin-top:1px}#image-waterfall .image-item .image .desc .meta .like{display:block;text-align:left;width:100%;color:#ccd0d7;font-size:12px;line-height:12px}#image-waterfall .image-item .image .desc .meta .like.liked{color:#f25d8e}#image-waterfall .image-item .image .desc .meta time{margin-top:3px}#image-waterfall .image-item .image .detail{padding:8px;border-top:1px solid #f2f2f2;background-color:#fafafa;font-size:12px;line-height:14px;color:#999}#image-waterfall .image-item .image .detail .margin-top{margin-top:8px}#image-waterfall .image-item .image .detail .info{overflow:hidden}#image-waterfall .image-item .image .detail a{display:block;color:#777;font-size:12px}#image-waterfall .image-item .image .bangumi .avatar{float:left;margin-right:8px}#image-waterfall .image-item .image .bangumi .avatar img{width:28px;height:28px}#image-waterfall .image-item .image .user .avatar{float:left;margin-right:8px;overflow:hidden;border:1px solid #f0f0f0;border-radius:50%;width:28px;height:28px}#image-waterfall .image-item .image .user .avatar img{display:block;width:100%;height:100%;border-radius:14px}#image-waterfall .image-item .image .user .extra{margin-top:3px}#image-waterfall .edit-image-modal .field{font-size:16px;line-height:48px}#image-waterfall .edit-image-modal .field span{float:left}#image-waterfall .edit-image-modal .field div{color:#000;overflow:hidden}#image-waterfall .edit-image-modal .btn-submit{margin-top:15px}#image-waterfall .el-upload--picture-card,#image-waterfall .el-upload-list__item{width:15vw;height:15vw;line-height:15vw}#image-waterfall .el-upload-list__item-delete{float:none!important}#image-waterfall .btn-sort{width:100%;padding-bottom:5px;margin-bottom:10px;padding-top:15px}#image-waterfall .btn-sort span{float:left;margin-left:8px;font-size:13px}#image-waterfall .btn-sort .iconfont{float:right;margin-right:13px;font-size:12px}#image-waterfall .sort-image-drawer{border-radius:5px 5px 0 0}',\"\"])},192:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.list.length?a(\"div\",{attrs:{id:\"image-waterfall\"}},[a(\"no-ssr\",[a(\"div\",{staticClass:\"image-container\"},[e.showSortHeader?[a(\"button\",{staticClass:\"btn-sort clearfix\",on:{click:e.openSortDrawer}},[a(\"span\",[e._v(\"筛选\")]),a(\"i\",{staticClass:\"iconfont icon-101\"})]),a(\"v-drawer\",{staticClass:\"sort-image-drawer\",attrs:{\"header-text\":\"图片筛选\",from:\"bottom\",size:\"250px\",\"submit-text\":\"确认\"},on:{submit:e.handleSelectedSort},model:{value:e.toggleSortDrawer,callback:function(t){e.toggleSortDrawer=t},expression:\"toggleSortDrawer\"}},[a(\"mt-picker\",{attrs:{slots:e.sortSlots,valueKey:\"name\"},on:{change:e.onSortValuesChange}})],1)]:e._e(),a(\"waterfall\",{attrs:{\"line-gap\":155,\"auto-resize\":!1}},e._l(e.list,function(t,i){return a(\"waterfall-slot\",{key:t.id,staticClass:\"image-item\",attrs:{width:\"145\",height:e.computeBoxHeight(t),order:i}},[a(\"div\",{staticClass:\"image\"},[a(\"div\",{staticClass:\"item-wrap\",class:[t.image_count?\"album-wrap\":\"image-wrap\"],on:{click:function(a){e.handleImageClick(t)}}},[t.creator?a(\"i\",{staticClass:\"creator iconfont icon-huangguan\"}):e._e(),e.computeOptions(t).length?a(\"div\",{staticClass:\"menu\",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a(\"v-select\",{attrs:{placeholder:\"\",options:e.computeOptions(t),abort:!0},on:{submit:function(a){e.handleMenuSelected(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-101\",attrs:{slot:\"tail\"},slot:\"tail\"})])],1):e._e(),a(\"img\",{attrs:{width:\"145\",height:e.computeImageHeight(t),src:e.$resize(t.url,{width:290,mode:2})}}),t.image_count?a(\"div\",{staticClass:\"album-info\"},[a(\"i\",{staticClass:\"el-icon-picture-outline\"}),a(\"span\",{staticClass:\"image-count\",domProps:{textContent:e._s(t.image_count)}})]):e._e()]),a(\"div\",{staticClass:\"desc\"},[t.image_count?a(\"a\",{staticClass:\"name oneline\",attrs:{href:\"javascript:;\"},domProps:{textContent:e._s(t.name)}}):a(\"div\",{staticClass:\"tags\"},[a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.size.name)}}),e._l(t.tags,function(t){return a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.name)}})})],2),a(\"div\",{staticClass:\"meta\"},[a(\"button\",{staticClass:\"like\",class:{liked:t.liked},on:{click:function(a){e.handleLikeBtnClick(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-msnui-love\"}),e._v(\"\\n                  \"+e._s(t.like_count||\"\")+\"\\n                \")])])]),\"image-trending\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\"},[a(\"a\",{staticClass:\"oneline\",class:{\"margin-top\":!t.bangumi},attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.bangumi_id?a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}):e._e()])]):\"user-show\"===e.page?[t.bangumi_id?a(\"div\",{staticClass:\"detail bangumi clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.bangumi(t.bangumi.id)}},[a(\"img\",{attrs:{src:e.$resize(t.bangumi.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}),t.role?a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}}):e._e()])]):e._e()]:\"bangumi-show\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.role_id?a(\"a\",{attrs:{href:e.$alias.cartoonRole(t.role_id)}},[a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}})]):e._e()])]):e._e()],2)])}))],2)]),a(\"more-btn\",{attrs:{\"no-more\":e.noMore,loading:e.loading,length:e.list.length},on:{fetch:function(t){e.handleLoadMoreClick(!1)}}}),a(\"v-drawer\",{staticClass:\"edit-image-modal\",attrs:{\"header-text\":e.openEditAlbumModal?\"编辑相册\":\"编辑图片\",from:\"bottom\",size:\"100%\",backdrop:!1},model:{value:e.openEditModal,callback:function(t){e.openEditModal=t},expression:\"openEditModal\"}},[a(\"div\",{staticClass:\"container\"},[e.openEditAlbumModal?[a(\"div\",{staticClass:\"field\"},[a(\"v-field\",{attrs:{label:\"名称\",placeholder:\"请填写相册名称\",\"label-size\":\"48px\"},model:{value:e.albumData.name,callback:function(t){e.$set(e.albumData,\"name\",t)},expression:\"albumData.name\"}})],1),e.albumData.is_cartoon?e._e():a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.albumBangumiPlaceholder)},on:{click:e.handleAlbumBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"封面：\")]),a(\"el-upload\",{ref:\"albumUploader\",attrs:{action:\"https://upload.qiniup.com\",\"list-type\":\"picture-card\",data:e.uploadHeaders,disabled:!0,\"on-error\":e.handleError,\"before-upload\":e.beforeUpload,\"on-remove\":e.handleAlbumPosterRemove,\"on-success\":e.handleAlbumUploadSuccess}},[e._v(\"+\")])],1),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleAlbumEditDone}},[e._v(\"确认修改\")])]:[a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"类型：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageTagsPlaceholder)},on:{click:e.handleImageTagsPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"尺寸：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageSizePlaceholder)},on:{click:e.handleImageSizePickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageBangumiPlaceholder)},on:{click:e.handleImageBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"角色：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageRolePlaceholder)},on:{click:e.handleRolePickerBtnClick}})]),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleImageEditDone}},[e._v(\"确认修改\")])]],2),a(\"v-drawer\",{staticClass:\"bangumis-drawer\",attrs:{from:\"bottom\",size:\"250px\",\"header-text\":e.pickerDrawerHeaderText},model:{value:e.openPickerDrawer,callback:function(t){e.openPickerDrawer=t},expression:\"openPickerDrawer\"}},[e.openBangumisDrawer?a(\"mt-picker\",{attrs:{slots:e.bangumiSlots,valueKey:\"name\"},on:{change:e.onBangumiValuesChange}}):e.openImageTagsDrawer?a(\"mt-picker\",{attrs:{slots:e.tagsSlots,valueKey:\"name\"},on:{change:e.onTagsValuesChange}}):e.openImageSizeDrawer?a(\"mt-picker\",{attrs:{slots:e.sizeSlots,valueKey:\"name\"},on:{change:e.onSizeValuesChange}}):e.openImageRoleDrawer?a(\"mt-picker\",{attrs:{slots:e.roleSlots,valueKey:\"name\"},on:{change:e.onRoleValuesChange}}):e._e()],1)],1)],1):a(\"more-btn\",{attrs:{\"no-more\":e.noMore,length:e.list.length,loading:!1}},[a(\"button\",{on:{click:e.openCreateImageModal}},[e._v(\"上传图片\")])])},staticRenderFns:[]};t.a=i},267:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=o(a(0)),r=o(a(35)),n=o(a(1)),s=o(a(189));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"role-show\",asyncData:function(e){var t=this,a=e.store,s=e.route,o=e.ctx;return(0,n.default)(i.default.mark(function e(){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.params.id,e.next=3,r.default.all([a.dispatch(\"cartoonRole/getRoleInfo\",{ctx:o,id:n}),a.dispatch(\"cartoonRole/getFansList\",{ctx:o,bangumiId:0,roleId:n,sort:\"new\",reset:!1})]);case 3:case\"end\":return e.stop()}},e,t)}))()},components:{ImageWaterfall:s.default},computed:{id:function(){return this.$route.params.id},info:function(){return this.$store.state.cartoonRole.info},role:function(){return this.info.data},bangumi:function(){return this.info.bangumi},images:function(){return this.info.images},fans:function(){return this.$store.state.cartoonRole.fans.new},computeRoleAlias:function(){return this.role.alias.split(\",\")}},data:function(){return{sort:\"fans\",loadingRoleFans:!1,loadingRoleImage:!1,roleImageLoaded:!1}},methods:{switchTab:function(e){this.sort=e,\"image\"!==e||this.roleImageLoaded||this.getRoleImages(!0)},handleBangumiFollow:function(e){this.$store.commit(\"cartoonRole/FOLLOW_ROLE_BANGUMI\",{result:e})},handleStarRole:function(){var e=this;return(0,n.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.state.login){t.next=3;break}return e.$channel.$emit(\"sign-in\"),t.abrupt(\"return\");case 3:if(e.$store.state.user.coin){t.next=6;break}return e.$toast.error(\"金币不足\"),t.abrupt(\"return\");case 6:return t.prev=6,t.next=9,e.$store.dispatch(\"cartoonRole/star\",{bangumiId:e.bangumi.id,roleId:e.id,ctx:e,hasStar:e.role.hasStar});case 9:e.$store.commit(\"USE_COIN\"),e.$toast.info(\"+\"+e.role.hasStar+\"s\"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),e.$toast.error(t.t0);case 16:case\"end\":return t.stop()}},t,e,[[6,13]])}))()},fetchRoleFans:function(){var e=this;return(0,n.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loadingRoleFans){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loadingRoleFans=!0,t.prev=3,t.next=6,e.$store.dispatch(\"cartoonRole/getFansList\",{ctx:e,bangumiId:e.bangumi.id,roleId:e.id,sort:\"new\"});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),e.$toast.error(t.t0);case 11:return t.prev=11,e.loadingRoleFans=!1,t.finish(11);case 14:case\"end\":return t.stop()}},t,e,[[3,8,11,14]])}))()},getRoleImages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,n.default)(i.default.mark(function a(){return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.loadingRoleImage){a.next=2;break}return a.abrupt(\"return\");case 2:return e.loadingRoleImage=!0,a.prev=3,a.next=6,e.$store.dispatch(\"image/getRoleImages\",{ctx:e,id:e.id,force:t});case 6:e.roleImageLoaded=!0,a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),e.$toast.error(a.t0);case 12:return a.prev=12,e.loadingRoleImage=!1,a.finish(12);case 15:case\"end\":return a.stop()}},a,e,[[3,9,12,15]])}))()}}}},412:function(e,t,a){var i=a(413);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"2dc23d69\",i,!0,e)}},413:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#role-show .profile{margin-top:15px;min-height:80px}#role-show .profile .avatar{width:80px;height:80px;float:left;margin-right:10px;margin-bottom:15px}#role-show .profile .info{overflow:hidden}#role-show .profile .info .name{font-size:18px;margin-bottom:5px}#role-show .profile .info .lover{height:26px;margin-bottom:5px}#role-show .profile .info .lover img{vertical-align:middle;border:1px solid #e5e9ef;border-radius:50%;width:26px;height:26px}#role-show .profile .info .lover img img{display:block;width:100%;height:100%;border-radius:13px}#role-show .profile .info .star{position:relative;padding:4px 10px;font-size:14px;color:#000;background-color:transparent;border-radius:8px;white-space:nowrap}#role-show .profile .info .star:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #000;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}#role-show .profile .alias,#role-show .profile .summary{line-height:20px;font-size:13px;margin-bottom:5px}#role-show .profile .alias strong{float:left}#role-show .profile .alias li{float:left;margin-right:5px;text-decoration:underline}#role-show .profile .coin{line-height:20px;font-size:13px;margin-bottom:5px}#role-show .bangumi{padding-top:15px}#role-show .bangumi .summary{font-size:12px;color:#666;line-height:13px;max-height:26px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}#role-show .tab-card .role-fans{padding-top:15px}#role-show .tab-card .role-fans li{margin-bottom:10px;font-size:13px;position:relative;padding-bottom:10px}#role-show .tab-card .role-fans li:not(:last-child):after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:0;margin-right:0}#role-show .tab-card .role-fans .avatar{vertical-align:middle;border:1px solid #e5e9ef;border-radius:50%;margin-right:3px;width:30px;height:30px}#role-show .tab-card .role-fans .avatar img{display:block;width:100%;height:100%;border-radius:15px}#role-show .tab-card .role-fans time{float:right;margin-top:9px;font-size:12px;color:#6d757a}',\"\"])},414:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{attrs:{id:\"role-show\"}},[e._ssrNode('<div class=\"container\">',\"</div>\",[e._ssrNode('<div class=\"profile clearfix\"><h3 class=\"sub-title\">角色信息</h3><div><div class=\"clearfix\"><img'+e._ssrAttr(\"src\",e.$resize(e.role.avatar,{width:80}))+' class=\"avatar\"><div class=\"info\"><h1 class=\"name\">'+e._ssrEscape(e._s(e.role.name))+'</h1><div class=\"lover\">'+(e.role.lover?\"<a\"+e._ssrAttr(\"href\",e.$alias.user(e.role.lover.zone))+\">\\n                  守护者：\\n                  <img\"+e._ssrAttr(\"src\",e.$resize(e.role.lover.avatar,{width:52}))+\">\"+e._ssrEscape(\"\\n                  \"+e._s(e.role.lover.nickname)+\"\\n                \")+\"</a>\":\"\\x3c!----\\x3e\")+'</div><button class=\"star\">为TA应援</button></div></div><div><h3 class=\"sub-title\">角色简介</h3><p class=\"summary\"><strong>介绍：</strong>'+e._ssrEscape(e._s(e.role.intro)+\"\\n          \")+'</p><ul class=\"alias clearfix\"><strong>别名：</strong>'+e._ssrList(e.computeRoleAlias,function(t,a){return\"<li>\"+e._ssrEscape(e._s(t))+\"</li>\"})+\"</ul>\"+(e.role.star_count?'<p class=\"coin\"><strong>粉丝：</strong>'+e._ssrEscape(\"共有 \"+e._s(e.role.fans_count)+\" 个粉丝，收获了 \"+e._s(e.role.star_count)+\" 个金币\\n          \")+\"</p>\":\"\\x3c!----\\x3e\")+\"</div></div></div>\"),e._ssrNode('<div class=\"bangumi\">',\"</div>\",[e._ssrNode('<h3 class=\"sub-title\">所属番剧</h3>'),a(\"v-bangumi-panel\",{attrs:{id:e.bangumi.id,avatar:e.bangumi.avatar,name:e.bangumi.name,followed:e.bangumi.followed},on:{follow:e.handleBangumiFollow}},[a(\"p\",{staticClass:\"summary\",domProps:{textContent:e._s(e.bangumi.summary)}})])],2)],2),e._ssrNode('<div class=\"tabs\"><button'+e._ssrClass(null,{active:\"fans\"===e.sort})+\">应援团</button><button\"+e._ssrClass(null,{active:\"image\"===e.sort})+\">相册</button></div>\"),e._ssrNode('<div class=\"tab-card\">',\"</div>\",[\"fans\"===e.sort?[e._ssrNode('<ul class=\"role-fans container\">',\"</ul>\",e._l(e.fans.list,function(t){return e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.user(t.zone))+\">\",\"</a>\",[e._ssrNode(\"<img\"+e._ssrAttr(\"src\",e.$resize(t.avatar,{width:60}))+' class=\"avatar\">'+e._ssrEscape(\"\\n            \"+e._s(t.nickname)+\"\\n            \")),a(\"v-time\",{model:{value:t.score,callback:function(a){e.$set(t,\"score\",a)},expression:\"item.score\"}})],2)])})),a(\"more-btn\",{attrs:{\"no-more\":e.fans.noMore,length:e.fans.list.length,loading:e.loadingRoleFans},on:{fetch:e.fetchRoleFans}})]:\"image\"===e.sort?[a(\"image-waterfall\",{attrs:{loading:e.loadingRoleImage},on:{fetch:e.getRoleImages}})]:e._e()],2)],2)},staticRenderFns:[]};t.a=i}};",
    "12.server-bundle.js": "exports.ids=[12],exports.modules={167:function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var a=t(257),i=t.n(a);for(var s in a)\"default\"!==s&&function(e){t.d(r,e,function(){return a[e]})}(s);var n=t(384);var o=function(e){var r;(r=t(380)).__inject__&&r.__inject__(e)},p=t(2)(i.a,n.a,!1,o,null,\"6efe94f2\");r.default=p.exports},222:function(e,r){e.exports=function(e){return\"string\"!=typeof e?e:(/^['\"].*['\"]$/.test(e)&&(e=e.slice(1,-1)),/[\"'() \\t\\n]/.test(e)?'\"'+e.replace(/\"/g,'\\\\\"').replace(/\\n/g,\"\\\\n\")+'\"':e)}},257:function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var a,i=t(152),s=(a=i)&&a.__esModule?a:{default:a};r.default={name:\"page-user-invite\",computed:{user:function(){return this.$store.state.user},link:function(){return this.user?\"http://calibur.tv/about/invite/\"+this.user.id:\"\"},tags:function(){return this.$utils.shuffle(this.cartoons).slice(0,5)}},data:function(){return{created:!1,result:\"\",cartoons:[\"喰种\",\"死亡笔记\",\"刀剑神域\",\"一拳超人\",\"进击的巨人\",\"海贼王\",\"CLANNAD\",\"叛逆的鲁鲁修\",\"七宗罪\",\"JOJO的奇妙冒险\",\"火影忍者\",\"从零开始的异界生活\"]}},methods:{generateQrCode:function(){this.$QRCode(this.$refs.qr,this.link,{width:300,height:300})},create:function(){var e=this;(0,s.default)(document.querySelector(\".capture-area\"),{allowTaint:!1,useCORS:!0,backgroundColor:null}).then(function(r){e.result=r.toDataURL(\"image/png\"),e.created=!0,e.$toast.success(\"长按图片保存\")}).catch(function(){})}},mounted:function(){var e=this;this.user?this.$nextTick(function(){e.generateQrCode(),setTimeout(function(){e.create()},3e3)}):this.$toast.error(\"请先登录\")}}},380:function(e,r,t){var a=t(381);\"string\"==typeof a&&(a=[[e.i,a,\"\"]]),a.locals&&(e.exports=a.locals);var i=t(4);e.exports.__inject__=function(e){i(\"57da134c\",a,!0,e)}},381:function(e,r,t){var a=t(222);(e.exports=t(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#user-invite{background-color:#fff;padding:20px 0}#user-invite .capture-wrap{-webkit-box-shadow:0 4px 10px #ddd;box-shadow:0 4px 10px #ddd;width:300px;height:518px;margin:0 auto 20px;border-radius:5px;overflow:hidden}#user-invite .capture-wrap .capture-area{width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;padding-top:30px;position:relative;background-color:#fd8ab4}#user-invite .capture-wrap .capture-area .header-slide{width:100%;height:42px;background-color:#eead20;position:absolute;left:0;top:0}#user-invite .capture-wrap .capture-area .header-slide:after,#user-invite .capture-wrap .capture-area .header-slide:before{content:\"\";position:absolute;left:0;width:100%;height:14px}#user-invite .capture-wrap .capture-area .header-slide.slide-left{-webkit-transform:rotate(-40deg);-ms-transform:rotate(-40deg);transform:rotate(-40deg);left:-35%}#user-invite .capture-wrap .capture-area .header-slide.slide-left:before{top:0;background-color:#4b7b91}#user-invite .capture-wrap .capture-area .header-slide.slide-left:after{bottom:0;background-color:#f48260}#user-invite .capture-wrap .capture-area .header-slide.slide-right{-webkit-transform:rotate(40deg);-ms-transform:rotate(40deg);transform:rotate(40deg);left:35%}#user-invite .capture-wrap .capture-area .header-slide.slide-right:before{top:0;background-color:#4b7b91}#user-invite .capture-wrap .capture-area .header-slide.slide-right:after{bottom:0;background-color:#f25d8e}#user-invite .capture-wrap .capture-area #background{position:absolute;left:0;top:0;width:100%;height:100%}#user-invite .capture-wrap .capture-area .main{background-color:#fff;margin:0 30px 30px;border-radius:20px;padding:100px 0 50px;background-image:url('+a(t(382))+\");background-size:contain;background-repeat:no-repeat}#user-invite .capture-wrap .capture-area .main .avatar{margin:0 auto;width:200px;height:200px;border-radius:100px;border:1px solid #e5e9ef;overflow:hidden;border:10px solid #fff}#user-invite .capture-wrap .capture-area .main .avatar img{display:block;width:100%;height:100%}#user-invite .capture-wrap .capture-area .main .nickname{font-size:42px;font-weight:700;margin-top:10px;margin-left:30px;margin-right:30px;text-align:center;color:#333}#user-invite .capture-wrap .capture-area .main .nickname strong{color:#f25d8e}#user-invite .capture-wrap .capture-area .main .info{font-size:28px;margin-top:20px;text-align:center}#user-invite .capture-wrap .capture-area .main .info strong{color:#f25d8e}#user-invite .capture-wrap .capture-area .main .tags{margin:40px 20px;text-align:center;height:106px;overflow:hidden}#user-invite .capture-wrap .capture-area .main .tags .mint-badge{border-radius:20px;font-size:24px;padding:8px 20px;margin:6px;background-color:#fd8ab4}#user-invite .capture-wrap .capture-area .main .logo{margin:0 auto;width:180px;height:100px;background-image:url(\"+a(t(383))+\");background-size:contain;background-repeat:no-repeat}#user-invite .capture-wrap .capture-area .qrcode-wrap{position:relative;margin:0 30px 30px;background-color:#fff;border-radius:20px}#user-invite .capture-wrap .capture-area .qrcode-wrap .qrcode{margin-left:20px;width:200px;height:200px;padding:30px}#user-invite .capture-wrap .capture-area .qrcode-wrap .tips{position:absolute;top:60px;left:220px;margin-top:-24px;font-size:26px;line-height:42px}#user-invite .intros li{list-style-type:disc;font-size:13px;line-height:15px;margin-left:15px;margin-bottom:5px}\",\"\"])},382:function(e,r,t){e.exports=t.p+\"src/assets/img/campaign/invite-bg.e3c005f3.png\"},383:function(e,r,t){e.exports=t.p+\"src/assets/img/campaign/calibur-logo.529ff94b.png\"},384:function(e,r,t){\"use strict\";var a={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t(\"div\",{attrs:{id:\"user-invite\"}},[e._ssrNode('<div class=\"container\"><h3 class=\"sub-title\">'+e._ssrEscape(\"邀请码\"+e._s(e.created?\"（长按图片可保存到手机相册）\":\"\"))+\"</h3></div>\"),e._ssrNode('<div class=\"capture-wrap\">',\"</div>\",[e.result?e._ssrNode(\"<img\"+e._ssrAttr(\"src\",e.result)+\">\",\"</img>\"):e._ssrNode('<div class=\"capture-area\">',\"</div>\",[e._ssrNode('<div class=\"main\">',\"</div>\",[e._ssrNode('<div class=\"avatar\"><img crossorigin=\"anonymous\"'+e._ssrAttr(\"src\",e.$resize(e.user.avatar,{width:200}))+'></div><p class=\"nickname\">我是<strong>'+e._ssrEscape(e._s(e.user.nickname))+'</strong></p><p class=\"info\">跟我一起在 <strong>calibur.tv</strong> 追番吧</p>'),t(\"no-ssr\",[t(\"div\",{staticClass:\"tags\"},e._l(e.tags,function(r,a){return t(\"mt-badge\",{key:a,attrs:{size:\"large\"},domProps:{textContent:e._s(r)}})}))]),e._ssrNode('<div class=\"logo\"></div>')],2),e._ssrNode('<div class=\"qrcode-wrap\"><div class=\"qrcode\"></div><p class=\"tips\"><strong>扫描二维码注册</strong><br><strong>邀请者可获得现金奖励</strong><br>\\n          求扫求转发！\\n        </p></div>')],2)]),e._ssrNode('<div class=\"container\"><h3 class=\"sub-title\">使用介绍</h3><ul class=\"intros\"><li>非常感谢大家对 calibur.tv 的支持</li><li>目前网站还在初始阶段，为了促进推广，因此推出了金币功能</li><li>大家除了每日签到、发表原创内容来赚取金币外</li><li>还可以通过邀请朋友注册来赚取金币</li><li>每有一个人通过扫你的二维码注册，你就会获得一枚金币，并会收到短信通知</li><li>1金币 = 1人民币，满 100 金币可提现</li><li>大家快去邀请自己的漫友来 calibur 一起玩耍吧！</li>'+(e.created?\"<li>长按图片可保存到手机相册，更方便分享</li>\":\"\\x3c!----\\x3e\")+\"</ul></div>\")],2)},staticRenderFns:[]};r.a=a}};",
    "13.server-bundle.js": "exports.ids=[13],exports.modules={168:function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=s(258),a=s.n(i);for(var r in i)\"default\"!==r&&function(t){s.d(e,t,function(){return i[t]})}(r);var o=s(385),n=s(2)(a.a,o.a,!1,null,null,\"54433219\");e.default=n.exports},182:function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"post-flow-item\",props:{item:{required:!0,type:Object}},methods:{imageFilter:function(t){return t.slice(0,3)}}}},199:function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=s(182),a=s.n(i);for(var r in i)\"default\"!==r&&function(t){s.d(e,t,function(){return i[t]})}(r);var o=s(202);var n=function(t){var e;(e=s(200)).__inject__&&e.__inject__(t)},l=s(2)(a.a,o.a,!1,n,null,\"23db1e41\");e.default=l.exports},200:function(t,e,s){var i=s(201);\"string\"==typeof i&&(i=[[t.i,i,\"\"]]),i.locals&&(t.exports=i.locals);var a=s(4);t.exports.__inject__=function(t){a(\"04594909\",i,!0,t)}},201:function(t,e,s){(t.exports=s(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.post-item{background-color:#fff;padding-top:15px;padding-left:15px;padding-right:15px}.post-item .header{height:35px;margin-bottom:9px}.post-item .header .avatar{margin-right:7px;display:block;float:left;position:relative;width:35px;height:35px}.post-item .header .avatar img{display:block;width:100%;height:100%;border-radius:17.5px}.post-item .header .avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #e5e9ef;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}.post-item .header .face{margin-right:10px;display:block;float:left;width:35px;height:35px}.post-item .header .face img{display:block;width:100%;height:auto;overflow:hidden}.post-item .header .name{vertical-align:middle;display:block;overflow:hidden}.post-item .header .name p{margin-bottom:2px;margin-top:2px;font-size:14px;color:#333;line-height:15px}.post-item .header .name span,.post-item .header .name time{color:#999;font-size:11px}.post-item .body{display:block}.post-item .body .content{color:#000;font-size:16px;margin-bottom:4px;line-height:24px;max-height:48px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.post-item .body .images .image-full{height:190px;width:100%;background-color:#eee}.post-item .body .images .image-list img{width:32%;height:auto}.post-item .body .images .image-list img:not(:last-child){margin-right:2%}.post-item .footer{height:44px;line-height:44px}.post-item .footer .bangumi{color:#999;font-size:12px;display:block;margin-right:8px}.post-item .footer .stats{height:100%;color:#666;float:right;margin-top:-2px}.post-item .footer .stats span{margin-left:10px;font-size:12px;margin-right:2px}.post-item .footer .stats i{font-size:12px;display:inline-block;vertical-align:middle}.post-item .footer .stats .done{color:#00a1d6}.post-item .footer .stats .icon-shoucang{margin-top:-3px}',\"\"])},202:function(t,e,s){\"use strict\";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"li\",{staticClass:\"post-item\"},[t._ssrNode('<div class=\"header\">',\"</div>\",[t.item.user?[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.user(t.item.user.zone))+' class=\"avatar\">',\"</a>\",[s(\"v-img\",{attrs:{width:\"70\",src:t.item.user.avatar}})],1),t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.post(t.item.id))+' class=\"name\">',\"</a>\",[t._ssrNode('<p class=\"oneline\">'+t._ssrEscape(t._s(t.item.title))+\"</p>\"),t._ssrNode(\"<span>\",\"</span>\",[t._ssrNode(t._ssrEscape(t._s(t.item.user.nickname)+\" · \")),s(\"v-time\",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,\"created_at\",e)},expression:\"item.created_at\"}})],2)],2)]:[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.bangumi(t.item.bangumi.id))+' class=\"face\">',\"</a>\",[s(\"v-img\",{attrs:{width:\"70\",src:t.item.bangumi.avatar}})],1),t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.bangumi(t.item.bangumi.id))+' class=\"name\">',\"</a>\",[t._ssrNode(\"<p>\"+t._ssrEscape(t._s(t.item.bangumi.name))+\"</p><span>发表于 · </span>\"),s(\"v-time\",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,\"created_at\",e)},expression:\"item.created_at\"}})],2)]],2),t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.post(t.item.id))+' class=\"body\">',\"</a>\",[t._ssrNode('<p class=\"content\">'+t._ssrEscape(t._s(t.item.desc))+\"</p>\"),t.item.images.length?t._ssrNode('<div class=\"images clearfix\">',\"</div>\",[1===t.item.images.length?s(\"v-img\",{staticClass:\"image-full bg\",attrs:{src:t.item.images[0].url,height:\"190\",mode:\"2\",tag:\"div\"}}):s(\"div\",{staticClass:\"image-list\"},t._l(t.imageFilter(t.item.images),function(t,e){return s(\"v-img\",{key:e,attrs:{src:t.url,width:\"110\"}})}))],1):t._e()],2),t._ssrNode('<div class=\"footer\"><div class=\"stats\"><span'+t._ssrClass(null,{done:t.item.liked})+'><i class=\"iconfont icon-guanzhu\"></i>'+t._ssrEscape(\"\\n        \"+t._s(t.$utils.shortenNumber(t.item.like_count))+\"\\n      \")+\"</span><span\"+t._ssrClass(null,{done:t.item.marked})+'><i class=\"iconfont icon-shoucang\"></i>'+t._ssrEscape(\"\\n        \"+t._s(t.$utils.shortenNumber(t.item.mark_count))+\"\\n      \")+\"</span><span\"+t._ssrClass(null,{done:t.item.commented})+'><i class=\"iconfont icon-pinglun1\"></i>'+t._ssrEscape(\"\\n        \"+t._s(t.$utils.shortenNumber(t.item.comment_count))+\"\\n      \")+'</span><span><i class=\"iconfont icon-yuedu\"></i>'+t._ssrEscape(\"\\n        \"+t._s(t.$utils.shortenNumber(t.item.view_count))+\"\\n      \")+\"</span></div>\"+(t.item.bangumi&&t.item.user?\"<a\"+t._ssrAttr(\"href\",t.$alias.bangumi(t.item.bangumi.id))+' class=\"bangumi oneline\">'+t._ssrEscape(t._s(t.item.bangumi.name))+\"</a>\":\"\\x3c!----\\x3e\")+'</div><div class=\"hr\"></div>')],2)},staticRenderFns:[]};e.a=i},258:function(t,e,s){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(s(0)),a=n(s(1)),r=n(s(37)),o=n(s(199));function n(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"v-post-trending\",asyncData:function(t){var e=this,s=t.store,o=t.route,n=t.ctx;return(0,a.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.dispatch(\"trending/getTrending\",{type:\"post\",sort:o.params.sort,api:new r.default(n)});case 2:case\"end\":return t.stop()}},t,e)}))()},components:{PostFlowItem:o.default},computed:{post:function(){return this.$store.state.trending[this.sort]}},data:function(){return{sort:this.$route.params.sort}},methods:{fetchData:function(){var t=this;return(0,a.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch(\"trending/loadMore\",{type:\"post\",sort:t.sort,api:new r.default(t)});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.$toast.error(e.t0);case 8:case\"end\":return e.stop()}},e,t,[[0,5]])}))()},switchTab:function(t){var e=this;return(0,a.default)(i.default.mark(function s(){return i.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.sort=t,s.prev=1,s.next=4,e.$store.dispatch(\"trending/getTrending\",{type:\"post\",sort:t,api:new r.default(e)});case 4:s.next=9;break;case 6:s.prev=6,s.t0=s.catch(1),e.$toast.error(s.t0);case 9:case\"end\":return s.stop()}},s,e,[[1,6]])}))()}}}},385:function(t,e,s){\"use strict\";var i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{attrs:{id:\"post-trending\"}},[t._ssrNode('<div class=\"tabs\"><button'+t._ssrClass(null,{active:\"news\"===t.sort})+\">最新</button><button\"+t._ssrClass(null,{active:\"active\"===t.sort})+\">动态</button><button\"+t._ssrClass(null,{active:\"hot\"===t.sort})+\">热门</button></div>\"),t._ssrNode(\"<ul>\",\"</ul>\",t._l(t.post.list,function(t,e){return s(\"post-flow-item\",{key:t.id+\"-\"+e,attrs:{item:t}})})),s(\"more-btn\",{attrs:{\"no-more\":t.post.noMore,loading:t.post.loading,length:t.post.list.length},on:{fetch:t.fetchData}})],2)},staticRenderFns:[]};e.a=i}};",
    "14.server-bundle.js": "exports.ids=[14],exports.modules={176:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(268),r=a.n(i);for(var n in i)\"default\"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);var s=a(415),o=a(2)(r.a,s.a,!1,null,null,\"17e9d978\");t.default=o.exports},180:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=o(a(12)),r=o(a(0)),n=o(a(1)),s=o(a(15));function o(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"ImageWaterfall\",components:{waterfall:function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,149))},\"waterfall-slot\":function(){return\"undefined\"==typeof window?a.e(23).then(a.bind(null,183)):new Promise(function(e){e()}).then(a.bind(null,150))}},props:{loading:{type:Boolean,required:!0},bangumi:{type:Array,default:function(){return[]}},role:{type:Array,default:function(){return[]}}},computed:{page:function(){return this.$route.name},showSortHeader:function(){return!Array.isArray(this.options)},waterfall:function(){return this.$store.state.image.waterfall},list:function(){return this.waterfall.data},noMore:function(){return this.waterfall.noMore},options:function(){return this.waterfall.options},curUserId:function(){return this.$store.state.login?this.$store.state.user.id:-1},zone:function(){return this.$store.state.user.zone},pickerDrawerHeaderText:function(){return this.openBangumisDrawer?\"番剧\":this.openImageTagsDrawer?\"类型\":this.openImageSizeDrawer?\"尺寸\":this.openImageRoleDrawer?\"角色\":this.openImageAlbumDrawer?\"相册\":\"选项卡\"},albumBangumiPlaceholder:function(){var e=this;if(this.loadingBangumi)return\"加载中...\";var t=\"点击选择番剧\";return this.bangumiSlots[0].values.forEach(function(a){a.id===e.albumData.bangumiId&&(t=a.name)}),t},imageBangumiPlaceholder:function(){return this.loadingBangumi?\"加载中...\":this.imageData.selectedBangumi?this.getNameById(\"bangumi\",this.imageData.bangumiId):\"点击选择番剧\"},imageTagsPlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedTags?this.getNameById(\"tags\",this.imageData.tagsId):\"点击选择类型\"},imageSizePlaceholder:function(){return this.loadingUploadType?\"加载中...\":this.imageData.selectedSize?this.getNameById(\"size\",this.imageData.sizeId):\"点击选择尺寸\"},imageRolePlaceholder:function(){return this.loadingBangumiRole?\"加载中...\":this.imageData.selectedRole?this.getNameById(\"role\",this.imageData.roleId):\"点击选择角色（可选）\"}},data:function(){return{uploadHeaders:{token:\"\"},openEditModal:!1,openEditAlbumModal:!1,toggleSortDrawer:!1,bangumiRoles:{},loadingUserBangumiFetch:!1,loadingUploadTypeFetch:!1,submitting:!1,selectedTagsId:0,selectedSizeId:0,selectedCreatorId:-1,albumData:{id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[],is_cartoon:!1},originAlbumData:{name:\"\",bangumiId:\"\",url:\"\"},imageData:{id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},originImageData:{bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\"},loadingBangumi:!1,loadingUploadType:!1,loadingBangumiRole:!1,bangumiSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],tagsSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sizeSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],roleSlots:[{flex:1,defaultIndex:0,values:[],textAlign:\"center\"}],sortSlots:[{flex:1,values:[],defaultIndex:0,textAlign:\"right\"},{flex:1,values:[],defaultIndex:0,textAlign:\"center\"},{flex:1,values:[{id:-1,name:\"全部\"},{id:1,name:\"仅原创\"},{id:0,name:\"仅搬运\"}],defaultIndex:0,textAlign:\"left\"}],openPickerDrawer:!1,openBangumisDrawer:!1,openImageTagsDrawer:!1,openImageSizeDrawer:!1,openImageRoleDrawer:!1,openImageAlbumDrawer:!1,saveSortSelect:[]}},methods:{isMine:function(e){return this.curUserId===e},computeOptions:function(e){var t=[];return t=this.isMine(e.user_id)?t.concat([\"删除\",\"编辑\"]):t.concat([\"举报\"])},computeBoxHeight:function(e){return this.computeImageHeight(e)+(\"role-show\"===this.page?48:\"user-show\"===this.page?e.bangumi_id?93:48:e.bangumi||e.user?93:48)},computeImageHeight:function(e){return parseInt(e.height/e.width*145,10)},computeImageType:function(e){var t=e.tags,a=e.size.id;if(a&&(this.originImageData.sizeId=a,this.imageData.sizeId=a,this.imageData.selectedSize=!0),t.length){var i=t.length?t[0].id:\"\";this.originImageData.tagsId=i,this.imageData.tagsId=i,this.imageData.selectedTags=!0}},handleLoadMoreClick:function(e){e&&this.$store.commit(\"image/SET_WATERFALL_META\",{size:this.selectedSizeId,tags:this.selectedTagsId,bangumiId:-1,roleId:-1,creator:this.selectedCreatorId}),this.$emit(\"fetch\")},deleteImage:function(e){var t=this,a=e.userId,i=e.id;a===this.curUserId&&new s.default(this).deleteImage({id:i}).then(function(){t.$store.commit(\"image/DELETE_WATERFALL\",{id:i})}).catch(function(e){t.$toast.error(e)})},startEditImage:function(e){this.imageData.id=e.id;var t=e.bangumi_id,a=e.role_id;this.getUserBangumis(),t&&(this.originImageData.bangumiId=t,this.imageData.selectedBangumi=!0,this.imageData.bangumiId=t,this.getBangumiRoles(t)),a&&(this.originImageData.roleId=a,this.imageData.roleId=a,this.imageData.selectedRole=!0),this.computeImageType(e),this.openEditModal=!0},startEditAlbum:function(e){this.albumData.is_cartoon=e.is_cartoon,this.albumData.id=e.id,this.albumData.name=e.name,this.albumData.url=e.url,this.originAlbumData.name=e.name,this.originAlbumData.url=e.url;var t=e.bangumi_id;t&&(this.albumData.bangumiId=t,this.originAlbumData.bangumiId=t),this.getUpToken(),this.getUserBangumis(),this.openEditModal=!0},reportImage:function(e){var t=this;this.$prompt(\"请输入举报原因\",\"提示\",{confirmButtonText:\"提交\",cancelButtonText:\"取消\"}).then(function(a){a.value&&new s.default(t).trialReport({id:e.id}).then(function(){t.$toast.success(\"提交成功！\")})}).catch(function(){})},openSortDrawer:function(){var e=this,t=[{id:0,name:\"全部\"}],a=!Array.isArray(this.options),i=a?t.concat(this.options.tags):[],r=a?t.concat(this.options.size):[];this.sortSlots[0].values=i,this.sortSlots[1].values=r,i.forEach(function(t,a){t.id===e.selectedTagsId&&(e.sortSlots[0].defaultIndex=a)}),r.forEach(function(t,a){t.id===e.selectedSizeId&&(e.sortSlots[1].defaultIndex=a)}),this.sortSlots[2].values.forEach(function(t,a){t.id===e.selectedCreatorId&&(e.sortSlots[2].defaultIndex=a)}),this.toggleSortDrawer=!0},handleMenuSelected:function(e,t){var a=this;\"举报\"===e?this.reportImage(t):\"删除\"===e?this.$confirm(\"删除后不可恢复, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.deleteImage({userId:t.user_id,id:t.id})}).catch(function(){}):\"编辑\"===e&&(this.tagsSlots[0].values=this.options.tags,this.sizeSlots[0].values=this.options.size,t.image_count?(this.albumData={id:0,name:\"\",bangumiId:\"\",url:\"\",poster:[]},this.openEditAlbumModal=!0,this.startEditAlbum(t)):(this.imageData={id:0,bangumiId:\"\",roleId:\"\",sizeId:\"\",tagsId:\"\",selectedBangumi:!1,selectedTags:!1,selectedSize:!1,selectedRole:!1},this.openEditAlbumModal=!1,this.startEditImage(t)))},handleLikeBtnClick:function(e,t){var a=this;if(this.$store.state.login)if(this.isMine(t.user_id))this.$toast.error(\"不能为自己的图片点赞\");else{var i=e.currentTarget;if(t.creator&&!t.liked)return this.$store.state.user.coin?void this.$confirm(\"原创图片点赞需要金币, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){a.submitToggleLike(i,t)}).catch(function(){}):void this.$toast.error(\"金币不足\");this.submitToggleLike(i,t)}else this.$channel.$emit(\"sign-in\")},handleImageClick:function(e){e.image_count?window.location=this.$alias.imageAlbum(e.id):this.$previewImages(e,e)},handleRolePickerBtnClick:function(){this.imageData.selectedBangumi?this.loadingBangumiRole?this.$toast.error(\"数据加载中\"):this.roleSlots[0].values.length?(this.imageData.selectedRole=!0,this.imageData.roleId||(this.imageData.roleId=this.getSelectedMeta(\"role\",\"id\")),this.switchPickerDrawer(\"openImageRoleDrawer\")):this.$toast.error(\"该番剧下没用可选角色\"):this.$toast.error(\"请先选择番剧\")},handleAlbumBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.albumData.bangumiId||(this.albumData.bangumiId=this.getSelectedMeta(\"bangumi\",\"id\")),this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageBangumiPickerBtnClick:function(){this.bangumiSlots[0].values.length?(this.imageData.selectedBangumi=!0,this.switchPickerDrawer(\"openBangumisDrawer\")):this.$toast.error(\"还没有关注任何番剧\")},handleImageTagsPickerBtnClick:function(){this.imageData.selectedTags=!0,this.switchPickerDrawer(\"openImageTagsDrawer\")},handleImageSizePickerBtnClick:function(){this.imageData.selectedSize=!0,this.switchPickerDrawer(\"openImageSizeDrawer\")},switchPickerDrawer:function(e){this.openBangumisDrawer=!1,this.openImageTagsDrawer=!1,this.openImageSizeDrawer=!1,this.openImageRoleDrawer=!1,this.openImageAlbumDrawer=!1,this[e]=!0,this.openPickerDrawer=!0},getUpToken:function(){var e=this;return(0,n.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch(\"getUpToken\",e);case 3:e.uploadHeaders.token=e.$store.state.user.uptoken.upToken,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$toast.error(t.t0);case 9:case\"end\":return t.stop()}},t,e,[[0,6]])}))()},submitToggleLike:function(e,t){var a=this;return(0,n.default)(r.default.mark(function i(){var n,o;return r.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e.setAttribute(\"disabled\",\"disabled\"),n=new s.default(a),i.prev=2,t.creator||a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:!t.liked}),i.next=6,n.toggleLike({id:t.id});case 6:o=i.sent,t.creator&&(a.$store.commit(\"image/LIKE_WATERFALL\",{id:t.id,result:o}),o&&a.$store.commit(\"USE_COIN\"),a.$toast.success(\"操作成功\")),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),a.$toast.error(i.t0);case 13:return i.prev=13,e.removeAttribute(\"disabled\"),i.finish(13);case 16:case\"end\":return i.stop()}},i,a,[[2,10,13,16]])}))()},getUserBangumis:function(){var e=this;return(0,n.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.bangumiSlots[0].values.length){t.next=2;break}return t.abrupt(\"return\");case 2:if(!e.loadingUserBangumiFetch){t.next=4;break}return t.abrupt(\"return\");case 4:return e.loadingUserBangumiFetch=!0,t.prev=5,t.next=8,e.$store.dispatch(\"users/getFollowBangumis\",{ctx:e,zone:e.zone});case 8:e.bangumiSlots[0].values=t.sent;case 9:return t.prev=9,e.loadingUserBangumiFetch=!1,t.finish(9);case 12:case\"end\":return t.stop()}},t,e,[[5,,9,12]])}))()},getBangumiRoles:function(e){var t=this;return(0,n.default)(r.default.mark(function a(){var i;return r.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt(\"return\");case 2:if(!t.bangumiRoles[e]){a.next=5;break}return t.roleSlots[0].values=t.bangumiRoles[e],a.abrupt(\"return\");case 5:return a.next=7,t.$store.dispatch(\"bangumi/getRoles\",{ctx:t,bangumiId:e});case 7:i=a.sent,t.bangumiRoles[e]=i,t.roleSlots[0].values=i;case 10:case\"end\":return a.stop()}},a,t)}))()},handleImageEditDone:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var a,i,n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.imageData.selectedSize){t.next=3;break}return e.$toast.error(\"请先选择尺寸\"),t.abrupt(\"return\");case 3:if(e.imageData.selectedTags){t.next=6;break}return e.$toast.error(\"请先选择类型\"),t.abrupt(\"return\");case 6:if(e.imageData.selectedBangumi){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.imageData.bangumiId!==e.originImageData.bangumiId||e.imageData.roleId!==e.originImageData.roleId||e.imageData.sizeId!==e.originImageData.sizeId||e.imageData.tagsId!==e.originImageData.tagsId){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!0,e.$toast.loading(\"修改中...\"),a=new s.default(e),t.prev=17,i=e.imageData.id,t.next=21,a.editImage({id:i,bangumiId:e.imageData.bangumiId||0,roleId:e.imageData.selectedRole&&e.imageData.roleId||0,tags:e.imageData.tagsId,size:e.imageData.sizeId});case 21:n=t.sent,e.$toast.success(\"图片编辑成功！\"),e.$store.commit(\"image/EDIT_WATERFALL\",{id:i,data:n}),e.openEditModal=!1,t.next=30;break;case 27:t.prev=27,t.t0=t.catch(17),e.$toast.error(t.t0);case 30:return t.prev=30,e.submitting=!1,t.finish(30);case 33:case\"end\":return t.stop()}},t,e,[[17,27,30,33]])}))()},handleAlbumEditDone:function(){var e=this;return(0,n.default)(r.default.mark(function t(){var a,n,o,l;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.albumData.name){t.next=3;break}return e.$toast.error(\"请填写专辑名称\"),t.abrupt(\"return\");case 3:if(!(e.albumData.name.length>20)){t.next=6;break}return e.$toast.error(\"专题名称请缩减至20字以内\"),t.abrupt(\"return\");case 6:if(e.albumData.bangumiId){t.next=9;break}return e.$toast.error(\"请选择要投稿的番剧\"),t.abrupt(\"return\");case 9:if(!e.submitting){t.next=11;break}return t.abrupt(\"return\");case 11:if(e.albumData.bangumiId!==e.originAlbumData.bangumiId||e.albumData.name!==e.originAlbumData.name||0!==e.albumData.poster.length){t.next=14;break}return e.openEditModal=!1,t.abrupt(\"return\");case 14:return e.submitting=!1,e.$toast.loading(\"修改中...\"),a=new s.default(e),n=e.albumData.id,o=e.albumData.poster.length?e.albumData.poster[0].url:null,t.prev=19,t.next=22,a.editAlbum((0,i.default)({id:n,bangumiId:e.albumData.bangumiId||0,name:e.albumData.name},o?{url:o.key,width:o.width,height:o.height}:{}));case 22:l=t.sent,e.$store.commit(\"image/EDIT_ALBUM\",{id:n,data:l}),e.$store.commit(\"image/EDIT_WATERFALL\",{id:n,data:l}),e.$toast.success(\"专辑编辑成功！\"),e.openEditModal=!1,e.$refs.uploader.clearFiles(),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(19),e.$toast.error(t.t0);case 33:return t.prev=33,e.submitting=!1,t.finish(33);case 36:case\"end\":return t.stop()}},t,e,[[19,30,33,36]])}))()},handleError:function(e,t){console.log(e),this.albumData.poster=[],this.$toast.error(\"图片：\"+t.name+\" 上传失败\")},beforeUpload:function(e){if(this.$store.state.login){var t=-1!==[\"image/jpeg\",\"image/png\",\"image/jpg\",\"image/gif\"].indexOf(e.type),a=e.size/1024/1024<5;return t?a?(this.uploadHeaders.key=this.$utils.createFileName({userId:this.$store.state.user.id,type:\"album\",id:this.albumData.id,file:e}),!0):(this.$toast.error(\"图片大小不能超过 5MB!\"),!1):(this.$toast.error(\"仅支持 jpg / jpeg / png / gif 格式的图片\"),!1)}this.$channel.$emit(\"sign-in\")},handleAlbumPosterRemove:function(){this.albumData.poster=[]},handleAlbumUploadSuccess:function(e,t){this.albumData.poster=[{name:t.name,url:e.data}]},openCreateImageModal:function(){this.$store.state.login?this.$channel.$emit(\"open-create-image-drawer\"):this.$channel.$emit(\"sign-in\")},getSelectedMeta:function(e,t){var a=e+\"Slots\";return this[a][0].values.length?this[a][0].values[this[a][0].defaultIndex][t]:0},getNameById:function(e,t){var a=e+\"Slots\",i=\"\";return this[a][0].values.length?(this[a][0].values.forEach(function(e){e.id===t&&(i=e.name)}),i):i},onTagsValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.tagsId=i,this.tagsSlots[0].values.forEach(function(e,t){e.id===i&&(a.tagsSlots[0].defaultIndex=t)})}},onSizeValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.sizeId=i,this.sizeSlots[0].values.forEach(function(e,t){e.id===i&&(a.sizeSlots[0].defaultIndex=t)})}},onRoleValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.imageData.roleId=i,this.roleSlots[0].values.forEach(function(e,t){e.id===i&&(a.roleSlots[0].defaultIndex=t)})}},onBangumiValuesChange:function(e,t){var a=this;if(t[0]){var i=t[0].id;this.bangumiSlots[0].values.forEach(function(e,t){e.id===i&&(a.bangumiSlots[0].defaultIndex=t)}),this.openEditAlbumModal?this.albumData.bangumiId=i:(this.imageData.bangumiId=i,this.imageData.selectedRole=!1,this.getBangumiRoles(this.getSelectedMeta(\"bangumi\",\"id\")))}},onSortValuesChange:function(e,t){this.saveSortSelect=t},handleSelectedSort:function(){var e=this.saveSortSelect[0].id,t=this.saveSortSelect[1].id,a=this.saveSortSelect[2].id;this.selectedTagsId===e&&this.selectedSizeId===t&&this.selectedCreatorId===a||(this.selectedTagsId=e,this.selectedSizeId=t,this.selectedCreatorId=a,this.handleLoadMoreClick(!0))}}}},189:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=a(180),r=a.n(i);for(var n in i)\"default\"!==n&&function(e){a.d(t,e,function(){return i[e]})}(n);var s=a(192);var o=function(e){var t;(t=a(190)).__inject__&&t.__inject__(e)},l=a(2)(r.a,s.a,!1,o,null,\"5cb66ef0\");t.default=l.exports},190:function(e,t,a){var i=a(191);\"string\"==typeof i&&(i=[[e.i,i,\"\"]]),i.locals&&(e.exports=i.locals);var r=a(4);e.exports.__inject__=function(e){r(\"527e3153\",i,!0,e)}},191:function(e,t,a){(e.exports=a(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#image-waterfall{margin-right:-5px;background-color:#fff}#image-waterfall .image-container{position:relative;width:310px;margin:0 auto 15px}#image-waterfall .image-item{padding-right:10px;padding-bottom:10px;margin-left:3px;margin-top:3px}#image-waterfall .image-item .item-wrap{font-size:0;position:relative}#image-waterfall .image-item .item-wrap.album-wrap{cursor:pointer}#image-waterfall .image-item .item-wrap.album-wrap:after{content:\"\";position:absolute;bottom:0;left:0;width:100%;height:50px;opacity:.3;background-color:transparent;background-image:-webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(20%,rgba(0,0,0,.1)),color-stop(35%,rgba(0,0,0,.2)),color-stop(65%,rgba(0,0,0,.6)),to(rgba(0,0,0,.9)));background-image:-o-linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9));background-image:linear-gradient(transparent,rgba(0,0,0,.1) 20%,rgba(0,0,0,.2) 35%,rgba(0,0,0,.6) 65%,rgba(0,0,0,.9))}#image-waterfall .image-item .item-wrap .creator{font-size:20px;position:absolute;left:5px;top:2px;z-index:1;color:#ffcf00}#image-waterfall .image-item .item-wrap .album-info{position:absolute;left:7px;bottom:4px;z-index:1;color:#fff;line-height:20px}#image-waterfall .image-item .item-wrap .album-info i{font-size:20px;vertical-align:middle}#image-waterfall .image-item .item-wrap .album-info .image-count{margin-left:5px;font-size:14px;vertical-align:middle}#image-waterfall .image-item .item-wrap .v-select-wrap{position:absolute;right:0;top:0;width:58px;line-height:16px;font-size:12px;color:#fff;z-index:1;margin-top:7px;margin-right:6px}#image-waterfall .image-item .item-wrap .v-select-wrap .iconfont{text-shadow:0 1px 10px grey}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-wrap{background-color:#fff;border:1px solid #f0f0f0;border-radius:4px;top:18px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item{height:36px;line-height:35px;color:#535353;font-size:12px;padding-left:15px}#image-waterfall .image-item .item-wrap .v-select-wrap .v-select-options-item:not(:last-child){border-bottom:1px solid #f0f0f0}#image-waterfall .image-item .image{width:100%;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.2);box-shadow:0 1px 3px rgba(0,0,0,.2);overflow:hidden}#image-waterfall .image-item .image .desc{padding:5px 8px;height:48px}#image-waterfall .image-item .image .desc .name{max-width:140px;margin-bottom:7px;display:block;font-size:12px;line-height:18px}#image-waterfall .image-item .image .desc .tags{margin-bottom:7px}#image-waterfall .image-item .image .desc .tags .el-tag{margin-right:7px;max-width:60px;font-size:12px}#image-waterfall .image-item .image .desc .meta{font-size:11px;color:#ccd0d7;overflow:hidden;text-align:right;margin-top:1px}#image-waterfall .image-item .image .desc .meta .like{display:block;text-align:left;width:100%;color:#ccd0d7;font-size:12px;line-height:12px}#image-waterfall .image-item .image .desc .meta .like.liked{color:#f25d8e}#image-waterfall .image-item .image .desc .meta time{margin-top:3px}#image-waterfall .image-item .image .detail{padding:8px;border-top:1px solid #f2f2f2;background-color:#fafafa;font-size:12px;line-height:14px;color:#999}#image-waterfall .image-item .image .detail .margin-top{margin-top:8px}#image-waterfall .image-item .image .detail .info{overflow:hidden}#image-waterfall .image-item .image .detail a{display:block;color:#777;font-size:12px}#image-waterfall .image-item .image .bangumi .avatar{float:left;margin-right:8px}#image-waterfall .image-item .image .bangumi .avatar img{width:28px;height:28px}#image-waterfall .image-item .image .user .avatar{float:left;margin-right:8px;overflow:hidden;border:1px solid #f0f0f0;border-radius:50%;width:28px;height:28px}#image-waterfall .image-item .image .user .avatar img{display:block;width:100%;height:100%;border-radius:14px}#image-waterfall .image-item .image .user .extra{margin-top:3px}#image-waterfall .edit-image-modal .field{font-size:16px;line-height:48px}#image-waterfall .edit-image-modal .field span{float:left}#image-waterfall .edit-image-modal .field div{color:#000;overflow:hidden}#image-waterfall .edit-image-modal .btn-submit{margin-top:15px}#image-waterfall .el-upload--picture-card,#image-waterfall .el-upload-list__item{width:15vw;height:15vw;line-height:15vw}#image-waterfall .el-upload-list__item-delete{float:none!important}#image-waterfall .btn-sort{width:100%;padding-bottom:5px;margin-bottom:10px;padding-top:15px}#image-waterfall .btn-sort span{float:left;margin-left:8px;font-size:13px}#image-waterfall .btn-sort .iconfont{float:right;margin-right:13px;font-size:12px}#image-waterfall .sort-image-drawer{border-radius:5px 5px 0 0}',\"\"])},192:function(e,t,a){\"use strict\";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.list.length?a(\"div\",{attrs:{id:\"image-waterfall\"}},[a(\"no-ssr\",[a(\"div\",{staticClass:\"image-container\"},[e.showSortHeader?[a(\"button\",{staticClass:\"btn-sort clearfix\",on:{click:e.openSortDrawer}},[a(\"span\",[e._v(\"筛选\")]),a(\"i\",{staticClass:\"iconfont icon-101\"})]),a(\"v-drawer\",{staticClass:\"sort-image-drawer\",attrs:{\"header-text\":\"图片筛选\",from:\"bottom\",size:\"250px\",\"submit-text\":\"确认\"},on:{submit:e.handleSelectedSort},model:{value:e.toggleSortDrawer,callback:function(t){e.toggleSortDrawer=t},expression:\"toggleSortDrawer\"}},[a(\"mt-picker\",{attrs:{slots:e.sortSlots,valueKey:\"name\"},on:{change:e.onSortValuesChange}})],1)]:e._e(),a(\"waterfall\",{attrs:{\"line-gap\":155,\"auto-resize\":!1}},e._l(e.list,function(t,i){return a(\"waterfall-slot\",{key:t.id,staticClass:\"image-item\",attrs:{width:\"145\",height:e.computeBoxHeight(t),order:i}},[a(\"div\",{staticClass:\"image\"},[a(\"div\",{staticClass:\"item-wrap\",class:[t.image_count?\"album-wrap\":\"image-wrap\"],on:{click:function(a){e.handleImageClick(t)}}},[t.creator?a(\"i\",{staticClass:\"creator iconfont icon-huangguan\"}):e._e(),e.computeOptions(t).length?a(\"div\",{staticClass:\"menu\",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a(\"v-select\",{attrs:{placeholder:\"\",options:e.computeOptions(t),abort:!0},on:{submit:function(a){e.handleMenuSelected(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-101\",attrs:{slot:\"tail\"},slot:\"tail\"})])],1):e._e(),a(\"img\",{attrs:{width:\"145\",height:e.computeImageHeight(t),src:e.$resize(t.url,{width:290,mode:2})}}),t.image_count?a(\"div\",{staticClass:\"album-info\"},[a(\"i\",{staticClass:\"el-icon-picture-outline\"}),a(\"span\",{staticClass:\"image-count\",domProps:{textContent:e._s(t.image_count)}})]):e._e()]),a(\"div\",{staticClass:\"desc\"},[t.image_count?a(\"a\",{staticClass:\"name oneline\",attrs:{href:\"javascript:;\"},domProps:{textContent:e._s(t.name)}}):a(\"div\",{staticClass:\"tags\"},[a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.size.name)}}),e._l(t.tags,function(t){return a(\"button\",{staticClass:\"el-tag oneline\",domProps:{textContent:e._s(t.name)}})})],2),a(\"div\",{staticClass:\"meta\"},[a(\"button\",{staticClass:\"like\",class:{liked:t.liked},on:{click:function(a){e.handleLikeBtnClick(a,t)}}},[a(\"i\",{staticClass:\"iconfont icon-msnui-love\"}),e._v(\"\\n                  \"+e._s(t.like_count||\"\")+\"\\n                \")])])]),\"image-trending\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\"},[a(\"a\",{staticClass:\"oneline\",class:{\"margin-top\":!t.bangumi},attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.bangumi_id?a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}):e._e()])]):\"user-show\"===e.page?[t.bangumi_id?a(\"div\",{staticClass:\"detail bangumi clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.bangumi(t.bangumi.id)}},[a(\"img\",{attrs:{src:e.$resize(t.bangumi.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.bangumi(t.bangumi.id)},domProps:{textContent:e._s(t.bangumi.name)}}),t.role?a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}}):e._e()])]):e._e()]:\"bangumi-show\"===e.page?a(\"div\",{staticClass:\"detail user clearfix\"},[a(\"a\",{staticClass:\"avatar\",attrs:{href:e.$alias.user(t.user.zone)}},[a(\"img\",{attrs:{src:e.$resize(t.user.avatar,{width:56})}})]),a(\"div\",{staticClass:\"info\",class:{\"margin-top\":!t.role_id}},[a(\"a\",{staticClass:\"oneline\",attrs:{href:e.$alias.user(t.user.zone)},domProps:{textContent:e._s(t.user.nickname)}}),t.role_id?a(\"a\",{attrs:{href:e.$alias.cartoonRole(t.role_id)}},[a(\"div\",{staticClass:\"oneline\",domProps:{textContent:e._s(t.role.name)}})]):e._e()])]):e._e()],2)])}))],2)]),a(\"more-btn\",{attrs:{\"no-more\":e.noMore,loading:e.loading,length:e.list.length},on:{fetch:function(t){e.handleLoadMoreClick(!1)}}}),a(\"v-drawer\",{staticClass:\"edit-image-modal\",attrs:{\"header-text\":e.openEditAlbumModal?\"编辑相册\":\"编辑图片\",from:\"bottom\",size:\"100%\",backdrop:!1},model:{value:e.openEditModal,callback:function(t){e.openEditModal=t},expression:\"openEditModal\"}},[a(\"div\",{staticClass:\"container\"},[e.openEditAlbumModal?[a(\"div\",{staticClass:\"field\"},[a(\"v-field\",{attrs:{label:\"名称\",placeholder:\"请填写相册名称\",\"label-size\":\"48px\"},model:{value:e.albumData.name,callback:function(t){e.$set(e.albumData,\"name\",t)},expression:\"albumData.name\"}})],1),e.albumData.is_cartoon?e._e():a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.albumBangumiPlaceholder)},on:{click:e.handleAlbumBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"封面：\")]),a(\"el-upload\",{ref:\"albumUploader\",attrs:{action:\"https://upload.qiniup.com\",\"list-type\":\"picture-card\",data:e.uploadHeaders,disabled:!0,\"on-error\":e.handleError,\"before-upload\":e.beforeUpload,\"on-remove\":e.handleAlbumPosterRemove,\"on-success\":e.handleAlbumUploadSuccess}},[e._v(\"+\")])],1),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleAlbumEditDone}},[e._v(\"确认修改\")])]:[a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"类型：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageTagsPlaceholder)},on:{click:e.handleImageTagsPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"尺寸：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageSizePlaceholder)},on:{click:e.handleImageSizePickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"番剧：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageBangumiPlaceholder)},on:{click:e.handleImageBangumiPickerBtnClick}})]),a(\"div\",{staticClass:\"field\"},[a(\"span\",[e._v(\"角色：\")]),a(\"div\",{domProps:{textContent:e._s(e.imageRolePlaceholder)},on:{click:e.handleRolePickerBtnClick}})]),a(\"button\",{staticClass:\"btn-submit\",on:{click:e.handleImageEditDone}},[e._v(\"确认修改\")])]],2),a(\"v-drawer\",{staticClass:\"bangumis-drawer\",attrs:{from:\"bottom\",size:\"250px\",\"header-text\":e.pickerDrawerHeaderText},model:{value:e.openPickerDrawer,callback:function(t){e.openPickerDrawer=t},expression:\"openPickerDrawer\"}},[e.openBangumisDrawer?a(\"mt-picker\",{attrs:{slots:e.bangumiSlots,valueKey:\"name\"},on:{change:e.onBangumiValuesChange}}):e.openImageTagsDrawer?a(\"mt-picker\",{attrs:{slots:e.tagsSlots,valueKey:\"name\"},on:{change:e.onTagsValuesChange}}):e.openImageSizeDrawer?a(\"mt-picker\",{attrs:{slots:e.sizeSlots,valueKey:\"name\"},on:{change:e.onSizeValuesChange}}):e.openImageRoleDrawer?a(\"mt-picker\",{attrs:{slots:e.roleSlots,valueKey:\"name\"},on:{change:e.onRoleValuesChange}}):e._e()],1)],1)],1):a(\"more-btn\",{attrs:{\"no-more\":e.noMore,length:e.list.length,loading:!1}},[a(\"button\",{on:{click:e.openCreateImageModal}},[e._v(\"上传图片\")])])},staticRenderFns:[]};t.a=i},268:function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=s(a(0)),r=s(a(1)),n=s(a(189));function s(e){return e&&e.__esModule?e:{default:e}}t.default={name:\"image-trending\",asyncData:function(e){var t=this,a=e.store,n=e.route,s=e.ctx;return(0,r.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.dispatch(\"image/getTrendingImages\",{sort:n.params.sort,force:!0,ctx:s});case 2:case\"end\":return e.stop()}},e,t)}))()},components:{ImageWaterfall:n.default},head:function(){return{title:\"相册 - \"+(\"new\"===this.sort?\"最新上传\":\"最多喜欢\")}},computed:{images:function(){return this.$store.state.image.waterfall}},data:function(){return{loading:!1,sort:this.$route.params.sort}},methods:{switchTab:function(e){this.sort=e,this.getImages(!0)},getImages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.default)(i.default.mark(function a(){return i.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.loading){a.next=2;break}return a.abrupt(\"return\");case 2:return e.loading=!0,a.prev=3,a.next=6,e.$store.dispatch(\"image/getTrendingImages\",{sort:e.sort,ctx:e,force:t});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(3),e.$toast.error(a.t0);case 11:return a.prev=11,e.loading=!1,a.finish(11);case 14:case\"end\":return a.stop()}},a,e,[[3,8,11,14]])}))()}}}},415:function(e,t,a){\"use strict\";var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{attrs:{id:\"image-trending\"}},[this._ssrNode('<div class=\"tabs\"><button'+this._ssrClass(null,{active:\"new\"===this.sort})+\">最新上传</button><button\"+this._ssrClass(null,{active:\"hot\"===this.sort})+\">最多喜欢</button></div>\"),t(\"image-waterfall\",{attrs:{loading:this.loading},on:{fetch:this.getImages}})],2)},staticRenderFns:[]};t.a=i}};",
    "15.server-bundle.js": "exports.ids=[15],exports.modules={160:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=a(252),i=a.n(n);for(var r in n)\"default\"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a(365);var o=function(t){var e;(e=a(362)).__inject__&&e.__inject__(t)},l=a(2)(i.a,s.a,!1,o,null,\"a6759f98\");e.default=l.exports},252:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=o(a(0)),i=o(a(1)),r=o(a(161)),s=o(a(162));function o(t){return t&&t.__esModule?t:{default:t}}a(364),e.default={name:\"bangumi-news\",asyncData:function(t){var e=this,a=t.store,r=t.ctx;return(0,i.default)(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.dispatch(\"bangumi/getReleased\",r);case 2:case\"end\":return t.stop()}},t,e)}))()},components:{vanTabs:s.default,vanTab:r.default},computed:{list:function(){return this.$store.state.bangumi.released[this.active]}},data:function(){return{showtime:[\"最新\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\",\"日\"],active:(new Date).getDay()||7}},methods:{openFeedbackForResource:function(){this.$channel.$emit(\"open-feedback\",{type:5,desc:\"我想看新番：\"})}}}},362:function(t,e,a){var n=a(363);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var i=a(4);t.exports.__inject__=function(t){i(\"73df4562\",n,!0,t)}},363:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#bangumi-news .van-tabs--line .van-tabs__wrap{height:40px;padding-left:10px;padding-right:10px;z-index:1}#bangumi-news .van-tabs__line{height:1px}#bangumi-news .van-tabs__line:after{content:\"\";position:absolute;margin-left:-3px;left:50%;bottom:1px;width:0;height:0;border:3px solid #f44;border-top-width:0;border-left-color:transparent;border-right-color:transparent}#bangumi-news .van-tabs__wrap--scrollable .van-tabs__nav{width:100%;height:40px;display:block}#bangumi-news .van-tabs__wrap--scrollable .van-tabs__nav .van-tab{width:12.5%;float:left;height:40px;line-height:40px;cursor:default}#bangumi-news .van-tabs__wrap--scrollable .van-tabs__nav .van-tab.van-tab--active{color:#f44}#bangumi-news .van-tabs__wrap--scrollable .van-tabs__nav .van-tab:active{background-color:transparent!important}#bangumi-news .van-tabs--line{padding-top:50px}#bangumi-news ul{min-height:100vh}#bangumi-news li{margin-bottom:10px;height:60px}#bangumi-news li .face{width:60px;height:60px;-ms-flex-negative:0;flex-shrink:0;margin-right:10px;display:block;border-radius:5px;float:left}#bangumi-news li .content{overflow:hidden;height:60px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-item-align:center;align-self:center}#bangumi-news li .content .name{font-size:14px;font-weight:700;margin-bottom:8px;height:32px;line-height:16px;max-height:32px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}#bangumi-news li .content .body{color:#99a2aa;font-size:13px;line-height:18px;text-align:right}#bangumi-news li .content .body .part{border-radius:9px;color:#fff;text-align:center;padding:0 10px;height:18px;min-width:36px;margin-left:5px;font-size:12px}#bangumi-news li .content .body .part.new{background-color:#ff8eb3}#bangumi-news li .content .body .part.old{background-color:#b8c0cc}#bangumi-news .nomore{background-color:transparent}',\"\"])},364:function(t,e){},365:function(t,e,a){\"use strict\";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{attrs:{id:\"bangumi-news\"}},[t._ssrNode('<div class=\"tabs\"><a'+t._ssrAttr(\"href\",t.$alias.bangumiNews)+' class=\"active\">新番放送</a><a'+t._ssrAttr(\"href\",t.$alias.bangumiTimeline)+\">时间轴</a><a\"+t._ssrAttr(\"href\",t.$alias.bangumiTag())+\">分类索引</a></div>\"),a(\"van-tabs\",{attrs:{swipeable:\"\"},model:{value:t.active,callback:function(e){t.active=e},expression:\"active\"}},t._l(t.showtime,function(e,n){return a(\"van-tab\",{key:n,attrs:{title:e}},[a(\"ul\",{staticClass:\"container\"},[t._l(t.list,function(e){return a(\"li\",{key:e.id},[a(\"a\",{attrs:{href:t.$alias.bangumi(e.id)}},[a(\"img\",{staticClass:\"face\",attrs:{title:e.name,alt:e.name,src:t.$resize(e.avatar,{width:120})}})]),a(\"div\",{staticClass:\"content\"},[a(\"a\",{staticClass:\"name\",attrs:{href:t.$alias.bangumi(e.id)},domProps:{textContent:t._s(e.name)}}),a(\"div\",{staticClass:\"body\"},[e.released_video_id?a(\"a\",{attrs:{href:t.$alias.video(e.released_video_id)}},[t._v(\"\\n                更新至\\n                \"),a(\"span\",{staticClass:\"part\",class:[e.update?\"new\":\"old\"]},[t._v(\"\\n                  \"+t._s(e.end?\"已完结\":e.released_part+\"话\")+\"\\n                \")])]):a(\"strong\",[t._v(\"\\n                更新至\\n                \"),a(\"span\",{staticClass:\"part\",class:[e.update?\"new\":\"old\"]},[t._v(\"\\n                  \"+t._s(e.end?\"已完结\":e.released_part+\"话\")+\"\\n                \")])])])])])}),t.list.length?t._e():a(\"more-btn\",{attrs:{\"no-more\":!0,loading:!1,length:0}},[a(\"button\",{on:{click:t.openFeedbackForResource}},[t._v(\"求资源\")])])],2)])}))],2)},staticRenderFns:[]};e.a=n}};",
    "16.server-bundle.js": "exports.ids=[16],exports.modules={174:function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var n=t(266),o=t.n(n);for(var i in n)\"default\"!==i&&function(e){t.d(r,e,function(){return n[e]})}(i);var a=t(411);var s=function(e){var r;(r=t(409)).__inject__&&r.__inject__(e)},l=t(2)(o.a,a.a,!1,s,null,\"44983603\");r.default=l.exports},266:function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var n=i(t(0)),o=i(t(1));function i(e){return e&&e.__esModule?e:{default:e}}r.default={name:\"TrendingRole\",asyncData:function(e){var r=this,t=e.store;return(0,o.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch(\"cartoonRole/getTrending\");case 2:case\"end\":return e.stop()}},e,r)}))()},computed:{list:function(){return this.$utils.orderBy(this.$store.state.cartoonRole.trending.data,\"star_count\",\"desc\")},noMore:function(){return this.$store.state.cartoonRole.trending.noMore}},data:function(){return{loading:!1}},methods:{loadMore:function(){var e=this;return(0,o.default)(n.default.mark(function r(){return n.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.loading){r.next=2;break}return r.abrupt(\"return\");case 2:return e.loading=!0,r.prev=3,r.next=6,e.$store.dispatch(\"cartoonRole/getTrending\");case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),e.$toast.error(r.t0);case 11:return r.prev=11,e.loading=!1,r.finish(11);case 14:case\"end\":return r.stop()}},r,e,[[3,8,11,14]])}))()}}}},409:function(e,r,t){var n=t(410);\"string\"==typeof n&&(n=[[e.i,n,\"\"]]),n.locals&&(e.exports=n.locals);var o=t(4);e.exports.__inject__=function(e){o(\"7146b368\",n,!0,e)}},410:function(e,r,t){(e.exports=t(3)(!1)).push([e.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#trending-role li{position:relative;margin-top:15px}#trending-role li:not(:last-child):after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}#trending-role li .clearfix{overflow:hidden}#trending-role li .top{position:relative;display:block;float:right}#trending-role li .top:before{content:attr(data-index);line-height:48px}#trending-role li:first-of-type .top:before{color:#daa520;font-size:28px;line-height:44px}#trending-role li:nth-of-type(2) .top:before{color:#cd5c5c;font-size:22px;line-height:44px}#trending-role li:nth-of-type(3) .top:before{color:silver;font-size:16px;line-height:44px}#trending-role li .avatar{width:100px;height:100px;display:block;float:left;overflow:hidden;border-radius:5px;margin-right:10px;border:1px solid #e5e9ef}#trending-role li .avatar img{width:100%;height:auto}#trending-role li .summary{overflow:hidden}#trending-role li .summary .role{display:block;font-size:14px;line-height:20px;height:60px;overflow:hidden}#trending-role li .summary .role .name{font-weight:700}#trending-role li .summary .role .intro{color:#000}#trending-role li .summary .lover{height:40px;padding:10px 0;line-height:20px;vertical-align:middle;font-size:13px;color:#6d757a}#trending-role li .summary .lover img{width:20px;height:20px;border-radius:15px;vertical-align:middle;border:1px solid #e5e9ef;margin-left:10px}#trending-role li .footer{height:44px;line-height:44px}#trending-role li .footer .bangumi{color:#999;font-size:12px;overflow:hidden;margin-right:8px}#trending-role li .footer .stats{text-align:right;color:#666;float:right}#trending-role li .footer .stats span{margin-left:10px;font-size:12px;margin-right:2px}',\"\"])},411:function(e,r,t){\"use strict\";var n={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t(\"div\",{attrs:{id:\"trending-role\"}},[e._ssrNode('<ul class=\"container\">',\"</ul>\",e._l(e.list,function(r,n){return e._ssrNode(\"<li>\",\"</li>\",[e._ssrNode('<div class=\"clearfix\">',\"</div>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.cartoonRole(r.id))+' class=\"avatar\">',\"</a>\",[t(\"v-img\",{attrs:{src:r.avatar,width:\"90\",height:\"90\"}})],1),e._ssrNode('<div class=\"summary\">',\"</div>\",[e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.cartoonRole(r.id))+' class=\"role\"><span class=\"name\">'+e._ssrEscape(e._s(r.name))+'</span><span class=\"intro\">'+e._ssrEscape(\"：\"+e._s(r.intro))+\"</span></a>\"),r.lover_id?e._ssrNode('<div class=\"lover\">',\"</div>\",[e._ssrNode(\"<span>守护者：</span>\"),e._ssrNode(\"<a\"+e._ssrAttr(\"href\",e.$alias.user(r.lover_zone))+' class=\"fr\">',\"</a>\",[e._ssrNode(\"<span>\"+e._ssrEscape(e._s(r.lover_nickname))+\"</span>\"),t(\"v-img\",{attrs:{src:r.lover_avatar,width:\"20\",height:\"20\"}})],2)],2):e._ssrNode('<div class=\"lover\"></div>')],2),e._ssrNode('<div class=\"footer\"><div class=\"stats\"><span>'+e._ssrEscape(\"\\n              粉丝:\\n              \"+e._s(e.$utils.shortenNumber(r.fans_count))+\"\\n            \")+\"</span><span>\"+e._ssrEscape(\"\\n              金币:\\n              \"+e._s(e.$utils.shortenNumber(r.star_count))+\"\\n            \")+\"</span><span>排名:</span><span\"+e._ssrAttr(\"data-index\",r.fans_count?n+1:\"无\")+' class=\"top\"></span></div><a'+e._ssrAttr(\"href\",e.$alias.bangumi(r.bangumi_id))+' class=\"bangumi\">'+e._ssrEscape(e._s(r.bangumi_name))+\"</a></div>\")],2)])})),t(\"more-btn\",{attrs:{\"no-more\":e.noMore,loading:e.loading,length:e.list.length},on:{fetch:e.loadMore}})],1)},staticRenderFns:[]};r.a=n}};",
    "17.server-bundle.js": "exports.ids=[17],exports.modules={170:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=r(262),n=r.n(s);for(var a in s)\"default\"!==a&&function(t){r.d(e,t,function(){return s[t]})}(a);var i=r(399);var o=function(t){var e;(e=r(397)).__inject__&&e.__inject__(t)},c=r(2)(n.a,i.a,!1,o,null,\"cdc6e3b2\");e.default=c.exports},262:function(t,e,r){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var s=a(r(0)),n=a(r(1));function a(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"page-notification-list\",asyncData:function(t){var e=this,r=t.store,a=t.ctx;return(0,n.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.dispatch(\"users/getNotifications\",{ctx:a,reset:!0});case 2:case\"end\":return t.stop()}},t,e)}))()},computed:{list:function(){return this.$store.state.users.notifications.data},noMore:function(){return this.$store.state.users.notifications.noMore},notificationsCount:function(){var t=this.$store.state.user.notification-this.$store.state.users.notifications.checked;return t<0?0:t}},data:function(){return{loading:!1}},methods:{readMsg:function(t){this.$store.dispatch(\"users/readMessage\",{id:t,ctx:this})},loadMore:function(){var t=this;return(0,n.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loading=!0,e.prev=3,e.next=6,t.$store.dispatch(\"users/getNotifications\",{ctx:t,reset:!1});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()},readAll:function(){if(this.notificationsCount)try{this.$store.dispatch(\"users/readAllMessage\",this),this.$toast.success(\"消息已清空\")}catch(t){this.$toast.error(t)}else this.$toast.success(\"消息已清空\")}}}},397:function(t,e,r){var s=r(398);\"string\"==typeof s&&(s=[[t.i,s,\"\"]]),s.locals&&(t.exports=s.locals);var n=r(4);t.exports.__inject__=function(t){n(\"0e698868\",s,!0,t)}},398:function(t,e,r){(t.exports=r(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#notification-list{background-color:#fff}#notification-list .clear-btn{width:100%;padding:10px 0;margin:10px 0;font-size:12px;color:#6d757a}#notification-list li{font-size:13px;width:100%;min-height:50px;line-height:20px;padding:15px 20px;background-color:#f6f9fa;border-top:1px solid #eee}#notification-list li.checked{background-color:transparent}#notification-list a{color:#00a1d6;font-size:13px}\",\"\"])},399:function(t,e,r){\"use strict\";var s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"notification-list\"}},[t._ssrNode('<button class=\"clear-btn\">全部设为已读</button><ul>'+t._ssrList(t.list,function(e){return\"<li\"+t._ssrClass(null,{checked:e.checked})+\">\"+(1===e.type?\"<a\"+t._ssrAttr(\"href\",t.$alias.user(e.user.zone))+\">\"+t._ssrEscape(t._s(e.user.nickname))+\"</a>\\n        回复了你的帖子\\n        <a\"+t._ssrAttr(\"href\",e.data.link)+\">\"+t._ssrEscape(t._s(e.data.title))+\"</a>\":2===e.type?\"<a\"+t._ssrAttr(\"href\",t.$alias.user(e.user.zone))+\">\"+t._ssrEscape(t._s(e.user.nickname))+\"</a>\\n        评论了你在帖子\\n        <a\"+t._ssrAttr(\"href\",e.data.link)+\">\"+t._ssrEscape(t._s(e.data.title))+\"</a>\\n        下的内容\\n      \":3===e.type?\"<a\"+t._ssrAttr(\"href\",t.$alias.user(e.user.zone))+\">\"+t._ssrEscape(t._s(e.user.nickname))+\"</a>\\n        喜欢了你的帖子\\n        <a\"+t._ssrAttr(\"href\",e.data.link)+\">\"+t._ssrEscape(t._s(e.data.title))+\"</a>\":4===e.type?\"<a\"+t._ssrAttr(\"href\",t.$alias.user(e.user.zone))+\">\"+t._ssrEscape(t._s(e.user.nickname))+\"</a>\\n        赞了你在帖子\\n        <a\"+t._ssrAttr(\"href\",e.data.link)+\">\"+t._ssrEscape(t._s(e.data.title))+\"</a>\\n        下的回复\\n      \":5===e.type?\"<a\"+t._ssrAttr(\"href\",t.$alias.user(e.user.zone))+\">\"+t._ssrEscape(t._s(e.user.nickname))+\"</a>\\n        喜欢了你上传的图片\\n      \":\"\\x3c!----\\x3e\")+\"</li>\"})+\"</ul>\"),r(\"more-btn\",{attrs:{\"no-more\":t.noMore,loading:t.loading},on:{fetch:t.loadMore}})],2)},staticRenderFns:[]};e.a=s}};",
    "18.server-bundle.js": "exports.ids=[18],exports.modules={159:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=i(251),a=i.n(n);for(var o in n)\"default\"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);var r=i(361);var s=function(t){var e;(e=i(359)).__inject__&&e.__inject__(t)},l=i(2)(a.a,r.a,!1,s,null,\"446129a4\");e.default=l.exports},251:function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var n=o(i(0)),a=o(i(1));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"bangumi-time\",asyncData:function(t){var e=this,i=t.store,o=t.ctx;return(0,a.default)(n.default.mark(function t(){return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.dispatch(\"bangumi/getTimeline\",o);case 2:case\"end\":return t.stop()}},t,e)}))()},computed:{timeline:function(){return this.$store.state.bangumi.timeline}},data:function(){return{loading:!1}},methods:{loadMore:function(){var t=this;return(0,a.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loading=!0,e.prev=3,e.next=6,t.$store.dispatch(\"bangumi/getTimeline\");case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()}}}},359:function(t,e,i){var n=i(360);\"string\"==typeof n&&(n=[[t.i,n,\"\"]]),n.locals&&(t.exports=n.locals);var a=i(4);t.exports.__inject__=function(t){a(\"60d77446\",n,!0,t)}},360:function(t,e,i){(t.exports=i(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#bangumi-timeline #collections{padding-top:10px;padding-bottom:5px}#bangumi-timeline #collections .collection{display:block}#bangumi-timeline #collections .collection .time{position:relative;font-weight:400;color:#99a2aa;font-size:16px;margin-bottom:15px;padding-left:12px}#bangumi-timeline #collections .collection .time:before{content:\"\";position:absolute;left:0;top:2px;height:14px;width:3px;background-color:#00a1d6;border-radius:3px}#bangumi-timeline #collections .collection .bangumi{margin-bottom:10px;height:60px}#bangumi-timeline #collections .collection .bangumi .face{width:60px;height:60px;-ms-flex-negative:0;flex-shrink:0;margin-right:15px;display:block;border-radius:5px;float:left}#bangumi-timeline #collections .collection .bangumi .content{overflow:hidden}#bangumi-timeline #collections .collection .bangumi .content .name{font-size:14px;font-weight:700;margin-bottom:8px}#bangumi-timeline #collections .collection .bangumi .content .body{color:#99a2aa;font-size:13px;line-height:18px;max-height:36px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}',\"\"])},361:function(t,e,i){\"use strict\";var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{attrs:{id:\"bangumi-timeline\"}},[t._ssrNode('<div class=\"tabs\"><a'+t._ssrAttr(\"href\",t.$alias.bangumiNews)+\">新番放送</a><a\"+t._ssrAttr(\"href\",t.$alias.bangumiTimeline)+' class=\"active\">时间轴</a><a'+t._ssrAttr(\"href\",t.$alias.bangumiTag())+\">分类索引</a></div>\"),t._ssrNode('<ul id=\"collections\" class=\"container\">',\"</ul>\",t._l(t.timeline.list,function(e){return t._ssrNode('<ul class=\"collection\">',\"</ul>\",[t._ssrNode('<h3 class=\"time\">'+t._ssrEscape(t._s(e.date))+\"</h3>\"),t._l(e.list,function(e){return t._ssrNode('<li class=\"bangumi\">',\"</li>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.bangumi(e.id))+\">\",\"</a>\",[i(\"v-img\",{staticClass:\"face\",attrs:{title:e.name,alt:e.name,src:t.$resize(e.avatar,{width:120})}}),t._ssrNode('<div class=\"content\"><p class=\"name\">'+t._ssrEscape(t._s(e.name))+'</p><p class=\"body\">'+t._ssrEscape(t._s(e.summary))+\"</p></div>\")],2)])})],2)})),i(\"more-btn\",{attrs:{\"no-more\":t.timeline.noMore,loading:t.loading},on:{fetch:t.loadMore}})],2)},staticRenderFns:[]};e.a=n}};",
    "19.server-bundle.js": "exports.ids=[19],exports.modules={163:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=a(253),s=a.n(r);for(var n in r)\"default\"!==n&&function(t){a.d(e,t,function(){return r[t]})}(n);var i=a(368);var o=function(t){var e;(e=a(366)).__inject__&&e.__inject__(t)},u=a(2)(s.a,i.a,!1,o,null,\"2d25c67a\");e.default=u.exports},253:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(a(0)),s=i(a(35)),n=i(a(1));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"bangumi-tags\",asyncData:function(t){var e=this,a=t.store,i=t.route,o=t.ctx;return(0,n.default)(r.default.mark(function t(){var n,u;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.query.id,u=[a.dispatch(\"bangumi/getTags\",{id:n,ctx:o})],n&&(/^\\d+$/.test(n)||-1!==n.indexOf(\"-\")&&n.split(\"-\").every(function(t){return/^\\d+$/.test(t)}))&&u.push(a.dispatch(\"bangumi/getCategory\",{id:n,ctx:o})),t.next=5,s.default.all(u);case 5:case\"end\":return t.stop()}},t,e)}))()},computed:{tags:function(){return this.$store.state.bangumi.tags},resource:function(){return this.$store.state.bangumi.category},noMore:function(){return this.resource.noMore},bangumis:function(){return this.resource.list},total:function(){return this.resource.total}},data:function(){return{loading:!1}},methods:{refresh:function(){var t=[];this.tags.forEach(function(e){e.selected&&t.push(e.id)}),t.length&&(window.location=this.$alias.bangumiTag(t.join(\"-\")))},loadMore:function(){var t=this;return(0,n.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.loading){e.next=2;break}return e.abrupt(\"return\");case 2:return t.loading=!0,e.prev=3,e.next=6,t.$store.dispatch(\"bangumi/getCategory\",{id:t.$route.query.id,ctx:t});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),t.$toast.error(e.t0);case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case\"end\":return e.stop()}},e,t,[[3,8,11,14]])}))()}}}},366:function(t,e,a){var r=a(367);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var s=a(4);t.exports.__inject__=function(t){s(\"21d57556\",r,!0,t)}},367:function(t,e,a){(t.exports=a(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#bangumi-tags .sub-title{margin-top:10px}#bangumi-tags #tags li{float:left;margin-right:8px;margin-bottom:6px}#bangumi-tags #tags a{display:inline-block;padding:0 5px;height:24px;line-height:22px;font-size:12px;color:#ff8eb3;border-radius:4px;border:1px solid #ff8eb3;font-weight:700}#bangumi-tags #tags .selected{background-color:#f25d8e;border-color:#f25d8e;color:#fff}#bangumi-tags #tags .btn{width:100%;height:30px;line-height:28px;font-size:13px;text-align:center;border:1px solid #666;border-radius:15px;margin:5px 0 10px}#bangumi-tags #bangumis li{margin-bottom:10px;height:60px}#bangumi-tags #bangumis li .face{width:60px;height:60px;-ms-flex-negative:0;flex-shrink:0;margin-right:15px;display:block;border-radius:5px;float:left}#bangumi-tags #bangumis li .content{overflow:hidden}#bangumi-tags #bangumis li .content .name{font-size:14px;font-weight:700;margin-bottom:8px}#bangumi-tags #bangumis li .content .body{color:#99a2aa;font-size:13px;line-height:18px;max-height:36px;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}\",\"\"])},368:function(t,e,a){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{attrs:{id:\"bangumi-tags\"}},[t._ssrNode('<div class=\"tabs\"><a'+t._ssrAttr(\"href\",t.$alias.bangumiNews)+\">新番放送</a><a\"+t._ssrAttr(\"href\",t.$alias.bangumiTimeline)+\">时间轴</a><a\"+t._ssrAttr(\"href\",t.$alias.bangumiTag())+' class=\"active\">分类索引</a></div>'),t._ssrNode('<div class=\"container\">',\"</div>\",[t._ssrNode('<div id=\"tags\"><h3 class=\"sub-title\">标签列表</h3><ul>'+t._ssrList(t.tags,function(e,a){return\"<li><a\"+t._ssrAttr(\"href\",t.$alias.bangumiTag(e.id))+t._ssrClass(\"el-tag\",{selected:e.selected})+\">\"+t._ssrEscape(t._s(e.name))+\"</a></li>\"})+'<button class=\"btn\">点击搜索</button></ul></div>'),t.bangumis.length?t._ssrNode('<div id=\"bangumis\">',\"</div>\",[t._ssrNode('<div class=\"hr\"></div><h3 class=\"sub-title\">'+t._ssrEscape(\"番剧列表(\"+t._s(t.total)+\")\")+\"</h3>\"),t._ssrNode(\"<ul>\",\"</ul>\",t._l(t.bangumis,function(e){return t._ssrNode(\"<li>\",\"</li>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.bangumi(e.id))+\">\",\"</a>\",[a(\"v-img\",{staticClass:\"face\",attrs:{title:e.name,alt:e.name,src:t.$resize(e.avatar,{width:120})}}),t._ssrNode('<div class=\"content\"><p class=\"name\">'+t._ssrEscape(t._s(e.name))+'</p><p class=\"body\">'+t._ssrEscape(t._s(e.summary))+\"</p></div>\")],2)])}))],2):t._e()],2),t.bangumis.length?a(\"more-btn\",{attrs:{\"no-more\":t.noMore,loading:t.loading,length:t.bangumis.length},on:{fetch:t.loadMore}}):t._e()],2)},staticRenderFns:[]};e.a=r}};",
    "21.server-bundle.js": "exports.ids=[21],exports.modules={171:function(t,l,i){\"use strict\";Object.defineProperty(l,\"__esModule\",{value:!0});var e=i(263),s=i.n(e);for(var r in e)\"default\"!==r&&function(t){i.d(l,t,function(){return e[t]})}(r);var o=i(402);var n=function(t){var l;(l=i(400)).__inject__&&l.__inject__(t)},a=i(2)(s.a,o.a,!1,n,null,\"65443516\");l.default=a.exports},263:function(t,l,i){\"use strict\";Object.defineProperty(l,\"__esModule\",{value:!0}),l.default={name:\"page-hello\",computed:{nickname:function(){return this.$store.state.user?this.$store.state.user.nickname:\"\"}}}},400:function(t,l,i){var e=i(401);\"string\"==typeof e&&(e=[[t.i,e,\"\"]]),e.locals&&(t.exports=e.locals);var s=i(4);t.exports.__inject__=function(t){s(\"2cdcca08\",e,!0,t)}},401:function(t,l,i){(t.exports=i(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#about-hello{padding-bottom:15px}#about-hello h1{margin-bottom:16px;margin-top:16px;color:#333;font-size:16px}#about-hello .sub-title{margin-top:15px}#about-hello p{color:#333;font-size:12px;text-indent:2em;margin-top:5px;line-height:15px}#about-hello ul{margin:5px 0 5px 25px}#about-hello ul li{list-style-type:disc;font-size:12px;color:#666;line-height:20px}\",\"\"])},402:function(t,l,i){\"use strict\";var e={render:function(){var t=this.$createElement;return(this._self._c||t)(\"div\",{staticClass:\"container\",attrs:{id:\"about-hello\"}},[this._ssrNode(\"<h1>\"+this._ssrEscape(\"欢迎来到 calibur.tv\"+this._s(this.nickname?\",\":\"！\")+\" \"+this._s(this.nickname))+'</h1><p>在开始之前，你应该了解一下这个网站的规则，这有助于让你得到更好使用的体验，让我们开始吧！</p><h3 class=\"sub-title\">金币系统：</h3><p>每个用户每天都可以签到一次，每次可以获取 1 金币，这种金币的使用规则如下：</p><ul><li>1 金币 = 1 元人民币</li><li>金币可以通过签到获取，也可以让其他用户打赏给你</li><li>满 100 金币就可以提现</li><li>提现是需要对内容进行审核的，如果你发表过「不利于社区发展」的内容，你是无法提现的</li><li>提现目前只支持支付宝转账，更多提现方式后续会研发</li></ul><h3 class=\"sub-title\">番剧系统：</h3><p>无论是现在的帖子、视频，还是以后的其它功能都将以「番剧」为单位</p><p>calibur.tv 现在和以后的将以动漫为核心，网站只在二次元方向发展</p><h3 class=\"sub-title\">帖子系统：</h3><p>经过上面对「金币系统」的介绍，大家应该明白，想要快速积累金币提现，就只能发表优质的内容，然后吸引其他用户为你打赏，目前打赏功能是这样的：</p><ul><li>只有主题帖的打赏才给予金币，对帖子回复的点赞是没有金币的</li><li>每个人只能给每个帖子打赏一枚金币，打赏后，楼主的金币 +1，你的金币 -1</li><li>如果你在打赏后再取消打赏，楼主获取的金币会 -1，而你的金币不会 +1，因此打赏要谨慎</li><li>如果你的帖子被删除或自己删除，你通过该帖子获得的金币不会减少</li></ul><h3 class=\"sub-title\">用户系统：</h3><p>我们的用户系统还处于早期阶段，可讲的也只有：</p><ul><li>每个用户都有自己的邀请码，每有一个人通过你的<strong>邀请码</strong>注册成为 calibur 的用户，你就会获得 1 金币</li></ul><h3 class=\"sub-title\">盖楼系统：</h3><p>为了让每位动漫角色的粉丝都可以很好的为TA应援，我们开通了为偶像应援的盖楼系统</p><p>相比于百度贴吧的帖子盖楼，我们的盖楼是需要一些成本（每次 1 金币）的，这样有如下好处：</p><ul><li>可以通过金币数和粉丝数，量化每个角色的人气，并且这个人气是具有价值的，而不是像百度贴吧那样1个粉丝可以顶很多个人</li><li>每个粉丝的贡献值也是可以量化的，这样就有了&quot;守护者&quot;这个职称，这个职称也将是实至名归的</li><li>通过可以量化的人气，我们可以创建一个人气榜，这样就可以知道谁是人气王！</li></ul><h3 class=\"sub-title\">图片系统：</h3><ul><li>如果是原创图片，可以在创建时勾选原创，这样的话就可以得到金币的收益</li><li>网站图片必须与动漫相关，cosplay、手绘、原画等都可以</li><li>目前用户无法上传漫画类别的相册，如果需要开通漫画权限，请联系网站管理员</li></ul><h3 class=\"sub-title\">交流反馈：</h3><p>由于个人能力有限，网站可能会有很多不足之处，希望大家可以帮助完善</p><ul><li>交流与反馈QQ群：<br><strong>106402736（已满）</strong>、<strong>806818950</strong></li><li>提现QQ群：<strong>718529809</strong>，进群请填写自己的邀请码，审核通过后方可提现</li><li>其它官方交流与合作请加QQ：<strong>414927352</strong></li></ul><h3 class=\"sub-title\">最后：</h3><p>我开发这个网站的初衷只是因为对动漫的热爱，同时我也希望和我一样热爱动漫的人，可以从这份初心中获取一点回报，不再需要「用爱来发电」</p><p>网站目前的功能还很弱，相信以后会更好的，我只希望为自己喜欢的东西，做一点点贡献</p><p>希望，你也喜欢这个网站。by：冰淤</p>')])},staticRenderFns:[]};l.a=e}};",
    "22.server-bundle.js": "exports.ids=[22],exports.modules={178:function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n={render:function(){var e=this.$createElement;return(this._self._c||e)(\"router-view\")},staticRenderFns:[]},s=r(2)(null,n,!1,null,null,\"caeab5e6\");t.default=s.exports}};",
    "23.server-bundle.js": "exports.ids=[23],exports.modules={183:function(e,t,o){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.default={name:\"empty\",props:[\"placeholder\"],render:function(e){return e(\"div\",{class:[\"empty-component-placeholder\"]})}}}};",
    "server-bundle.js": "module.exports=function(t){var e={},n={24:0};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.e=function(e){if(0!==n[e]){var r=require(\"./\"+e+\".server-bundle.js\"),a=r.modules,o=r.ids;for(var i in a)t[i]=a[i];for(var s=0;s<o.length;s++)n[o[s]]=0}return Promise.resolve()},r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"https://static.calibur.tv/m/\",r.oe=function(t){process.nextTick(function(){throw t})},r(r.s=39)}([function(t,e){t.exports=require(\"babel-runtime/regenerator\")},function(t,e){t.exports=require(\"babel-runtime/helpers/asyncToGenerator\")},function(t,e){t.exports=function(t,e,n,r,a,o){var i,s=t=t||{},u=typeof t.default;\"object\"!==u&&\"function\"!==u||(i=t,s=t.default);var l,c=\"function\"==typeof s?s.options:s;if(e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId=a),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=r),l){var d=c.functional,f=d?c.render:c.beforeCreate;d?(c._injectStyles=l,c.render=function(t,e){return l.call(e),f(t,e)}):c.beforeCreate=f?[].concat(f,l):[l]}return{esModule:i,exports:s,options:c}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||\"\",r=t[3];if(!r)return n;if(e&&\"function\"==typeof btoa){var a=(i=r,\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+\" */\"),o=r.sources.map(function(t){return\"/*# sourceURL=\"+r.sourceRoot+t+\" */\"});return[n].concat(o).concat([a]).join(\"\\n\")}var i;return[n].join(\"\\n\")}(e,t);return e[2]?\"@media \"+e[2]+\"{\"+n+\"}\":n}).join(\"\")},e.i=function(t,n){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var r={},a=0;a<this.length;a++){var o=this[a][0];\"number\"==typeof o&&(r[o]=!0)}for(a=0;a<t.length;a++){var i=t[a];\"number\"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]=\"(\"+i[2]+\") and (\"+n+\")\"),e.push(i))}},e}},function(t,e,n){var r=n(44);function a(t){var e=\"\";for(var n in t){var r=t[n];e+='<style data-vue-ssr-id=\"'+r.ids.join(\" \")+'\"'+(r.media?' media=\"'+r.media+'\"':\"\")+\">\"+r.css+\"</style>\"}return e}t.exports=function(t,e,n,o){if(o||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(o=__VUE_SSR_CONTEXT__),o){o.hasOwnProperty(\"styles\")||(Object.defineProperty(o,\"styles\",{enumerable:!0,get:function(){return a(o._styles)}}),o._renderStyles=a);var i=o._styles||(o._styles={});e=r(t,e),n?function(t,e){for(var n=0;n<e.length;n++)for(var r=e[n].parts,a=0;a<r.length;a++){var o=r[a],i=o.media||\"default\",s=t[i];s?s.ids.indexOf(o.id)<0&&(s.ids.push(o.id),s.css+=\"\\n\"+o.css):t[i]={ids:[o.id],css:o.css,media:o.media}}}(i,e):function(t,e){for(var n=0;n<e.length;n++)for(var r=e[n].parts,a=0;a<r.length;a++){var o=r[a];t[o.id]={ids:[o.id],css:o.css,media:o.media}}}(i,e)}}},function(t,e){t.exports=require(\"babel-runtime/helpers/classCallCheck\")},function(t,e){t.exports=require(\"babel-runtime/helpers/createClass\")},function(t,e){t.exports=require(\"babel-runtime/core-js/object/get-prototype-of\")},function(t,e){t.exports=require(\"babel-runtime/helpers/possibleConstructorReturn\")},function(t,e){t.exports=require(\"babel-runtime/helpers/inherits\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=o(n(5)),a=o(n(51));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.default)(this,t),this.http=(0,a.default)(e)}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"getLoginUser\",value:function(){return this.http.post(\"door/user\")}},{key:\"sendMessage\",value:function(t){var e=t.phone_number,n=t.type,r=t.geetest;return this.http.post(\"door/message\",{phone_number:e,type:n,geetest:r})}},{key:\"login\",value:function(t){var e=t.access,n=t.secret,r=t.remember,a=t.geetest;return this.http.post(\"door/login\",{access:e,secret:n,remember:r,geetest:a})}},{key:\"register\",value:function(t){var e=t.access,n=t.secret,r=t.nickname,a=t.authCode,o=t.inviteCode;return this.http.post(\"door/register\",{access:e,secret:n,nickname:r,authCode:a,inviteCode:o})}},{key:\"logout\",value:function(){return this.http.post(\"door/logout\")}},{key:\"getUserInfo\",value:function(t){var e=t.zone;return this.http.get(\"user/\"+e+\"/show\")}},{key:\"settingProfile\",value:function(t){return this.http.post(\"user/setting/profile\",t)}},{key:\"followBangumis\",value:function(t){return this.http.get(\"user/\"+t+\"/followed/bangumi\")}},{key:\"followPosts\",value:function(t){var e=t.type,n=t.zone,r=t.take,a=t.minId;return this.http.get(\"user/\"+n+\"/posts/\"+e,{params:{take:r,minId:a}})}},{key:\"settingImage\",value:function(t){var e=t.type,n=t.url;return this.http.post(\"user/setting/image\",{type:e,url:n})}},{key:\"feedback\",value:function(t){var e=t.type,n=t.desc,r=t.ua;return this.http.post(\"user/feedback\",{type:e,desc:n,ua:r})}},{key:\"daySign\",value:function(){return this.http.post(\"user/daySign\")}},{key:\"getNotificationCount\",value:function(){return this.http.get(\"user/notification/count\")}},{key:\"getNotifications\",value:function(t){var e=t.minId;return this.http.get(\"user/notification/list\",{params:{minId:e}})}},{key:\"readMessage\",value:function(t){return this.http.post(\"user/notification/read\",{id:t})}},{key:\"readAllMessage\",value:function(){return this.http.post(\"user/notification/clear\")}},{key:\"resetPassword\",value:function(t){var e=t.method,n=t.access,r=t.authCode,a=t.secret;return this.http.post(\"door/reset\",{method:e,access:n,authCode:r,secret:a})}},{key:\"images\",value:function(t){var e=t.zone,n=t.take,r=t.seenIds,a=t.size,o=t.tags,i=t.bangumiId,s=t.creator;return this.http.get(\"user/\"+e+\"/images/list\",{params:{take:n,seenIds:r,size:a,tags:o,bangumiId:i,creator:s}})}},{key:\"getUserAlbums\",value:function(){return this.http.get(\"user/images/albums\")}},{key:\"followRoles\",value:function(t){var e=t.zone,n=t.page;return this.http.get(\"user/\"+e+\"/followed/role\",{params:{page:n}})}}]),e}(u(n(10)).default);e.default=l},function(t,e){t.exports=require(\"babel-runtime/core-js/object/assign\")},function(t,e){t.exports=require(\"vue\")},function(t,e){t.exports=require(\"babel-runtime/core-js/object/keys\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"getBanners\",value:function(){return this.http.get(\"image/banner\")}},{key:\"getCaptcha\",value:function(){return this.http.get(\"image/captcha\")}},{key:\"getUpToken\",value:function(){return this.http.get(\"image/uptoken\")}},{key:\"uploadToQiniu\",value:function(t){return this.http.post(\"https://up.qbox.me\",t,{\"Content-Type\":\"multipart/form-data\"})}},{key:\"getUploadType\",value:function(){return this.http.get(\"image/uploadType\")}},{key:\"uploadImage\",value:function(t){var e=t.images,n=t.bangumiId,r=t.roleId,a=t.tags,o=t.size,i=t.creator,s=t.albumId;return this.http.post(\"image/upload\",{images:e,bangumiId:n,roleId:r,tags:a,size:o,creator:i,albumId:s})}},{key:\"deleteImage\",value:function(t){var e=t.id;return this.http.post(\"image/delete\",{id:e})}},{key:\"trialReport\",value:function(t){var e=t.id;return this.http.post(\"image/report\",{id:e})}},{key:\"editImage\",value:function(t){var e=t.id,n=t.bangumiId,r=t.roleId,a=t.size,o=t.tags;return this.http.post(\"image/edit\",{id:e,bangumiId:n,roleId:r,tags:o,size:a})}},{key:\"toggleLike\",value:function(t){var e=t.id;return this.http.post(\"image/toggleLike\",{id:e})}},{key:\"trendingList\",value:function(t){var e=t.seenIds,n=t.take,r=t.sort,a=t.size,o=t.tags,i=t.bangumiId,s=t.creator;return this.http.get(\"image/trendingList\",{params:{seenIds:e,take:n,sort:r,size:a,tags:o,bangumiId:i,creator:s}})}},{key:\"createAlbum\",value:function(t){var e=t.bangumiId,n=t.isCartoon,r=t.name,a=t.url,o=t.width,i=t.height,s=t.creator;return this.http.post(\"image/createAlbum\",{bangumiId:e,isCartoon:n,name:r,url:a,width:o,height:i,creator:s})}},{key:\"editAlbum\",value:function(t){return this.http.post(\"image/editAlbum\",t)}},{key:\"getAlbumData\",value:function(t){var e=t.id;return this.http.get(\"image/album/\"+e+\"/show\")}},{key:\"sortAlbum\",value:function(t){var e=t.id,n=t.result;return this.http.post(\"image/album/\"+e+\"/sort\",{result:n})}},{key:\"deleteAlbumImage\",value:function(t){var e=t.id,n=t.result,r=t.imageId;return this.http.post(\"image/album/\"+e+\"/deleteImage\",{result:n,imageId:r})}}]),e}(u(n(10)).default);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"show\",value:function(t){return this.http.get(\"bangumi/\"+t+\"/show\")}},{key:\"follow\",value:function(t){return this.http.post(\"bangumi/\"+t+\"/toggleFollow\")}},{key:\"videos\",value:function(t){return this.http.get(\"bangumi/\"+t+\"/videos\")}},{key:\"roles\",value:function(t){var e=t.bangumiId,n=t.seenIds;return this.http.get(\"bangumi/\"+e+\"/roles\",{params:{seenIds:n}})}},{key:\"posts\",value:function(t){var e=t.id,n=t.maxId,r=t.take;return this.http.get(\"bangumi/\"+e+\"/posts/news\",{params:{maxId:n,take:r}})}},{key:\"released\",value:function(){return this.http.get(\"bangumi/released\")}},{key:\"timeline\",value:function(t){var e=t.year;return this.http.get(\"bangumi/timeline\",{params:{year:e}})}},{key:\"tags\",value:function(){return this.http.get(\"bangumi/tags\")}},{key:\"category\",value:function(t){var e=t.id,n=t.page,r=t.take;return this.http.get(\"bangumi/category\",{params:{id:e,page:n,take:r}})}},{key:\"images\",value:function(t){var e=t.id,n=t.seenIds,r=t.take,a=t.size,o=t.tags,i=t.roleId,s=t.creator;return this.http.get(\"bangumi/\"+e+\"/images\",{params:{seenIds:n,take:r,size:a,tags:o,roleId:i,creator:s}})}},{key:\"cartoon\",value:function(t){var e=t.bangumiId,n=t.page;return this.http.get(\"bangumi/\"+e+\"/cartoon\",{params:{page:n}})}}]),e}(u(n(10)).default);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"trending\",value:function(t){var e=t.seenIds;return this.http.get(\"/trending/cartoon_role\",{params:{seenIds:e}})}},{key:\"star\",value:function(t){var e=t.bangumiId,n=t.roleId;return this.http.post(\"/bangumi/\"+e+\"/role/\"+n+\"/star\")}},{key:\"fans\",value:function(t){var e=t.bangumiId,n=t.roleId,r=t.seenIds,a=t.minId,o=t.sort;return this.http.get(\"/bangumi/\"+e+\"/role/\"+n+\"/fans\",{params:{seenIds:r,minId:a,sort:o}})}},{key:\"show\",value:function(t){return this.http.get(\"/cartoon_role/\"+t+\"/show\")}},{key:\"images\",value:function(t){var e=t.id,n=t.seenIds,r=t.take,a=t.size,o=t.tags,i=t.creator,s=t.sort;return this.http.get(\"/cartoon_role/\"+e+\"/images\",{params:{seenIds:n,take:r,size:a,tags:o,creator:i,sort:s}})}}]),e}(u(n(10)).default);e.default=l},function(t,e){t.exports=require(\"babel-runtime/helpers/typeof\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,a=n(20),o=n(45),i=(r=o)&&r.__esModule?r:{default:r};e.default={name:\"Entry\",head:{title:\"天下漫友是一家\",titleTemplate:function(t){return t?t+\" - calibur\":\"天下漫友是一家\"},htmlAttrs:{lang:\"zh-CN\"},bodyAttrs:\"\",meta:[{charset:\"utf-8\"},{name:\"viewport\",content:\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\"},{\"http-equiv\":\"X-UA-Compatible\",content:\"IE=edge\"},{name:\"renderer\",content:\"webkit\"},{hid:\"description\",name:\"description\",content:\"一个兴趣使然的二次元综合网站\"},{hid:\"keywords\",name:\"keywords\",content:\"calibur，咖喱棒, 动漫，ACG，二次元，视频，番剧，动画，新番，神作, 排行榜, 贴吧, 盖楼, 应援, 帖子, 在线\"}],link:[{rel:\"shortcut icon\",type:\"image/x-icon\",href:a.cdn.static+\"/favicon.ico\"}],script:[\"development\"!==a.env?{innerHTML:a.script.baiduStat,type:\"text/javascript\",async:!0}:\"\",\"development\"!==a.env?{innerHTML:a.script.baiduPush,type:\"text/javascript\",async:!0}:\"\",\"staging\"===a.env?{src:\"https://res.wx.qq.com/mmbizwap/zh_CN/htmledition/js/vconsole/3.0.0/vconsole.min.js\",type:\"text/javascript\"}:\"\"].filter(function(t){return t}),__dangerouslyDisableSanitizers:\"script\"},components:{SignDrawer:i.default},mounted:function(){this.$store.state.login&&(this.$store.dispatch(\"getNotification\",this),this.$cookie.set(\"JWT-TOKEN\",this.$store.state.user.token))}}},function(t,e,n){\"use strict\";t.exports={env:\"production\",script:{baiduStat:'var _hmt=_hmt||[];(function(){var hm=document.createElement(\"script\");hm.src=\"https://hm.baidu.com/hm.js?c10304a2f70ee2ddf8d2818551d37a4b\";var s=document.getElementsByTagName(\"script\")[0];s.parentNode.insertBefore(hm,s)})();',baiduPush:\"(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js'}else{bp.src='http://push.zhanzhang.baidu.com/push.js'}var s=document.getElementsByTagName(\\\"script\\\")[0];s.parentNode.insertBefore(bp,s)})();\",google:\"(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-80338273-3','auto');ga('send','pageview');\"},cdn:{image:\"https://image.calibur.tv/\",video:\"https://video.calibur.tv/\",static:\"https://static.calibur.tv/\"},sentry:{token:\"5b02ddc4b7894347952d08e1f5563b9c2a845347bb234acf9fedd73210cbbd8b\",url:\"https://5cb53c6313e0444a88c5c8a5d253c47f@sentry.io/1119154\"}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=s(n(48)),a=s(n(36)),o=s(n(57)),i=s(n(61));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"SignDrawer\",components:{SignUpForm:a.default,SignInForm:r.default,ResetPasswordForm:o.default,UserDrawer:i.default},data:function(){return{openDrawer:!1,showSignIn:!1,showSignUp:!1,showReset:!1}},computed:{isGuest:function(){return!this.$store.state.login}},methods:{showLogin:function(){this.showReset=!1,this.showSignIn=!0,this.showSignUp=!1,this.openDrawer=!0},showRegister:function(){this.showSignUp=!0,this.showSignIn=!1,this.openDrawer=!0}},mounted:function(){var t=this;this.$channel.$on(\"sign-up\",function(){t.showRegister()}),this.$channel.$on(\"sign-in\",function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&t.$toast.error(\"请先登录\"),t.showLogin()})}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,a=n(11),o=(r=a)&&r.__esModule?r:{default:r};e.default={name:\"sign-in-form\",data:function(){return{form:{access:\"\",secret:\"\",remember:!0},rule:{access:[{validator:function(t,e,n){return e?11!==e.length?n(new Error(\"请填写11位手机号\")):void n():n(new Error(\"请填写手机号\"))},trigger:\"blur\"}],secret:[{validator:function(t,e,n){return\"\"===e?n(new Error(\"请填写登录密码\")):e.length<6?n(new Error(\"密码不能小于6位\")):e.length>16?n(new Error(\"密码不能大于16位\")):/^[a-z0-9]+$/i.test(e)?void n():n(new Error(\"密码只能是英文和数字\"))},trigger:\"blur\"}]},loading:!1}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.login()})},login:function(){var t=this;this.loading||(this.loading=!0,this.$captcha({success:function(e){var n=e.data;(new o.default).login({access:t.form.access,secret:t.form.secret,remember:t.form.remember,geetest:n}).then(function(e){t.$cookie.set(\"JWT-TOKEN\",e,{expires:t.form.remember?365:1}),window.location.reload()}).catch(function(e){t.$toast.error(e),t.loading=!1})},close:function(){t.loading=!1},error:function(e){t.loading=!1,t.$toast.error(e)}}))},showReset:function(){this.$emit(\"to-reset\"),this.$refs.form.resetFields()},showRegister:function(){this.$emit(\"to-register\"),this.$refs.form.resetFields()},showOAuth:function(){this.$toast.info(\"暂未开放第三方登录\")}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(0)),a=i(n(1)),o=i(n(11));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"sign-up-form\",props:{inviteCode:{type:String,default:\"\"}},data:function(){return{form:{access:\"\",secret:\"\",nickname:\"\",authCode:\"\",inviteCode:this.inviteCode},rule:{nickname:[{validator:function(t,e,n){if(\"\"===e)return n(new Error(\"请先给自己起个名字\"));var r=e.replace(/([\\u4e00-\\u9fa5])/g,\"aa\").trim().length;return r<2?n(new Error(\"昵称至少是2个字符\")):r>14?n(new Error(\"昵称不能超过14个字符，1个汉字占2个字符\")):/^([\\u4e00-\\u9fa5]|[a-z0-9])+$/i.test(e)?void n():n(new Error(\"昵称只能包含：中文、数字、字母\"))},trigger:\"blur\"}],access:[{validator:function(t,e,n){return e?11!==e.length?n(new Error(\"请填写11位手机号\")):/^(0|86|17951)?(1)[0-9]{10}$/.test(e)?void n():n(new Error(\"错误的手机号格式\")):n(new Error(\"请填写手机号\"))},trigger:\"blur\"}],secret:[{validator:function(t,e,n){return\"\"===e?n(new Error(\"请填写登录密码\")):e.length<6?n(new Error(\"密码不能小于6位\")):e.length>16?n(new Error(\"密码不能大于16位\")):/^[a-z0-9]+$/i.test(e)?void n():n(new Error(\"密码只能是英文和数字\"))},trigger:\"blur\"}]},step:0,timeout:0}},computed:{submitBtnText:function(){return 0===this.step?\"注册\":1===this.step?\"提交中...\":2===this.step?\"短信已发送\":3===this.step?\"注册中...\":void 0},submitBtnLoading:function(){return 1===this.step||3===this.step},submitBtnDisabled:function(){return 0!==this.timeout&&0===this.step||3===this.step}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;0===t.step&&t.getRegisterAuthCode(),2===t.step&&t.openConfirmModal()})},getRegisterAuthCode:function(){var t,e=this;this.step=1,this.$captcha({success:(t=(0,a.default)(r.default.mark(function t(n){var a,i,s=n.data;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new o.default,t.prev=1,t.next=4,a.sendMessage({type:\"sign_up\",phone_number:e.form.access,geetest:s});case 4:e.step=2,e.openConfirmModal(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.$toast.error(t.t0),e.step=0;case 12:return t.prev=12,e.timeout=60,i=setInterval(function(){--e.timeout||(e.step=0,clearInterval(i))},1e3),t.finish(12);case 16:case\"end\":return t.stop()}},t,e,[[1,8,12,16]])})),function(e){return t.apply(this,arguments)}),close:function(){e.step=0},error:function(t){e.step=0,e.$toast.error(t)}})},openConfirmModal:function(){var t=this;this.$prompt(\"请输入收到的验证码\",\"短信已发送\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",inputPattern:/^\\d{6}$/,inputErrorMessage:\"验证码格式不正确\"}).then(function(e){var n=e.value;t.form.authCode=n,t.step=3,t.signUp()}).catch(function(){})},signUp:function(){var t=this;(new o.default).register({access:this.form.access,secret:this.form.secret,nickname:this.form.nickname,authCode:this.form.authCode,inviteCode:this.form.inviteCode}).then(function(e){t.$toast.success(\"注册成功！\"),t.$cookie.set(\"JWT-TOKEN\",e),window.location=\"/about/hello\"}).catch(function(e){t.step=0,t.$toast.error(e)})},showOAuth:function(){this.$toast.info(\"暂未开放第三方注册\")},showLogin:function(){this.$emit(\"to-login\"),this.$refs.form.resetFields()}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(0)),a=i(n(1)),o=i(n(11));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"reset-password-form\",computed:{submitBtnText:function(){return 0===this.step?\"立即重置\":1===this.step?\"提交中...\":2===this.step?\"短信已发送\":3===this.step?\"已重置\":void 0},submitBtnLoading:function(){return 1===this.step||3===this.step},submitBtnDisabled:function(){return 0!==this.timeout&&0===this.step||3===this.step}},data:function(){return{form:{access:\"\",secret:\"\",authCode:\"\"},rule:{access:[{validator:function(t,e,n){return e?11!==e.length?n(new Error(\"请填写11位手机号\")):void n():n(new Error(\"请填写手机号\"))},trigger:\"blur\"}],secret:[{validator:function(t,e,n){return\"\"===e?n(new Error(\"请填写登录密码\")):e.length<6?n(new Error(\"密码不能小于6位\")):e.length>16?n(new Error(\"密码不能大于16位\")):/^[a-z0-9]+$/i.test(e)?void n():n(new Error(\"密码只能是英文和数字\"))},trigger:\"blur\"}]},step:0,timeout:0}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;0===t.step&&t.getResetAuthCode(),2===t.step&&t.openConfirmModal()})},getResetAuthCode:function(){var t,e=this;this.step=1,this.$captcha({success:(t=(0,a.default)(r.default.mark(function t(n){var a,i,s=n.data;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new o.default,t.prev=1,t.next=4,a.sendMessage({type:\"forgot_password\",phone_number:e.form.access,geetest:s});case 4:e.step=2,e.openConfirmModal(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),e.$toast.error(t.t0),e.step=0;case 12:return t.prev=12,e.timeout=60,i=setInterval(function(){--e.timeout||(e.step=0,clearInterval(i))},1e3),t.finish(12);case 16:case\"end\":return t.stop()}},t,e,[[1,8,12,16]])})),function(e){return t.apply(this,arguments)}),close:function(){e.step=0},error:function(t){e.step=0,e.$toast.error(t)}})},openConfirmModal:function(){var t=this;this.$prompt(\"请输入收到的验证码\",\"短信已发送\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",inputPattern:/^\\d{6}$/,inputErrorMessage:\"验证码格式不正确\"}).then(function(e){var n=e.value;t.form.authCode=n,t.step=3,t.signReset()}).catch(function(){})},signReset:function(){var t=this;return(0,a.default)(r.default.mark(function e(){var n,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new o.default,e.prev=1,e.next=4,n.resetPassword({access:t.form.access,authCode:t.form.authCode,secret:t.form.secret});case 4:a=e.sent,t.$toast.success(a),t.showLogin(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.$toast.error(e.t0);case 12:return e.prev=12,t.step=0,e.finish(12);case 15:case\"end\":return e.stop()}},e,t,[[1,9,12,15]])}))()},showLogin:function(){this.$emit(\"to-login\"),this.$refs.form.resetFields()},showRegister:function(){this.$emit(\"to-register\"),this.$refs.form.resetFields()}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(0)),a=i(n(1)),o=i(n(11));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"v-user-drawer\",computed:{user:function(){return this.$store.state.user},computeUserDrawerBg:function(){return!this.user||this.user.banner.split(\"/default/user-banner\").length>1?{}:{backgroundImage:\"url(\"+this.$resize(this.user.banner,{height:250,mode:2})+\")\"}},notificationCount:function(){var t=this.user.notification-this.$store.state.users.notifications.checked;return t<0?0:t},daySigned:function(){return this.user.daySign},coinCount:function(){return this.user.coin}},data:function(){return{switchUserDrawer:!1,signDayLoading:!1}},methods:{logout:function(){this.$cookie.remove(\"JWT-TOKEN\"),new o.default(this).logout(),window.location.href=\"/\"},handleDaySign:function(){var t=this;return(0,a.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$store.state.login){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.daySigned&&!t.signDayLoading){e.next=5;break}return e.abrupt(\"return\");case 5:return t.signDayLoading=!0,e.prev=6,e.next=9,t.$store.dispatch(\"users/daySign\",{ctx:t});case 9:t.$store.commit(\"SET_USER_INFO\",{daySign:!0,coin:t.coinCount+1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),t.$toast.error(e.t0);case 15:return e.prev=15,t.signDayLoading=!1,e.finish(15);case 18:case\"end\":return e.stop()}},e,t,[[6,12,15,18]])}))()}},mounted:function(){var t=this;this.$channel.$on(\"open-user-drawer\",function(){t.$store.dispatch(\"getNotification\",t),t.switchUserDrawer=!0})}}},function(t,e){t.exports=require(\"babel-runtime/helpers/toConsumableArray\")},function(t,e){t.exports=require(\"lodash/orderBy\")},function(t,e){t.exports=require(\"babel-runtime/helpers/defineProperty\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"more-btn\",props:{noMore:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},auto:{type:Boolean,default:!1},length:{type:Number,default:1}},methods:{handleFetch:function(){this.loading||this.$emit(\"fetch\")}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"v-drawer\",props:{value:{type:Boolean,default:!1},id:{type:String,default:\"\"},from:{type:String,default:\"right\",validator:function(t){return~[\"left\",\"right\",\"top\",\"bottom\"].indexOf(t)}},size:{type:String,default:\"70%\"},headerText:{type:String,default:\"\"},backdrop:{type:Boolean,default:!0},submitText:{type:String,default:\"\"}},data:function(){return{show:this.value,pos:0,backdropId:0}},watch:{value:function(t){t?this.open():this.close(),this.show=t},show:function(t){this.$emit(\"input\",t)},$route:function(){this.close()}},mounted:function(){this.id&&(this.$channel.$on(\"drawer-open-\"+this.id,this.open),this.$channel.$on(\"drawer-close-\"+this.id,this.close))},methods:{open:function(){this.show||(this.pos=window.scrollY,document.body.style.overflow=\"hidden\",document.body.style.position=\"fixed\",document.body.style.top=0,document.body.style.bottom=0,document.body.style.right=0,document.body.style.left=0,document.body.style.height=window.innerHeight+\"px\",this.show=!0,this.id&&this.$channel.$emit(\"drawer-open-event-\"+this.id),this.backdrop&&(this.backdropId=this.$backdrop.show({ele:this.$el,click:this.close})))},close:function(){document.body.style.overflow=\"\",document.body.style.position=\"\",document.body.style.top=\"\",document.body.style.bottom=\"\",document.body.style.right=\"\",document.body.style.left=\"\",document.body.style.height=\"\",this.show&&(window.scrollTo(0,this.pos),this.show=!1,this.backdrop&&this.$backdrop.hide(this.backdropId),this.id&&this.$channel.$emit(\"drawer-close-event-\"+this.id),this.$emit(\"cancel\"))},submit:function(){var t=this;this.close(),this.$nextTick(function(){t.$emit(\"submit\")})}},beforeDestroy:function(){this.id&&(this.$channel.$off(\"drawer-open-\"+this.id),this.$channel.$off(\"drawer-close-\"+this.id))},computed:{position:function(){var t={};return\"left\"===this.from||\"right\"===this.from?(t.top=0,t.height=\"100%\",t.width=this.size):(t.left=0,t.width=\"100%\",t.height=this.size),t[this.from]=0,t}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"v-radio\",props:{title:String,align:String,options:{type:Array,required:!0},value:[String,Number]},data:function(){return{currentValue:this.value}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit(\"input\",t)}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=s(n(12)),a=s(n(14)),o=s(n(28)),i=s(n(18));function s(t){return t&&t.__esModule?t:{default:t}}var u=[\"__selected__\",\"__disabled__\",\"__uuid__\",\"__isObj__\"],l=\"__label__\",c=\"__selected__\",d=\"__disabled__\",f=function(){return Math.random().toString(36).substring(3,6)},p=function(t,e,n,s){var u=[];return t.forEach(function(t,p){if(t.__uuid__)u.push(t);else if(\"object\"!==(void 0===t?\"undefined\":(0,i.default)(t))){var m,h=(m={},(0,o.default)(m,l,t),(0,o.default)(m,\"__uuid__\",t+\"-\"+p+\"-\"+f()),(0,o.default)(m,\"__isObj__\",!1),m);s(h,c,!1),s(h,d,!1),u.push(h)}else{var g={};(0,a.default)(t).forEach(function(r){t.hasOwnProperty(r)&&(g[r]=t[r]),e===c&&s(g,c,!1),n===d&&s(g,d,!1)}),u.push((0,r.default)(g,{__uuid__:p+\"-\"+f(),__isObj__:!0}))}}),u};e.default={name:\"v-select\",props:{enter:{type:Boolean,default:!1},options:{required:!0,default:[],type:Array},showLabel:{default:l,type:String},selectedLabel:{default:c,type:String},disabledLabel:{default:d,type:String},multi:{default:!1,type:Boolean},placeholder:{type:[String,Object],default:\"请选择\"},value:{},required:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},abort:{type:Boolean,default:!1}},watch:{options:function(t){this.list=p(t,this.selectedLabel,this.disabledLabel,this.$set)},list:{handler:function(t){this.setSelected(t)},deep:!0},selected:function(t){this.$emit(\"input\",t)}},computed:{selectedList:function(){var t=this,e=[];return this.list.forEach(function(n){n[t.selectedLabel]&&e.push(n)}),e},haveSelected:function(){var t=this.selected;return!!t&&(this.multi?Array.isArray(t)&&t.length:!!t)}},data:function(){return{show:!1,list:p(this.options,this.selectedLabel,this.disabledLabel,this.$set),selected:void 0,input:\"\"}},methods:{decodeOption:function(t){if(t.__isObj__){var e={};return(0,a.default)(t).forEach(function(n){t.hasOwnProperty(n)&&-1===u.indexOf(n)&&(e[n]=t[n])}),e}return t[this.showLabel]},setSelected:function(t){var e=this,n=[];t.forEach(function(t){t[e.selectedLabel]&&n.push(e.decodeOption(t))}),this.selected=this.multi?n:n[0]},submitEvent:function(t){var e=this.selected;if(e&&\"string\"!=typeof e){var n=[],r=Array.isArray(e);r||(e=[e]),e.forEach(function(t){if(\"string\"!=typeof item){var e={};(0,a.default)(t).forEach(function(n){t.hasOwnProperty(n)&&-1===u.indexOf(n)&&(e[n]=t[n])}),n.push(e)}else n.push(t)}),e=r?n:n[0]}t?this.$emit(\"submit\",{badge:e,value:this.input}):this.$emit(\"submit\",e)},hackOptionsEncode:function(){var t=this;if(void 0!==this.value&&\"\"!==this.value){var e=\"string\"==typeof this.value;this.list.forEach(function(n,r){Array.isArray(t.value)?t.value.forEach(function(e){n[t.showLabel]===(\"string\"==typeof e?e:e[t.showLabel])&&(t.list[r][t.selectedLabel]=!0)}):n[t.showLabel]===(e?t.value:t.value[t.showLabel])&&(t.list[r][t.selectedLabel]=!0)})}},handleTextAreaFocus:function(){this.disabled||this.list.length&&(this.enter?this.show=!0:this.show=!this.show)},handleSubmitClick:function(){this.disabled||(this.enter?(this.submitEvent(!0),this.show=!1):this.show=!this.show)},handleOptionClick:function(t){if(!t[this.disabledLabel]){if(this.abort)return this.show=!1,void this.$emit(\"submit\",t[this.showLabel]);var e=[this.selectedLabel];if(!this.multi){this.show=!1;for(var n=0;n<this.list.length;n++)this.list[n][e]&&this.list[n].__uuid__!==t.__uuid__&&(this.list[n][e]=!1)}if(this.required&&t[e])if(this.multi){var r=this.selectedList;if(1===r.length&&r[0].__uuid__===t.__uuid__)return}else if(t[e])return;t[e]=!t[e],!this.enter&&this.required&&!this.multi&&t[e]&&this.submitEvent(!1)}},handleSelectedCancel:function(t){var e=this.selectedList;this.required&&1===e.length&&e[0].__uuid__===t.__uuid__||(t[this.selectedLabel]=!1)}},mounted:function(){var t=this;this.setSelected(this.list,!0),this.hackOptionsEncode(),document.body.addEventListener(\"click\",function(e){t.show&&(t.$refs.ul.contains(e.target)||(t.show=!1))})}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(0)),a=i(n(1)),o=i(n(16));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:\"v-bangumi-panel\",props:{id:{required:!0,type:Number},avatar:{required:!0,type:String},name:{required:!0,type:String},followed:{required:!0,type:Boolean}},data:function(){return{loadingFollow:!1}},methods:{handleCreate:function(){this.$store.state.login?this.$channel.$emit(\"open-create-post-drawer\",{id:this.id,name:this.name,avatar:this.avatar}):this.$channel.$emit(\"sign-in\")},actionFollow:function(){var t=this;return(0,a.default)(r.default.mark(function e(){var n,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$store.state.login){e.next=3;break}return t.$channel.$emit(\"sign-in\"),e.abrupt(\"return\");case 3:if(!t.loadingFollow){e.next=5;break}return e.abrupt(\"return\");case 5:return t.loadingFollow=!0,n=new o.default(t),e.prev=7,e.next=10,n.follow(t.id);case 10:a=e.sent,t.$emit(\"follow\",a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),t.$toast.error(e.t0);case 17:return e.prev=17,t.loadingFollow=!1,e.finish(17);case 20:case\"end\":return e.stop()}},e,t,[[7,14,17,20]])}))()}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"v-field\",props:{label:{type:String},value:{required:!0},placeholder:{type:String},disabled:{type:Boolean,default:!1},type:{type:String,default:\"text\"},labelSize:{type:String,default:\"100px\"}},watch:{value:function(t){this.text=t},text:function(t){this.$emit(\"input\",t)}},data:function(){return{text:this.value}}}},function(t,e){t.exports=require(\"babel-runtime/core-js/promise\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(23),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(56);var s=function(t){var e;(e=n(54)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"deee6d8a\");e.default=u.exports},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"create\",value:function(t){var e=t.title,n=t.bangumiId,r=t.content,a=t.images,o=t.desc,i=t.geetest;return this.http.post(\"post/create\",{title:e,bangumiId:n,content:r,images:a,desc:o,geetest:i})}},{key:\"show\",value:function(t){var e=t.id,n=t.page,r=t.take,a=t.only,o=t.replyId;return this.http.get(\"post/\"+e+\"/show\",{params:{page:n,take:r,only:a,replyId:o}})}},{key:\"reply\",value:function(t){var e=t.postId,n=t.images,r=t.content,a=t.geetest;return this.http.post(\"post/\"+e+\"/reply\",{images:n,content:r,geetest:a})}},{key:\"comment\",value:function(t){var e=t.postId,n=t.content,r=t.targetUserId;return this.http.post(\"post/\"+e+\"/comment\",{content:n,targetUserId:r})}},{key:\"comments\",value:function(t){var e=t.postId,n=t.page;return this.http.get(\"post/\"+e+\"/comments\",{params:{page:n}})}},{key:\"deletePost\",value:function(t){return this.http.post(\"post/\"+t+\"/deletePost\")}},{key:\"deleteComment\",value:function(t){var e=t.postId,n=t.commentId;return this.http.post(\"post/\"+e+\"/deleteComment\",{commentId:n})}},{key:\"toggleLike\",value:function(t){return this.http.post(\"post/\"+t+\"/toggleLike\")}},{key:\"toggleMark\",value:function(t){return this.http.post(\"post/\"+t+\"/toggleMark\")}},{key:\"trending\",value:function(t){var e=t.sort,n=t.seenIds,r=t.take;return this.http.get(\"post/trending/\"+e,{params:{seenIds:n,take:r}})}},{key:\"news\",value:function(t){var e=t.minId;return this.http.get(\"post/trending/news\",{params:{minId:e}})}},{key:\"hot\",value:function(t){var e=t.seenIds;return this.http.get(\"post/trending/hot\",{params:{seenIds:e}})}},{key:\"active\",value:function(t){var e=t.seenIds;return this.http.get(\"post/trending/active\",{params:{seenIds:e}})}}]),e}(u(n(10)).default);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"getShow\",value:function(t){return this.http.get(\"video/\"+t+\"/show\")}},{key:\"playing\",value:function(t){return this.http.post(\"video/playing\",{id:t})}}]),e}(u(n(10)).default);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=s(n(0)),a=s(n(1)),o=s(n(35)),i=n(40);function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=(0,i.createApp)(),n=e.app,s=e.router,u=e.store,l=n.$meta();return new o.default(function(e,i){s.push(t.url),s.onReady((0,a.default)(r.default.mark(function a(){var c,d;return r.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(c=s.getMatchedComponents()).length||i({code:404}),r.prev=2,(d=c.map(function(e){var n=e.asyncData;return n&&n({ctx:t.ctx,store:u,route:s.currentRoute})})).unshift(u.dispatch(\"init\",t.ctx)),r.next=7,o.default.all(d);case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),i(r.t0);case 12:t.state=u.state,t.meta=l,e(n);case 15:case\"end\":return r.stop()}},a,void 0,[[2,9]])})),i)})}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.createApp=function(){var t=(0,s.createRouter)(),e=(0,i.createStore)();return(0,o.sync)(e,t),{app:new r.default({router:t,store:e,render:function(t){return t(a.default)}}),router:t,store:e}};var r=u(n(13)),a=u(n(41)),o=n(67),i=n(68),s=n(83);function u(t){return t&&t.__esModule?t:{default:t}}n(86),n(87)},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(19),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(66);var s=function(t){var e;(e=n(42)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"47344d32\");e.default=u.exports},function(t,e,n){var r=n(43);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"04782a55\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}#__share-logo{display:none}\",\"\"])},function(t,e){t.exports=function(t,e){for(var n=[],r={},a=0;a<e.length;a++){var o=e[a],i=o[0],s={id:t+\":\"+a,css:o[1],media:o[2],sourceMap:o[3]};r[i]?r[i].parts.push(s):n.push(r[i]={id:i,parts:[s]})}return n}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(21),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(65);var s=function(t){var e;(e=n(46)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"a18fde9c\");e.default=u.exports},function(t,e,n){var r=n(47);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"25b28064\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sign-drawer{text-align:center}\",\"\"])},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(22),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(53);var s=function(t){var e;(e=n(49)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"16e2c476\");e.default=u.exports},function(t,e,n){var r=n(50);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"063f25f8\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sign-in-form input{border:0;border-bottom:1px solid #e5e9ef}.sign-in-form .submit-btn{width:100%}.sign-in-form .others{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:15px}\",\"\"])},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=l(n(12)),a=l(n(0)),o=l(n(1)),i=l(n(5)),s=l(n(6)),u=l(n(52));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){(0,i.default)(this,t),this.instance=u.default.create({baseURL:\"https://api.calibur.tv/\",headers:{Accept:\"application/x.api.latest+json\",Authorization:\"Bearer \"+this.getAuthToken(e)},timeout:1e4})}return(0,s.default)(t,[{key:\"get\",value:function(){var t=(0,o.default)(a.default.mark(function t(e,n){var r,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.instance.get(e,{params:n&&n.params?n.params:{}});case 3:return r=t.sent,t.abrupt(\"return\",r.data.data);case 7:if(t.prev=7,t.t0=t.catch(0),401!==(o=t.t0.response?t.t0.response.status:500)){t.next=12;break}return t.abrupt(\"return\",null);case 12:throw t.t0.code=o,t.t0;case 14:case\"end\":return t.stop()}},t,this,[[0,7]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:\"post\",value:function(){var t=(0,o.default)(a.default.mark(function t(e,n){var o,i,s;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.instance.post(e,n);case 3:if(o=t.sent,!(i=o.headers.authorization)){t.next=7;break}return t.abrupt(\"return\",(0,r.default)(o.data.data,{token:i.split(\"Bearer \").pop()}));case 7:return t.abrupt(\"return\",o.data.data);case 10:if(t.prev=10,t.t0=t.catch(0),401!==(s=t.t0.response?t.t0.response.status:500)){t.next=15;break}return t.abrupt(\"return\",null);case 15:throw t.t0.code=s,t.t0;case 17:case\"end\":return t.stop()}},t,this,[[0,10]])}));return function(e,n){return t.apply(this,arguments)}}()},{key:\"getAuthToken\",value:function(t){if(!t)return\"\";var e=\"\";if(t.header){var n=t.header.cookie;n&&n.split(\"; \").forEach(function(t){var n=t.split(\"=\");\"JWT-TOKEN\"===n[0]&&(e=n[1])})}else t.$state||(e=t);return e}}]),t}();e.default=function(t){return new c(t)}},function(t,e){t.exports=require(\"axios\")},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"sign-in-form\"},[t._ssrNode('<img src=\"https://image.calibur.tv/owner/m-logo-login.png?imageMogr2/auto-orient/strip\" alt=\"sign-logo\" class=\"logo\">'),n(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rule}},[n(\"el-form-item\",{attrs:{prop:\"access\"}},[n(\"el-input\",{attrs:{type:\"text\",placeholder:\"手机（填写常用手机号，用于登录）\"},model:{value:t.form.access,callback:function(e){t.$set(t.form,\"access\",e)},expression:\"form.access\"}})],1),n(\"el-form-item\",{attrs:{prop:\"secret\"}},[n(\"el-input\",{attrs:{type:\"password\",placeholder:\"密码（6-16个字符组成，区分大小写）\"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,\"secret\",e)},expression:\"form.secret\"}})],1),n(\"el-form-item\",[n(\"el-button\",{staticClass:\"submit-btn\",attrs:{type:\"primary\",loading:t.loading},on:{click:t.submitForm}},[t._v(\"登录\")])],1)],1),t._ssrNode('<div class=\"others\"><a>忘记密码?&gt;</a><a>点击注册»</a></div>')],2)},staticRenderFns:[]};e.a=r},function(t,e,n){var r=n(55);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"3ab83032\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.sign-up-form input{border:0;border-bottom:1px solid #e5e9ef}.sign-up-form .submit-btn{width:100%}.sign-up-form .others{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:15px;margin-bottom:10px}.sign-up-form .tip{text-align:left;line-height:25px;font-size:13px;color:#6d757a}\",\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"sign-up-form\"},[n(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rule,\"status-icon\":\"\"}},[n(\"el-form-item\",{attrs:{prop:\"nickname\"}},[n(\"el-input\",{attrs:{type:\"text\",placeholder:\"昵称（2-14个字符组成，1个汉字占2个字符）\",\"auto-complete\":\"off\"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,\"nickname\",e)},expression:\"form.nickname\"}})],1),n(\"el-form-item\",{attrs:{prop:\"access\"}},[n(\"el-input\",{attrs:{type:\"text\",placeholder:\"手机（填写常用手机号，用于登录）\",\"auto-complete\":\"off\"},model:{value:t.form.access,callback:function(e){t.$set(t.form,\"access\",e)},expression:\"form.access\"}})],1),n(\"el-form-item\",{attrs:{prop:\"secret\"}},[n(\"el-input\",{attrs:{type:\"password\",placeholder:\"密码（6-16个字符组成，区分大小写）\",\"auto-complete\":\"off\"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,\"secret\",e)},expression:\"form.secret\"}})],1),t.inviteCode?t._e():n(\"el-form-item\",[n(\"el-input\",{attrs:{type:\"number\",placeholder:\"邀请码（可为空）\",\"auto-complete\":\"off\"},model:{value:t.form.inviteCode,callback:function(e){t.$set(t.form,\"inviteCode\",e)},expression:\"form.inviteCode\"}})],1),n(\"el-form-item\",[n(\"el-button\",{staticClass:\"submit-btn\",attrs:{type:\"primary\",loading:t.submitBtnLoading,disabled:t.submitBtnDisabled},on:{click:t.submitForm}},[t._v(\"\\n        \"+t._s(t.submitBtnText)+\"\\n        \"),t.timeout?[t._v(\"\\n          （\"+t._s(t.timeout)+\"s 后可重新获取）\\n        \")]:t._e()],2)],1)],1),t._ssrNode((t.inviteCode?\"\\x3c!----\\x3e\":'<div class=\"others\"><a>社交账号注册</a><a>已有账号»</a></div>')+'<div class=\"tip\">\\n    提示：由于注册时要根据初始昵称为每个用户分配独立域名，因此注册时的昵称不支持日文和特殊符号和标点符号，可在注册完成后在个人设置页面修改昵称\\n  </div>')],2)},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(24),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(60);var s=function(t){var e;(e=n(58)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"2b476c1f\");e.default=u.exports},function(t,e,n){var r=n(59);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"3c45a1a7\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.reset-password-form input{border:0;border-bottom:1px solid #e5e9ef}.reset-password-form .submit-btn{width:100%}.reset-password-form .others{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:15px}\",\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"reset-password-form\"},[n(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rule}},[n(\"el-form-item\",{attrs:{prop:\"access\"}},[n(\"el-input\",{attrs:{type:\"text\",placeholder:\"手机号\",\"auto-complete\":\"off\"},model:{value:t.form.access,callback:function(e){t.$set(t.form,\"access\",e)},expression:\"form.access\"}})],1),n(\"el-form-item\",{attrs:{prop:\"secret\"}},[n(\"el-input\",{attrs:{type:\"password\",placeholder:\"新密码\",\"auto-complete\":\"off\"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,\"secret\",e)},expression:\"form.secret\"}})],1),n(\"el-form-item\",[n(\"el-button\",{staticClass:\"submit-btn\",attrs:{type:\"primary\",loading:t.submitBtnLoading,disabled:t.submitBtnDisabled},on:{click:t.submitForm}},[t._v(\"\\n        \"+t._s(t.submitBtnText)+\"\\n        \"),t.timeout?[t._v(\"\\n          （\"+t._s(t.timeout)+\"s 后可重新获取）\\n        \")]:t._e()],2)],1)],1),t._ssrNode('<div class=\"others\"><a>返回登录&gt;</a><a>点击注册»</a></div>')],2)},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(25),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(64);var s=function(t){var e;(e=n(62)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"41d43f3e\");e.default=u.exports},function(t,e,n){var r=n(63);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"61e224e3\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.user-drawer{text-align:left}.user-drawer .user-section{height:110px;width:100%;overflow:hidden;position:relative;padding:15px;text-shadow:0 1px 10px gray;color:#fff;line-height:40px}.user-drawer .user-section .bg{width:120%;height:120%;position:absolute;left:-10%;top:-10%;z-index:-1;background-color:#999;-webkit-filter:blur(5px);filter:blur(5px);filter:progid:DXImageTransform.Microsoft.Blur(PixelRadius=$size,MakeShadow=false)}.user-drawer .user-section .user-info{margin-bottom:5px}.user-drawer .user-section .user-info .avatar{position:relative;display:block;width:50px;height:50px;float:left;margin-right:10px}.user-drawer .user-section .user-info .avatar img{display:block;width:100%;height:100%;border-radius:25px}.user-drawer .user-section .user-info .avatar:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:50%}.user-drawer .user-section .user-info .panel{overflow:hidden;line-height:25px}.user-drawer .user-section .user-info .panel button{position:relative;padding:4px 10px;font-size:14px;color:#fff;background-color:transparent;border-radius:8px;white-space:nowrap}.user-drawer .user-section .user-info .panel button:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #fff;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}.user-drawer .user-section .badge{margin-right:30px;font-size:14px}.user-drawer .routes{margin-top:10px}.user-drawer .routes li{height:40px;position:relative;padding:5px 0;margin-left:3px}.user-drawer .routes li:after{content:\"\";position:absolute;left:0;right:0;bottom:0;height:1px;background-color:#f0f0f0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5);margin-left:-15px;margin-right:-15px}.user-drawer .routes i{font-size:13px}.user-drawer .routes a,.user-drawer .routes button{display:block;width:100%;height:100%;line-height:30px;text-align:left;font-size:13px;color:#333}.user-drawer .routes .mint-badge{line-height:1.2}.user-drawer .routes .badge-count{border-radius:12px;font-size:15px;padding:2px 8px;background-color:red;color:#fff;height:20px;line-height:16px;margin-left:5px}',\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n(\"v-drawer\",{staticClass:\"user-drawer\",attrs:{from:\"right\",size:\"70%\",id:\"user\"},model:{value:t.switchUserDrawer,callback:function(e){t.switchUserDrawer=e},expression:\"switchUserDrawer\"}},[n(\"div\",{staticClass:\"user-section\"},[n(\"div\",{staticClass:\"bg\",style:t.computeUserDrawerBg}),n(\"div\",{staticClass:\"user-info\"},[n(\"a\",{staticClass:\"avatar\",attrs:{href:t.$alias.user(t.user.zone)}},[n(\"img\",{attrs:{src:t.$resize(t.user.avatar,{width:50}),alt:\"me\"}})]),n(\"div\",{staticClass:\"panel\"},[n(\"div\",[n(\"a\",{staticClass:\"oneline\",attrs:{href:t.$alias.user(t.user.zone)},domProps:{textContent:t._s(t.user.nickname)}})]),n(\"button\",{on:{click:t.handleDaySign}},[t._v(t._s(t.daySigned?\"已签到\":\"签到\"))])])]),n(\"span\",{staticClass:\"badge\"},[t._v(\"金币：\"+t._s(t.coinCount)+\" 个\")]),n(\"span\",{staticClass:\"badge\"},[t._v(\"邀请码：\"+t._s(t.user.id))])]),n(\"ul\",{staticClass:\"routes container\",on:{click:function(e){t.switchUserDrawer=!1}}},[n(\"li\",[n(\"a\",{attrs:{href:t.$alias.user(t.user.zone)}},[n(\"i\",{staticClass:\"iconfont icon-zhuye\"}),t._v(\"\\n        个人主页\\n      \")])]),n(\"li\",[n(\"a\",{attrs:{href:\"/me/setting\"}},[n(\"i\",{staticClass:\"iconfont icon-shezhi\"}),t._v(\"\\n        用户设置\\n      \")])]),n(\"li\",[n(\"a\",{attrs:{href:\"/notification/list\"}},[n(\"i\",{staticClass:\"iconfont icon-nitification\"}),t._v(\"\\n        消息通知\\n        \"),t.notificationCount?n(\"span\",{staticClass:\"badge-count\"},[t._v(t._s(t.notificationCount))]):t._e()])]),n(\"li\",[n(\"a\",{attrs:{href:\"/about/hello\"}},[n(\"i\",{staticClass:\"iconfont icon-bangzhu\"}),t._v(\"\\n        功能简介\\n      \")])]),n(\"li\",[n(\"a\",{attrs:{href:\"/me/invite\"}},[n(\"i\",{staticClass:\"iconfont icon-yaoqingma\"}),t._v(\"\\n        我的邀请码 \\n        \"),n(\"mt-badge\",{attrs:{size:\"small\",type:\"warning\"}},[t._v(\" ! \")])],1)]),n(\"li\",[n(\"button\",{on:{click:t.logout}},[n(\"i\",{staticClass:\"iconfont icon-tuichu\"}),t._v(\"\\n        退出登录\\n      \")])])])]):t._e()},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isGuest?n(\"v-drawer\",{staticClass:\"sign-drawer\",attrs:{from:\"bottom\",size:\"100%\",\"header-text\":t.showSignUp?\"注册\":t.showReset?\"找回密码\":\"登录\"},model:{value:t.openDrawer,callback:function(e){t.openDrawer=e},expression:\"openDrawer\"}},[n(\"div\",{staticClass:\"container\"},[n(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.showSignIn,expression:\"showSignIn\"}]},[n(\"reset-password-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.showReset,expression:\"showReset\"}],on:{\"to-login\":function(e){t.showReset=!1},\"to-register\":t.showRegister}}),n(\"sign-in-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.showReset,expression:\"!showReset\"}],on:{\"to-reset\":function(e){t.showReset=!0},\"to-register\":t.showRegister}})],1),n(\"sign-up-form\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.showSignUp,expression:\"showSignUp\"}],on:{\"to-login\":t.showLogin}})],1)]):n(\"user-drawer\")},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";var r={render:function(){var t=this.$createElement,e=this._self._c||t;return e(\"div\",{attrs:{id:\"app\"}},[this._ssrNode('<img id=\"__share-logo\" src=\"http://image.calibur.tv/owner/logo-new/logo.png?imageMogr2/auto-orient/strip|imageView2/1/w/150/h/150\" alt=\"logo\" class=\"share-image\">'),e(\"router-view\"),e(\"sign-drawer\")],2)},staticRenderFns:[]};e.a=r},function(t,e){t.exports=require(\"vuex-router-sync\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=w(n(0)),a=w(n(1)),o=w(n(14));e.createStore=function(){return new s.default.Store({strict:!1,state:function(){return{user:null,login:!1,ua:{ios:!1,android:!1,wechat:!1,qq:!1,alipay:!1,weibo:!1,pc:!1}}},mutations:{SET_SSR_CTX:function(t,e){var n=e.ctx,r=n.header[\"user-agent\"].toLowerCase();t.ssrContext=n,t.ua={ios:null!==r.match(/iphone|ipad|ipod/),android:null!==r.match(/android/),wechat:null!==r.match(/micromessenger/),qq:null!==r.match(/qq\\//),alipay:null!==r.match(/alipayclient/),weibo:null!==r.match(/weibo/i),pc:!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(r)}},SET_USER:function(t,e){t.user=e,t.login=!0},SET_USER_INFO:function(t,e){(0,o.default)(e).forEach(function(n){t.user[n]=e[n]})},USE_COIN:function(t){t.user.coin&&t.user.coin--}},actions:{init:function(t,e){var n=this,o=t.commit;return(0,a.default)(r.default.mark(function t(){var a,i,s,l;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.header.cookie,o(\"SET_SSR_CTX\",e),!a){t.next=16;break}if(i=\"\",a.split(\"; \").forEach(function(t){var e=t.split(\"=\");\"JWT-TOKEN\"===e[0]&&(i=e[1])}),!i){t.next=16;break}return s=new u.default(e),t.prev=7,t.next=10,s.getLoginUser();case 10:(l=t.sent)&&o(\"SET_USER\",l),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:case\"end\":return t.stop()}},t,n,[[7,14]])}))()},getUpToken:function(t){var e=this,n=t.state,o=t.commit;return(0,a.default)(r.default.mark(function t(){var a,i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.user.uptoken.expiredAt<=parseInt(Date.now()/1e3,10))){t.next=6;break}return a=new l.default,t.next=4,a.getUpToken();case 4:(i=t.sent)&&o(\"SET_USER_INFO\",{uptoken:i});case 6:case\"end\":return t.stop()}},t,e)}))()},getNotification:function(t,e){var n=this,o=t.commit;return(0,a.default)(r.default.mark(function t(){var a,i;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new u.default(e),t.next=3,a.getNotificationCount();case 3:(i=t.sent)&&o(\"SET_USER_INFO\",{notification:i});case 5:case\"end\":return t.stop()}},t,n)}))()}},getters:{},modules:{bangumi:c.default,post:d.default,users:p.default,video:f.default,cartoonRole:m.default,image:h.default,trending:g.default,comment:v.default,homepage:b.default,search:_.default}})};var i=w(n(13)),s=w(n(69)),u=w(n(11)),l=w(n(15)),c=w(n(70)),d=w(n(71)),f=w(n(73)),p=w(n(74)),m=w(n(75)),h=w(n(76)),g=w(n(77)),v=w(n(78)),b=w(n(80)),_=w(n(81));function w(t){return t&&t.__esModule?t:{default:t}}i.default.use(s.default)},function(t,e){t.exports=require(\"vuex\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=s(n(0)),a=s(n(1)),o=s(n(16)),i=s(n(17));function s(t){return t&&t.__esModule?t:{default:t}}e.default={namespaced:!0,state:function(){return{follows:null,released:[],timeline:{list:[],year:(new Date).getFullYear(),noMore:!1},category:{list:[],noMore:!1,page:0,take:10,total:0},tags:[],info:null,posts:{list:[],total:0,noMore:!1,type:\"new\"},videos:{list:[],total:0,has_season:!1},roles:{id:0,list:[],noMore:!1},cartoons:{page:0,list:[],noMore:!1}}},mutations:{selectTag:function(t,e){var n=t.tags[e];n.selected=!n.selected,t.tags[e]=n},ADD_ROLE_STATE:function(t,e){var n=e.roleId,r=e.hasStar;t.roles.data.forEach(function(e,a){e.id===n&&(r?t.roles.data[a].has_star++:(t.roles.data[a].has_star=1,t.roles.data[a].fans_count++),t.roles.data[a].star_count++)})},SET_FOLLOW:function(t,e){var n=e.followed,r=e.self;t.info.followed=n,n?t.info.count_like++:t.info.count_like--,n?t.info.followers.unshift(r):t.info.followers.forEach(function(e,n){e.zone===r.zone&&t.info.followers.splice(n,1)})},SET_RELEASED:function(t,e){t.released=e},SET_TIMELINE:function(t,e){var n=t.timeline;t.timeline.list=n.list.concat(e.list),t.timeline.year=n.year-1,t.timeline.noMore=e.noMore},SET_TAGS:function(t,e){var n=e.tags,r=e.id,a=r?r.split(\"-\"):void 0;n.forEach(function(t,e){n[e].selected=!!a&&-1!==a.indexOf(t.id.toString())}),t.tags=n},SET_CATEGORY:function(t,e){t.category.list=t.category.list.concat(e.list),t.category.noMore=e.noMore,t.category.total=e.total,t.category.page++},SET_POSTS:function(t,e){t.posts.list=t.posts.list.concat(e.list),t.posts.total=e.total,t.posts.noMore=e.noMore},SET_BANGUMI_INFO:function(t,e){t.info=e},SET_VIDEOS:function(t,e){t.videos.list=e.videos,t.videos.total=e.total,t.videos.has_season=e.has_season},SET_ROLES:function(t,e){var n=e.data,r=e.bangumiId;t.roles.list=n,t.roles.noMore=!0,t.roles.id=r},SET_BANGUMI_CARTOON:function(t,e){t.cartoons.list=t.cartoons.list.concat(e.list),t.cartoons.page=t.cartoons.page+1,t.cartoons.noMore=e.noMore},TOGGLE_LIKE_CARTOON:function(t,e){var n=e.id,r=e.result;t.cartoons.list.forEach(function(e,a){e.id===n&&(t.cartoons.list[a].like_count+=r?1:-1,t.cartoons.list[a].liked=r)})}},actions:{getTags:function(t,e){var n=this,i=t.state,s=t.commit,u=e.id,l=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.tags.length){t.next=2;break}return t.abrupt(\"return\");case 2:return e=new o.default(l),t.next=5,e.tags();case 5:(a=t.sent)&&s(\"SET_TAGS\",{tags:a,id:u});case 7:case\"end\":return t.stop()}},t,n)}))()},getBangumi:function(t,e){var n=this,i=t.commit,s=e.ctx,u=e.id;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new o.default(s),t.next=3,e.show(u);case 3:(a=t.sent)&&i(\"SET_BANGUMI_INFO\",a);case 5:case\"end\":return t.stop()}},t,n)}))()},getVideos:function(t,e){var n=this,i=t.commit,s=e.id,u=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new o.default(u),t.next=3,e.videos(s);case 3:(a=t.sent)&&i(\"SET_VIDEOS\",a);case 5:case\"end\":return t.stop()}},t,n)}))()},getRoles:function(t,e){var n=this,i=t.state,s=t.commit,u=e.bangumiId,l=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.roles.id!==u){t.next=2;break}return t.abrupt(\"return\",i.roles.data);case 2:return e=new o.default(l),t.next=5,e.roles({bangumiId:u});case 5:if(!(a=t.sent)){t.next=9;break}return s(\"SET_ROLES\",{data:a,bangumiId:u}),t.abrupt(\"return\",a);case 9:case\"end\":return t.stop()}},t,n)}))()},follow:function(t,e){var n=this,i=t.commit,s=t.rootState,u=e.ctx,l=e.id;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new o.default(u),t.next=3,e.follow(l);case 3:a=t.sent,i(\"SET_FOLLOW\",{followed:a,self:{id:s.user.id,zone:s.user.zone,avatar:s.user.avatar,nickname:s.user.nickname}});case 5:case\"end\":return t.stop()}},t,n)}))()},getReleased:function(t,e){var n=this,i=t.state,s=t.commit;return(0,a.default)(r.default.mark(function t(){var a,u;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.released.length){t.next=2;break}return t.abrupt(\"return\");case 2:return a=new o.default(e),t.next=5,a.released();case 5:(u=t.sent)&&s(\"SET_RELEASED\",u);case 7:case\"end\":return t.stop()}},t,n)}))()},getTimeline:function(t,e){var n=this,i=t.state,s=t.commit;return(0,a.default)(r.default.mark(function t(){var a,u;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.timeline.noMore){t.next=2;break}return t.abrupt(\"return\");case 2:return a=new o.default(e),t.next=5,a.timeline({year:i.timeline.year});case 5:(u=t.sent)&&s(\"SET_TIMELINE\",u);case 7:case\"end\":return t.stop()}},t,n)}))()},getCategory:function(t,e){var n=this,i=t.state,s=t.commit,u=e.id,l=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new o.default(l),t.next=3,e.category({id:u,page:i.category.page,take:i.category.take});case 3:(a=t.sent)&&s(\"SET_CATEGORY\",a);case 5:case\"end\":return t.stop()}},t,n)}))()},getPosts:function(t,e){var n=this,i=t.state,s=t.commit,u=e.id,l=e.take,c=e.type,d=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a,f;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.posts.noMore){t.next=2;break}return t.abrupt(\"return\");case 2:return e=i.posts.list,a=new o.default(d),t.next=6,a.posts({id:u,take:l,type:c,maxId:e.length?e[e.length-1].id:0});case 6:(f=t.sent)&&s(\"SET_POSTS\",f);case 8:case\"end\":return t.stop()}},t,n)}))()},starRole:function(t,e){var n=this,o=t.commit,s=e.bangumiId,u=e.roleId,l=e.ctx,c=e.hasStar;return(0,a.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(l),t.prev=1,t.next=4,e.star({bangumiId:s,roleId:u});case 4:o(\"ADD_ROLE_STATE\",{roleId:u,hasStar:c}),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case\"end\":return t.stop()}},t,n,[[1,7]])}))()},getCartoons:function(t,e){var n=this,i=t.state,s=t.commit,u=e.ctx,l=e.bangumiId;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new o.default(u),t.next=3,e.cartoon({bangumiId:l,page:i.cartoons.page});case 3:(a=t.sent)&&s(\"SET_BANGUMI_CARTOON\",a);case 5:case\"end\":return t.stop()}},t,n)}))()}},getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=s(n(72)),a=s(n(0)),o=s(n(1)),i=s(n(37));function s(t){return t&&t.__esModule?t:{default:t}}var u={getPost:function(t,e){var n=this,r=t.commit,s=e.id,u=e.ctx,l=e.only;return(0,o.default)(a.default.mark(function t(){var e,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(u),t.next=3,e.show({id:s,only:l});case 3:o=t.sent,r(\"SET_POST_INFO\",o);case 5:case\"end\":return t.stop()}},t,n)}))()},create:function(t,e){var n=this;return(0,r.default)(t),(0,o.default)(a.default.mark(function t(){var r,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new i.default(e.ctx),t.next=3,r.create(e);case 3:return o=t.sent,t.abrupt(\"return\",o);case 5:case\"end\":return t.stop()}},t,n)}))()},deletePost:function(t,e){var n=this,s=e.ctx,u=e.id;return(0,r.default)(t),(0,o.default)(a.default.mark(function t(){var e;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(s),t.next=3,e.deletePost(u);case 3:case\"end\":return t.stop()}},t,n)}))()},toggleLike:function(t,e){var n=this,r=t.commit,s=e.ctx,u=e.id;return(0,o.default)(a.default.mark(function t(){var e,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(s),t.next=3,e.toggleLike(u);case 3:o=t.sent,r(\"TOGGLE_LIKE_POST\",{result:o});case 5:case\"end\":return t.stop()}},t,n)}))()},toggleMark:function(t,e){var n=this,r=t.commit,s=e.ctx,u=e.id;return(0,o.default)(a.default.mark(function t(){var e,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(s),t.next=3,e.toggleMark(u);case 3:o=t.sent,r(\"TOGGLE_MARK_POST\",o);case 5:case\"end\":return t.stop()}},t,n)}))()}};e.default={namespaced:!0,state:function(){return{info:{bangumi:null,user:null,post:null}}},actions:u,mutations:{SET_POST_INFO:function(t,e){t.info.bangumi=e.bangumi,t.info.user=e.user,t.info.post=e.post},TOGGLE_LIKE_POST:function(t,e){var n=e.result;t.info.post.liked=n,n?t.info.post.like_count++:t.info.post.like_count--},TOGGLE_MARK_POST:function(t,e){t.info.post.marked=e,e?t.info.post.mark_count++:t.info.post.mark_count--},FOLLOW_BANGUMI:function(t,e){var n=e.result;t.info.bangumi.followed=n}},getters:{}}},function(t,e){t.exports=require(\"babel-runtime/helpers/objectDestructuringEmpty\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(0)),a=i(n(1)),o=i(n(38));function i(t){return t&&t.__esModule?t:{default:t}}e.default={namespaced:!0,state:function(){return{bangumi:null,info:null,list:null,season:null}},mutations:{SET_DATA:function(t,e){t.list=e.list,t.info=e.info,t.bangumi=e.bangumi,t.season=e.season},followBangumi:function(t,e){var n=e.result;t.bangumi.followed=n}},actions:{getShow:function(t,e){var n=this,i=t.commit,s=e.id,u=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new o.default(u),t.next=3,e.getShow(s);case 3:a=t.sent,i(\"SET_DATA\",a);case 5:case\"end\":return t.stop()}},t,n)}))()}},getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(0)),a=u(n(1)),o=u(n(18)),i=u(n(12)),s=u(n(11));function u(t){return t&&t.__esModule?t:{default:t}}e.default={namespaced:!0,state:function(){return{list:{},posts:{zone:\"\",take:10,mine:{data:[],noMore:!1,loading:!1},reply:{data:[],noMore:!1,loading:!1},like:{data:[],noMore:!1,loading:!1},mark:{data:[],noMore:!1,loading:!1}},roles:{zone:\"\",data:[],page:0,noMore:!1},notifications:{checked:0,take:10,noMore:!1,data:[]},self:{followBangumi:[]}}},mutations:{RESET_USER_ROLES:function(t){t.roles={zone:\"\",data:[],page:0,noMore:!1}},SET_USER_ROLES:function(t,e){var n=e.data,r=e.zone;t.roles.zone=r,t.roles.data=t.roles.data.concat(n.list),t.roles.noMore=n.noMore,t.roles.page++},SET_USER_INFO:function(t,e){var n=e.data,r=e.zone;t.list[r]=t.list[r]?(0,i.default)(t.list[r],n):n},SET_SELF_INFO:function(t,e){var n=e.key,r=e.value;Array.isArray(t.self[n])?t.self[n]=t.self[n].concat(r):\"object\"===(0,o.default)(t.self[n])?t.self[n]=(0,i.default)(t.self[n],r):t.self[n]=r},SET_FOLLOW_POST_DATA:function(t,e){var n=e.data,r=e.type,a=e.zone;t.posts.zone=a,t.posts[r]={data:t.posts[r].data.concat(n.list),noMore:n.noMore,loading:!1}},SET_FOLLOW_POST_STATE:function(t,e){var n=e.type;t.posts[n].loading=!0},SET_NOTIFICATIONS:function(t,e){var n=t.notifications;t.notifications={checked:n.checked,take:n.take,noMore:n.take>e.length,data:n.data.concat(e)}},READ_NOTIFICATION:function(t,e){t.notifications.data.forEach(function(n,r){n.id!==e||n.checked||(t.notifications.data[r].checked=!0,t.notifications.checked++)})},READ_ALL_NOTIFICATION:function(t){t.notifications.data.forEach(function(e,n){t.notifications.data[n].checked=!0}),t.notifications.checked=88888888},CLEAR_FOLLOW_POST:function(t){t.posts={zone:\"\",take:10,mine:{data:[],noMore:!1,loading:!1},reply:{data:[],noMore:!1,loading:!1},like:{data:[],noMore:!1,loading:!1},mark:{data:[],noMore:!1,loading:!1}}},CLEAR_NOTIFICATIONS:function(t){t.notifications={checked:0,take:10,noMore:!1,data:[]}}},actions:{getUser:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.zone;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),t.next=3,e.getUserInfo({zone:u});case 3:(a=t.sent)&&o(\"SET_USER_INFO\",{data:a,zone:u});case 5:case\"end\":return t.stop()}},t,n)}))()},getFollowBangumis:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.zone,l=e.self;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),t.next=3,e.followBangumis(u);case 3:if(!(a=t.sent)){t.next=7;break}return l?o(\"SET_SELF_INFO\",{key:\"followBangumi\",value:a}):o(\"SET_USER_INFO\",{data:{bangumis:a},zone:u}),t.abrupt(\"return\",a);case 7:case\"end\":return t.stop()}},t,n)}))()},getFollowPosts:function(t,e){var n=this,o=t.state,i=t.commit,u=e.type,l=e.zone;return(0,a.default)(r.default.mark(function t(){var e,a,c,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.posts.zone!==l&&i(\"CLEAR_FOLLOW_POST\"),!o.posts[u].noMore&&!o.posts[u].loading){t.next=3;break}return t.abrupt(\"return\");case 3:return i(\"SET_FOLLOW_POST_STATE\",{type:u}),e=o.posts[u].data,a=e.length,c=new s.default,t.next=9,c.followPosts({type:u,zone:l,take:o.posts.take,minId:a?e[a-1].id:0});case 9:(d=t.sent)&&i(\"SET_FOLLOW_POST_DATA\",{type:u,data:d,zone:l});case 11:case\"end\":return t.stop()}},t,n)}))()},daySign:function(t,e){var n=this,o=t.rootState,i=e.ctx;return(0,a.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.user.signed){t.next=2;break}return t.abrupt(\"return\");case 2:return e=new s.default(i),t.next=5,e.daySign();case 5:case\"end\":return t.stop()}},t,n)}))()},getNotifications:function(t,e){var n=this,o=t.state,i=t.commit,u=e.ctx,l=e.reset;return(0,a.default)(r.default.mark(function t(){var e,a,c;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(l&&i(\"CLEAR_NOTIFICATIONS\"),e=o.notifications.data.length,!o.notifications.noMore){t.next=4;break}return t.abrupt(\"return\");case 4:return a=new s.default(u),t.next=7,a.getNotifications({minId:e?o.notifications.data[e-1].id:null,take:o.notifications.take});case 7:(c=t.sent)&&i(\"SET_NOTIFICATIONS\",c);case 9:case\"end\":return t.stop()}},t,n)}))()},readMessage:function(t,e){var n=this,o=t.state,i=t.commit,u=e.ctx,l=e.id;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,o.notifications.data.forEach(function(t){t.id!==l||t.checked||(e=t)}),!e){t.next=7;break}return a=new s.default(u),t.next=6,a.readMessage(l);case 6:i(\"READ_NOTIFICATION\",l);case 7:case\"end\":return t.stop()}},t,n)}))()},readAllMessage:function(t,e){var n=this,o=t.commit;return(0,a.default)(r.default.mark(function t(){var a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new s.default(e),t.next=3,a.readAllMessage();case 3:o(\"READ_ALL_NOTIFICATION\");case 4:case\"end\":return t.stop()}},t,n)}))()},getFollowRoles:function(t,e){var n=this,o=t.state,i=t.commit,u=e.ctx,l=e.zone,c=e.reset;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!c||!o.roles.data.length||o.roles.zone!==l){t.next=2;break}return t.abrupt(\"return\");case 2:if(c&&i(\"RESET_USER_ROLES\"),!o.roles.noMore){t.next=5;break}return t.abrupt(\"return\");case 5:return e=new s.default(u),t.next=8,e.followRoles({zone:l,page:o.roles.page});case 8:(a=t.sent)&&i(\"SET_USER_ROLES\",{data:a,zone:l});case 10:case\"end\":return t.stop()}},t,n)}))()}},getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=s(n(12)),a=s(n(0)),o=s(n(1)),i=s(n(17));function s(t){return t&&t.__esModule?t:{default:t}}e.default={namespaced:!0,state:function(){return{trending:{data:[],noMore:!1},fans:{new:{list:[],noMore:!1},hot:{list:[],noMore:!1}}}},mutations:{ADD_ROLE_STATE:function(t,e){var n=e.hasStar,r=e.user;n?t.info.data.hasStar++:(t.info.data.hasStar=1,t.info.data.fans_count++,t.fans.new.list.unshift(r)),t.info.data.star_count++},FOLLOW_ROLE_BANGUMI:function(t,e){var n=e.result;t.info.bangumi.followed=n},SET_DATA:function(t,e){t.list=e.list,t.info=e.info,t.bangumi=e.bangumi,t.season=e.season},SET_TRENDING:function(t,e){t.trending.data=t.trending.data.concat(e),t.trending.noMore=e.length<15},SET_ROLE_INFO:function(t,e){t.info=e},SET_FANS_LIST:function(t,e){var n=e.data,r=e.reset,a=e.sort;r&&(t.fans={new:{list:[],noMore:!1},hot:{list:[],noMore:!1}}),t.fans[a].list=t.fans[a].list.concat(n),t.fans[a].noMore=n.length<15}},actions:{getShow:function(t,e){var n=this,r=t.commit,s=e.id,u=e.ctx;return(0,o.default)(a.default.mark(function t(){var e,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(u),t.next=3,e.getShow(s);case 3:(o=t.sent)&&r(\"SET_DATA\",o);case 5:case\"end\":return t.stop()}},t,n)}))()},getTrending:function(t){var e=this,n=t.state,r=t.commit;return(0,o.default)(a.default.mark(function t(){var o,s;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.trending.noMore){t.next=2;break}return t.abrupt(\"return\");case 2:return o=new i.default,t.next=5,o.trending({seenIds:n.trending.data.length?n.trending.data.map(function(t){return t.id}).toString():null});case 5:(s=t.sent)&&r(\"SET_TRENDING\",s);case 7:case\"end\":return t.stop()}},t,e)}))()},getFansList:function(t,e){var n=this,s=t.state,u=t.commit,l=e.bangumiId,c=e.roleId,d=e.sort,f=e.reset;return(0,o.default)(a.default.mark(function t(){var e,o,p,m;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.fans[d].noMore||f){t.next=2;break}return t.abrupt(\"return\");case 2:return e=new i.default,o=s.fans[d].list,p=o.length,t.next=7,e.fans((0,r.default)({sort:d,bangumiId:l,roleId:c},\"new\"===d?{minId:f?null:p?o[p-1].id:null}:{seenIds:f?null:p?o.map(function(t){return t.id}).toString():null}));case 7:(m=t.sent)&&u(\"SET_FANS_LIST\",{data:m,reset:f,sort:d});case 9:case\"end\":return t.stop()}},t,n)}))()},getRoleInfo:function(t,e){var n=this,r=t.commit,s=e.ctx,u=e.id;return(0,o.default)(a.default.mark(function t(){var e,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(s),t.next=3,e.show(u);case 3:o=t.sent,r(\"SET_ROLE_INFO\",o);case 5:case\"end\":return t.stop()}},t,n)}))()},star:function(t,e){var n=this,r=t.rootState,s=t.commit,u=e.bangumiId,l=e.roleId,c=e.ctx,d=e.hasStar;return(0,o.default)(a.default.mark(function t(){var e,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new i.default(c),t.next=3,e.star({bangumiId:u,roleId:l});case 3:o=r.user,s(\"ADD_ROLE_STATE\",{hasStar:d,user:{id:o.id,zone:o.zone,avatar:o.avatar,nickname:o.nickname}});case 5:case\"end\":return t.stop()}},t,n)}))()}},getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=c(n(0)),a=c(n(1)),o=c(n(26)),i=c(n(16)),s=c(n(11)),u=c(n(15)),l=c(n(17));function c(t){return t&&t.__esModule?t:{default:t}}e.default={namespaced:!0,state:function(){return{waterfall:{data:[],take:12,options:{},noMore:!1,size:0,tags:0,bangumiId:-1,roleId:-1,creator:-1},albums:[],albumShow:{user:{},bangumi:{},images:[],info:{}}}},mutations:{DELETE_ALBUM_IMAGE:function(t,e){var n=e.index,r=t.albumShow.info.images.split(\",\");r.splice(n,1),t.albumShow.info.images=r.toString(),t.albumShow.images.splice(n,1),t.albumShow.info.image_count--},SORT_ALBUM_IMAGE:function(t,e){var n=e.prev,r=e.next,a=e.result,i=t.albumShow.images;i.splice.apply(i,[n,1].concat((0,o.default)(i.splice(r,1,i[n])))),t.albumShow.images=i,t.albumShow.info.images=a},ALBUM_LIKE:function(t,e){var n=e.result;t.albumShow.info.liked=n,n?t.albumShow.info.like_count++:t.albumShow.info.like_count--},FOLLOW_ALBUM_BANGUMI:function(t,e){var n=e.result;t.albumShow.bangumi&&(t.albumShow.bangumi.followed=n)},SET_ALBUM:function(t,e){t.albumShow=e},RESET_WATERFALL:function(t){t.waterfall={data:[],take:12,options:{},noMore:!1,size:0,tags:0,bangumiId:-1,roleId:-1,creator:-1}},SET_WATERFALL:function(t,e){t.waterfall.data=t.waterfall.data.concat(e.list),t.waterfall.options=e.type,t.waterfall.noMore=e.list.length<t.waterfall.take},CREATE_WATERFALL:function(t,e){e[0].album_id||(t.waterfall.data=e.concat(t.waterfall.data))},SET_WATERFALL_META:function(t,e){var n=e.size,r=e.tags,a=e.bangumiId,o=e.roleId,i=e.creator;t.waterfall.size=n,t.waterfall.tags=r,t.waterfall.bangumiId=a,t.waterfall.roleId=o,t.waterfall.creator=i,t.waterfall.noMore=!1,t.waterfall.data=[]},DELETE_WATERFALL:function(t,e){var n=e.id;t.waterfall.data.forEach(function(e,r){e.id===n&&t.waterfall.data.splice(r,1)})},EDIT_WATERFALL:function(t,e){var n=e.id,r=e.data;t.waterfall.data.forEach(function(e,a){e.id===n&&(t.waterfall.data[a]=r)})},LIKE_WATERFALL:function(t,e){var n=e.id,r=e.result;t.waterfall.data.forEach(function(e,a){e.id===n&&(t.waterfall.data[a].like_count+=r?1:-1,t.waterfall.data[a].liked=r)})},SET_USER_IMAGE_ALBUMS:function(t,e){t.albums=e},CREATE_ALBUM:function(t,e){t.albums.unshift(e)},EDIT_ALBUM:function(t,e){var n=e.id,r=e.data;t.albums.length&&t.albums.forEach(function(e,a){e.id===n&&(t.albums[a]=r)})}},actions:{getBangumiImages:function(t,e){var n=this,o=t.state,s=t.commit,u=e.id,l=e.ctx,c=e.force;return(0,a.default)(r.default.mark(function t(){var e,a,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c&&s(\"RESET_WATERFALL\"),!o.waterfall.noMore){t.next=3;break}return t.abrupt(\"return\");case 3:return e=o.waterfall,a=new i.default(l),t.next=7,a.images({id:u,take:e.take,seenIds:e.data.length?e.data.map(function(t){return t.id}).toString():null,size:e.size,tags:e.tags,roleId:e.roleId,creator:e.creator});case 7:d=t.sent,s(\"SET_WATERFALL\",d);case 9:case\"end\":return t.stop()}},t,n)}))()},getUserImages:function(t,e){var n=this,o=t.state,i=t.commit,u=e.zone,l=e.ctx,c=e.force;return(0,a.default)(r.default.mark(function t(){var e,a,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c&&i(\"RESET_WATERFALL\"),!o.waterfall.noMore){t.next=3;break}return t.abrupt(\"return\");case 3:return e=o.waterfall,a=new s.default(l),t.next=7,a.images({zone:u,seenIds:e.data.length?e.data.map(function(t){return t.id}).toString():null,take:e.take,size:e.size,tags:e.tags,bangumiId:e.bangumiId,creator:e.creator});case 7:d=t.sent,i(\"SET_WATERFALL\",d);case 9:case\"end\":return t.stop()}},t,n)}))()},getTrendingImages:function(t,e){var n=this,o=t.state,i=t.commit,s=e.sort,l=e.ctx,c=e.force;return(0,a.default)(r.default.mark(function t(){var e,a,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c&&i(\"RESET_WATERFALL\"),!o.waterfall.noMore){t.next=3;break}return t.abrupt(\"return\");case 3:return e=o.waterfall,a=new u.default(l),t.next=7,a.trendingList({seenIds:e.data.length?e.data.map(function(t){return t.id}).toString():null,take:e.take,size:e.size,tags:e.tags,bangumiId:e.bangumiId,creator:e.creator,sort:s});case 7:d=t.sent,i(\"SET_WATERFALL\",d);case 9:case\"end\":return t.stop()}},t,n)}))()},getRoleImages:function(t,e){var n=this,o=t.state,i=t.commit,s=e.ctx,u=e.id,c=e.force;return(0,a.default)(r.default.mark(function t(){var e,a,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c&&i(\"RESET_WATERFALL\"),!o.waterfall.noMore){t.next=3;break}return t.abrupt(\"return\");case 3:return e=o.waterfall,a=new l.default(s),t.next=7,a.images({id:u,seenIds:e.data.length?e.data.map(function(t){return t.id}).toString():null,take:e.take,sort:e.sort,size:e.size,tags:e.tags,creator:e.creator});case 7:d=t.sent,i(\"SET_WATERFALL\",d);case 9:case\"end\":return t.stop()}},t,n)}))()},userAlbum:function(t,e){var n=this,o=t.commit,i=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),t.next=3,e.getUserAlbums();case 3:return a=t.sent,o(\"SET_USER_IMAGE_ALBUMS\",a),t.abrupt(\"return\",a.map(function(t){return t}));case 6:case\"end\":return t.stop()}},t,n)}))()},getAlbumData:function(t,e){var n=this,o=t.commit,i=e.id,s=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new u.default(s),t.next=3,e.getAlbumData({id:i});case 3:a=t.sent,o(\"SET_ALBUM\",a);case 5:case\"end\":return t.stop()}},t,n)}))()},sortAlbumImage:function(t,e){var n=this,i=t.state,s=t.commit,l=e.prev,c=e.next,d=e.ctx,f=e.id;return(0,a.default)(r.default.mark(function t(){var e,a,p;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.albumShow.info.images.split(\",\"),(e=a).splice.apply(e,[l,1].concat((0,o.default)(a.splice(c,1,a[l])))),a=a.toString(),p=new u.default(d),t.next=6,p.sortAlbum({id:f,result:a});case 6:s(\"SORT_ALBUM_IMAGE\",{prev:l,next:c,result:a});case 7:case\"end\":return t.stop()}},t,n)}))()},deleteAlbumImage:function(t,e){var n=this,o=t.state,i=t.commit,s=e.index,l=e.ctx,c=e.id;return(0,a.default)(r.default.mark(function t(){var e,a,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.albumShow.info.images.split(\",\"),a=e.splice(s,1)[0],e=e.toString(),d=new u.default(l),t.next=6,d.deleteAlbumImage({id:c,result:e,imageId:a});case 6:i(\"DELETE_ALBUM_IMAGE\",{index:s});case 7:case\"end\":return t.stop()}},t,n)}))()}},getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=o(n(0)),a=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}var i={getTrending:function(t,e){var n=this,o=t.state,i=t.commit,s=e.api,u=e.type,l=e.sort,c=e.useCache,d=void 0===c||c;return(0,a.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.type?o.type!==u&&i(\"RESET_TRENDING_STATE\",{type:u}):i(\"INIT_TRENDING_TYPE\",{type:u}),!o[l].list.length){t.next=7;break}if(!d){t.next=6;break}return t.abrupt(\"return\");case 6:i(\"CLEAR_TRENDING_SORT\",{sort:l});case 7:if(!o[l].loading){t.next=9;break}return t.abrupt(\"return\");case 9:return i(\"SET_TRENDING_LOADING\",{sort:l}),t.next=12,s[l]({seenIds:\"\",minId:0});case 12:e=t.sent,i(\"INIT_TRENDING_DATA\",{data:e,sort:l});case 14:case\"end\":return t.stop()}},t,n)}))()},loadMore:function(t,e){var n=this,o=t.state,i=t.commit,s=e.api,u=e.sort,l=e.type;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.type&&o.type===l){t.next=2;break}return t.abrupt(\"return\");case 2:if(!o[u].noMore&&!o[u].loading){t.next=4;break}return t.abrupt(\"return\");case 4:if(i(\"SET_TRENDING_LOADING\",{sort:u}),e=void 0,a=o[u].list,\"news\"!==u){t.next=13;break}return t.next=10,s.news({minId:a.length?a[a.length-1].id:0});case 10:e=t.sent,t.next=16;break;case 13:return t.next=15,s[u]({seenIds:a.length?a.map(function(t){return t.id}).toString():\"\"});case 15:e=t.sent;case 16:i(\"PUSH_TRENDING_DATA\",{data:e,sort:u});case 17:case\"end\":return t.stop()}},t,n)}))()}};e.default={namespaced:!0,state:function(){return{sort:\"\",type:\"\",news:{list:[],total:0,noMore:!1,nothing:!1,loading:!1},active:{list:[],total:0,noMore:!1,nothing:!1,loading:!1},hot:{list:[],total:0,noMore:!1,nothing:!1,loading:!1}}},actions:i,mutations:{INIT_TRENDING_TYPE:function(t,e){var n=e.type;t.type=n},RESET_TRENDING_STATE:function(t,e){e.type},INIT_TRENDING_DATA:function(t,e){var n=e.data,r=e.sort;t[r].list=n.list,t[r].total=n.total,t[r].noMore=n.noMore,t[r].nothing=!n.list.length,t[r].loading=!1},PUSH_TRENDING_DATA:function(t,e){var n=e.data,r=e.sort,a=t[r].list.concat(n.list);t[r].list=a,t[r].total=n.total,t[r].noMore=n.noMore,t[r].nothing=!a.length,t[r].loading=!1},SET_TRENDING_LOADING:function(t,e){t[e.sort].loading=!0},CLEAR_TRENDING_SORT:function(t,e){t[e.sort]={list:[],total:0,noMore:!1,nothing:!1,loading:!0}}},getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(0)),a=u(n(1)),o=u(n(12)),i=u(n(27)),s=u(n(79));function u(t){return t&&t.__esModule?t:{default:t}}var l={RESET_STATE:function(t,e){e.type},INIT_FETCH_TYPE:function(t,e){var n=e.type;t.type=n,\"post\"===n&&(t.sort=\"asc\")},SET_MAIN_COMMENTS:function(t,e){var n=e.comments,r=e.seeReplyId;if(!n.list.length)return t.noMore=n.noMore,void(t.total=n.total);var a=n.list.map(function(t){var e=t.comments.list,n=e.length,r=(0,o.default)(t.comments,{maxId:n?e[n-1].id:0});return(0,o.default)(t,{comments:r})});t.fetchId=a[a.length-1].id,!t.list.length&&r&&(t.fetchId=a.map(function(t){return t.id}).filter(function(t){return t!==parseInt(r,10)}).pop());var s=a.map(function(t){return t.id}),u=t.list,l=!!s.filter(function(t){return-1===u.map(function(t){return t.id}).indexOf(t)}).length;t.list=t.list.filter(function(t){return-1===s.indexOf(t.id)}),t.list=(0,i.default)(t.list.concat(a),\"id\",t.sort),t.noMore=!l||n.noMore,t.total=l?n.total:t.list.length},SET_SUB_COMMENTS:function(t,e){var n=e.comments,r=e.parentId,a=null,o=0;if(t.list.forEach(function(t,e){t.id===r&&(a=t,o=e)}),a){t.list[o].comments.maxId=n.list[n.list.length-1].id;var i=n.list.map(function(t){return t.id}),s=a.comments.list,u=!!i.filter(function(t){return-1===s.map(function(t){return t.id}).indexOf(t)}).length;t.list[o].comments.list=s.filter(function(t){return-1===i.indexOf(t.id)}),t.list[o].comments.list=t.list[o].comments.list.concat(n.list),t.list[o].comments.noMore=!u||n.noMore,t.list[o].comments.total=u?n.total:t.list[o].comments.list.length}},CREATE_MAIN_COMMENT:function(t,e){\"asc\"===t.sort?t.list.push(e):t.list.unshift(e),t.total=t.total+1},CREATE_SUB_COMMENT:function(t,e){var n=e.id,r=e.comment;t.list.forEach(function(e,a){e.id===n&&(t.list[a].comments.list.push(r),t.list[a].comments.total=t.list[a].comments.total+1)})},SET_SUBMITTING:function(t,e){var n=e.result;t.submitting=n},DELETE_SUB_COMMENT:function(t,e){var n=e.parentId,r=e.id;t.list.forEach(function(e,a){e.id===n&&e.comments.list.forEach(function(e,n){e.id===r&&(t.list[a].comments.list.splice(n,1),t.list[a].comments.total=t.list[a].comments.total-1)})})},DELETE_MAIN_COMMENT:function(t,e){var n=e.id;t.list.forEach(function(e,r){e.id===n&&(t.list.splice(r,1),t.total=t.total-1)})},TOGGLE_LIKE_SUB_COMMENT:function(t,e){var n=e.id,r=e.parentId;t.list.forEach(function(e,a){e.id===r&&e.comments.list.forEach(function(e,r){if(e.id===n){var o=!t.list[a].comments[r].liked;t.list[a].comments[r].liked=o,t.list[a].comments[r].like_count=t.list[a].comments[r].like_count+(o?1:-1)}})})},TOGGLE_LIKE_MAIN_COMMENT:function(t,e){var n=e.id;t.list.forEach(function(e,r){if(e.id===n){var a=!t.list[r].liked;t.list[r].liked=a,t.list[r].like_count=t.list[r].like_count+(a?1:-1)}})}},c={getMainComments:function(t,e){var n=this,o=t.state,i=t.commit,u=e.ctx,l=e.type,c=e.id,d=e.onlySeeMaster,f=e.seeReplyId;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.type){t.next=9;break}if(o.type!==l){t.next=6;break}if(!o.noMore){t.next=4;break}return t.abrupt(\"return\");case 4:t.next=7;break;case 6:i(\"RESET_STATE\",{type:l});case 7:t.next=10;break;case 9:i(\"INIT_FETCH_TYPE\",{type:l});case 10:return e=new s.default(u),t.next=13,e.getMainCommentList({type:l,id:c,onlySeeMaster:d,seeReplyId:f,fetchId:o.fetchId});case 13:(a=t.sent)&&i(\"SET_MAIN_COMMENTS\",{comments:a,seeReplyId:f});case 15:case\"end\":return t.stop()}},t,n)}))()},getSubComments:function(t,e){var n=this,o=t.state,i=t.commit,u=e.ctx,l=e.type,c=e.parentId;return(0,a.default)(r.default.mark(function t(){var e,a,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=o.list.filter(function(t){return t.id===c})[0].comments).noMore){t.next=3;break}return t.abrupt(\"return\");case 3:return a=new s.default(u),t.next=6,a.getSubCommentList({type:l,parentId:c,maxId:e.maxId});case 6:d=t.sent,i(\"SET_SUB_COMMENTS\",{comments:d,parentId:c});case 8:case\"end\":return t.stop()}},t,n)}))()},createMainComment:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.images,l=e.content,c=e.type,d=e.id;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),t.next=3,e.createMainComment({type:c,id:d,content:l,images:u});case 3:return a=t.sent,o(\"CREATE_MAIN_COMMENT\",a),t.abrupt(\"return\",a);case 6:case\"end\":return t.stop()}},t,n)}))()},createSubComment:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.id,l=e.type,c=e.content,d=e.targetUserId;return(0,a.default)(r.default.mark(function t(){var e,a;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),t.next=3,e.createSubComment({id:u,type:l,content:c,targetUserId:d});case 3:return a=t.sent,o(\"CREATE_SUB_COMMENT\",{id:u,comment:a}),t.abrupt(\"return\",a);case 6:case\"end\":return t.stop()}},t,n)}))()},deleteSubComment:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.id,l=e.type,c=e.parentId;return(0,a.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),t.next=3,e.deleteSubComment({id:u,type:l});case 3:o(\"DELETE_SUB_COMMENT\",{parentId:c,id:u});case 4:case\"end\":return t.stop()}},t,n)}))()},deleteMainComment:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.id,l=e.type;return(0,a.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),t.next=3,e.deleteMainComment({id:u,type:l});case 3:o(\"DELETE_MAIN_COMMENT\",{id:u});case 4:case\"end\":return t.stop()}},t,n)}))()},toggleLikeSubComment:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.type,l=e.id,c=e.parentId;return(0,a.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),o(\"TOGGLE_LIKE_SUB_COMMENT\",{id:l,parentId:c}),t.next=4,e.toggleLikeSubComment({type:u,id:l});case 4:case\"end\":return t.stop()}},t,n)}))()},toggleLikeMainComment:function(t,e){var n=this,o=t.commit,i=e.ctx,u=e.type,l=e.id;return(0,a.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new s.default(i),o(\"TOGGLE_LIKE_MAIN_COMMENT\",{id:l}),t.next=4,e.toggleLikeMainComment({type:u,id:l});case 4:case\"end\":return t.stop()}},t,n)}))()}};e.default={namespaced:!0,state:function(){return{type:\"\",sort:\"desc\",fetchId:0,list:[],total:0,noMore:!1,submitting:!1}},actions:c,mutations:l,getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"getMainCommentList\",value:function(t){var e=t.type,n=t.id,r=t.fetchId,a=t.onlySeeMaster,o=t.seeReplyId;return this.http.get(e+\"/comment/\"+n+\"/main/list\",{params:{fetchId:r,onlySeeMaster:a,seeReplyId:o}})}},{key:\"getSubCommentList\",value:function(t){var e=t.type,n=t.parentId,r=t.maxId;return this.http.get(e+\"/comment/\"+n+\"/sub/list\",{params:{maxId:r}})}},{key:\"createMainComment\",value:function(t){var e=t.type,n=t.id,r=t.content,a=t.images;return this.http.post(e+\"/comment/\"+n+\"/create\",{content:r,images:a})}},{key:\"createSubComment\",value:function(t){var e=t.type,n=t.id,r=t.content,a=t.targetUserId;return this.http.post(e+\"/comment/\"+n+\"/reply\",{content:r,targetUserId:a})}},{key:\"deleteSubComment\",value:function(t){var e=t.type,n=t.id;return this.http.post(e+\"/comment/delete/sub/\"+n)}},{key:\"deleteMainComment\",value:function(t){var e=t.type,n=t.id;return this.http.post(e+\"/comment/delete/main/\"+n)}},{key:\"toggleLikeMainComment\",value:function(t){var e=t.type,n=t.id;return this.http.post(e+\"/comment/main/toggleLike/\"+n)}},{key:\"toggleLikeSubComment\",value:function(t){var e=t.type,n=t.id;return this.http.post(e+\"/comment/sub/toggleLike/\"+n)}}]),e}(u(n(10)).default);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(0)),a=i(n(1)),o=i(n(15));function i(t){return t&&t.__esModule?t:{default:t}}var s={getBanners:function(t,e){var n=this,i=t.state,s=t.commit;return(0,a.default)(r.default.mark(function t(){var a,u;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.banners.length){t.next=2;break}return t.abrupt(\"return\");case 2:return a=new o.default(e),t.next=5,a.getBanners();case 5:u=t.sent,s(\"pushBanners\",u);case 7:case\"end\":return t.stop()}},t,n)}))()}};e.default={namespaced:!0,state:function(){return{banners:[]}},actions:s,mutations:{pushBanners:function(t,e){t.banners=e}},getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=c(n(0)),a=c(n(1)),o=c(n(28)),i=c(n(14)),s=c(n(12)),u=c(n(26)),l=c(n(82));function c(t){return t&&t.__esModule?t:{default:t}}var d={0:\"综合\",1:\"用户\",2:\"番剧\",4:\"帖子\",5:\"偶像\"},f={RESET_DATA:function(t){t.lastSearchKeywords=\"\",t.resource=s.default.apply(Object,[{}].concat((0,u.default)((0,i.default)(d).map(function(t){return(0,o.default)({},t,{list:[],page:0,total:0,noMore:!1,loading:!1})}))))},SET_LOADING:function(t,e){var n=e.type,r=e.value;t.resource[n].loading=r},SET_RESOURCE:function(t,e){var n=e.type,r=e.q,a=e.data;t.lastSearchKeywords=r,t.resource[n].list=t.resource[n].list.concat(a.list),t.resource[n].page=t.resource[n].page+1,t.resource[n].noMore=a.noMore,t.resource[n].total=a.total,t.resource[n].loading=!1}},p={fetchData:function(t,e){var n=this,o=t.state,i=t.commit,s=e.q,u=e.type,c=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s){t.next=2;break}return t.abrupt(\"return\");case 2:if(o.lastSearchKeywords&&o.lastSearchKeywords!==s&&i(\"RESET_DATA\"),!((e=o.resource[u]).list.length||e.noMore||e.loading)){t.next=6;break}return t.abrupt(\"return\");case 6:return i(\"SET_LOADING\",{type:u,value:!0}),a=new l.default(c),t.next=10,a.v2({q:s,type:u,page:e.page});case 10:d=t.sent,i(\"SET_RESOURCE\",{q:s,type:u,data:d});case 12:case\"end\":return t.stop()}},t,n)}))()},fetchMore:function(t,e){var n=this,o=t.state,i=t.commit,s=e.type,u=e.ctx;return(0,a.default)(r.default.mark(function t(){var e,a,c,d;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.lastSearchKeywords){t.next=3;break}return t.abrupt(\"return\");case 3:if(!(a=o.resource[s]).noMore&&!a.loading){t.next=6;break}return t.abrupt(\"return\");case 6:return i(\"SET_LOADING\",{type:s,value:!0}),c=new l.default(u),t.next=10,c.v2({q:e,type:s,page:a.page});case 10:d=t.sent,i(\"SET_RESOURCE\",{q:e,type:s,data:d});case 12:case\"end\":return t.stop()}},t,n)}))()}};e.default={namespaced:!0,state:function(){return{tabs:d,lastSearchKeywords:\"\",resource:s.default.apply(Object,[{}].concat((0,u.default)((0,i.default)(d).map(function(t){return(0,o.default)({},t,{list:[],page:0,total:0,noMore:!1,loading:!1})}))))}},actions:p,mutations:f,getters:{}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=u(n(7)),a=u(n(5)),o=u(n(6)),i=u(n(8)),s=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(){return(0,a.default)(this,e),(0,i.default)(this,(e.__proto__||(0,r.default)(e)).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:\"index\",value:function(t){return this.http.get(\"search/index\",{params:t})}},{key:\"v2\",value:function(t){var e=t.q,n=t.type,r=t.page;return this.http.get(\"search/new\",{params:{q:e,type:n,page:r}})}}]),e}(u(n(10)).default);e.default=l},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.createRouter=function(){return new a.default({mode:\"history\",base:\"/\",scrollBehavior:function(t,e,n){return{x:0,y:0}},routes:[{path:\"/\",component:function(){return n.e(8).then(n.bind(null,153))},children:[{path:\"\",name:\"homepage\",component:function(){return n.e(10).then(n.bind(null,154))}},{path:\"search\",name:\"search-index\",component:function(){return n.e(3).then(n.bind(null,155))}}]},{path:\"/\",component:function(){return n.e(0).then(n.bind(null,156))},children:[{path:\"bangumi/:id(\\\\d+)\",name:\"bangumi-show\",component:function(){return n.e(2).then(n.bind(null,158))}},{path:\"bangumi/timeline\",name:\"bangumi-timeline\",component:function(){return n.e(18).then(n.bind(null,159))}},{path:\"bangumi/news\",name:\"bangumi-news\",component:function(){return n.e(15).then(n.bind(null,160))}},{path:\"bangumi/tags/:id?\",name:\"bangumi-tags\",component:function(){return n.e(19).then(n.bind(null,163))}},{path:\"user/:zone\",name:\"user-show\",component:function(){return n.e(7).then(n.bind(null,164))}},{path:\"me/setting\",name:\"user-setting\",component:function(){return n.e(9).then(n.bind(null,165))}},{path:\"me/invite\",name:\"user-invite\",component:function(){return n.e(12).then(n.bind(null,167))}},{path:\"post/trending/:sort\",name:\"post-trending\",component:function(){return n.e(13).then(n.bind(null,168))}},{path:\"post/:id(\\\\d+)\",name:\"post-show\",component:function(){return n.e(1).then(n.bind(null,169))}},{path:\"notification/list\",name:\"notification-list\",component:function(){return n.e(17).then(n.bind(null,170))}},{path:\"about/hello\",name:\"hello\",component:function(){return n.e(21).then(n.bind(null,171))}},{path:\"about/invite/:id(\\\\d+)\",name:\"invite-user\",component:function(){return n.e(20).then(n.bind(null,172))}},{path:\"video/:id(\\\\d+)\",component:function(){return n.e(4).then(n.bind(null,173))}},{path:\"role/trending\",component:function(){return n.e(16).then(n.bind(null,174))}},{path:\"role/:id(\\\\d+)\",name:\"role-show\",component:function(){return n.e(11).then(n.bind(null,175))}},{path:\"image/trending/:sort\",name:\"image-trending\",component:function(){return n.e(14).then(n.bind(null,176))}},{path:\"image/album/:id(\\\\d+)\",name:\"image-album\",component:function(){return n.e(5).then(n.bind(null,177))}}]},{path:\"/campaign\",component:function(){return n.e(22).then(n.bind(null,178))},children:[{path:\"canvas\",component:function(){return n.e(6).then(n.bind(null,179))}}]}]})};var r=i(n(13)),a=i(n(84)),o=i(n(85));function i(t){return t&&t.__esModule?t:{default:t}}r.default.use(a.default),r.default.use(o.default,{keyName:\"head\",attribute:\"data-n-head\",ssrAttribute:\"data-n-head-ssr\",tagIDKeyName:\"hid\"})},function(t,e){t.exports=require(\"vue-router\")},function(t,e){t.exports=require(\"vue-meta\")},function(t,e){},function(t,e,n){\"use strict\";var r=A(n(88)),a=A(n(89)),o=A(n(90)),i=A(n(91)),s=A(n(92)),u=A(n(93)),l=(A(n(94)),A(n(95))),c=(A(n(96)),A(n(97))),d=(A(n(98)),A(n(99))),f=(A(n(100)),A(n(101))),p=(A(n(102)),A(n(103))),m=(A(n(104)),A(n(105))),h=(A(n(106)),A(n(107))),g=(A(n(108)),A(n(109)));n(110),n(111),n(112),n(113),n(114),n(115),n(116);var v=A(n(13)),b=A(n(20)),_=A(n(117)),w=A(n(118)),x=A(n(120)),y=A(n(121)),k=A(n(122)),E=A(n(124)),S=A(n(128)),T=A(n(132)),M=A(n(136)),I=A(n(140)),O=A(n(144));function A(t){return t&&t.__esModule?t:{default:t}}v.default.use(g.default),v.default.use(h.default),v.default.use(m.default),v.default.use(p.default),v.default.use(f.default),v.default.use(d.default),v.default.use(c.default),v.default.use(l.default),v.default.component(O.default.name,O.default),v.default.component(u.default.name,u.default),v.default.component(s.default.name,s.default),v.default.component(i.default.name,i.default),v.default.component(x.default.name,x.default),v.default.component(y.default.name,y.default),v.default.component(k.default.name,k.default),v.default.component(E.default.name,E.default),v.default.component(S.default.name,S.default),v.default.component(T.default.name,T.default),v.default.component(M.default.name,M.default),v.default.component(I.default.name,I.default),v.default.component(o.default.name,o.default),v.default.component(a.default.name,a.default),v.default.component(r.default.name,r.default),v.default.use({install:function(t,e){t.prototype.$cdn=b.default.cdn,t.prototype.$channel=new t,t.prototype.$alias=_.default,t.prototype.$utils=w.default,t.prototype.$siteQR=b.default.cdn.image+\"owner/site-qr.png\",t.prototype.$resize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return\"\";if(/imageMogr2/.test(e))return e;var r=/^http/.test(e)?e:\"\"+b.default.cdn.image+e,a=function(){if(t.prototype.$isServer)return!1;if(void 0!==window.supportWebP)return window.supportWebP;var e=document.createElement(\"canvas\");if(e.getContext&&e.getContext(\"2d\")){var n=0===e.toDataURL(\"image/webp\").indexOf(\"data:image/webp\");return window.supportWebP=n,n}return!1}()?\"/format/webp\":\"\",o=void 0===n.mode?1:n.mode;if(1===o&&!n.width||!n.width&&!n.height)return r+\"?imageMogr2/auto-orient/strip\"+a;var i=void 0,s=void 0;return 1===o?(i=\"/w/\"+n.width,s=n.height?\"/h/\"+n.height:\"/h/\"+n.width):(i=n.width?\"/w/\"+n.width:\"\",s=n.height?\"/h/\"+n.height:\"\"),r+\"?imageMogr2/auto-orient/strip|imageView2/\"+o+i+s+a}}}),v.default.mixin({methods:{$computeImageAspect:function(t){var e=t.width,n=t.height;return e&&n?n/e:0}}})},function(t,e){t.exports=require(\"mint-ui/lib/badge\")},function(t,e){t.exports=require(\"mint-ui/lib/actionsheet\")},function(t,e){t.exports=require(\"mint-ui/lib/switch\")},function(t,e){t.exports=require(\"mint-ui/lib/picker\")},function(t,e){t.exports=require(\"mint-ui/lib/swipe-item\")},function(t,e){t.exports=require(\"mint-ui/lib/swipe\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/button\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/input\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/form-item\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/form\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/upload\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/dropdown-item\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/dropdown-menu\")},function(t,e){},function(t,e){t.exports=require(\"element-ui/lib/dropdown\")},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,a=n(14),o=(r=a)&&r.__esModule?r:{default:r};e.default={index:\"/\",__query:function(t,e){if(!e)return t;var n=\"?\";return(0,o.default)(e).forEach(function(t){n+=t+\"=\"+e[t]+\"&\"}),\"\"+t.split(\"?\").shift()+n.substring(0,n.length-1)},url:function(t,e){return this.__query(t,e)},user:function(t){return\"/user/\"+t},bangumi:function(t){return\"/bangumi/\"+t},video:function(t){return\"/video/\"+t},post:function(t,e){return this.__query(\"/post/\"+t,e)},bangumiTag:function(t){return t?\"/bangumi/tags?id=\"+t:\"/bangumi/tags\"},bangumiNews:\"/bangumi/news\",bangumiTimeline:\"/bangumi/timeline\",postTrending:function(t){return\"/post/trending/\"+t},imageAlbum:function(t){return\"/image/album/\"+t},cartoonRole:function(t){return\"/role/\"+t}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=i(n(18)),a=i(n(119)),o=i(n(27));function i(t){return t&&t.__esModule?t:{default:t}}e.default={shortenNumber:function(t){return t>1e3?Math.floor(t/1e3*10)/10+\"k\":t},camelize:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.replace(/(?:^|[-])(\\w)/g,function(t,e){return e?e.toUpperCase():\"\"});return e?n:n[0].toLowerCase()+n.substring(1)},setStyle:function(t,e,n){if(t&&e)if(\"object\"===(void 0===e?\"undefined\":(0,r.default)(e)))for(var a in e)e.hasOwnProperty(a)&&this.setStyle(t,a,e[a]);else\"opacity\"===(e=this.camelize(e,!1))&&Number(document.documentMode)<9?t.style.filter=isNaN(n)?\"\":\"alpha(opacity=\"+100*n+\")\":t.style[e]=n},timeLong:function(t){var e=/^\\d+$/.test(t)?13===t.toString().length?parseInt((t-0)/1e3,10):1e3*t:t.replace(/-/g,\"/\"),n=new Date(e);return n.getFullYear()+\"-\"+(\"0\"+(n.getMonth()+1)).substr(-2)+\"-\"+(\"0\"+n.getDate()).substr(-2)+\" \"+(\"0\"+n.getHours()).substr(-2)+\":\"+(\"0\"+n.getMinutes()).substr(-2)+\":\"+(\"0\"+n.getSeconds()).substr(-2)},orderBy:o.default,throttle:a.default,hackFocus:function(t){var e=t.button,n=t.input,r=t.statement;e instanceof Element&&n instanceof Element&&r&&e.addEventListener(\"click\",function(t){\"string\"==typeof r&&null===t.target.className.match(r)||(n.style.display=\"block\",n.focus())})},createFileName:function(t){var e=t.userId,n=t.type,r=t.id,a=t.file;return\"user/\"+e+\"/\"+n+\"/\"+r+\"/\"+(new Date).getTime()+\"-\"+Math.random().toString(36).substring(3,6)+\".\"+a.type.split(\"/\").pop()},getOffsetTop:function(t){var e=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop)}while(t=t.offsetParent);return e},shuffle:function(t){for(var e=t.length;e;e--){var n=Math.floor(Math.random()*e),r=[t[n],t[e-1]];t[e-1]=r[0],t[n]=r[1]}return t}}},function(t,e){t.exports=require(\"lodash/throttle\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"v-img\",props:{tag:{type:String,default:\"img\"},src:{required:!0,type:String,default:\"\"},width:{type:[Number,String],default:0},height:{type:[Number,String],default:0},scale:{type:[Number,String],default:1.3},mode:{type:[Number,String],default:1},events:{type:Array,default:function(){return[\"scroll\"]}},id:{},aspect:{type:Number,default:0},loading:{type:Boolean,default:!1},source:{type:Object,default:null},full:{type:Boolean,default:!1}},render:function(t){return this.canRender?this.full&&this.source&&this.source.width<window.innerWidth?t(\"div\",[t(this.tag,{class:[\"image-shim\",{\"image-lazy-init\":this.aspect,\"image-loading\":this.loading}],style:{width:this.source.width+\"px\",height:this.source.height+\"px\"}})]):t(this.tag,{class:{\"image-lazy-init\":this.aspect,\"image-loading\":this.loading},style:this.aspect?{paddingBottom:100*this.aspect+\"%\"}:{}}):t(this.tag,{style:this.aspect?{paddingBottom:100*this.aspect+\"%\"}:{}})},data:function(){return{listeners:{},resource:this.src,canRender:!1}},mounted:function(){var t=this;this.canRender=!0,this.$nextTick(function(){if(t.$checkInView(t.$el,t.scale-0))t.loadResource(t.$el);else{var e=t.$eventManager.add(document,t.events,t.$utils.throttle(function(){t.$checkInView(t.$el,t.scale-0)&&(t.loadResource(t.$el),t.$eventManager.del(e))},200));t.id&&t.$channel.$on(\"image-load-\"+t.id,function(){t.loadResource(t.$el),t.$eventManager.del(e),t.$channel.$off(\"image-load-\"+t.id)})}})},methods:{loadResource:function(t){var e=void 0;e=this.width&&this.height?this.$resize(this.resource,{width:2*(this.width-0),height:2*(this.height-0),mode:this.mode-0}):this.width?this.$resize(this.resource,{width:2*(this.width-0),mode:this.mode-0}):this.height?this.$resize(this.resource,{height:2*(this.height-0),mode:this.mode-0}):this.$resize(this.resource);var n=\"img\"===this.tag.toLowerCase(),r=this.full&&this.source&&this.source.width<window.innerWidth?t.querySelector(\".image-shim\"):t,a=this.aspect;n?(r.setAttribute(\"src\",e),(a||this.loading)&&r.addEventListener(\"load\",function(){r.removeAttribute(\"style\"),r.classList.remove(\"image-loading\"),a&&(r.classList.add(\"image-lazy-active\"),setTimeout(function(){r.classList.remove(\"image-lazy-active\",\"image-lazy-init\")},300))})):this.$utils.setStyle(r,\"background-image\",\"url(\"+e+\")\")}}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default={name:\"no-ssr\",props:[\"placeholder\"],data:function(){return{canRender:!1}},mounted:function(){this.canRender=!0},render:function(t){return this.canRender?this.$slots.default&&this.$slots.default[0]:t(\"div\",{class:[\"no-ssr-placeholder\"]},this.$slots.placeholder||this.placeholder)}}},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r,a=n(123),o=(r=a)&&r.__esModule?r:{default:r};var i=(0,o.default)();e.default={name:\"v-time\",props:{value:{default:parseInt(Date.now()/1e3,10).toString()}},render:function(t){return t(\"time\",{attrs:{datetime:this.$utils.timeLong(this.value)}})},mounted:function(){i.render(this.$el,\"zh_CN\")},beforeDestroy:function(){o.default.cancel(this.$el)}}},function(t,e){t.exports=require(\"timeago.js\")},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(29),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(127);var s=function(t){var e;(e=n(125)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"7fda95e2\");e.default=u.exports},function(t,e,n){var r=n(126);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"804cbb20\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.nomore-wraper{text-align:center}.nomore-wraper .nomore{padding:15px 0;background-color:#f5f5f5;font-size:12px;color:#999}.nomore-wraper .nothing{height:245px}.nomore-wraper .nothing img{width:160px;height:auto;display:block;margin:20px auto}.nomore-wraper .nothing button{margin-top:15px;position:relative;padding:4px 10px;font-size:14px;color:#333;background-color:transparent;border-radius:8px;white-space:nowrap}.nomore-wraper .nothing button:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #333;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}.nomore-wraper .loadmore{background-color:#fff;width:100%;height:44px;line-height:24px;font-size:14px;padding:10px 0}',\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"div\",{staticClass:\"nomore-wraper\"},[t.noMore?t._ssrNode('<div class=\"nomore\">',\"</div>\",[t.length?[t._ssrNode(\"\\n      没有更多了，休息一下吧\\n    \")]:t.loading?t._e():t._ssrNode('<div class=\"nothing\">',\"</div>\",[t._ssrNode(\"<img\"+t._ssrAttr(\"src\",t.$resize(t.$cdn.image+\"owner/no-content\",{width:300}))+' alt=\"no-content\"><p>还没有内容</p>'),t._t(\"default\")],2)],2):t._ssrNode(t.auto?'<button class=\"loadmore\"'+t._ssrStyle(null,null,{display:t.loading?\"\":\"none\"})+\">加载中...</button>\":'<button class=\"loadmore\">'+t._ssrEscape(t._s(t.loading?\"加载中...\":\"点击加载更多\"))+\"</button>\")],2)},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(30),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(131);var s=function(t){var e;(e=n(129)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,\"data-v-f5229084\",\"71e42ea6\");e.default=u.exports},function(t,e,n){var r=n(130);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"4ffab5ae\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling-data-v-f5229084{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling-data-v-f5229084{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.drawer[data-v-f5229084]{z-index:100;position:fixed;overflow-x:hidden;overflow-y:auto;background-color:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-overflow-scrolling:touch}.drawer.fade-bottom-enter-active[data-v-f5229084],.drawer.fade-bottom-leave-active[data-v-f5229084],.drawer.fade-left-enter-active[data-v-f5229084],.drawer.fade-left-leave-active[data-v-f5229084],.drawer.fade-right-enter-active[data-v-f5229084],.drawer.fade-right-leave-active[data-v-f5229084],.drawer.fade-top-enter-active[data-v-f5229084],.drawer.fade-top-leave-active[data-v-f5229084]{-webkit-transition:all .4s cubic-bezier(.1,.7,.1,1);-o-transition:all cubic-bezier(.1,.7,.1,1) .4s;transition:all .4s cubic-bezier(.1,.7,.1,1)}.drawer.fade-left-enter[data-v-f5229084],.drawer.fade-left-leave-to[data-v-f5229084]{-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);opacity:0}.drawer.fade-right-enter[data-v-f5229084],.drawer.fade-right-leave-to[data-v-f5229084]{-webkit-transform:translateX(100%);-ms-transform:translateX(100%);transform:translateX(100%);opacity:0}.drawer.fade-top-enter[data-v-f5229084],.drawer.fade-top-leave-to[data-v-f5229084]{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%);opacity:0}.drawer.fade-bottom-enter[data-v-f5229084],.drawer.fade-bottom-leave-to[data-v-f5229084]{-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%);opacity:0}.drawer .drawer-header[data-v-f5229084]{position:relative;height:46px;line-height:46px;z-index:1;border-bottom:1px solid #f0f0f0;margin-bottom:10px}.drawer .drawer-header button[data-v-f5229084]{position:absolute;font-size:16px;top:14px}.drawer .drawer-header h3[data-v-f5229084]{margin:0;font-size:16px;color:#333;text-align:center;padding:0 60px}.drawer .drawer-header .close-btn[data-v-f5229084]{left:20px}.drawer .drawer-header .submit-btn[data-v-f5229084]{right:20px}\",\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"no-ssr\",[n(\"transition\",{attrs:{name:\"fade-\"+t.from}},[n(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show,expression:\"show\"}],staticClass:\"drawer\",style:t.position},[t.headerText?n(\"header\",{staticClass:\"drawer-header\"},[n(\"button\",{staticClass:\"close-btn\",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.close(e)}}},[t._v(\"关闭\")]),n(\"h3\",{staticClass:\"oneline\",domProps:{textContent:t._s(t.headerText)}}),t.submitText?n(\"button\",{staticClass:\"submit-btn\",domProps:{textContent:t._s(t.submitText)},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.submit(e)}}}):t._e()]):t._e(),t._t(\"default\")],2)])],1)},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(31),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(135);var s=function(t){var e;(e=n(133)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"7e96f454\");e.default=u.exports},function(t,e,n){var r=n(134);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"7c56c4aa\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.mint-radiolist{text-align:left}.mint-radiolist .mint-radiolist-label{height:48px;display:block;padding:0 10px;position:relative}.mint-radiolist .mint-radiolist-label:before{content:\"\";position:absolute;left:0;height:1px;width:100%;background-color:#f0f0f0;bottom:0}.mint-radiolist .mint-radiolist-title{font-size:12px;padding:8px;display:block;color:#888;position:relative}.mint-radiolist .mint-radiolist-title:before{content:\"\";position:absolute;left:0;height:1px;width:100%;background-color:#f0f0f0;bottom:0}.mint-radio-wrap{height:48px;background-color:#fff}.mint-radio{display:inline-block;vertical-align:middle;line-height:48px;height:48px}.mint-radio.is-right{float:right}.mint-radio .mint-radio-input{opacity:0;width:0;height:0}.mint-radio .mint-radio-input:checked+.mint-radio-core{background-color:#26a2ff;border-color:#26a2ff}.mint-radio .mint-radio-input:checked+.mint-radio-core:after{background-color:#fff;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}.mint-radio .mint-radio-input[disabled]+.mint-radio-core{background-color:#d9d9d9;border-color:#ccc}.mint-radio .mint-radio-core{-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block;background-color:#fff;border-radius:100%;border:1px solid #ccc;position:relative;width:20px;height:20px;vertical-align:middle;top:-2px}.mint-radio .mint-radio-core:after{content:\"\";border-radius:100%;position:absolute;left:5px;top:5px;width:8px;height:8px;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;-o-transition:transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}.mint-radio-label{display:inline-block;height:48px;line-height:48px;vertical-align:middle;margin-left:6px}',\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"div\",{staticClass:\"mint-radiolist\",on:{change:function(e){t.$emit(\"change\",t.currentValue)}}},[t._ssrNode('<label class=\"mint-radiolist-title\">'+t._ssrEscape(t._s(t.title))+\"</label>\"+t._ssrList(t.options,function(e){return'<div class=\"mint-radio-wrap\"><label class=\"mint-radiolist-label\"><span'+t._ssrClass(\"mint-radio\",{\"is-right\":\"right\"===t.align})+'><input type=\"radio\"'+t._ssrAttr(\"disabled\",e.disabled)+t._ssrAttr(\"value\",e.value||e)+t._ssrAttr(\"checked\",t._q(t.currentValue,e.value||e))+' class=\"mint-radio-input\"><span class=\"mint-radio-core\"></span></span><span class=\"mint-radio-label\">'+t._ssrEscape(t._s(e.label||e))+\"</span></label></div>\"}))])},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(32),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(139);var s=function(t){var e;(e=n(137)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"1431259e\");e.default=u.exports},function(t,e,n){var r=n(138);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"5e3d4be8\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.v-select-wrap{position:relative}.v-select-wrap .v-select-text-area-wrap{height:100%;overflow:hidden}.v-select-wrap .v-select-text-area-wrap .v-select-selected-item-wrap{float:left;height:100%}.v-select-wrap .v-select-text-area-wrap .v-select-selected-item-wrap .v-select-selected-item{display:block;padding:15px;margin:0 5px;height:100%;float:left;cursor:pointer}.v-select-wrap .v-select-text-area-wrap .v-select-input-wrap{height:100%;overflow:hidden}.v-select-wrap .v-select-text-area-wrap .v-select-input-wrap .v-select-input{width:100%;height:100%}.v-select-wrap .v-select-submit-wrap{float:right;height:100%;cursor:pointer}.v-select-wrap .v-select-submit-wrap svg{width:16px;height:16px;vertical-align:middle;-webkit-transition-duration:.3s;-o-transition-duration:.3s;transition-duration:.3s}.v-select-wrap .v-select-submit-wrap.open svg{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.v-select-wrap .v-select-options-wrap{width:100%;cursor:pointer;position:absolute;left:0;top:100%;z-index:999}.v-select-wrap .v-select-options-wrap .v-select-options-item:hover{cursor:pointer}.v-select-wrap .v-select-options-wrap .v-select-options-item.disabled{cursor:not-allowed}.v-select-wrap .zoom-in-top-enter-active,.v-select-wrap .zoom-in-top-leave-active{opacity:1;-webkit-transform:scaleY(1);-ms-transform:scaleY(1);transform:scaleY(1);-webkit-transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);transition:opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-o-transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1);transition:transform .3s cubic-bezier(.23,1,.32,1),opacity .3s cubic-bezier(.23,1,.32,1),-webkit-transform .3s cubic-bezier(.23,1,.32,1);-webkit-transform-origin:center top;-ms-transform-origin:center top;transform-origin:center top}.v-select-wrap .zoom-in-top-enter,.v-select-wrap .zoom-in-top-leave-active{opacity:0;-webkit-transform:scaleY(0);-ms-transform:scaleY(0);transform:scaleY(0)}\",\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"v-select-wrap\"},[t._ssrNode(\"<div\"+t._ssrClass(\"v-select-submit-wrap\",{open:t.show})+\">\",\"</div>\",[t._t(\"tail\",[n(\"svg\",{attrs:{viewBox:\"0 0 10 6\",\"aria-hidden\":\"true\"}},[n(\"path\",{attrs:{d:\"M8.716.217L5.002 4 1.285.218C.99-.072.514-.072.22.218c-.294.29-.294.76 0 1.052l4.25 4.512c.292.29.77.29 1.063 0L9.78 1.27c.293-.29.293-.76 0-1.052-.295-.29-.77-.29-1.063 0z\"}})])])],2),t.enter?t._ssrNode('<div class=\"v-select-text-area-wrap\">',\"</div>\",[t.haveSelected?t._ssrNode('<ul class=\"v-select-selected-item-wrap\">',\"</ul>\",t._l(t.selectedList,function(e){return t._ssrNode('<li class=\"v-select-selected-item\">',\"</li>\",[t._t(\"selected\",[t.multi?n(\"span\",{staticClass:\"v-selected-selected-cancel\",on:{click:function(n){t.handleSelectedCancel(e)}}},[t._v(\"×\")]):t._e(),t._v(\"\\n          \"+t._s(e[\"\"+t.showLabel])+\"\\n        \")])],2)})):t.show?t._e():t._ssrNode('<div class=\"v-select-placeholder\">',\"</div>\",[t._t(\"placeholder\",[t._v(\"\\n        \"+t._s(t.placeholder)+\"\\n      \")])],2),t._ssrNode('<div class=\"v-select-input-wrap\"><input type=\"text\"'+t._ssrAttr(\"value\",t.input)+' class=\"v-select-input\"></div>')],2):t._ssrNode('<div class=\"v-select-text-area-wrap\">',\"</div>\",[t._ssrNode('<div class=\"v-select-input-wrap\">',\"</div>\",[t.haveSelected?t._ssrNode('<ul class=\"v-select-selected-item-wrap\">',\"</ul>\",t._l(t.selectedList,function(e){return t._ssrNode('<li class=\"v-select-selected-item\">',\"</li>\",[t._t(\"selected\",[t.multi?n(\"span\",{staticClass:\"v-selected-selected-cancel\",on:{click:function(n){t.handleSelectedCancel(e)}}},[t._v(\"×\")]):t._e(),t._v(\"\\n            \"+t._s(e[\"\"+t.showLabel])+\"\\n          \")])],2)})):t._ssrNode('<div class=\"v-select-placeholder\">',\"</div>\",[t._t(\"placeholder\",[t._v(\"\\n          \"+t._s(t.placeholder)+\"\\n        \")])],2)])]),n(\"transition\",{attrs:{name:\"zoom-in-top\"}},[n(\"ul\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.show,expression:\"show\"}],ref:\"ul\",staticClass:\"v-select-options-wrap\"},[t._t(\"options\",t._l(t.list,function(e){return n(\"li\",{key:e.__uuid__,staticClass:\"v-select-options-item\",class:{selected:e[\"\"+t.selectedLabel],disabled:e[\"\"+t.disabledLabel]},on:{click:function(n){t.handleOptionClick(e)}}},[t._v(\"\\n          \"+t._s(e[\"\"+t.showLabel])+\"\\n        \")])}))],2)])],1)},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(33),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(143);var s=function(t){var e;(e=this.$style=n(141)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"2c5112d6\");e.default=u.exports},function(t,e,n){var r=n(142);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"67a50b06\",r,!0,t)}},function(t,e,n){(e=t.exports=n(3)(!1)).push([t.i,'@keyframes rolling-1zinj_0{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling-1zinj_0{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.bangumi-panel-315Og_0 .avatar-qWuP1_0{display:block;float:left;width:80px;height:92px;border-radius:5px;margin-right:10px;overflow:hidden}.bangumi-panel-315Og_0 .content-2xs2H_0{overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;height:92px}.bangumi-panel-315Og_0 .content-2xs2H_0 .name-15bXN_0{font-size:16px;font-weight:700;display:block}.bangumi-panel-315Og_0 .content-2xs2H_0 .controls-aLRpM_0{text-align:right}.bangumi-panel-315Og_0 .content-2xs2H_0 .controls-aLRpM_0 .create-33g-t_0{position:relative;padding:4px 10px;font-size:14px;color:#333;background-color:transparent;border-radius:8px;white-space:nowrap;margin-right:10px}.bangumi-panel-315Og_0 .content-2xs2H_0 .controls-aLRpM_0 .create-33g-t_0:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #333;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}.bangumi-panel-315Og_0 .content-2xs2H_0 .controls-aLRpM_0 .follow-VTaUG_0{position:relative;padding:4px 10px;font-size:14px;color:#0381aa;background-color:transparent;border-radius:8px;white-space:nowrap}.bangumi-panel-315Og_0 .content-2xs2H_0 .controls-aLRpM_0 .follow-VTaUG_0:after{content:\"\";position:absolute;top:0;left:0;border:1px solid #0381aa;width:200%;height:200%;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);-webkit-transform-origin:left top;-ms-transform-origin:left top;transform-origin:left top;border-radius:8px}',\"\"]),e.locals={\"bangumi-panel\":\"bangumi-panel-315Og_0\",bangumiPanel:\"bangumi-panel-315Og_0\",avatar:\"avatar-qWuP1_0\",content:\"content-2xs2H_0\",name:\"name-15bXN_0\",controls:\"controls-aLRpM_0\",create:\"create-33g-t_0\",follow:\"follow-VTaUG_0\",rolling:\"rolling-1zinj_0\"}},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{class:t.$style.bangumiPanel},[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.bangumi(t.id))+t._ssrClass(null,t.$style.avatar)+\">\",\"</a>\",[n(\"v-img\",{attrs:{src:t.$resize(t.avatar,{width:80,height:92})}})],1),t._ssrNode(\"<div\"+t._ssrClass(null,t.$style.content)+\">\",\"</div>\",[t._ssrNode(\"<a\"+t._ssrAttr(\"href\",t.$alias.bangumi(t.id))+\"><h5\"+t._ssrClass(null,t.$style.name)+\">\"+t._ssrEscape(t._s(t.name))+\"</h5></a>\"),t._ssrNode(\"<div\"+t._ssrClass(null,t.$style.summary)+\">\",\"</div>\",[t._t(\"default\")],2),t._ssrNode(\"<div\"+t._ssrClass(null,t.$style.controls)+\"><button\"+t._ssrClass(null,t.$style.create)+\">发帖</button><button\"+t._ssrClass(null,t.$style.follow)+\">\"+t._ssrEscape(t._s(t.followed?\"已关注\":\"关注\"))+\"</button></div>\")],2)])},staticRenderFns:[]};e.a=r},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=n(34),a=n.n(r);for(var o in r)\"default\"!==o&&function(t){n.d(e,t,function(){return r[t]})}(o);var i=n(147);var s=function(t){var e;(e=n(145)).__inject__&&e.__inject__(t)},u=n(2)(a.a,i.a,!1,s,null,\"45f27b55\");e.default=u.exports},function(t,e,n){var r=n(146);\"string\"==typeof r&&(r=[[t.i,r,\"\"]]),r.locals&&(t.exports=r.locals);var a=n(4);t.exports.__inject__=function(t){a(\"436ef70c\",r,!0,t)}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,\"@keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes rolling{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.v-field{width:100%;height:48px}.v-field .label{float:left;height:100%;font-size:16px;line-height:48px}.v-field .input{overflow:hidden;height:100%}.v-field .input input{width:100%;height:100%;font-size:16px;line-height:20px;padding-top:14px;padding-bottom:14px;background-color:transparent;border:0}.v-field .close{float:right;width:48px;height:48px;position:relative}.v-field .close span{width:16px;height:16px;font-size:14px;line-height:14px;border-radius:50%;position:absolute;left:50%;top:50%;margin-left:-8px;margin-top:-8px;background-color:gray;text-align:center;color:#fff}\",\"\"])},function(t,e,n){\"use strict\";var r={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(\"div\",{staticClass:\"v-field\"},[t._ssrNode('<div class=\"label\"'+t._ssrStyle(null,{width:t.labelSize},null)+\">\"+t._ssrEscape(t._s(t.label))+'</div><div class=\"close\"'+t._ssrStyle(null,null,{display:t.text&&!t.disabled?\"\":\"none\"})+'><span>×</span></div><div class=\"input\">'+(\"checkbox\"===t.type?\"<input\"+t._ssrAttr(\"placeholder\",t.placeholder)+' type=\"checkbox\"'+t._ssrAttr(\"checked\",Array.isArray(t.text)?t._i(t.text,null)>-1:t.text)+\">\":\"radio\"===t.type?\"<input\"+t._ssrAttr(\"placeholder\",t.placeholder)+' type=\"radio\"'+t._ssrAttr(\"checked\",t._q(t.text,null))+\">\":\"<input\"+t._ssrAttr(\"placeholder\",t.placeholder)+t._ssrAttr(\"type\",t.type)+t._ssrAttr(\"value\",t.text)+\">\")+\"</div>\")])},staticRenderFns:[]};e.a=r},function(t,e){t.exports=require(\"babel-runtime/core-js/json/stringify\")},function(t,e){t.exports=require(\"vue-waterfall/lib/waterfall\")},function(t,e){t.exports=require(\"vue-waterfall/lib/waterfall-slot\")},function(t,e){t.exports=require(\"clipboard\")},function(t,e){t.exports=require(\"html2canvas\")},,,,,function(t,e){t.exports=require(\"mint-ui/lib/palette-button\")},,,,function(t,e){t.exports=require(\"vant/lib/tab\")},function(t,e){t.exports=require(\"vant/lib/tabs\")},,,,function(t,e){t.exports=require(\"vue-croppa\")}]);"
  },
  "maps": {}
}