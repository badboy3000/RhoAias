(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{495:function(t,e,a){},496:function(t,e,a){"use strict";var n=a(495);a.n(n).a},497:function(t,e,a){"use strict";var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-error"},[e("span",[this._v("出错了，点击重试")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-nothing"},[e("img",{attrs:{src:a(259),alt:"no-content"}}),this._v(" "),e("span",[this._v("这里什么都没有")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-loading"},[e("i"),this._v(" "),e("span",[this._v("加载中…")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-fetch-btn-text"},[e("span",[this._v("点击加载更多")])])}],s=a(5),i={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted:function(){this.auto&&this.onScroll()},methods:{getTarget:function(){for(var t=this.$el;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){var e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll:function(){var t=this;if(!this.error){s.a.checkInView(this.$el)&&this.fetch();var e=s.a.on(this.getTarget(),["scroll"],this.$utils.throttle(function(){t.error||(!t.noMore&&t.auto?s.a.checkInView(t.$el)&&t.fetch():s.a.off(e))},200))}}}},r=(a(496),a(1)),o=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-state-wrap"},[t.error?a("div",{on:{click:t.fetch}},[t._t("error",[t._m(0)])],2):t.nothing?a("div",[t._t("nothing",[t._m(1)])],2):t.noMore?a("div",[t._t("no-more",[t.displayNoMore?a("div",{staticClass:"state-no-more"},[a("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?a("div",[t._t("loading",[t._m(2)])],2):t.auto?a("div",{staticClass:"state-shim"}):a("button",{on:{click:t.fetch}},[t._t("load-btn",[t._m(3)])],2)])},n,!1,null,null,null);o.options.__file="FlowState.vue";var l=o.exports,c=(a(45),{name:"FlowList",components:{FlowState:l},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source:function(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore:function(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,changing:this.changing,_extra:this.extra})}}}),u=Object(r.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.source?a("div",[t._t("default",null,{flow:t.source.list}),t._v(" "),a("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,null);u.options.__file="FlowList.vue";e.a=u.exports},504:function(t,e,a){},534:function(t,e,a){"use strict";var n=a(504);a.n(n).a},546:function(t,e,a){"use strict";a(13),a(45),a(260),a(3);var n=a(167),s={name:"ScoreFlowItem",components:{"el-rate":a.n(n).a},props:{item:{required:!0,type:Object},bangumiId:{required:!0,type:[String,Number]},userZone:{required:!0,type:String}},data:function(){return{zero:0}},computed:{pageName:function(){return this.$route.name},starCount:function(){return this.item.total/2}},methods:{linkStart:function(){this.$router.push(this.$alias.score(this.item.id))}}},i=(a(534),a(1)),r=Object(i.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"score-flow-item"},[a("div",{on:{click:t.linkStart}},[t.item.bangumi&&t.item.user?a("div",{staticClass:"header trending-header"},[a("a",{staticClass:"user-avatar",attrs:{href:t.$alias.user(t.item.user.zone)}},[a("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),a("div",{staticClass:"header-content"},[a("div",{staticClass:"about"},[t.starCount?a("el-rate",{attrs:{disabled:""},model:{value:t.starCount,callback:function(e){t.starCount=e},expression:"starCount"}}):a("el-rate",{attrs:{disabled:""},model:{value:t.zero,callback:function(e){t.zero=e},expression:"zero"}}),t._v(" "),a("a",{staticClass:"bangumi-name oneline",attrs:{href:t.$alias.bangumi(t.item.bangumi.id)},domProps:{textContent:t._s(t.item.bangumi.name)}})],1),t._v(" "),a("div",{staticClass:"meta"},[a("a",{staticClass:"author",attrs:{href:t.$alias.user(t.item.user.zone)},domProps:{textContent:t._s(t.item.user.nickname)}}),t._v("\n           · \n          "),a("v-time",{staticClass:"created-at",model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)])]):t.item.bangumi?t.item.user?t._e():a("div",{staticClass:"header user-header"},[t.starCount?a("el-rate",{attrs:{disabled:""},model:{value:t.starCount,callback:function(e){t.starCount=e},expression:"starCount"}}):a("el-rate",{attrs:{disabled:""},model:{value:t.zero,callback:function(e){t.zero=e},expression:"zero"}}),t._v(" "),a("a",{staticClass:"bangumi",attrs:{href:t.$alias.bangumi(t.item.bangumi.id)}},[a("div",{staticClass:"bangumi-avatar"},[a("v-img",{attrs:{src:t.item.bangumi.avatar,width:"23",height:"23"}})],1),t._v(" "),a("div",{staticClass:"nickname oneline",domProps:{textContent:t._s(t.item.bangumi.name)}})])],1):a("div",{staticClass:"header bangumi-header"},[t.starCount?a("el-rate",{attrs:{disabled:""},model:{value:t.starCount,callback:function(e){t.starCount=e},expression:"starCount"}}):a("el-rate",{attrs:{disabled:""},model:{value:t.zero,callback:function(e){t.zero=e},expression:"zero"}}),t._v(" "),a("a",{staticClass:"user",attrs:{href:t.$alias.user(t.item.user.zone)}},[a("div",{staticClass:"user-avatar"},[a("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),a("div",{staticClass:"nickname oneline",domProps:{textContent:t._s(t.item.user.nickname)}})])],1),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"title"},[a("p",{staticClass:"oneline",domProps:{textContent:t._s(t.item.title)}})]),t._v(" "),t.item.banner?a("v-img",{staticClass:"poster-image",attrs:{src:t.item.banner.url,width:"100%",height:"130"}}):t._e(),t._v(" "),a("div",{staticClass:"content",domProps:{textContent:t._s(t.item.intro)}})],1),t._v(" "),a("div",{staticClass:"footer"},[t.item.is_creator?a("div",[a("i",{staticClass:"iconfont icon-fantuan"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.reward_count)))])]):a("div",[a("i",{staticClass:"iconfont icon-like"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.like_count)))])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont icon--mark"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.mark_count)))])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont icon-talk"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.comment_count)))])])])]),t._v(" "),a("div",{staticClass:"hr"})])},[],!1,null,null,null);r.options.__file="ScoreFlowItem.vue";e.a=r.exports},626:function(t,e,a){},795:function(t,e,a){"use strict";var n=a(626);a.n(n).a},933:function(t,e,a){"use strict";a.r(e);a(12);var n=a(2),s=a.n(n),i=a(497),r=(a(10),a(46),{components:{VeRadar:function(){return"undefined"==typeof window?a.e(1).then(a.bind(null,923)):a.e(64).then(a.t.bind(null,925,7))}},props:{source:{type:Object,required:!0},loading:{type:Boolean,default:!1},size:{type:String,default:"400px"}},data:function(){var t={total:"总分",lol:"笑点",cry:"泪点",fight:"燃点",moe:"萌点",sound:"音乐",vision:"画面",story:"情节",role:"人设",express:"内涵",style:"美感"},e=Object.keys(t),a=e.filter(function(t){return"total"!==t});return{chartExtend:{radar:{indicator:a.map(function(e){return{name:t[e],max:10}}),shape:"polygon",splitArea:{show:!1},axisLine:{show:!0,lineStyle:{color:"##ccd0d7",type:"dotted"}},splitLine:{show:!0,lineStyle:{color:"#ccd0d7",type:"dotted"}},silent:!1,splitNumber:10},series:{areaStyle:{normal:{}},label:{normal:{show:!0}}}},chartSettings:{labelMap:t,dimension:"total",metrics:a},chartData:{columns:e,rows:[this.source]}}}}),o=a(1),l=Object(o.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("not-ssr",{style:{height:this.size}},[e("ve-radar",{attrs:{data:this.chartData,setting:this.chartSettings,extend:this.chartExtend,loading:this.loading,width:this.size,height:this.size,"legend-visible":!1,"tooltip-visible":!1,resizeable:!1}})],1)},[],!1,null,null,null);l.options.__file="BangumiScoreChart.vue";var c=l.exports,u=a(122),d=a(546),m={name:"BangumiScore",asyncData:function(){var t=s()(regeneratorRuntime.mark(function t(e){var a,n,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.app,n=e.params,t.next=3,Object(u.d)(a,{id:n.id});case 3:return s=t.sent,t.abrupt("return",{bangumiScore:s});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),fetch:function(){var t=s()(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.store,n=e.params,t.next=3,a.dispatch("flow/initData",{id:n.id,func:"getBangumiScore",type:"seenIds",sort:"active"});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{FlowList:i.a,BangumiScoreChart:c,ScoreFlowItem:d.a},props:{id:{required:!0,type:String}},data:function(){return{bangumiScore:null}},computed:{totalRate:function(){return this.bangumiScore.total/20},totalScore:function(){return this.bangumiScore.total/10}}},v=(a(795),Object(o.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bangumi-score"}},[t.bangumiScore?a("el-row",{attrs:{id:"bangumi-score-panel"}},[a("el-col",{staticClass:"bangumi-score-total container"},[a("div",{staticClass:"ladder"},t._l(t.bangumiScore.ladder,function(e,n){return a("div",{key:n,staticClass:"star"},[a("span",{staticClass:"label"},[t._v(t._s(e.key)+"星")]),t._v(" "),a("div",{staticClass:"score",style:{width:100*e.val/t.bangumiScore.count+"px"}}),t._v(" "),a("span",{staticClass:"percent",domProps:{textContent:t._s((e.val/t.bangumiScore.count*100).toFixed(1)+"%")}})])}),0),t._v(" "),a("div",{staticClass:"intro"},[a("div",{staticClass:"total",domProps:{textContent:t._s(t.totalScore)}}),t._v(" "),a("div",{staticClass:"rate"},[a("el-rate",{attrs:{disabled:""},model:{value:t.totalRate,callback:function(e){t.totalRate=e},expression:"totalRate"}}),t._v(" "),a("span",{staticClass:"count"},[t._v(t._s(t.bangumiScore.count)+"人评价")])],1)])]),t._v(" "),a("el-col",{staticClass:"bangumi-score-wrap"},[a("bangumi-score-chart",{attrs:{source:t.bangumiScore.radar,size:"300px"}})],1)],1):t._e(),t._v(" "),a("flow-list",{attrs:{id:t.id,func:"getBangumiScore",type:"seenIds",sort:"active"},scopedSlots:t._u([{key:"header",fn:function(e){var n=e.source;return n.total?a("h3",{staticClass:"sub-title"},[t._v("\n      共 "+t._s(n.total)+" 条漫评\n    ")]):t._e()}},{key:"default",fn:function(e){var n=e.flow;return a("ul",{},t._l(n,function(e){return a("score-flow-item",{key:e.id,attrs:{item:e,"bangumi-id":t.id,"user-zone":""}})}),1)}}])})],1)},[],!1,null,null,null));v.options.__file="review.vue";e.default=v.exports}}]);
//# sourceMappingURL=review.chunk.659508ce.js.map