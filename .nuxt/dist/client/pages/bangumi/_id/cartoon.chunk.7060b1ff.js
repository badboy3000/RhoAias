(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{495:function(t,e,o){},496:function(t,e,o){"use strict";var n=o(495);o.n(n).a},497:function(t,e,o){"use strict";var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-error"},[e("span",[this._v("出错了，点击重试")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-nothing"},[e("img",{attrs:{src:o(259),alt:"no-content"}}),this._v(" "),e("span",[this._v("这里什么都没有")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-loading"},[e("i"),this._v(" "),e("span",[this._v("加载中…")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-fetch-btn-text"},[e("span",[this._v("点击加载更多")])])}],i=o(5),a={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted:function(){this.auto&&this.onScroll()},methods:{getTarget:function(){for(var t=this.$el;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){var e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll:function(){var t=this;if(!this.error){i.a.checkInView(this.$el)&&this.fetch();var e=i.a.on(this.getTarget(),["scroll"],this.$utils.throttle(function(){t.error||(!t.noMore&&t.auto?i.a.checkInView(t.$el)&&t.fetch():i.a.off(e))},200))}}}},r=(o(496),o(1)),s=Object(r.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flow-state-wrap"},[t.error?o("div",{on:{click:t.fetch}},[t._t("error",[t._m(0)])],2):t.nothing?o("div",[t._t("nothing",[t._m(1)])],2):t.noMore?o("div",[t._t("no-more",[t.displayNoMore?o("div",{staticClass:"state-no-more"},[o("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?o("div",[t._t("loading",[t._m(2)])],2):t.auto?o("div",{staticClass:"state-shim"}):o("button",{on:{click:t.fetch}},[t._t("load-btn",[t._m(3)])],2)])},n,!1,null,null,null);s.options.__file="FlowState.vue";var l=s.exports,c=(o(45),{name:"FlowList",components:{FlowState:l},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source:function(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore:function(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,changing:this.changing,_extra:this.extra})}}}),u=Object(r.a)(c,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.source?o("div",[t._t("default",null,{flow:t.source.list}),t._v(" "),o("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,null);u.options.__file="FlowList.vue";e.a=u.exports},625:function(t,e,o){},794:function(t,e,o){"use strict";var n=o(625);o.n(n).a},931:function(t,e,o){"use strict";o.r(e);o(12);var n=o(2),i=o.n(n),a=o(497),r=(o(45),{name:"CartoonFlowItem",props:{item:{type:Object,default:function(){}},bangumiId:{type:[Number,String],default:0}},data:function(){return{}}}),s=o(1),l=Object(s.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("li",{staticClass:"cartoon"},[o("a",{attrs:{href:t.$alias.image(t.item.id)}},[o("div",{staticClass:"poster-wrap"},[o("img",{attrs:{src:t.$resize(t.item.source.url,{width:290,height:420})}}),t._v(" "),o("div",{staticClass:"info"},[o("i",{staticClass:"el-icon-picture-outline"}),t._v(" "),o("span",{staticClass:"image-count",domProps:{textContent:t._s(t.item.image_count)}})])]),t._v(" "),o("div",{staticClass:"intro"},[o("p",{staticClass:"name oneline"},[t._v("【 "+t._s(t.item.part)+" 】"+t._s(t.item.name))])])])])},[],!1,null,null,null);l.options.__file="CartoonFlowItem.vue";var c=l.exports,u={name:"BangumiCartoonFlow",asyncData:function(){var t=i()(regeneratorRuntime.mark(function t(e){var o,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.store,n=e.params,t.next=3,o.dispatch("flow/initData",{id:n.id,func:"getBangumiCartoon",type:"page",sort:"asc"});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{FlowList:a.a,CartoonFlowItem:c},props:{id:{required:!0,type:String}},data:function(){return{sort:"asc"}},computed:{source:function(){return this.$store.getters["flow/getFlow"]("getBangumiCartoon",this.sort,this.id)}},methods:{handleSortSwitch:function(){var t="asc"===this.sort?"desc":"asc";this.$store.dispatch("flow/initData",{id:this.id,func:"getBangumiCartoon",type:"page",sort:t}),this.sort=t}}},d=(o(794),Object(s.a)(u,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"bangumi-cartoon-flow"}},[t.source.list.length?[o("h3",{staticClass:"sub-title"},[o("span",[t._v("共 "+t._s(t.source.total)+" 集")]),t._v(" "),o("button",{on:{click:function(e){t.handleSortSwitch()}}},[o("i",{staticClass:"el-icon-d-caret"}),t._v("\n        排序\n      ")])]),t._v(" "),o("flow-list",{attrs:{id:t.id,sort:t.sort,func:"getBangumiCartoon",type:"page"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.flow;return o("ul",{staticClass:"cartoon-list clearfix"},t._l(n,function(e){return o("cartoon-flow-item",{key:e.id,attrs:{"bangumi-id":t.id,item:e}})}),1)}}])})]:t._e()],2)},[],!1,null,null,null));d.options.__file="cartoon.vue";e.default=d.exports}}]);
//# sourceMappingURL=cartoon.chunk.7060b1ff.js.map