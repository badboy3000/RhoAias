{"version":3,"sources":["webpack:///./pages/bangumi/index/tags/_id.vue?8c56","webpack:///./pages/bangumi/index/tags/_id.vue?8a14","webpack:///./pages/bangumi/index/tags/_id.vue?7f73","webpack:///pages/bangumi/index/tags/_id.vue","webpack:///./pages/bangumi/index/tags/_id.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_1_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_1_4_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","tags_idvue_type_script_lang_js_","name","asyncData","_asyncData","asyncToGenerator_default","regeneratorRuntime","mark","_callee","_ref","app","data","wrap","_context","prev","next","Object","bangumiApi","sent","abrupt","tags","map","_","assign","selected","stop","this","_x","apply","arguments","head","title","recommendedBangumis","loading","bangumis","noMore","page","take","total","counter","computed","moreBtnShow","filter","id","join","showEmpty","some","every","tagsList","begin","end","slice","methods","selectTag","tag","loadBangumis","_loadBangumis","_callee2","_context2","concat","list","finish","choiceTags","length","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","on","click","style","transform","_l","key","$event","class","domProps","textContent","_s","preventDefault","item","href","$alias","bangumi","src","avatar","width","height","summary","_e","no-more","auto","fetch","options","__file","__webpack_exports__"],"mappings":"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","file":"pages/bangumi/index/tags/_id.chunk.c8179b50.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",attrs:{\"id\":\"bangumi-tag\"}},[_c('div',{attrs:{\"id\":\"tags\"}},[_c('h3',{staticClass:\"sub-title\"},[_vm._v(\"\\n      标签列表\\n      \"),_c('span',{staticClass:\"tag-change\",on:{\"click\":_vm.choiceTags}},[_c('i',{staticClass:\"el-icon-refresh\",style:({ transform: (\"rotate(\" + (_vm.counter * 360) + \"deg)\") })}),_vm._v(\"换一换\\n      \")])]),_vm._v(\" \"),_c('ul',[_vm._l((_vm.tagsList),function(tag){return _c('li',{key:tag.id,on:{\"click\":function($event){_vm.selectTag(tag)}}},[_c('a',{class:{ 'selected': tag.selected },domProps:{\"textContent\":_vm._s(tag.name)},on:{\"click\":function($event){$event.preventDefault();}}})])}),_vm._v(\" \"),_c('button',{staticClass:\"btn\",on:{\"click\":_vm.loadBangumis}},[_vm._v(\"点击搜索\")])],2)]),_vm._v(\" \"),(_vm.bangumis.total)?_c('div',{attrs:{\"id\":\"bangumis\"}},[_c('div',{staticClass:\"hr\"}),_vm._v(\" \"),_c('h3',{staticClass:\"sub-title\"},[_vm._v(\"番剧列表(\"+_vm._s(_vm.bangumis.total)+\")\")]),_vm._v(\" \"),_c('ul',_vm._l((_vm.bangumis.data),function(item){return _c('li',{key:item.id},[_c('a',{staticClass:\"bangumi-a\",attrs:{\"href\":_vm.$alias.bangumi(item.id)}},[_c('v-img',{staticClass:\"face\",attrs:{\"src\":item.avatar,\"width\":\"60\",\"height\":\"60\"}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('p',{staticClass:\"name\",domProps:{\"textContent\":_vm._s(item.name)}}),_vm._v(\" \"),_c('p',{staticClass:\"body\",domProps:{\"textContent\":_vm._s(item.summary)}})])],1)])}),0)]):_vm._e(),_vm._v(\" \"),(_vm.moreBtnShow)?_c('more-btn',{attrs:{\"no-more\":_vm.bangumis.noMore,\"length\":_vm.bangumis.data.length,\"loading\":_vm.loading,\"auto\":true},on:{\"fetch\":_vm.loadBangumis}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","<style lang=\"scss\">\n#bangumi-tag {\n  .sub-title {\n    margin-top: 10px;\n\n    .tag-change {\n      float: right;\n      color: $color-text-light;\n      font-size: 13px;\n      line-height: 16px;\n\n      i {\n        display: inline-block;\n        line-height: 1;\n        transition: 0.5s ease;\n        margin-right: 3px;\n      }\n    }\n  }\n\n  #tags {\n    li {\n      float: left;\n      margin-right: 8px;\n      margin-bottom: 6px;\n    }\n\n    a {\n      display: inline-block;\n      padding: 0 5px;\n      height: 24px;\n      line-height: 22px;\n      font-size: 12px;\n      color: $color-pink-normal;\n      border-radius: 4px;\n      border: 1px solid $color-pink-normal;\n      font-weight: 700;\n    }\n\n    .selected {\n      background-color: $color-pink-deep;\n      border-color: $color-pink-deep;\n      color: #fff;\n    }\n\n    .btn {\n      width: 100%;\n      height: 30px;\n      line-height: 28px;\n      font-size: 13px;\n      text-align: center;\n      border: 1px solid #666;\n      border-radius: 15px;\n      margin: 5px 0 10px 0;\n    }\n  }\n\n  #bangumis {\n    $bangumi-height: 60px;\n    li {\n      margin-bottom: 10px;\n      height: $bangumi-height;\n      .bangumi-a {\n        display: flex;\n        .face {\n          flex-shrink: 0;\n          height: 60px !important;\n          width: 60px !important;\n          margin-right: 10px;\n          border-radius: 5px;\n        }\n\n        .content {\n          overflow: hidden;\n\n          .name {\n            font-size: 14px;\n            font-weight: bold;\n            margin-bottom: 4px;\n            margin-top: 1px;\n          }\n\n          .body {\n            color: $color-text-light;\n            font-size: 13px;\n            @include twoline(18px);\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n\n<template>\n  <div\n    id=\"bangumi-tag\"\n    class=\"container\"\n  >\n    <div id=\"tags\">\n      <h3 class=\"sub-title\">\n        标签列表\n        <span\n          class=\"tag-change\"\n          @click=\"choiceTags\"\n        >\n          <i\n            :style=\"{ transform: `rotate(${counter * 360}deg)` }\"\n            class=\"el-icon-refresh\"\n          />换一换\n        </span>\n      </h3>\n      <ul>\n        <li\n          v-for=\"tag in tagsList\"\n          :key=\"tag.id\"\n          @click=\"selectTag(tag)\"\n        >\n          <a\n            :class=\"{ 'selected': tag.selected }\" \n            @click.prevent\n            v-text=\"tag.name\"\n          />\n        </li>\n        <button \n          class=\"btn\" \n          @click=\"loadBangumis\">点击搜索</button>\n      </ul>\n    </div>\n    <div \n      v-if=\"bangumis.total\" \n      id=\"bangumis\">\n      <div class=\"hr\"/>\n      <h3 class=\"sub-title\">番剧列表({{ bangumis.total }})</h3>\n      <ul>\n        <li \n          v-for=\"item in bangumis.data\" \n          :key=\"item.id\">\n          <a \n            :href=\"$alias.bangumi(item.id)\" \n            class=\"bangumi-a\">\n            <v-img\n              :src=\"item.avatar\"\n              width=\"60\"\n              height=\"60\"\n              class=\"face\"\n            />\n            <div class=\"content\">\n              <p \n                class=\"name\" \n                v-text=\"item.name\"/>\n              <p \n                class=\"body\" \n                v-text=\"item.summary\"/>\n            </div>\n          </a>\n        </li>\n      </ul>\n    </div>\n    <more-btn\n      v-if=\"moreBtnShow\"\n      :no-more=\"bangumis.noMore\"\n      :length=\"bangumis.data.length\"\n      :loading=\"loading\"\n      :auto=\"true\"\n      @fetch=\"loadBangumis\"\n    />\n  </div>\n</template>\n\n<script>\nimport { getAllBangumiTag, getCategoryBangumis } from '~/api/bangumiApi'\n\nexport default {\n  name: 'BangumiTags',\n  async asyncData({ app }) {\n    const data = await getAllBangumiTag(app)\n    return {\n      tags: data.map(_ => {\n        return Object.assign(_, {\n          selected: false\n        })\n      })\n    }\n  },\n  head: {\n    title: '分类索引 - 番剧'\n  },\n  data() {\n    return {\n      recommendedBangumis: [],\n      loading: false,\n      bangumis: {\n        data: [],\n        noMore: false,\n        page: 0,\n        take: 10,\n        total: 0\n      },\n      counter: 0\n    }\n  },\n  computed: {\n    moreBtnShow() {\n      return this.tags\n        .filter(_ => _.selected)\n        .map(_ => _.id)\n        .join('-')\n    },\n    showEmpty() {\n      return (\n        (this.tags.some(_ => _.selected) && !this.loading) ||\n        this.tags.every(_ => !_.selected)\n      )\n    },\n    tagsList() {\n      const begin = this.counter * 8\n      const end = begin + 8\n      return this.tags.slice(begin, end)\n    }\n  },\n  methods: {\n    selectTag(tag) {\n      if (this.loading) {\n        return\n      }\n      tag.selected = !tag.selected\n      this.bangumis = {\n        data: [],\n        noMore: false,\n        page: 0,\n        take: 10,\n        total: 0\n      }\n    },\n    async loadBangumis() {\n      if (this.loading || this.bangumis.noMore) {\n        return\n      }\n      const tags = this.tags\n        .filter(_ => _.selected)\n        .map(_ => _.id)\n        .join('-')\n      this.loading = true\n      try {\n        const data = await getCategoryBangumis(this, {\n          page: this.bangumis.page,\n          take: this.bangumis.take,\n          tags\n        })\n        this.bangumis.data = this.bangumis.data.concat(data.list)\n        this.bangumis.noMore = data.noMore\n        this.bangumis.total = data.total\n        this.bangumis.page++\n      } finally {\n        this.loading = false\n      }\n    },\n    choiceTags() {\n      if ((this.counter + 1) * 8 >= this.tags.length) {\n        this.counter = 0\n      } else {\n        this.counter++\n      }\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=7d9be24c&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\nimport style0 from \"./_id.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"_id.vue\"\nexport default component.exports"],"sourceRoot":""}