{"version":3,"sources":["webpack:///./components/panel/BangumiPanel.vue?f0c6","webpack:///./components/panel/BangumiPanel.vue?2c25","webpack:///./components/panel/BangumiPanel.vue?4e9b","webpack:///./components/panel/BangumiPanel.vue?2497","webpack:///components/panel/BangumiPanel.vue","webpack:///./components/panel/BangumiPanel.vue","webpack:///./components/common/SocialPanel.vue?e218","webpack:///./components/common/ImagePreview/ImagePreview.vue?3b94","webpack:///./components/common/SocialPanel.vue?95f3","webpack:///./components/common/SocialPanel.vue?7039","webpack:///components/common/SocialPanel.vue","webpack:///./components/common/SocialPanel.vue","webpack:///./components/common/ImagePreview/ImagePreview.vue?719b","webpack:///./components/common/ImagePreview/ImagePreview.vue?3dff","webpack:///components/common/ImagePreview/ImagePreview.vue","webpack:///./components/common/ImagePreview/ImagePreview.vue","webpack:///./components/common/ImagePreview/ImagePreview.vue?5d7a","webpack:///./components/post/PostCommentItem.vue?fd10","webpack:///./pages/post/_id.vue?3cb5","webpack:///./pages/post/_id.vue?5d29","webpack:///./components/post/PostCommentItem.vue?424e","webpack:///components/post/PostCommentItem.vue","webpack:///./components/post/PostCommentItem.vue","webpack:///./components/post/PostCommentItem.vue?35a3","webpack:///./pages/post/_id.vue?0281","webpack:///pages/post/_id.vue","webpack:///./api/postApi.js","webpack:///./pages/post/_id.vue"],"names":["module","exports","bangumi-panel","bangumiPanel","avatar","content","name","controls","rolling","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_0_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_0_4_node_modules_vue_loader_lib_index_js_vue_loader_options_BangumiPanel_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_0_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_0_4_node_modules_vue_loader_lib_index_js_vue_loader_options_BangumiPanel_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","panel_BangumiPanelvue_type_script_lang_js_","components","FollowButton","props","id","required","type","Number","String","component","Object","componentNormalizer","_vm","this","_h","$createElement","_c","_self","class","$style","attrs","to","$alias","bangumi","src","width","height","_v","staticClass","domProps","textContent","_s","summary","_t","context","BangumiPanelvue_type_style_index_0_lang_scss_module_true_","locals","options","__file","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_1_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_1_4_node_modules_vue_loader_lib_index_js_vue_loader_options_SocialPanel_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","image-preview","imagePreview","container","bar","top-bar","topBar","foot-bar","footBar","wrap","item","close","download","next-btn","nextBtn","prev-btn","prevBtn","common_SocialPanelvue_type_script_lang_js_","isCreator","Boolean","isMine","validator","val","indexOf","computed","isGuest","$store","state","login","source","getters","displayUsers","reward_users","list","like_users","slice","displayCount","methods","computeTextByAction","action","toggleAction","_this","$channel","$emit","$toast","info","concat","reward","$confirm","confirmButtonText","cancelButtonText","then","submitAction","catch","_submitAction","asyncToGenerator_default","regeneratorRuntime","mark","_callee","data","_context","prev","next","dispatch","sent","success","result","stop","_x","apply","arguments","is-plain","loading","reward_loading","icon","round","size","on","click","$event","total","_e","like","like_loading","mark_loading","mark_users","_l","user","key","$resize","ImagePreview_ImagePreviewvue_type_script_lang_js_","images","Array","default","query","show","currentIndex","maxWidth","maxHeight","displayImages","map","_","assign","finalWidth","finalHeight","length","currentImage","mounted","getScreenSize","window","addEventListener","handleClose","handleClick","e","target","isIMG","tagName","toLowerCase","className","imageUrl","getAttribute","split","img","querySelector","getClickImageIndex","computeDisplaySize","forEach","image","index","url","innerWidth","innerHeight","switchImage","isNext","newIndex","getSiblingsIndex","prevIndex","nextIndex","imageWidth","imageHeight","widthRadio","heightRadio","parseInt","handleSwitch","oldVal","href","stopPropagation","style","backgroundImage","webP","ImagePreviewvue_type_style_index_0_lang_scss_module_true_","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_0_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_0_4_node_modules_vue_loader_lib_index_js_vue_loader_options_ImagePreview_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_0_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_0_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_0_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_0_4_node_modules_vue_loader_lib_index_js_vue_loader_options_ImagePreview_vue_vue_type_style_index_0_lang_scss_module_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_1_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_1_4_node_modules_vue_loader_lib_index_js_vue_loader_options_PostCommentItem_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_6_oneOf_1_3_node_modules_sass_resources_loader_lib_loader_js_ref_6_oneOf_1_4_node_modules_vue_loader_lib_index_js_vue_loader_options_id_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","post_PostCommentItemvue_type_script_lang_js_","SubCommentList","ImagePreview","VPopover","Popover","post","masterId","preview","deleting","liking","currentUserId","canDelete","actions","push","method","deletePost","liked","toggleLike","_toggleLike","abrupt","ctx","finish","handleCommentBtnClick","targetUserId","from_user_id","targetUserName","from_user_name","from_user_zone","from_user_avatar","report-id","report-type","floor_count","model","value","callback","$$v","$set","expression","idx","full","innerHTML","parent-comment","like_count","PostCommentItem","post_idvue_type_script_lang_js_","asyncData","_ref","store","params","app","error","only","hash","time","$axios","$get","getPostInfo","commit","rewarded","marked","follow","followed","master","fetch","_fetch","_ref2","onlySeeMaster","seeReplyId","t0","CommentMain","SocialPanel","BangumiPanel","head","title","loadingToggleLike","loadingToggleMark","lastScroll","isScrollTop","comment","$route","isMaster","handleReplyBtnClick","switchOnlyMaster","$utils","throttle","scrollTop","document","documentElement","body","handleBangumiFollow","location","_this2","_callee2","_context2","_ref3","$post","reload","_id_component","zone","is-creator","is_creator","nickname","shortenNumber","view_count","tag","is-mine","only-see-master","bottom-append-comment","lazy","master-id","empty-text","scopedSlots","_u","fn","ref","preview_images","slot"],"mappings":"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","file":"pages/post/_id.chunk.e55c34d3.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"bangumi-panel\":\"bangumi-panel-b5\",\"bangumiPanel\":\"bangumi-panel-b5\",\"avatar\":\"avatar-2K\",\"content\":\"content-2m\",\"name\":\"name-5O\",\"controls\":\"controls-1p\",\"rolling\":\"rolling-nc\"};","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-0-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-0-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-0-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BangumiPanel.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-0-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-0-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-0-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-0-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BangumiPanel.vue?vue&type=style&index=0&lang=scss&module=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.bangumiPanel},[_c('nuxt-link',{class:_vm.$style.avatar,attrs:{\"to\":_vm.$alias.bangumi(_vm.id)}},[_c('v-img',{attrs:{\"src\":_vm.avatar,\"width\":\"80\",\"height\":\"92\"}})],1),_vm._v(\" \"),_c('div',{class:_vm.$style.content},[_c('nuxt-link',{attrs:{\"to\":_vm.$alias.bangumi(_vm.id)}},[_c('h5',{staticClass:\"oneline\",class:_vm.$style.name,domProps:{\"textContent\":_vm._s(_vm.name)}})]),_vm._v(\" \"),_c('div',{class:_vm.$style.summary},[_vm._t(\"default\")],2),_vm._v(\" \"),_c('div',{class:_vm.$style.controls},[_c('follow-button',{attrs:{\"id\":_vm.id,\"type\":\"bangumi\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BangumiPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BangumiPanel.vue?vue&type=script&lang=js&\"","<style lang=\"scss\" module>\n$panel-height: 92px;\n\n.bangumi-panel {\n  .avatar {\n    display: block;\n    float: left;\n    width: 80px;\n    height: $panel-height;\n    border-radius: 5px;\n    margin-right: 10px;\n    overflow: hidden;\n  }\n\n  .content {\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: $panel-height;\n\n    .name {\n      font-size: 16px;\n      font-weight: bold;\n      display: block;\n    }\n\n    .controls {\n      text-align: right;\n    }\n  }\n}\n</style>\n\n<template>\n  <div :class=\"$style.bangumiPanel\">\n    <nuxt-link\n      :class=\"$style.avatar\" \n      :to=\"$alias.bangumi(id)\">\n      <v-img \n        :src=\"avatar\" \n        width=\"80\" \n        height=\"92\" />\n    </nuxt-link>\n    <div :class=\"$style.content\">\n      <nuxt-link :to=\"$alias.bangumi(id)\">\n        <h5 \n          :class=\"$style.name\" \n          class=\"oneline\" \n          v-text=\"name\" />\n      </nuxt-link>\n      <div :class=\"$style.summary\"><slot /></div>\n      <div :class=\"$style.controls\">\n        <follow-button\n          :id=\"id\"\n          type=\"bangumi\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport FollowButton from '~/components/common/FollowButton'\n\nexport default {\n  name: 'BangumiPanel',\n  components: {\n    FollowButton\n  },\n  props: {\n    id: {\n      required: true,\n      type: Number\n    },\n    avatar: {\n      required: true,\n      type: String\n    },\n    name: {\n      required: true,\n      type: String\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./BangumiPanel.vue?vue&type=template&id=e4de9c16&\"\nimport script from \"./BangumiPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./BangumiPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BangumiPanel.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"BangumiPanel.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialPanel.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialPanel.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image-preview\":\"image-preview-2_\",\"imagePreview\":\"image-preview-2_\",\"container\":\"container-34\",\"bar\":\"bar-1j\",\"top-bar\":\"top-bar-1d\",\"topBar\":\"top-bar-1d\",\"foot-bar\":\"foot-bar-AF\",\"footBar\":\"foot-bar-AF\",\"wrap\":\"wrap-tx\",\"item\":\"item-32\",\"close\":\"close-27\",\"download\":\"download-51\",\"next-btn\":\"next-btn-3T\",\"nextBtn\":\"next-btn-3T\",\"prev-btn\":\"prev-btn-12\",\"prevBtn\":\"prev-btn-12\",\"rolling\":\"rolling-3m\"};","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.source)?_c('div',{staticClass:\"social-panel\"},[_c('div',{staticClass:\"buttons\"},[(_vm.isCreator)?_c('el-button',{class:{ 'is-plain': _vm.source.reward },attrs:{\"loading\":_vm.source.reward_loading,\"type\":\"warning\",\"icon\":\"iconfont icon-fantuan\",\"round\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.toggleAction('reward')}}},[_vm._v(\"\\n      \"+_vm._s(_vm.source.reward ? '已投食' : '投食')+_vm._s(_vm.source.reward_users.total ? (\"  |  \" + (_vm.source.reward_users.total)) : '')+\"\\n    \")]):_vm._e(),_vm._v(\" \"),_c('el-button',{class:{ 'is-plain': _vm.source.like },attrs:{\"loading\":_vm.source.like_loading,\"type\":\"danger\",\"icon\":\"iconfont icon-like\",\"round\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.toggleAction('like')}}},[_vm._v(\"\\n      \"+_vm._s(_vm.source.like ? '已喜欢' : '喜欢')+_vm._s(_vm.source.like_users.total ? (\"  |  \" + (_vm.source.like_users.total)) : '')+\"\\n    \")]),_vm._v(\" \"),_c('el-button',{class:{ 'is-plain': _vm.source.mark },attrs:{\"loading\":_vm.source.mark_loading,\"type\":\"success\",\"icon\":\"iconfont icon--mark\",\"round\":\"\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.toggleAction('mark')}}},[_vm._v(\"\\n      \"+_vm._s(_vm.source.mark ? '已收藏' : '收藏')+_vm._s(_vm.source.mark_users.total ? (\"  |  \" + (_vm.source.mark_users.total)) : '')+\"\\n    \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"users\"},[_c('ul',_vm._l((_vm.displayUsers),function(user){return _c('li',{key:user.id,staticClass:\"user-face\"},[_c('img',{attrs:{\"src\":_vm.$resize(user.avatar, { width: 60 })}})])}),0)])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialPanel.vue?vue&type=script&lang=js&\"","<style lang=\"scss\">\n.social-panel {\n  margin: 50px 0;\n\n  .buttons {\n    text-align: center;\n\n    button {\n      padding: 5px 7px 5px 4px;\n      font-size: 11px !important;\n    }\n  }\n\n  .users {\n    margin-top: 25px;\n    text-align: center;\n\n    .user-face {\n      margin: 0 -5px;\n      display: inline-block;\n      vertical-align: middle;\n\n      img {\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        border: 3px solid #fff;\n      }\n    }\n  }\n}\n</style>\n\n<template>\n  <div\n    v-if=\"source\"\n    class=\"social-panel\"\n  >\n    <div class=\"buttons\">\n      <el-button\n        v-if=\"isCreator\"\n        :class=\"{ 'is-plain': source.reward }\"\n        :loading=\"source.reward_loading\"\n        type=\"warning\"\n        icon=\"iconfont icon-fantuan\"\n        round\n        size=\"mini\"\n        @click=\"toggleAction('reward')\"\n      >\n        {{ source.reward ? '已投食' : '投食' }}{{ source.reward_users.total ? `&nbsp;&nbsp;|&nbsp;&nbsp;${source.reward_users.total}` : '' }}\n      </el-button>\n      <el-button\n        :class=\"{ 'is-plain': source.like }\"\n        :loading=\"source.like_loading\"\n        type=\"danger\"\n        icon=\"iconfont icon-like\"\n        round\n        size=\"mini\"\n        @click=\"toggleAction('like')\"\n      >\n        {{ source.like ? '已喜欢' : '喜欢' }}{{ source.like_users.total ? `&nbsp;&nbsp;|&nbsp;&nbsp;${source.like_users.total}` : '' }}\n      </el-button>\n      <el-button\n        :class=\"{ 'is-plain': source.mark }\"\n        :loading=\"source.mark_loading\"\n        type=\"success\"\n        icon=\"iconfont icon--mark\"\n        round\n        size=\"mini\"\n        @click=\"toggleAction('mark')\"\n      >\n        {{ source.mark ? '已收藏' : '收藏' }}{{ source.mark_users.total ? `&nbsp;&nbsp;|&nbsp;&nbsp;${source.mark_users.total}` : '' }}\n      </el-button>\n    </div>\n    <div class=\"users\">\n      <ul>\n        <li\n          v-for=\"user in displayUsers\"\n          :key=\"user.id\"\n          class=\"user-face\"\n        >\n          <img :src=\"$resize(user.avatar, { width: 60 })\">\n        </li>\n      </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'SocialPanel',\n  props: {\n    isCreator: {\n      required: true,\n      type: Boolean\n    },\n    isMine: {\n      required: true,\n      type: Boolean\n    },\n    id: {\n      required: true,\n      type: Number\n    },\n    type: {\n      required: true,\n      type: String,\n      validator: val =>\n        ~['post', 'video', 'image', 'score', 'answer', 'video'].indexOf(val)\n    }\n  },\n  computed: {\n    isGuest() {\n      return !this.$store.state.login\n    },\n    source() {\n      return this.$store.getters['social/getState'](this.type, this.id)\n    },\n    displayUsers() {\n      const users = this.isCreator\n        ? this.source.reward_users.list\n        : this.source.like_users.list\n      return users.slice(0, this.displayCount)\n    }\n  },\n  methods: {\n    computeTextByAction(action) {\n      if (action === 'reward') {\n        return '投食'\n      } else if (action === 'like') {\n        return '喜欢'\n      } else if (action === 'mark') {\n        return '收藏'\n      }\n      return '操作'\n    },\n    toggleAction(action) {\n      if (this.isGuest) {\n        this.$channel.$emit('sign-in')\n        return\n      }\n      if (this.isMine) {\n        this.$toast.info(`不能${this.computeTextByAction(action)}自己的内容`)\n        return\n      }\n      if (action === 'reward') {\n        if (this.source.reward) {\n          this.$toast.info('已投食过')\n          return\n        }\n        this.$confirm('向TA投食需要消耗你一个团子，是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n          .then(() => {\n            this.submitAction('reward')\n          })\n          .catch(() => {})\n      } else {\n        this.submitAction(action)\n      }\n    },\n    async submitAction(action) {\n      const data = await this.$store.dispatch('social/toggleAction', {\n        type: this.type,\n        id: this.id,\n        action\n      })\n      data.success &&\n        this.$emit(`${action}-callback`, {\n          result: data.result\n        })\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./SocialPanel.vue?vue&type=template&id=440337eb&\"\nimport script from \"./SocialPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./SocialPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SocialPanel.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"SocialPanel.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.$style.imagePreview,on:{\"click\":_vm.handleClick}},[(_vm.show)?_c('div',{class:_vm.$style.container,on:{\"click\":_vm.handleClose}},[_c('div',{class:[_vm.$style.bar, _vm.$style.topBar]},[(_vm.total)?_c('span',{class:_vm.$style.total},[_vm._v(\"\\n        \"+_vm._s(_vm.currentIndex + 1)+\"/\"+_vm._s(_vm.total)+\"\\n      \")]):_vm._e(),_vm._v(\" \"),_c('span',{class:_vm.$style.close},[_vm._v(\" × \")])]),_vm._v(\" \"),_c('div',{class:[_vm.$style.bar, _vm.$style.footBar]},[(_vm.currentImage && _vm.download)?_c('a',{class:_vm.$style.download,attrs:{\"href\":_vm.currentImage.url,\"target\":\"_blank\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._v(\"\\n        下载原图\\n      \")]):_vm._e()]),_vm._v(\" \"),(_vm.currentImage)?_c('div',{class:_vm.$style.wrap},[_c('div',{class:_vm.$style.item,style:({\n          backgroundImage: (\"url(\" + (_vm.$resize(_vm.currentImage.url, {\n            webP: !_vm.download\n          })) + \")\"),\n          width: ((_vm.currentImage.finalWidth) + \"px\"),\n          height: ((_vm.currentImage.finalHeight) + \"px\")\n        })}),_vm._v(\" \"),(_vm.total > 1)?[_c('button',{class:_vm.$style.prevBtn,on:{\"click\":function($event){$event.stopPropagation();_vm.switchImage(false)}}},[_c('i',{staticClass:\"el-icon-caret-left\"})]),_vm._v(\" \"),_c('button',{class:_vm.$style.nextBtn,on:{\"click\":function($event){$event.stopPropagation();_vm.switchImage(true)}}},[_c('i',{staticClass:\"el-icon-caret-right\"})])]:_vm._e()],2):_vm._e()]):_vm._e(),_vm._v(\" \"),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImagePreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImagePreview.vue?vue&type=script&lang=js&\"","<style lang=\"scss\" module>\n.image-preview {\n  .container {\n    position: fixed;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #000;\n    z-index: 2009;\n  }\n\n  $previewBarSize: 44px;\n  .bar {\n    background-color: rgba(0, 0, 0, 0.3);\n    position: absolute;\n    left: 0;\n    height: $previewBarSize;\n    width: 100%;\n    color: #fff;\n    z-index: 1;\n\n    &.top-bar {\n      top: 0;\n    }\n\n    &.foot-bar {\n      bottom: 0;\n    }\n  }\n\n  .wrap {\n    position: absolute;\n    top: $previewBarSize;\n    bottom: $previewBarSize;\n    width: 100%;\n    z-index: 0;\n  }\n\n  .item {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: contain;\n    cursor: zoom-out;\n  }\n\n  .top-bar {\n    padding: 0 12px;\n    height: 44px;\n    font-size: 13px;\n    line-height: 44px;\n\n    .close {\n      float: right;\n      font-size: 20px;\n      cursor: pointer;\n    }\n  }\n\n  .foot-bar {\n    text-align: center;\n\n    .download {\n      display: block;\n      color: #fff;\n      width: 100px;\n      height: 34px;\n      line-height: 32px;\n      border-radius: 17px;\n      border: 1px solid #fff;\n      margin: 5px auto;\n\n      &:hover {\n        background-color: rgba(255, 255, 255, 0.2);\n      }\n    }\n  }\n\n  .prev-btn,\n  .next-btn {\n    color: #fff;\n    width: 70px;\n    height: 100px;\n    background-color: transparent;\n    position: absolute;\n    top: 50%;\n    margin-top: -50px;\n\n    i {\n      display: inline-block;\n      height: 32px;\n      width: 32px;\n      background-color: rgba(0, 0, 0, 0.3);\n      text-align: center;\n      line-height: 32px;\n      font-size: 20px;\n\n      &:hover {\n        background-color: rgba(0, 0, 0, 0.5);\n      }\n    }\n  }\n\n  .prev-btn {\n    left: 0;\n    text-align: left;\n\n    i {\n      border-radius: 0 4px 4px 0;\n    }\n  }\n\n  .next-btn {\n    right: 0;\n    text-align: right;\n\n    i {\n      border-radius: 4px 0 0 4px;\n    }\n  }\n}\n</style>\n\n<template>\n  <div \n    :class=\"$style.imagePreview\" \n    @click=\"handleClick\">\n    <div \n      v-if=\"show\" \n      :class=\"$style.container\" \n      @click=\"handleClose\">\n      <div :class=\"[$style.bar, $style.topBar]\">\n        <span \n          v-if=\"total\" \n          :class=\"$style.total\">\n          {{ currentIndex + 1 }}/{{ total }}\n        </span>\n        <span :class=\"$style.close\"> &times; </span>\n      </div>\n      <div :class=\"[$style.bar, $style.footBar]\">\n        <a\n          v-if=\"currentImage && download\"\n          :href=\"currentImage.url\"\n          :class=\"$style.download\"\n          target=\"_blank\"\n          @click.stop\n        >\n          下载原图\n        </a>\n      </div>\n      <div \n        v-if=\"currentImage\" \n        :class=\"$style.wrap\">\n        <div\n          :style=\"{\n            backgroundImage: `url(${$resize(currentImage.url, {\n              webP: !download\n            })})`,\n            width: `${currentImage.finalWidth}px`,\n            height: `${currentImage.finalHeight}px`\n          }\"\n          :class=\"$style.item\"\n        />\n        <template v-if=\"total > 1\">\n          <button \n            :class=\"$style.prevBtn\" \n            @click.stop=\"switchImage(false)\">\n            <i class=\"el-icon-caret-left\" />\n          </button>\n          <button \n            :class=\"$style.nextBtn\" \n            @click.stop=\"switchImage(true)\">\n            <i class=\"el-icon-caret-right\" />\n          </button>\n        </template>\n      </div>\n    </div>\n    <slot />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ImagePreview',\n  props: {\n    images: {\n      type: Array,\n      default: () => []\n    },\n    query: {\n      type: String,\n      default: ''\n    },\n    download: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      show: false,\n      currentIndex: -1,\n      maxWidth: 0,\n      maxHeight: 0,\n      displayImages: this.images.map(_ =>\n        Object.assign(\n          {\n            finalWidth: 0,\n            finalHeight: 0,\n            loading: true\n          },\n          _\n        )\n      )\n    }\n  },\n  computed: {\n    total() {\n      return this.images.length\n    },\n    currentImage() {\n      if (this.currentIndex === -1) {\n        return null\n      }\n      return this.displayImages[this.currentIndex]\n    }\n  },\n  mounted() {\n    this.getScreenSize()\n    window.addEventListener('resize', this.getScreenSize)\n  },\n  methods: {\n    handleClose() {\n      this.show = false\n    },\n    handleClick(e) {\n      if (!this.total) {\n        return\n      }\n      const target = e.target\n      const isIMG = target.tagName.toLowerCase() === 'img'\n      if (!this.query && !isIMG) {\n        return\n      }\n      if (this.query && target.className.indexOf(this.query) === -1) {\n        return\n      }\n      let imageUrl = ''\n      if (isIMG) {\n        imageUrl = target.getAttribute('src').split('?')[0]\n      } else {\n        const img = target.querySelector('img')\n        if (!img) {\n          return\n        }\n        imageUrl = img.getAttribute('src').split('?')[0]\n      }\n      this.getClickImageIndex(imageUrl)\n      this.computeDisplaySize(this.currentIndex)\n      /*\n      if (this.total <= 3) {\n        this.computeDisplaySize(0);\n        this.computeDisplaySize(1);\n        this.computeDisplaySize(2);\n      } else {\n        const index = this.getSiblingsIndex(this.currentIndex);\n        this.computeDisplaySize(index[0]);\n        this.computeDisplaySize(index[2]);\n      }\n      */\n      this.show = true\n    },\n    getClickImageIndex(src) {\n      this.images.forEach((image, index) => {\n        if (image.url === src) {\n          this.currentIndex = index\n        }\n      })\n    },\n    getScreenSize() {\n      this.maxWidth = window.innerWidth\n      this.maxHeight = window.innerHeight - 88\n    },\n    switchImage(isNext) {\n      if (isNext && this.currentIndex === this.total - 1) {\n        return\n      }\n      if (!isNext && this.currentIndex === 0) {\n        return\n      }\n      const newIndex = isNext ? this.currentIndex + 1 : this.currentIndex - 1\n      this.computeDisplaySize(newIndex)\n      this.currentIndex = newIndex\n    },\n    getSiblingsIndex(currentIndex) {\n      let prevIndex\n      let nextIndex\n      if (this.currentIndex === 0) {\n        prevIndex = this.total - 1\n        nextIndex = 1\n      } else if (this.currentIndex === this.total - 1) {\n        prevIndex = this.total - 2\n        nextIndex = 0\n      } else {\n        prevIndex = this.currentIndex - 1\n        nextIndex = this.currentIndex + 1\n      }\n      return [prevIndex, currentIndex, nextIndex]\n    },\n    computeDisplaySize(index) {\n      if (typeof this.images[index] === 'undefined') {\n        return\n      }\n      const image = this.images[index]\n      if (image.finalWidth && image.finalHeight) {\n        return\n      }\n      const imageWidth = image.width\n      const imageHeight = image.height\n      const maxWidth = this.maxWidth\n      const maxHeight = this.maxHeight\n      let finalWidth\n      let finalHeight\n      if (maxWidth >= imageWidth && maxHeight >= imageHeight) {\n        // 小图，展示原图大小\n        finalWidth = imageWidth\n        finalHeight = imageHeight\n      } else if (maxWidth < imageWidth && maxHeight < imageHeight) {\n        // 超大图，计算一个缩放比例\n        const widthRadio = imageWidth / maxHeight\n        const heightRadio = imageHeight / maxHeight\n        if (widthRadio >= heightRadio) {\n          finalWidth = maxWidth\n          finalHeight = parseInt(imageHeight / widthRadio, 10)\n        } else {\n          finalWidth = parseInt(imageWidth / heightRadio, 10)\n          finalHeight = maxHeight\n        }\n      } else if (imageHeight < maxHeight) {\n        // 超宽图\n        const widthRadio = imageWidth / maxHeight\n        finalWidth = maxWidth\n        finalHeight = parseInt(imageHeight / widthRadio, 10)\n      } else {\n        // 超宽图\n        const heightRadio = imageHeight / maxHeight\n        finalWidth = parseInt(imageWidth / heightRadio, 10)\n        finalHeight = maxHeight\n      }\n      this.displayImages[index].finalWidth = finalWidth || maxWidth\n      this.displayImages[index].finalHeight = finalHeight || maxHeight\n    },\n    handleSwitch(oldVal, val) {\n      this.currentIndex = val\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./ImagePreview.vue?vue&type=template&id=6fb29d96&\"\nimport script from \"./ImagePreview.vue?vue&type=script&lang=js&\"\nexport * from \"./ImagePreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImagePreview.vue?vue&type=style&index=0&lang=scss&module=true&\"\n\n\n\n\nfunction injectStyles (context) {\n  \n  this[\"$style\"] = (style0.locals || style0)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"ImagePreview.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-0-2!../../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImagePreview.vue?vue&type=style&index=0&lang=scss&module=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-oneOf-0-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-0-2!../../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-0-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-0-4!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImagePreview.vue?vue&type=style&index=0&lang=scss&module=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCommentItem.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCommentItem.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--6-oneOf-1-3!../../node_modules/sass-resources-loader/lib/loader.js??ref--6-oneOf-1-4!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"post-show\"}},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"post\"},[_c('h1',{staticClass:\"title\"},[(_vm.post.is_nice)?_c('div',{staticClass:\"nice_badge\"},[_vm._v(\"精\")]):_vm._e(),_vm._v(\"\\n        \"+_vm._s(_vm.post.title)+\"\\n      \")]),_vm._v(\" \"),_c('div',{staticClass:\"user\"},[_c('a',{staticClass:\"avatar\",attrs:{\"href\":_vm.$alias.user(_vm.master.zone)}},[_c('v-img',{attrs:{\"src\":_vm.master.avatar,\"avatar\":true,\"width\":\"35\"}})],1),_vm._v(\" \"),_c('v-popover',{attrs:{\"actions\":_vm.actions,\"report-id\":_vm.post.id,\"is-creator\":_vm.post.is_creator,\"report-type\":\"post\"}},[_c('button',{staticClass:\"tool-btn\"},[_vm._v(\"···\")])]),_vm._v(\" \"),_c('div',{staticClass:\"summary\"},[_c('a',{staticClass:\"nickname\",attrs:{\"href\":_vm.$alias.user(_vm.master.zone)},domProps:{\"textContent\":_vm._s(_vm.master.nickname)}}),_vm._v(\" \"),_c('div',{staticClass:\"info\"},[_c('span',[_vm._v(\"第1楼\")]),_vm._v(\" \"),_c('span',[_vm._v(\"·\")]),_vm._v(\" \"),(_vm.total > 1)?[_c('span',[_vm._v(\"共\"+_vm._s(_vm.total)+\"楼\")]),_vm._v(\" \"),_c('span',[_vm._v(\"·\")])]:_vm._e(),_vm._v(\" \"),_c('v-time',{model:{value:(_vm.post.created_at),callback:function ($$v) {_vm.$set(_vm.post, \"created_at\", $$v)},expression:\"post.created_at\"}}),_vm._v(\" \"),(_vm.post.view_count)?_c('span',{staticClass:\"fr\"},[_c('i',{staticClass:\"iconfont icon-yuedu\"}),_vm._v(\"\\n              \"+_vm._s(_vm.$utils.shortenNumber(_vm.post.view_count))+\"\\n            \")]):_vm._e()],2)])],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"text-area\",domProps:{\"innerHTML\":_vm._s(_vm.post.content)}}),_vm._v(\" \"),_c('image-preview',{staticClass:\"image-area\",attrs:{\"images\":_vm.post.images,\"download\":false}},_vm._l((_vm.post.images),function(img,idx){return _c('div',{key:idx,staticClass:\"image-package\"},[_c('v-img',{attrs:{\"src\":img.url,\"full\":true,\"width\":img.width,\"height\":img.height}})],1)}),0)],1),_vm._v(\" \"),_c('div',{staticClass:\"tags\"},[_c('router-link',{attrs:{\"to\":_vm.$alias.bangumi(_vm.bangumi.id)}},[_c('i',{staticClass:\"iconfont icon-tag\"}),_vm._v(\" \"),_c('span',{domProps:{\"textContent\":_vm._s(_vm.bangumi.name)}})]),_vm._v(\" \"),_vm._l((_vm.post.tags),function(tag){return _c('span',{key:tag.id,staticClass:\"tag\",domProps:{\"textContent\":_vm._s(tag.name)}})})],2),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('social-panel',{attrs:{\"id\":_vm.post.id,\"is-creator\":_vm.post.is_creator,\"is-mine\":_vm.isMaster,\"type\":\"post\"}}),_vm._v(\" \"),_c('button',{staticClass:\"comment-post-btn\",class:{ isScrollTop: _vm.isScrollTop },on:{\"click\":_vm.handleReplyBtnClick}},[_c('i',{staticClass:\"iconfont icon-talk\"}),_vm._v(\"\\n          回复\\n        \")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"hr\"}),_vm._v(\" \"),_c('comment-main',{attrs:{\"id\":_vm.post.id,\"only-see-master\":_vm.onlySeeMaster,\"bottom-append-comment\":false,\"lazy\":false,\"master-id\":_vm.master.id,\"type\":\"post\",\"empty-text\":\"\"},scopedSlots:_vm._u([{key:\"comment-item\",fn:function(ref){\nvar comment = ref.comment;\nreturn _c('post-comment-item',{attrs:{\"post\":comment,\"master-id\":_vm.master.id,\"preview\":_vm.post.preview_images}})}}])},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"})])],1),_vm._v(\" \"),_c('div',{staticClass:\"hr\"}),_vm._v(\" \"),_c('div',{staticClass:\"container bangumi-panel\"},[_c('h3',{staticClass:\"sub-title\"},[_vm._v(\"所属番剧：\")]),_vm._v(\" \"),_c('bangumi-panel',{attrs:{\"id\":_vm.bangumi.id,\"avatar\":_vm.bangumi.avatar,\"name\":_vm.bangumi.name}},[_c('p',{staticClass:\"summary\",domProps:{\"textContent\":_vm._s(_vm.bangumi.summary)}})])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCommentItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostCommentItem.vue?vue&type=script&lang=js&\"","<style lang=\"scss\">\n.post-reply-item {\n  position: relative;\n  margin-top: $container-padding;\n  padding-bottom: $container-padding;\n  @include border-bottom();\n\n  .avatar {\n    float: left;\n    margin-right: 9px;\n  }\n\n  .content {\n    overflow: hidden;\n\n    .header {\n      .tools-btn {\n        float: right;\n        line-height: 16px;\n        font-size: 12px;\n        color: #535353;\n        padding-top: 9px;\n        padding-left: 4px;\n      }\n\n      .user {\n        .nickname {\n          font-size: 14px;\n          height: 20px;\n          line-height: 20px;\n          display: block;\n          color: #333;\n          margin-bottom: 1px;\n\n          span {\n            margin-right: 2px;\n          }\n\n          .icon-leader {\n            color: $color-pink-deep;\n            font-size: 14px;\n          }\n\n          .icon-master {\n            color: $color-blue-normal;\n            font-size: 13px;\n          }\n        }\n\n        .info {\n          color: #999;\n          line-height: 14px;\n          font-size: 12px;\n\n          span {\n            margin-right: 5px;\n          }\n        }\n      }\n    }\n\n    .main {\n      font-size: 16px;\n      margin: 10px 0 4px;\n      color: #333;\n      line-height: 24px;\n      min-height: 65px;\n\n      .image-area {\n        margin: 10px 0;\n\n        img {\n          width: 100%;\n          height: auto;\n        }\n      }\n    }\n\n    .footer {\n      .social {\n        font-size: 12px;\n\n        .reply-liked-btn {\n          color: $color-blue-deep;\n        }\n\n        button {\n          color: #666;\n          padding-left: 3px;\n          padding-top: 11px;\n        }\n      }\n    }\n  }\n}\n</style>\n\n<template>\n  <div \n    :id=\"`comment-${post.id}`\" \n    class=\"post-reply-item\">\n    <a \n      :href=\"$alias.user(post.from_user_zone)\" \n      class=\"avatar\">\n      <v-img \n        :src=\"post.from_user_avatar\" \n        :avatar=\"true\" \n        width=\"35\" />\n    </a>\n    <div class=\"content\">\n      <div class=\"header\">\n        <v-popover\n          :actions=\"actions\"\n          :report-id=\"post.id\"\n          report-type=\"post_comment\"\n        >\n          <button class=\"tools-btn\">···</button>\n        </v-popover>\n        <div class=\"user\">\n          <a \n            :href=\"$alias.user(post.from_user_zone)\" \n            class=\"nickname oneline\">\n            <span v-text=\"post.from_user_name\" />\n            <span v-if=\"post.is_owner\">(楼主)</span>\n            <i \n              v-if=\"post.is_leader\" \n              class=\"iconfont icon-leader\" />\n            <i \n              v-else-if=\"post.is_master\" \n              class=\"iconfont icon-master\" />\n          </a>\n          <div class=\"info\">\n            <span>第{{ post.floor_count }}楼</span> <span>·</span>\n            <v-time v-model=\"post.created_at\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"main\">\n        <image-preview\n          :images=\"post.images\"\n          :download=\"false\"\n          class=\"image-area\"\n        >\n          <div\n            v-for=\"(img, idx) in post.images\"\n            :key=\"idx\"\n            class=\"image-package\"\n          >\n            <v-img\n              :src=\"img.url\"\n              :width=\"img.width\"\n              :height=\"img.height\"\n              :full=\"true\"\n            />\n          </div>\n        </image-preview>\n        <div \n          class=\"text-area\" \n          v-html=\"post.content\" />\n      </div>\n      <div class=\"footer\">\n        <sub-comment-list \n          :parent-comment=\"post\" \n          type=\"post\" />\n        <div class=\"social\">\n          <button\n            :class=\"[post.liked ? 'reply-liked-btn' : 'reply-like-btn']\"\n            @click=\"toggleLike\"\n          >\n            <i class=\"iconfont icon-icon_good\" />\n            {{ post.liked ? '已赞' : '赞' }}\n            <span v-if=\"post.like_count\">({{ post.like_count }})</span>\n          </button>\n          <button \n            class=\"reply-btn fr\" \n            @click=\"handleCommentBtnClick\">\n            回复\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport SubCommentList from '~/components/comments/SubCommentList'\nimport ImagePreview from '~/components/common/ImagePreview/ImagePreview'\nimport VPopover from '~/components/common/Popover'\n\nexport default {\n  name: 'PostCommentItem',\n  components: {\n    SubCommentList,\n    ImagePreview,\n    VPopover\n  },\n  props: {\n    post: {\n      required: true,\n      type: Object\n    },\n    masterId: {\n      required: true,\n      type: Number\n    },\n    preview: {\n      type: Array,\n      required: true\n    }\n  },\n  data() {\n    return {\n      deleting: false,\n      liking: false\n    }\n  },\n  computed: {\n    currentUserId() {\n      return this.$store.state.login ? this.$store.state.user.id : 0\n    },\n    isMine() {\n      return this.currentUserId === this.post['from_user_id']\n    },\n    canDelete() {\n      return this.isMine || this.currentUserId === this.masterId\n    },\n    actions() {\n      const result = []\n      if (this.canDelete) {\n        result.push({\n          name: '删除',\n          method: this.deletePost\n        })\n      }\n      result.push({\n        name: this.post.liked ? '取消赞' : '点赞',\n        method: this.toggleLike\n      })\n\n      return result\n    }\n  },\n  methods: {\n    async toggleLike() {\n      if (!this.currentUserId) {\n        this.$channel.$emit('sign-in')\n        return\n      }\n      if (this.liking) {\n        return\n      }\n      this.liking = true\n      try {\n        await this.$store.dispatch('comment/toggleLikeMainComment', {\n          ctx: this,\n          type: 'post',\n          id: this.post.id\n        })\n      } finally {\n        this.liking = false\n      }\n    },\n    deletePost() {\n      if (this.deleting) {\n        return\n      }\n      this.deleting = true\n      this.$confirm('删除后无法找回, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(() => {\n          this.$store.dispatch('comment/deleteMainComment', {\n            type: 'post',\n            ctx: this,\n            id: this.post.id\n          })\n        })\n        .catch(() => {\n          this.deleting = false\n        })\n    },\n    handleCommentBtnClick() {\n      this.$channel.$emit('reply-comment', {\n        id: this.post.id,\n        targetUserId: this.post.from_user_id,\n        targetUserName: this.post.from_user_name\n      })\n    }\n  }\n}\n</script>\n","import { render, staticRenderFns } from \"./PostCommentItem.vue?vue&type=template&id=35b1add7&\"\nimport script from \"./PostCommentItem.vue?vue&type=script&lang=js&\"\nexport * from \"./PostCommentItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PostCommentItem.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"PostCommentItem.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post-reply-item\",attrs:{\"id\":(\"comment-\" + (_vm.post.id))}},[_c('a',{staticClass:\"avatar\",attrs:{\"href\":_vm.$alias.user(_vm.post.from_user_zone)}},[_c('v-img',{attrs:{\"src\":_vm.post.from_user_avatar,\"avatar\":true,\"width\":\"35\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"header\"},[_c('v-popover',{attrs:{\"actions\":_vm.actions,\"report-id\":_vm.post.id,\"report-type\":\"post_comment\"}},[_c('button',{staticClass:\"tools-btn\"},[_vm._v(\"···\")])]),_vm._v(\" \"),_c('div',{staticClass:\"user\"},[_c('a',{staticClass:\"nickname oneline\",attrs:{\"href\":_vm.$alias.user(_vm.post.from_user_zone)}},[_c('span',{domProps:{\"textContent\":_vm._s(_vm.post.from_user_name)}}),_vm._v(\" \"),(_vm.post.is_owner)?_c('span',[_vm._v(\"(楼主)\")]):_vm._e(),_vm._v(\" \"),(_vm.post.is_leader)?_c('i',{staticClass:\"iconfont icon-leader\"}):(_vm.post.is_master)?_c('i',{staticClass:\"iconfont icon-master\"}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"info\"},[_c('span',[_vm._v(\"第\"+_vm._s(_vm.post.floor_count)+\"楼\")]),_vm._v(\" \"),_c('span',[_vm._v(\"·\")]),_vm._v(\" \"),_c('v-time',{model:{value:(_vm.post.created_at),callback:function ($$v) {_vm.$set(_vm.post, \"created_at\", $$v)},expression:\"post.created_at\"}})],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"main\"},[_c('image-preview',{staticClass:\"image-area\",attrs:{\"images\":_vm.post.images,\"download\":false}},_vm._l((_vm.post.images),function(img,idx){return _c('div',{key:idx,staticClass:\"image-package\"},[_c('v-img',{attrs:{\"src\":img.url,\"width\":img.width,\"height\":img.height,\"full\":true}})],1)}),0),_vm._v(\" \"),_c('div',{staticClass:\"text-area\",domProps:{\"innerHTML\":_vm._s(_vm.post.content)}})],1),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('sub-comment-list',{attrs:{\"parent-comment\":_vm.post,\"type\":\"post\"}}),_vm._v(\" \"),_c('div',{staticClass:\"social\"},[_c('button',{class:[_vm.post.liked ? 'reply-liked-btn' : 'reply-like-btn'],on:{\"click\":_vm.toggleLike}},[_c('i',{staticClass:\"iconfont icon-icon_good\"}),_vm._v(\"\\n          \"+_vm._s(_vm.post.liked ? '已赞' : '赞')+\"\\n          \"),(_vm.post.like_count)?_c('span',[_vm._v(\"(\"+_vm._s(_vm.post.like_count)+\")\")]):_vm._e()]),_vm._v(\" \"),_c('button',{staticClass:\"reply-btn fr\",on:{\"click\":_vm.handleCommentBtnClick}},[_vm._v(\"\\n          回复\\n        \")])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","<style lang=\"scss\">\n.post {\n  .title {\n    color: #000;\n    font-size: 18px;\n    font-weight: 700;\n    line-height: 28px;\n    margin: 8px 0 15px;\n\n    .nice_badge {\n      float: left;\n      height: 22px;\n      line-height: 20px;\n      color: #fff;\n      cursor: default;\n      font-size: 12px;\n      font-weight: bold;\n      text-align: center;\n      padding: 1px 6px;\n      border-radius: 4px;\n      margin: 4px 5px 0 0;\n      background-color: $color-pink-deep;\n    }\n  }\n\n  .user {\n    position: relative;\n    .avatar {\n      float: left;\n      margin-right: 9px;\n    }\n\n    .tool-btn {\n      position: absolute;\n      right: 5px;\n      top: 0;\n      line-height: 16px;\n      font-size: 12px;\n      color: #535353;\n    }\n\n    .summary {\n      overflow: hidden;\n\n      .nickname {\n        overflow: hidden;\n        display: inline-block;\n        font-size: 14px;\n        color: #333;\n      }\n\n      .info {\n        line-height: 16px;\n        font-size: 12px;\n        color: #999;\n\n        span {\n          margin-right: 5px;\n        }\n      }\n    }\n  }\n\n  .content {\n    color: #000;\n    font-size: 16px;\n    margin: 14px 0 22px;\n    line-height: 24px;\n\n    .text-area {\n      p {\n        margin-bottom: 12px;\n      }\n    }\n\n    .image-area {\n      margin: 16px 0;\n\n      img {\n        width: 100%;\n        height: auto;\n      }\n    }\n  }\n\n  .tags {\n    margin-bottom: -10px;\n\n    > * {\n      display: inline-block;\n      padding-left: 5px;\n      padding-right: 5px;\n      height: 18px;\n      font-size: 12px;\n      border-radius: 9px;\n      line-height: 18px;\n      background-color: $color-gray-normal;\n      color: $color-text-normal;\n      margin-right: 5px;\n    }\n\n    i {\n      margin-right: 2px;\n    }\n  }\n\n  .footer {\n    text-align: center;\n    margin-bottom: 30px;\n\n    button {\n      margin: 0 5px;\n    }\n\n    .comment-post-btn {\n      position: fixed;\n      left: 50%;\n      margin-left: -37px;\n      bottom: 50px;\n      width: 74px;\n      height: 30px;\n      line-height: 30px;\n      color: #fff;\n      background-color: $color-pink-deep;\n      border-radius: 15px;\n      font-size: 13px;\n      z-index: 9;\n      box-shadow: 0 2px 5px rgba(26, 26, 26, 0.25);\n      transform: translateY(200px);\n      transition: 0.4s;\n\n      &.isScrollTop {\n        transform: translateY(0);\n      }\n    }\n  }\n}\n\n.bangumi-panel {\n  padding-top: $container-padding;\n  padding-bottom: $container-padding;\n\n  .summary {\n    font-size: 12px;\n    color: #666;\n    @include twoline(13px);\n  }\n}\n</style>\n\n<template>\n  <div id=\"post-show\">\n    <div class=\"container\">\n      <div class=\"post\">\n        <h1 class=\"title\">\n          <div\n            v-if=\"post.is_nice\"\n            class=\"nice_badge\"\n          >精</div>\n          {{ post.title }}\n        </h1>\n        <div class=\"user\">\n          <a \n            :href=\"$alias.user(master.zone)\" \n            class=\"avatar\">\n            <v-img\n              :src=\"master.avatar\"\n              :avatar=\"true\"\n              width=\"35\"\n            />\n          </a>\n          <v-popover\n            :actions=\"actions\"\n            :report-id=\"post.id\"\n            :is-creator=\"post.is_creator\"\n            report-type=\"post\"\n          >\n            <button class=\"tool-btn\">···</button>\n          </v-popover>\n          <div class=\"summary\">\n            <a\n              :href=\"$alias.user(master.zone)\"\n              class=\"nickname\"\n              v-text=\"master.nickname\"\n            />\n            <div class=\"info\">\n              <span>第1楼</span>\n              <span>·</span>\n              <template v-if=\"total > 1\">\n                <span>共{{ total }}楼</span>\n                <span>·</span>\n              </template>\n              <v-time v-model=\"post.created_at\"/>\n              <span \n                v-if=\"post.view_count\" \n                class=\"fr\">\n                <i class=\"iconfont icon-yuedu\"/>\n                {{ $utils.shortenNumber(post.view_count) }}\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class=\"content\">\n          <div\n            class=\"text-area\"\n            v-html=\"post.content\"\n          />\n          <image-preview\n            :images=\"post.images\"\n            :download=\"false\"\n            class=\"image-area\"\n          >\n            <div\n              v-for=\"(img, idx) in post.images\"\n              :key=\"idx\"\n              class=\"image-package\"\n            >\n              <v-img\n                :src=\"img.url\"\n                :full=\"true\"\n                :width=\"img.width\"\n                :height=\"img.height\"\n              />\n            </div>\n          </image-preview>\n        </div>\n        <div class=\"tags\">\n          <router-link :to=\"$alias.bangumi(bangumi.id)\">\n            <i class=\"iconfont icon-tag\"/>\n            <span v-text=\"bangumi.name\"/>\n          </router-link>\n          <span\n            v-for=\"tag in post.tags\"\n            :key=\"tag.id\"\n            class=\"tag\"\n            v-text=\"tag.name\"\n          />\n        </div>\n        <div class=\"footer\">\n          <social-panel\n            :id=\"post.id\"\n            :is-creator=\"post.is_creator\"\n            :is-mine=\"isMaster\"\n            type=\"post\"\n          />\n          <button\n            :class=\"{ isScrollTop }\"\n            class=\"comment-post-btn\"\n            @click=\"handleReplyBtnClick\"\n          >\n            <i class=\"iconfont icon-talk\"/>\n            回复\n          </button>\n        </div>\n      </div>\n      <div class=\"hr\"/>\n      <comment-main\n        :id=\"post.id\"\n        :only-see-master=\"onlySeeMaster\"\n        :bottom-append-comment=\"false\"\n        :lazy=\"false\"\n        :master-id=\"master.id\"\n        type=\"post\"\n        empty-text=\"\"\n      >\n        <div slot=\"header\"/>\n        <post-comment-item\n          slot=\"comment-item\"\n          slot-scope=\"{ comment }\"\n          :post=\"comment\"\n          :master-id=\"master.id\"\n          :preview=\"post.preview_images\"\n        />\n      </comment-main>\n    </div>\n    <div class=\"hr\"/>\n    <div class=\"container bangumi-panel\">\n      <h3 class=\"sub-title\">所属番剧：</h3>\n      <bangumi-panel\n        :id=\"bangumi.id\"\n        :avatar=\"bangumi.avatar\"\n        :name=\"bangumi.name\"\n      >\n        <p \n          class=\"summary\" \n          v-text=\"bangumi.summary\"/>\n      </bangumi-panel>\n    </div>\n  </div>\n</template>\n\n<script>\nimport CommentMain from '~/components/comments/CommentMain'\nimport PostCommentItem from '~/components/post/PostCommentItem'\nimport SocialPanel from '~/components/common/SocialPanel'\nimport ImagePreview from '~/components/common/ImagePreview/ImagePreview'\nimport BangumiPanel from '~/components/panel/BangumiPanel'\nimport VPopover from '~/components/common/Popover'\nimport { getPostInfo, deletePost } from '~/api/postApi'\n\nexport default {\n  name: 'PostShow',\n  asyncData({ query, store, params, app, error }) {\n    const { id } = params\n    return getPostInfo(app, {\n      id,\n      only: query.only ? (parseInt(query.only, 10) ? 1 : 0) : 0\n    })\n      .then(data => {\n        const { post, bangumi } = data\n        store.commit('social/SET_STATE', {\n          type: 'post',\n          id,\n          data: {\n            like: post.liked,\n            reward: post.rewarded,\n            mark: post.marked,\n            like_users: post.like_users,\n            mark_users: post.mark_users,\n            reward_users: post.reward_users\n          }\n        })\n        store.commit('social/SET_STATE', {\n          type: 'bangumi',\n          id: bangumi.id,\n          data: {\n            follow: bangumi.followed\n          }\n        })\n        return {\n          post,\n          bangumi,\n          master: data.user\n        }\n      })\n      .catch(error)\n  },\n  async fetch({ store, query, params }) {\n    try {\n      await store.dispatch('comment/getMainComments', {\n        id: params.id,\n        type: 'post',\n        onlySeeMaster: query.only ? (parseInt(query.only, 10) ? 1 : 0) : 0,\n        seeReplyId: query['comment-id']\n      })\n    } catch (e) {}\n  },\n  components: {\n    CommentMain,\n    PostCommentItem,\n    SocialPanel,\n    ImagePreview,\n    BangumiPanel,\n    VPopover\n  },\n  head() {\n    return {\n      title: `${this.post.title} - 帖子`\n    }\n  },\n  data() {\n    return {\n      loadingToggleLike: false,\n      loadingToggleMark: false,\n      lastScroll: 0,\n      isScrollTop: true\n    }\n  },\n  computed: {\n    total() {\n      return this.$store.state.comment.total + 1\n    },\n    onlySeeMaster() {\n      return !!parseInt(this.$route.query.only, 10)\n    },\n    isMaster() {\n      if (!this.$store.state.login) {\n        return false\n      }\n      return this.$store.state.user.id === this.master.id\n    },\n    actions() {\n      const result = [\n        {\n          name: '回复',\n          method: this.handleReplyBtnClick\n        }\n      ]\n      if (this.isMaster) {\n        result.push({\n          name: '删除',\n          method: this.deletePost\n        })\n      }\n      result.push({\n        name: this.onlySeeMaster ? '取消只看楼主' : '只看楼主',\n        method: this.switchOnlyMaster\n      })\n\n      return result\n    }\n  },\n  mounted() {\n    window.addEventListener(\n      'scroll',\n      this.$utils.throttle(() => {\n        const scrollTop =\n          document.documentElement.scrollTop || document.body.scrollTop\n        this.isScrollTop = this.lastScroll > scrollTop\n        this.lastScroll = scrollTop\n      }, 200)\n    )\n  },\n  methods: {\n    handleBangumiFollow(result) {\n      this.$store.commit('post/FOLLOW_BANGUMI', {\n        id: this.post.id,\n        result\n      })\n    },\n    switchOnlyMaster() {\n      window.location = this.$alias.post(this.post.id, {\n        only: this.onlySeeMaster ? 0 : 1\n      })\n    },\n    deletePost() {\n      this.$confirm('删除后无法找回, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(async () => {\n          await deletePost(this, { id: this.id })\n          window.location.reload()\n        })\n        .catch(() => {})\n    },\n    handleReplyBtnClick() {\n      this.$channel.$emit(`open-create-comment-drawer-post-${this.post.id}`)\n    }\n  }\n}\n</script>\n","export const getPostInfo = (ctx, { id, only, hash, time }) => {\n  return ctx.$axios.$get(`post/${id}/show`, {\n    params: { only, hash, time }\n  })\n}\n\nexport const createPost = (\n  ctx,\n  { title, bangumiId, content, images, tags, desc, geetest, is_creator }\n) => {\n  return ctx.$axios.$post('post/create', {\n    title,\n    bangumiId,\n    content,\n    images,\n    tags,\n    desc,\n    geetest,\n    is_creator\n  })\n}\n\nexport const getPostTags = ctx => {\n  return ctx.$axios.$get('post/tags')\n}\n\nexport const deletePost = (ctx, { id }) => {\n  return ctx.$axios.$post(`post/${id}/deletePost`)\n}\n\nexport const setTop = (ctx, { id }) => {\n  return ctx.$axios.$post('post/manager/top/set', { id })\n}\n\nexport const removeTop = (ctx, { id }) => {\n  return ctx.$axios.$post('post/manager/top/remove', { id })\n}\n\nexport const setNice = (ctx, { id }) => {\n  return ctx.$axios.$post('post/manager/nice/set', { id })\n}\n\nexport const removeNice = (ctx, { id }) => {\n  return ctx.$axios.$post('post/manager/nice/remove', { id })\n}\n","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=74d13fb0&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\nimport style0 from \"./_id.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"_id.vue\"\nexport default component.exports"],"sourceRoot":""}