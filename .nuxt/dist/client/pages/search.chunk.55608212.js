(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{502:function(t,e,a){},503:function(t,e,a){},504:function(t,e,a){},532:function(t,e,a){"use strict";var s=a(502);a.n(s).a},533:function(t,e,a){"use strict";var s=a(503);a.n(s).a},534:function(t,e,a){"use strict";var s=a(504);a.n(s).a},544:function(t,e,a){"use strict";a(45);var s={name:"PostFlowItem",props:{item:{required:!0,type:Object},bangumiId:{type:[Number,String],default:0},userZone:{type:String,default:""}},methods:{imageFilter:function(t){return t.slice(0,3)}}},i=(a(532),a(1)),n=Object(i.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"post-flow-item"},[a("router-link",{attrs:{to:t.$alias.post(t.item.id),tag:"div"}},[a("div",{staticClass:"header"},[t.userZone?[a("router-link",{staticClass:"bangumi-avatar",attrs:{to:t.$alias.bangumi(t.item.bangumi.id)}},[a("v-img",{attrs:{src:t.item.bangumi.avatar,width:"35",height:"35"}})],1),t._v(" "),a("div",{staticClass:"info"},[a("router-link",{staticClass:"name oneline",attrs:{to:t.$alias.bangumi(t.item.bangumi.id)},domProps:{textContent:t._s(t.item.bangumi.name)}}),t._v(" "),a("v-time",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)]:[a("router-link",{staticClass:"user-avatar",attrs:{to:t.$alias.user(t.item.user.zone)}},[a("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),a("div",{staticClass:"info"},[a("router-link",{staticClass:"name oneline",attrs:{to:t.$alias.user(t.item.user.zone)},domProps:{textContent:t._s(t.item.user.nickname)}}),t._v(" "),a("v-time",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)]],2),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"title"},[t.item.top_at&&t.bangumiId?a("div",{staticClass:"top_badge"},[t._v("置顶")]):t._e(),t._v(" "),t.item.is_nice?a("div",{staticClass:"nice_badge"},[t._v("精")]):t._e(),t._v(" "),t.item.is_creator?a("div",{staticClass:"creator_badge"},[t._v("原创")]):t._e(),t._v(" "),a("p",{staticClass:"oneline",domProps:{textContent:t._s(t.item.title)}})]),t._v(" "),a("p",{staticClass:"content",domProps:{textContent:t._s(t.item.desc)}}),t._v(" "),t.item.images.length?a("div",{staticClass:"images"},[1===t.item.images.length?a("v-img",{staticClass:"poster-image",attrs:{src:t.item.images[0].url,width:"100%",height:"130"}}):a("div",{staticClass:"image-list"},t._l(t.imageFilter(t.item.images),function(t,e){return a("v-img",{key:e,staticClass:"image",attrs:{src:t.url,width:"32%",height:"93"}})}),1)],1):t._e(),t._v(" "),t.item.bangumi||t.item.tags.length?a("div",{staticClass:"tags"},[t.item.bangumi&&!t.userZone?a("router-link",{attrs:{to:t.$alias.bangumi(t.item.bangumi.id)}},[a("i",{staticClass:"iconfont icon-tag"}),t._v(" "),a("span",{domProps:{textContent:t._s(t.item.bangumi.name)}})]):t._e(),t._v(" "),t._l(t.item.tags,function(e){return a("span",{key:e.id,staticClass:"tag",domProps:{textContent:t._s(e.name)}})})],2):t._e()]),t._v(" "),a("div",{staticClass:"footer"},[t.item.is_creator?a("div",[a("i",{staticClass:"iconfont icon-fantuan"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.reward_count)))])]):a("div",[a("i",{staticClass:"iconfont icon-like"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.like_count)))])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont icon--mark"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.mark_count)))])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont icon-talk"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.comment_count)))])])])]),t._v(" "),a("div",{staticClass:"hr"})],1)},[],!1,null,null,null);n.options.__file="PostFlowItem.vue";e.a=n.exports},545:function(t,e,a){"use strict";a(45);var s={name:"CartoonRoleFlowItem",props:{item:{required:!0,type:Object},bangumiId:{type:[Number,String],default:0},userZone:{required:!0,type:String},index:{type:Number,default:-1}}},i=(a(533),a(1)),n=Object(i.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cartoon-role-flow-item"},[a("div",{staticClass:"clearfix"},[a("a",{staticClass:"avatar",attrs:{href:t.$alias.cartoonRole(t.item.id)}},[a("v-img",{attrs:{src:t.item.avatar,width:"100",height:"100"}})],1),t._v(" "),a("div",{staticClass:"summary"},[a("a",{staticClass:"role",attrs:{href:t.$alias.cartoonRole(t.item.id)}},[a("span",{staticClass:"name",domProps:{textContent:t._s(t.item.name)}}),t._v(" "),a("span",{staticClass:"intro"},[t._v("："+t._s(t.item.intro))])]),t._v(" "),t.item.lover?a("div",{staticClass:"lover"},[a("span",[t._v("守护者：")]),t._v(" "),a("a",{staticClass:"fr",attrs:{href:t.$alias.user(t.item.lover.zone)}},[a("span",{domProps:{textContent:t._s(t.item.lover.nickname)}}),t._v(" "),a("v-img",{staticClass:"image",attrs:{src:t.item.lover.avatar,avatar:!0,width:"20",height:"20"}})],1)]):a("div",{staticClass:"lover"})]),t._v(" "),a("div",{staticClass:"footer"},[t.userZone?a("div",{staticClass:"stats"},[a("span",[t._v("粉丝: "+t._s(t.item.fans_count))]),t._v("\n        ·\n        "),a("span",[t._v("团子: "+t._s(t.item.star_count))]),t._v("\n        ·\n        "),a("span",[t._v("贡献: "+t._s(t.item.has_star))])]):a("div",{staticClass:"stats"},[a("span",[t._v("\n          粉丝:\n          "+t._s(t.$utils.shortenNumber(t.item.fans_count))+"\n        ")]),t._v(" "),a("span",[t._v("\n          团子:\n          "+t._s(t.$utils.shortenNumber(t.item.star_count))+"\n        ")]),t._v(" "),t.bangumiId||-1===t.index?t._e():[a("span",[t._v("排名:")]),t._v(" "),a("span",{staticClass:"top",attrs:{"data-index":t.item.fans_count?t.index+1:"无"}})]],2),t._v(" "),a("a",{staticClass:"bangumi",attrs:{href:t.$alias.bangumi(t.item.bangumi.id)},domProps:{textContent:t._s(t.item.bangumi.name)}})])])])},[],!1,null,null,null);n.options.__file="CartoonRoleFlowItem.vue";e.a=n.exports},546:function(t,e,a){"use strict";a(13),a(45),a(260),a(3);var s=a(167),i={name:"ScoreFlowItem",components:{"el-rate":a.n(s).a},props:{item:{required:!0,type:Object},bangumiId:{required:!0,type:[String,Number]},userZone:{required:!0,type:String}},data:function(){return{zero:0}},computed:{pageName:function(){return this.$route.name},starCount:function(){return this.item.total/2}},methods:{linkStart:function(){this.$router.push(this.$alias.score(this.item.id))}}},n=(a(534),a(1)),r=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"score-flow-item"},[a("div",{on:{click:t.linkStart}},[t.item.bangumi&&t.item.user?a("div",{staticClass:"header trending-header"},[a("a",{staticClass:"user-avatar",attrs:{href:t.$alias.user(t.item.user.zone)}},[a("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),a("div",{staticClass:"header-content"},[a("div",{staticClass:"about"},[t.starCount?a("el-rate",{attrs:{disabled:""},model:{value:t.starCount,callback:function(e){t.starCount=e},expression:"starCount"}}):a("el-rate",{attrs:{disabled:""},model:{value:t.zero,callback:function(e){t.zero=e},expression:"zero"}}),t._v(" "),a("a",{staticClass:"bangumi-name oneline",attrs:{href:t.$alias.bangumi(t.item.bangumi.id)},domProps:{textContent:t._s(t.item.bangumi.name)}})],1),t._v(" "),a("div",{staticClass:"meta"},[a("a",{staticClass:"author",attrs:{href:t.$alias.user(t.item.user.zone)},domProps:{textContent:t._s(t.item.user.nickname)}}),t._v("\n           · \n          "),a("v-time",{staticClass:"created-at",model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)])]):t.item.bangumi?t.item.user?t._e():a("div",{staticClass:"header user-header"},[t.starCount?a("el-rate",{attrs:{disabled:""},model:{value:t.starCount,callback:function(e){t.starCount=e},expression:"starCount"}}):a("el-rate",{attrs:{disabled:""},model:{value:t.zero,callback:function(e){t.zero=e},expression:"zero"}}),t._v(" "),a("a",{staticClass:"bangumi",attrs:{href:t.$alias.bangumi(t.item.bangumi.id)}},[a("div",{staticClass:"bangumi-avatar"},[a("v-img",{attrs:{src:t.item.bangumi.avatar,width:"23",height:"23"}})],1),t._v(" "),a("div",{staticClass:"nickname oneline",domProps:{textContent:t._s(t.item.bangumi.name)}})])],1):a("div",{staticClass:"header bangumi-header"},[t.starCount?a("el-rate",{attrs:{disabled:""},model:{value:t.starCount,callback:function(e){t.starCount=e},expression:"starCount"}}):a("el-rate",{attrs:{disabled:""},model:{value:t.zero,callback:function(e){t.zero=e},expression:"zero"}}),t._v(" "),a("a",{staticClass:"user",attrs:{href:t.$alias.user(t.item.user.zone)}},[a("div",{staticClass:"user-avatar"},[a("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),a("div",{staticClass:"nickname oneline",domProps:{textContent:t._s(t.item.user.nickname)}})])],1),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"title"},[a("p",{staticClass:"oneline",domProps:{textContent:t._s(t.item.title)}})]),t._v(" "),t.item.banner?a("v-img",{staticClass:"poster-image",attrs:{src:t.item.banner.url,width:"100%",height:"130"}}):t._e(),t._v(" "),a("div",{staticClass:"content",domProps:{textContent:t._s(t.item.intro)}})],1),t._v(" "),a("div",{staticClass:"footer"},[t.item.is_creator?a("div",[a("i",{staticClass:"iconfont icon-fantuan"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.reward_count)))])]):a("div",[a("i",{staticClass:"iconfont icon-like"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.like_count)))])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont icon--mark"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.mark_count)))])]),t._v(" "),a("div",[a("i",{staticClass:"iconfont icon-talk"}),t._v(" "),a("span",[t._v(t._s(t.$utils.shortenNumber(t.item.comment_count)))])])])]),t._v(" "),a("div",{staticClass:"hr"})])},[],!1,null,null,null);r.options.__file="ScoreFlowItem.vue";e.a=r.exports},592:function(t,e,a){},593:function(t,e,a){},594:function(t,e,a){},595:function(t,e,a){},727:function(t,e,a){"use strict";var s=a(592);a.n(s).a},728:function(t,e,a){"use strict";var s=a(593);a.n(s).a},729:function(t,e,a){"use strict";var s=a(594);a.n(s).a},730:function(t,e,a){"use strict";var s=a(595);a.n(s).a},926:function(t,e,a){"use strict";a.r(e);a(264),a(12);var s=a(2),i=a.n(s),n=a(169),r={name:"SearchItemUser",props:{item:{required:!0,type:Object},inCommon:{required:!0,type:Boolean,default:!1}}},o=(a(727),a(1)),c=Object(o.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-item-user"},[a("a",{staticClass:"avatar",attrs:{href:t.$alias.user(t.item.zone)}},[a("v-img",{attrs:{src:t.item.avatar,avatar:!0,width:"60",height:"60"}})],1),t._v(" "),a("div",{staticClass:"intro"},[a("div",{staticClass:"head"},[t.inCommon?a("span",{staticClass:"badge"},[t._v("用户")]):t._e(),t._v(" "),a("a",{staticClass:"nickname",attrs:{href:t.$alias.user(t.item.zone)},domProps:{textContent:t._s(t.item.nickname)}})]),t._v(" "),a("a",{attrs:{href:t.$alias.user(t.item.zone)}},[a("p",{staticClass:"signature",domProps:{textContent:t._s(t.item.signature)}})])])])},[],!1,null,null,null);c.options.__file="UserItem.vue";var l=c.exports,m={name:"SearchItemBangumi",props:{item:{required:!0,type:Object},inCommon:{required:!0,type:Boolean,default:!1}}},u=(a(728),Object(o.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-item-bangumi"},[a("a",{staticClass:"avatar",attrs:{href:t.$alias.bangumi(t.item.id)}},[a("img",{attrs:{src:t.$resize(t.item.avatar,{width:120,height:160}),alt:t.item.name}})]),t._v(" "),a("div",{staticClass:"intro"},[a("div",{staticClass:"head"},[t.inCommon?a("span",{staticClass:"badge"},[t._v("番剧")]):t._e(),t._v(" "),a("a",{staticClass:"name",attrs:{href:t.$alias.bangumi(t.item.id)},domProps:{textContent:t._s(t.item.name)}})]),t._v(" "),a("a",{attrs:{href:t.$alias.bangumi(t.item.id)}},[a("p",{staticClass:"summary",domProps:{textContent:t._s(t.item.summary)}})])])])},[],!1,null,null,null));u.options.__file="BangumiItem.vue";var d=u.exports,v={name:"SearchItemVideo",props:{item:{required:!0,type:Object},inCommon:{required:!0,type:Boolean,default:!1}}},_=(a(729),Object(o.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-item-video"},[t.inCommon?a("a",{staticClass:"in-common-avatar",attrs:{href:t.$alias.video(t.item.id)}},[a("img",{attrs:{src:t.$resize(t.item.poster,{width:180,height:102}),alt:t.item.name}})]):a("a",{staticClass:"avatar",attrs:{href:t.$alias.video(t.item.id)}},[a("img",{attrs:{src:t.$resize(t.item.poster,{width:120,height:86}),alt:t.item.name}})]),t._v(" "),a("div",{staticClass:"intro"},[a("div",{staticClass:"head"},[t.inCommon?a("span",{staticClass:"badge"},[t._v("视频")]):t._e(),t._v(" "),a("a",{staticClass:"name",attrs:{href:t.$alias.video(t.item.id)},domProps:{textContent:t._s(t.item.name)}})]),t._v(" "),a("a",{attrs:{href:t.$alias.video(t.item.id)}},[a("p",{staticClass:"summary",domProps:{textContent:t._s(t.item.summary)}})])])])},[],!1,null,null,null));_.options.__file="VideoItem.vue";var p=_.exports,h=a(544),C=a(545),f=a(546),g={name:"SearchIndex",asyncData:function(){var t=i()(regeneratorRuntime.mark(function t(e){var a,s,i,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.store,s=e.route,i=e.ctx,n=s.query,r=n.type||"all",t.next=5,a.dispatch("search/fetchData",{ctx:i,type:r,q:n.q});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),head:{meta:[{hid:"description",name:"description",content:"搜索二次元的一切"}]},components:{vSearch:n.a,UserItem:l,BangumiItem:d,VideoItem:p,PostItem:h.a,RoleItem:C.a,ScoreItem:f.a},beforeRouteUpdate:function(t,e,a){var s=t.query,i=s.type||"all";this.$store.dispatch("search/fetchData",{ctx:this,type:i,q:s.q}),a()},data:function(){return{words:this.$route.query.q}},computed:{resource:function(){return this.$store.state.search.resource[this.selectedType]||{}},loading:function(){return this.resource.loading},list:function(){return this.resource.list},noMore:function(){return this.resource.noMore},total:function(){return this.resource.total},tabs:function(){return this.$store.state.search.tabs},selectedType:function(){return this.$route.query.type||"all"}},methods:{switchTab:function(t){this.$router.push({name:"search",query:{q:this.words,type:t}})},loadMore:function(){var t=i()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("search/fetchMore",{ctx:this,type:this.selectedType});case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}},t,this,[[0,5]])}));return function(){return t.apply(this,arguments)}}()}},b=(a(730),Object(o.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"search-index"}},[a("div",{staticClass:"search-panel"},[a("v-search",{attrs:{type:t.selectedType},model:{value:t.words,callback:function(e){t.words=e},expression:"words"}}),t._v(" "),a("div",{staticClass:"tabs-panel"},[a("div",{staticClass:"cards"},t._l(t.tabs,function(e,s){return a("button",{key:s,class:{active:t.selectedType==s},domProps:{textContent:t._s(e)},on:{click:function(e){t.switchTab(s)}}})}),0),t._v(" "),a("div",{staticClass:"tail"})])],1),t._v(" "),t._l(t.tabs,function(e,s){return s==t.selectedType?a("div",{key:s,staticClass:"container"},[t.list?t._l(t.list,function(e){return a(e.type+"-item",{key:e.type+"-"+e.id,tag:"component",attrs:{item:e,"in-common":e.type!=t.selectedType}})}):t._e()],2):t._e()}),t._v(" "),t.list?a("more-btn",{attrs:{"no-more":t.noMore,loading:t.loading,length:t.list.length},on:{fetch:t.loadMore}}):a("p",{staticClass:"error"},[t._v("错误的搜索类型")])],2)},[],!1,null,null,null));b.options.__file="search.vue";e.default=b.exports}}]);
//# sourceMappingURL=search.chunk.55608212.js.map