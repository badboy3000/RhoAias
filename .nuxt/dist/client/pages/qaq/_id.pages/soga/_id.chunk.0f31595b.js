(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{505:function(t,e,n){},517:function(t,e,n){},518:function(t,e,n){},519:function(t,e,n){},520:function(t,e,n){},521:function(t,e,n){},535:function(t,e,n){"use strict";var s=n(505);n.n(s).a},548:function(t,e,n){"use strict";n(12);var s=n(2),i=n.n(s),o=(n(45),n(123)),a={name:"VoteButton",props:{type:{required:!0,type:String,validator:function(t){return~["answer"].indexOf(t)}},id:{required:!0,type:Number},score:{required:!0,type:Number},total:{required:!0,type:Number},authorId:{required:!0,type:Number},disabled:{type:Boolean,default:!1}},data:function(){return{loading:!1,totalVote:this.total,votedScore:this.score}},computed:{currentUserId:function(){return this.$store.state.login?this.$store.state.user.id:0}},methods:{voteAction:function(){var t=i()(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.disabled){t.next=2;break}return t.abrupt("return");case 2:if(this.currentUserId){t.next=5;break}return this.$channel.$emit("sign-in"),t.abrupt("return");case 5:if(this.currentUserId!==this.authorId){t.next=8;break}return this.$toast.error(e?"不能给自己点赞":"不能给自己点反对"),t.abrupt("return");case 8:if(!this.loading){t.next=10;break}return t.abrupt("return");case 10:return this.loading=!0,t.prev=11,t.next=14,Object(o.vote)({ctx:this,type:this.type,id:this.id,is_agree:e});case 14:n=t.sent,this.totalVote=n.total,this.votedScore=n.result;case 17:return t.prev=17,this.loading=!1,t.finish(17);case 20:case"end":return t.stop()}},t,this,[[11,,17,20]])}));return function(e){return t.apply(this,arguments)}}()}},r=(n(535),n(1)),c=Object(r.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vote-button"},[n("button",{staticClass:"vote-btn vote-up",class:{active:t.votedScore>0},on:{click:function(e){t.voteAction(!0)}}},[n("i",{staticClass:"el-icon-caret-top"}),t._v(" 赞同 "+t._s(t.totalVote)+"\n  ")]),t._v(" "),n("button",{staticClass:"vote-btn vote-down",class:{active:t.votedScore<0},on:{click:function(e){t.voteAction(!1)}}},[n("i",{staticClass:"el-icon-caret-bottom"})])])},[],!1,null,null,null);c.options.__file="VoteButton.vue";e.a=c.exports},559:function(t,e,n){"use strict";var s=n(517);n.n(s).a},560:function(t,e,n){"use strict";var s=n(518);n.n(s).a},561:function(t,e,n){"use strict";var s=n(519);n.n(s).a},562:function(t,e,n){"use strict";var s=n(520);n.n(s).a},563:function(t,e,n){"use strict";var s=n(521);n.n(s).a},570:function(t,e,n){"use strict";var s={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},i=(n(559),n(1)),o=Object(i.a)(s,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-content-txt-parser"},[e("p",{domProps:{innerHTML:this._s(this.item.text)}})])},[],!1,null,null,null);o.options.__file="TxtParser.vue";var a=o.exports,r={name:"JsonContentImgParser",props:{item:{type:Object,required:!0}}},c=(n(560),Object(i.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-content-img-parser"},[n("v-img",{attrs:{src:t.item.url,width:t.item.width,height:t.item.height,full:!0}}),t._v(" "),t.item.text?n("p",{staticClass:"img-tip",domProps:{textContent:t._s(t.item.text)}}):t._e()],1)},[],!1,null,null,null));c.options.__file="ImgParser.vue";var l=c.exports,u={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},m=(n(561),Object(i.a)(u,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-content-txt-parser"},[e("blockquote",{domProps:{innerHTML:this._s(this.item.text)}})])},[],!1,null,null,null));m.options.__file="UseParser.vue";var d=m.exports,p=(n(24),n(29),{name:"JsonContentListParser",props:{item:{type:Object,required:!0}},computed:{list:function(){var t=this.item.text;if(!t)return[];for(;/\n\n/.test(t);)t=t.replace(/\n\n/g,"\n");return t.split("\n")}}}),v=(n(562),Object(i.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-content-list-parser"},["1"===t.item.sort?n("ol",t._l(t.list,function(e,s){return n("li",{key:s,domProps:{textContent:t._s(e)}})}),0):n("ul",t._l(t.list,function(e,s){return n("li",{key:s,domProps:{textContent:t._s(e)}})}),0)])},[],!1,null,null,null));v.options.__file="ListParser.vue";var h=v.exports,_={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},f=(n(563),Object(i.a)(_,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-content-txt-parser"},[this.item.text?e("h3",{domProps:{textContent:this._s(this.item.text)}}):this._e()])},[],!1,null,null,null));f.options.__file="TitleParser.vue";var C={name:"JsonContent",components:{TxtParser:a,ImgParser:l,UseParser:d,ListParser:h,TitleParser:f.exports},props:{content:{required:!0,type:Array}}},b=Object(i.a)(C,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"json-content"},this._l(this.content,function(t,n){return e(t.type+"-parser",{key:n,tag:"component",attrs:{item:t}})}),1)},[],!1,null,null,null);b.options.__file="JsonContent.vue";e.a=b.exports},638:function(t,e,n){},639:function(t,e,n){},722:function(t,e,n){"use strict";var s=n(531),i=n(543),o={name:"QuestionPanel",components:{VPopover:n(523).a,FollowButton:s.a,CommentMain:i.a},props:{qaq:{required:!0,type:Object},answer:{type:Object,default:null}},data:function(){return{collapsed:!0,showCommentModal:!1,showCreateAnswerForm:!1}},computed:{id:function(){return this.qaq.id},collapsedContent:function(){var t=this.qaq.intro.substring(0,78);return this.qaq.images.length&&(t+="[图片]"),"".concat(t,"...")},isGuest:function(){return!this.$store.state.login}},created:function(){this.collapsed=this.qaq.intro||this.qaq.images.length},methods:{loadQAQComment:function(){var t=this;this.showCommentModal=!0,this.$nextTick(function(){t.$channel.$emit("fire-load-comment-question-".concat(t.id))})},collapsedQAQ:function(){this.collapsed=!0,window.scrollTo(0,0)},handleCommentChange:function(t){this.qaq.comment_count+=t}}},a=(n(807),n(1)),r=Object(a.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.qaq?n("div",{attrs:{id:"question-panel"}},[n("div",{staticClass:"qaq-question"},[n("ul",{staticClass:"qaq-tags"},t._l(t.qaq.tags,function(e){return n("li",{key:e.id},[n("a",{attrs:{href:t.$alias.bangumi(e.id)},domProps:{textContent:t._s(e.name)}})])}),0),t._v(" "),n("div",{staticClass:"title"},[n("h1",{domProps:{textContent:t._s(t.qaq.title)}})]),t._v(" "),n("div",{staticClass:"content"},[t.collapsed?n("div",{staticClass:"collapsed-content"},[t._v("\n        "+t._s(t.collapsedContent)+"\n        "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){t.collapsed=!1}}},[t._v("\n          显示全部 "),n("i",{staticClass:"el-icon-arrow-down"})])],1):[n("div",{staticClass:"text-area",domProps:{innerHTML:t._s(t.qaq.content)}}),t._v(" "),t._l(t.qaq.images,function(t,e){return n("div",{key:e,staticClass:"image-package"},[n("v-img",{staticClass:"image",attrs:{src:t.url,width:t.width,height:t.height,full:!0}})],1)})]],2),t._v(" "),n("div",{staticClass:"panel"},[n("follow-button",{attrs:{id:t.id,type:"question"}}),t._v(" "),n("button",{staticClass:"footer-btn",on:{click:t.loadQAQComment}},[n("i",{staticClass:"iconfont icon-talk"}),t._v("\n        "+t._s(t.qaq.comment_count?t.qaq.comment_count+"条评论":"添加评论")+"\n      ")]),t._v(" "),t.collapsed?t._e():n("div",{staticClass:"others"},[n("button",{staticClass:"collapse-btn",on:{click:t.collapsedQAQ}},[n("i",{staticClass:"el-icon-arrow-up"}),n("span",[t._v("收起")])]),t._v(" "),n("v-popover",{attrs:{"report-id":t.id,"report-type":"question"}},[n("button",{staticClass:"collapse-btn"},[n("i",{staticClass:"el-icon-phone"}),n("span",[t._v("举报")])])])],1)],1)]),t._v(" "),n("v-drawer",{attrs:{from:"bottom",size:"100%"},model:{value:t.showCommentModal,callback:function(e){t.showCommentModal=e},expression:"showCommentModal"}},[n("div",{staticClass:"container"},[n("comment-main",{attrs:{id:t.id,"master-id":t.qaq.user_id,auto:!0,"empty-text":"还没有评论",type:"question"},on:{"delete-main-comment":function(e){t.handleCommentChange(-1)},"create-main-comment":function(e){t.handleCommentChange(1)}}},[n("button",{staticClass:"write-btn",staticStyle:{"margin-left":"15px"},attrs:{slot:"header-btn"},on:{click:function(e){t.showCommentModal=!1}},slot:"header-btn"},[t._v("\n          关闭\n        ")])])],1)])],1):t._e()},[],!1,null,null,null);r.options.__file="QuestionPanel.vue";e.a=r.exports},723:function(t,e,n){"use strict";var s=n(570),i=n(548),o=n(543),a=n(523),r={name:"AnswerFlowItem",components:{JsonContent:s.a,VoteButton:i.a,CommentMain:o.a,VPopover:a.a},props:{item:{required:!0,type:Object}},data:function(){return{showCommentModal:!1}},methods:{loadAnswerComment:function(){var t=this;this.showCommentModal=!0,this.$nextTick(function(){t.$channel.$emit("fire-load-comment-answer-".concat(t.item.id))})},handleCommentChange:function(t){this.item.comment_count+=t}}},c=(n(806),n(1)),l=Object(c.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"answer-flow-item",attrs:{id:"answer-"+t.item.id}},[n("header",{staticClass:"answer-header"},[n("a",{staticClass:"avatar",attrs:{href:t.$alias.user(t.item.user.zone)}},[n("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"38",height:"38"}})],1),t._v(" "),n("div",{staticClass:"info"},[n("a",{staticClass:"nickname",attrs:{href:t.$alias.user(t.item.user.zone)},domProps:{textContent:t._s(t.item.user.nickname)}}),t._v(" "),n("p",{staticClass:"oneline signature",domProps:{textContent:t._s(t.item.user.signature)}})])]),t._v(" "),t.item.vote_count?n("div",{staticClass:"answer-meta"},[t.item.source_url?n("span",[n("a",{attrs:{href:t.item.source_url,target:"_blank"}},[t._v("\n        原文链接\n      ")]),t._v("\n      ·\n    ")]):t._e(),t._v(" "),t.item.created_at===t.item.published_at?n("span",[t._v("\n      发布于\n      "),n("v-time",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1):n("span",[t._v("\n      编辑于\n      "),n("v-time",{model:{value:t.item.published_at,callback:function(e){t.$set(t.item,"published_at",e)},expression:"item.published_at"}})],1),t._v("\n    ·\n    "),n("span",[t._v("\n      "+t._s(t.item.vote_count)+" 赞同了该回答\n    ")])]):t._e(),t._v(" "),n("main",{staticClass:"answer-content"},[n("json-content",{attrs:{content:t.item.content}})],1),t._v(" "),n("footer",{staticClass:"answer-footer"},[n("vote-button",{attrs:{id:t.item.id,total:t.item.vote_count,score:t.item.voted,"author-id":t.item.user.id,type:"answer"}}),t._v(" "),n("el-button",{attrs:{type:"text",size:"medium"},on:{click:t.loadAnswerComment}},[n("i",{staticClass:"iconfont icon-talk"}),t._v("\n      "+t._s(t.item.comment_count?t.item.comment_count+" 条评论":"添加评论")+"\n    ")]),t._v(" "),n("v-popover",{attrs:{"report-id":t.item.id,"is-creator":!t.item.source_url,"report-type":"answer"}},[n("el-button",{attrs:{type:"text",size:"medium"}},[n("i",{staticClass:"el-icon-phone"}),t._v("\n        举报\n      ")])],1)],1),t._v(" "),n("v-drawer",{attrs:{from:"bottom",size:"80%"},model:{value:t.showCommentModal,callback:function(e){t.showCommentModal=e},expression:"showCommentModal"}},[n("div",{staticClass:"container"},[n("comment-main",{attrs:{id:t.item.id,"master-id":t.item.user.id,auto:!0,"empty-text":"还没有评论",type:"answer"},on:{"delete-main-comment":function(e){t.handleCommentChange(-1)},"create-main-comment":function(e){t.handleCommentChange(1)}}},[n("button",{staticClass:"write-btn",staticStyle:{"margin-left":"15px"},attrs:{slot:"header-btn"},on:{click:function(e){t.showCommentModal=!1}},slot:"header-btn"},[t._v("关闭")])])],1)])],1)},[],!1,null,null,null);l.options.__file="AnswerFlowItem.vue";e.a=l.exports},806:function(t,e,n){"use strict";var s=n(638);n.n(s).a},807:function(t,e,n){"use strict";var s=n(639);n.n(s).a}}]);
//# sourceMappingURL=_id.chunk.0f31595b.js.map