(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{495:function(t,e,o){},496:function(t,e,o){"use strict";var s=o(495);o.n(s).a},497:function(t,e,o){"use strict";var s=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-error"},[e("span",[this._v("出错了，点击重试")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-nothing"},[e("img",{attrs:{src:o(259),alt:"no-content"}}),this._v(" "),e("span",[this._v("这里什么都没有")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-loading"},[e("i"),this._v(" "),e("span",[this._v("加载中…")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-fetch-btn-text"},[e("span",[this._v("点击加载更多")])])}],a=o(5),n={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted:function(){this.auto&&this.onScroll()},methods:{getTarget:function(){for(var t=this.$el;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){var e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll:function(){var t=this;if(!this.error){a.a.checkInView(this.$el)&&this.fetch();var e=a.a.on(this.getTarget(),["scroll"],this.$utils.throttle(function(){t.error||(!t.noMore&&t.auto?a.a.checkInView(t.$el)&&t.fetch():a.a.off(e))},200))}}}},r=(o(496),o(1)),i=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flow-state-wrap"},[t.error?o("div",{on:{click:t.fetch}},[t._t("error",[t._m(0)])],2):t.nothing?o("div",[t._t("nothing",[t._m(1)])],2):t.noMore?o("div",[t._t("no-more",[t.displayNoMore?o("div",{staticClass:"state-no-more"},[o("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?o("div",[t._t("loading",[t._m(2)])],2):t.auto?o("div",{staticClass:"state-shim"}):o("button",{on:{click:t.fetch}},[t._t("load-btn",[t._m(3)])],2)])},s,!1,null,null,null);i.options.__file="FlowState.vue";var l=i.exports,u=(o(45),{name:"FlowList",components:{FlowState:l},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source:function(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore:function(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,changing:this.changing,_extra:this.extra})}}}),c=Object(r.a)(u,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.source?o("div",[t._t("default",null,{flow:t.source.list}),t._v(" "),o("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,null);c.options.__file="FlowList.vue";e.a=c.exports},646:function(t,e,o){},815:function(t,e,o){"use strict";var s=o(646);o.n(s).a},942:function(t,e,o){"use strict";o.r(e);o(12);var s=o(2),a=o.n(s),n=o(497),r={name:"UserMark",asyncData:function(){var t=a()(regeneratorRuntime.mark(function t(e){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.store,t.next=3,o.dispatch("flow/initData",{func:"getUserBookmarks",type:"page",sort:"post",count:9999});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{FlowList:n.a},data:function(){return{nav:[{label:"帖子",type:"post"},{label:"相册",type:"image"},{label:"答案",type:"answer"},{label:"漫评",type:"score"},{label:"视频",type:"video"}],type:"post"}},computed:{},mounted:function(){},methods:{switchTab:function(t){this.getData(t)},getData:function(t){this.$store.dispatch("flow/initData",{func:"getUserBookmarks",type:"page",sort:t,count:9999}),this.type=t}}},i=(o(815),o(1)),l=Object(i.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"user-mark"}},[o("header",{staticClass:"label"},t._l(t.nav,function(e){return o("button",{key:e.type,class:{active:t.type===e.type},on:{click:function(o){t.switchTab(e.type)}}},[t._v(t._s(e.label))])}),0),t._v(" "),o("main",{staticClass:"user-mark-view"},["post"===t.type?o("flow-list",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"post"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.flow;return o("ul",{staticClass:"posts"},t._l(s,function(e){return o("li",{key:e.id},[o("a",{class:[e.deleted_at?"deleted":"blue-link"],attrs:{href:e.deleted_at?"javascript:;":t.$alias.post(e.id)},domProps:{textContent:t._s(e.title)}})])}),0)}}])}):t._e(),t._v(" "),"image"===t.type?o("flow-list",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"image"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.flow;return o("ul",{staticClass:"images"},t._l(s,function(e){return o("li",{key:e.id},[o("a",{attrs:{href:e.deleted_at?"javascript:;":t.$alias.image(e.id)}},[o("v-img",{attrs:{src:e.url,width:140,height:180}}),t._v(" "),e.deleted_at?o("div",{staticClass:"delete-mask"},[t._v("该相册已删除")]):t._e()],1)])}),0)}}])}):"answer"===t.type?o("flow-list",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"answer"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.flow;return o("ul",{staticClass:"answers"},t._l(s,function(e){return o("li",{key:e.id},[o("a",{class:[e.deleted_at?"deleted":"blue-link"],attrs:{href:e.deleted_at?"javascript:;":t.$alias.answer(e.id)},domProps:{textContent:t._s(e.intro||"[图片]")}})])}),0)}}])}):"score"===t.type?o("flow-list",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"score"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.flow;return o("ul",{staticClass:"scores"},t._l(s,function(e){return o("li",{key:e.id},[o("a",{class:[e.deleted_at?"deleted":"blue-link"],attrs:{href:e.deleted_at?"javascript:;":t.$alias.score(e.id)},domProps:{textContent:t._s(e.title)}}),t._v(" "),o("p",{domProps:{textContent:t._s(e.intro||"[图片]")}})])}),0)}}])}):"video"===t.type?o("flow-list",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"video"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.flow;return o("ul",{staticClass:"videos"},t._l(s,function(e){return o("li",{key:e.id},[o("a",{attrs:{href:e.deleted_at?"javascript:;":t.$alias.video(e.id)}},[o("div",{staticClass:"poster"},[o("v-img",{attrs:{src:e.poster,width:120,height:80}}),t._v(" "),e.deleted_at?o("div",{staticClass:"delete-mask"},[t._v("\n                视频已失效\n              ")]):t._e()],1),t._v(" "),o("p",{staticClass:"name",domProps:{textContent:t._s(e.name)}})])])}),0)}}])}):t._e()],1)])},[],!1,null,null,null);l.options.__file="mark.vue";e.default=l.exports}}]);
//# sourceMappingURL=mark.chunk.3abe9c15.js.map