(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{495:function(t,e,a){},496:function(t,e,a){"use strict";var n=a(495);a.n(n).a},497:function(t,e,a){"use strict";var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-error"},[e("span",[this._v("出错了，点击重试")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-nothing"},[e("img",{attrs:{src:a(259),alt:"no-content"}}),this._v(" "),e("span",[this._v("这里什么都没有")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-loading"},[e("i"),this._v(" "),e("span",[this._v("加载中…")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-fetch-btn-text"},[e("span",[this._v("点击加载更多")])])}],i=a(5),s={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted:function(){this.auto&&this.onScroll()},methods:{getTarget:function(){for(var t=this.$el;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){var e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll:function(){var t=this;if(!this.error){i.a.checkInView(this.$el)&&this.fetch();var e=i.a.on(this.getTarget(),["scroll"],this.$utils.throttle(function(){t.error||(!t.noMore&&t.auto?i.a.checkInView(t.$el)&&t.fetch():i.a.off(e))},200))}}}},o=(a(496),a(1)),r=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flow-state-wrap"},[t.error?a("div",{on:{click:t.fetch}},[t._t("error",[t._m(0)])],2):t.nothing?a("div",[t._t("nothing",[t._m(1)])],2):t.noMore?a("div",[t._t("no-more",[t.displayNoMore?a("div",{staticClass:"state-no-more"},[a("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?a("div",[t._t("loading",[t._m(2)])],2):t.auto?a("div",{staticClass:"state-shim"}):a("button",{on:{click:t.fetch}},[t._t("load-btn",[t._m(3)])],2)])},n,!1,null,null,null);r.options.__file="FlowState.vue";var l=r.exports,u=(a(45),{name:"FlowList",components:{FlowState:l},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source:function(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore:function(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,changing:this.changing,_extra:this.extra})}}}),c=Object(o.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.source?a("div",[t._t("default",null,{flow:t.source.list}),t._v(" "),a("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,null);c.options.__file="FlowList.vue";e.a=c.exports},515:function(t,e,a){},556:function(t,e,a){"use strict";var n=a(515);a.n(n).a},572:function(t,e,a){"use strict";a(45);var n={name:"ImageWaterfallFlow",components:{waterfall:function(){return"undefined"==typeof window?a.e(1).then(a.bind(null,923)):a.e(66).then(a.bind(null,952))},"waterfall-slot":function(){return"undefined"==typeof window?a.e(1).then(a.bind(null,923)):a.e(65).then(a.bind(null,956))}},props:{list:{required:!0,type:Array,default:function(){return[]}},bangumiId:{type:[Number,String],default:0},userZone:{type:String,default:""},width:{type:Number,default:145}},methods:{computeBoxHeight:function(t){return this.computeImageHeight(t)+106},computeImageHeight:function(t){if(!t)return 0;var e=parseInt(t.height/t.width*this.width,10);return e>240?240:e}}},i=(a(556),a(1)),s=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"image-waterfall-flow"}},[a("not-ssr",[t.list.length?a("waterfall",{attrs:{"line-gap":t.width+10,"auto-resize":!0}},t._l(t.list,function(e,n){return a("waterfall-slot",{key:e.id,attrs:{order:n,width:t.width,height:t.computeBoxHeight(e.source)}},[t.computeImageHeight(e.source)?a("div",{staticClass:"image"},[a("a",{staticClass:"image-box",class:{"album-box":e.is_album},attrs:{href:t.$alias.image(e.id)}},[e.is_creator?a("i",{staticClass:"is-creator iconfont icon-huangguan"}):t._e(),t._v(" "),a("v-img",{attrs:{src:e.source.url,lazy:!1,width:t.width,height:t.computeImageHeight(e.source)}}),t._v(" "),e.is_album?a("div",{staticClass:"is-album"},[a("i",{staticClass:"el-icon-picture-outline"}),t._v(" "),a("span",{staticClass:"image-count",domProps:{textContent:t._s(e.image_count)}})]):t._e()],1),t._v(" "),a("div",{staticClass:"intro"},[a("p",{staticClass:"name oneline",domProps:{textContent:t._s(e.name)}}),t._v(" "),a("div",{staticClass:"social"},[e.is_creator?a("span",[a("i",{staticClass:"iconfont icon-fantuan"}),t._v(" "+t._s(e.reward_count)+"\n              ")]):a("span",[a("i",{staticClass:"iconfont icon-like"}),t._v(" "+t._s(e.like_count)+"\n              ")]),t._v(" "),a("span",[a("i",{staticClass:"iconfont icon--mark"}),t._v(" "+t._s(e.mark_count)+"\n              ")]),t._v(" "),a("span",[a("i",{staticClass:"iconfont icon-talk"}),t._v(" "+t._s(e.comment_count)+"\n              ")])])]),t._v(" "),a("div",{staticClass:"about"},[t.userZone?[a("a",{staticClass:"bangumi-avatar",attrs:{href:t.$alias.bangumi(e.bangumi.id)}},[a("v-img",{attrs:{lazy:!1,src:e.bangumi.avatar,width:"60"}})],1),t._v(" "),a("div",{staticClass:"info"},[a("a",{staticClass:"main-name oneline",attrs:{href:t.$alias.bangumi(e.bangumi.id)},domProps:{textContent:t._s(e.bangumi.name)}})])]:t.bangumiId?[a("a",{staticClass:"user-avatar",attrs:{href:t.$alias.user(e.user.zone)}},[a("v-img",{attrs:{src:e.user.avatar,lazy:!1,width:"30",height:"30"}})],1),t._v(" "),a("a",{staticClass:"main-name",attrs:{href:t.$alias.user(e.user.zone)},domProps:{textContent:t._s(e.user.nickname)}})]:[a("a",{staticClass:"bangumi-avatar",attrs:{href:t.$alias.bangumi(e.bangumi.id)}},[a("v-img",{attrs:{lazy:!1,src:e.bangumi.avatar,width:"30"}})],1),t._v(" "),a("div",{staticClass:"info"},[a("p",{staticClass:"main-info"},[a("span",[t._v("UP：")]),t._v(" "),a("a",{staticClass:"oneline",attrs:{href:t.$alias.user(e.user.zone)},domProps:{textContent:t._s(e.user.nickname)}})]),t._v(" "),a("a",{staticClass:"oneline",attrs:{href:t.$alias.bangumi(e.bangumi.id)},domProps:{textContent:t._s(e.bangumi.name)}})])]],2)]):t._e()])}),1):t._e()],1)],1)},[],!1,null,null,null);s.options.__file="ImageWaterfallFlow.vue";e.a=s.exports},941:function(t,e,a){"use strict";a.r(e);a(12);var n=a(2),i=a.n(n),s=a(497),o=a(572),r={name:"UserImage",asyncData:function(){var t=i()(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.store,n=e.params,t.next=3,a.dispatch("flow/initData",{func:"getUserImage",type:"page",sort:"news",id:n.zone});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{FlowList:s.a,ImageWaterfallFlow:o.a},props:{zone:{type:String,required:!0}}},l=a(1),u=Object(l.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("flow-list",{attrs:{id:t.zone,func:"getUserImage",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.flow;return a("image-waterfall-flow",{attrs:{list:n,"user-zone":t.zone,"bangumi-id":""}})}}])})},[],!1,null,null,null);u.options.__file="pins.vue";e.default=u.exports}}]);
//# sourceMappingURL=pins.chunk.ae8449ee.js.map