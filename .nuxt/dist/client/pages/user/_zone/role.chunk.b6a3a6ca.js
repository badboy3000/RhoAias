(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{495:function(t,e,n){},496:function(t,e,n){"use strict";var a=n(495);n.n(a).a},497:function(t,e,n){"use strict";var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-error"},[e("span",[this._v("出错了，点击重试")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-nothing"},[e("img",{attrs:{src:n(259),alt:"no-content"}}),this._v(" "),e("span",[this._v("这里什么都没有")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-loading"},[e("i"),this._v(" "),e("span",[this._v("加载中…")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-fetch-btn-text"},[e("span",[this._v("点击加载更多")])])}],o=n(5),s={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted:function(){this.auto&&this.onScroll()},methods:{getTarget:function(){for(var t=this.$el;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){var e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll:function(){var t=this;if(!this.error){o.a.checkInView(this.$el)&&this.fetch();var e=o.a.on(this.getTarget(),["scroll"],this.$utils.throttle(function(){t.error||(!t.noMore&&t.auto?o.a.checkInView(t.$el)&&t.fetch():o.a.off(e))},200))}}}},r=(n(496),n(1)),i=Object(r.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flow-state-wrap"},[t.error?n("div",{on:{click:t.fetch}},[t._t("error",[t._m(0)])],2):t.nothing?n("div",[t._t("nothing",[t._m(1)])],2):t.noMore?n("div",[t._t("no-more",[t.displayNoMore?n("div",{staticClass:"state-no-more"},[n("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?n("div",[t._t("loading",[t._m(2)])],2):t.auto?n("div",{staticClass:"state-shim"}):n("button",{on:{click:t.fetch}},[t._t("load-btn",[t._m(3)])],2)])},a,!1,null,null,null);i.options.__file="FlowState.vue";var l=i.exports,u=(n(45),{name:"FlowList",components:{FlowState:l},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source:function(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore:function(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,changing:this.changing,_extra:this.extra})}}}),c=Object(r.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.source?n("div",[t._t("default",null,{flow:t.source.list}),t._v(" "),n("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,null);c.options.__file="FlowList.vue";e.a=c.exports},503:function(t,e,n){},533:function(t,e,n){"use strict";var a=n(503);n.n(a).a},545:function(t,e,n){"use strict";n(45);var a={name:"CartoonRoleFlowItem",props:{item:{required:!0,type:Object},bangumiId:{type:[Number,String],default:0},userZone:{required:!0,type:String},index:{type:Number,default:-1}}},o=(n(533),n(1)),s=Object(o.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"cartoon-role-flow-item"},[n("div",{staticClass:"clearfix"},[n("a",{staticClass:"avatar",attrs:{href:t.$alias.cartoonRole(t.item.id)}},[n("v-img",{attrs:{src:t.item.avatar,width:"100",height:"100"}})],1),t._v(" "),n("div",{staticClass:"summary"},[n("a",{staticClass:"role",attrs:{href:t.$alias.cartoonRole(t.item.id)}},[n("span",{staticClass:"name",domProps:{textContent:t._s(t.item.name)}}),t._v(" "),n("span",{staticClass:"intro"},[t._v("："+t._s(t.item.intro))])]),t._v(" "),t.item.lover?n("div",{staticClass:"lover"},[n("span",[t._v("守护者：")]),t._v(" "),n("a",{staticClass:"fr",attrs:{href:t.$alias.user(t.item.lover.zone)}},[n("span",{domProps:{textContent:t._s(t.item.lover.nickname)}}),t._v(" "),n("v-img",{staticClass:"image",attrs:{src:t.item.lover.avatar,avatar:!0,width:"20",height:"20"}})],1)]):n("div",{staticClass:"lover"})]),t._v(" "),n("div",{staticClass:"footer"},[t.userZone?n("div",{staticClass:"stats"},[n("span",[t._v("粉丝: "+t._s(t.item.fans_count))]),t._v("\n        ·\n        "),n("span",[t._v("团子: "+t._s(t.item.star_count))]),t._v("\n        ·\n        "),n("span",[t._v("贡献: "+t._s(t.item.has_star))])]):n("div",{staticClass:"stats"},[n("span",[t._v("\n          粉丝:\n          "+t._s(t.$utils.shortenNumber(t.item.fans_count))+"\n        ")]),t._v(" "),n("span",[t._v("\n          团子:\n          "+t._s(t.$utils.shortenNumber(t.item.star_count))+"\n        ")]),t._v(" "),t.bangumiId||-1===t.index?t._e():[n("span",[t._v("排名:")]),t._v(" "),n("span",{staticClass:"top",attrs:{"data-index":t.item.fans_count?t.index+1:"无"}})]],2),t._v(" "),n("a",{staticClass:"bangumi",attrs:{href:t.$alias.bangumi(t.item.bangumi.id)},domProps:{textContent:t._s(t.item.bangumi.name)}})])])])},[],!1,null,null,null);s.options.__file="CartoonRoleFlowItem.vue";e.a=s.exports},962:function(t,e,n){"use strict";n.r(e);n(12);var a=n(2),o=n.n(a),s=n(497),r=n(545),i={name:"UserCartoonRole",asyncData:function(){var t=o()(regeneratorRuntime.mark(function t(e){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,a=e.params,t.next=3,n.dispatch("flow/initData",{func:"getUserRole",type:"page",sort:"news",id:a.zone});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{FlowList:s.a,CartoonRoleFlowItem:r.a},props:{zone:{type:String,required:!0}}},l=n(1),u=Object(l.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flow-list",{attrs:{id:t.zone,func:"getUserRole",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.flow;return n("ul",{staticClass:"container"},t._l(a,function(e){return n("cartoon-role-flow-item",{key:e.id,attrs:{item:e,"user-zone":t.zone,"bangumi-id":""}})}),1)}}])})},[],!1,null,null,null);u.options.__file="role.vue";e.default=u.exports}}]);
//# sourceMappingURL=role.chunk.b6a3a6ca.js.map