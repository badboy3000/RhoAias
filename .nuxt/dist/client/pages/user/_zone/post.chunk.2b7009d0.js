(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{495:function(t,e,s){},496:function(t,e,s){"use strict";var i=s(495);s.n(i).a},497:function(t,e,s){"use strict";var i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-error"},[e("span",[this._v("出错了，点击重试")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-nothing"},[e("img",{attrs:{src:s(259),alt:"no-content"}}),this._v(" "),e("span",[this._v("这里什么都没有")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-loading"},[e("i"),this._v(" "),e("span",[this._v("加载中…")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"state-fetch-btn-text"},[e("span",[this._v("点击加载更多")])])}],a=s(5),n={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted:function(){this.auto&&this.onScroll()},methods:{getTarget:function(){for(var t=this.$el;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){var e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll:function(){var t=this;if(!this.error){a.a.checkInView(this.$el)&&this.fetch();var e=a.a.on(this.getTarget(),["scroll"],this.$utils.throttle(function(){t.error||(!t.noMore&&t.auto?a.a.checkInView(t.$el)&&t.fetch():a.a.off(e))},200))}}}},o=(s(496),s(1)),r=Object(o.a)(n,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flow-state-wrap"},[t.error?s("div",{on:{click:t.fetch}},[t._t("error",[t._m(0)])],2):t.nothing?s("div",[t._t("nothing",[t._m(1)])],2):t.noMore?s("div",[t._t("no-more",[t.displayNoMore?s("div",{staticClass:"state-no-more"},[s("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?s("div",[t._t("loading",[t._m(2)])],2):t.auto?s("div",{staticClass:"state-shim"}):s("button",{on:{click:t.fetch}},[t._t("load-btn",[t._m(3)])],2)])},i,!1,null,null,null);r.options.__file="FlowState.vue";var l=r.exports,c=(s(45),{name:"FlowList",components:{FlowState:l},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source:function(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore:function(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,changing:this.changing,_extra:this.extra})}}}),u=Object(o.a)(c,function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.source?s("div",[t._t("default",null,{flow:t.source.list}),t._v(" "),s("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,null);u.options.__file="FlowList.vue";e.a=u.exports},502:function(t,e,s){},532:function(t,e,s){"use strict";var i=s(502);s.n(i).a},544:function(t,e,s){"use strict";s(45);var i={name:"PostFlowItem",props:{item:{required:!0,type:Object},bangumiId:{type:[Number,String],default:0},userZone:{type:String,default:""}},methods:{imageFilter:function(t){return t.slice(0,3)}}},a=(s(532),s(1)),n=Object(a.a)(i,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"post-flow-item"},[s("router-link",{attrs:{to:t.$alias.post(t.item.id),tag:"div"}},[s("div",{staticClass:"header"},[t.userZone?[s("router-link",{staticClass:"bangumi-avatar",attrs:{to:t.$alias.bangumi(t.item.bangumi.id)}},[s("v-img",{attrs:{src:t.item.bangumi.avatar,width:"35",height:"35"}})],1),t._v(" "),s("div",{staticClass:"info"},[s("router-link",{staticClass:"name oneline",attrs:{to:t.$alias.bangumi(t.item.bangumi.id)},domProps:{textContent:t._s(t.item.bangumi.name)}}),t._v(" "),s("v-time",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)]:[s("router-link",{staticClass:"user-avatar",attrs:{to:t.$alias.user(t.item.user.zone)}},[s("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),s("div",{staticClass:"info"},[s("router-link",{staticClass:"name oneline",attrs:{to:t.$alias.user(t.item.user.zone)},domProps:{textContent:t._s(t.item.user.nickname)}}),t._v(" "),s("v-time",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)]],2),t._v(" "),s("div",{staticClass:"body"},[s("div",{staticClass:"title"},[t.item.top_at&&t.bangumiId?s("div",{staticClass:"top_badge"},[t._v("置顶")]):t._e(),t._v(" "),t.item.is_nice?s("div",{staticClass:"nice_badge"},[t._v("精")]):t._e(),t._v(" "),t.item.is_creator?s("div",{staticClass:"creator_badge"},[t._v("原创")]):t._e(),t._v(" "),s("p",{staticClass:"oneline",domProps:{textContent:t._s(t.item.title)}})]),t._v(" "),s("p",{staticClass:"content",domProps:{textContent:t._s(t.item.desc)}}),t._v(" "),t.item.images.length?s("div",{staticClass:"images"},[1===t.item.images.length?s("v-img",{staticClass:"poster-image",attrs:{src:t.item.images[0].url,width:"100%",height:"130"}}):s("div",{staticClass:"image-list"},t._l(t.imageFilter(t.item.images),function(t,e){return s("v-img",{key:e,staticClass:"image",attrs:{src:t.url,width:"32%",height:"93"}})}),1)],1):t._e(),t._v(" "),t.item.bangumi||t.item.tags.length?s("div",{staticClass:"tags"},[t.item.bangumi&&!t.userZone?s("router-link",{attrs:{to:t.$alias.bangumi(t.item.bangumi.id)}},[s("i",{staticClass:"iconfont icon-tag"}),t._v(" "),s("span",{domProps:{textContent:t._s(t.item.bangumi.name)}})]):t._e(),t._v(" "),t._l(t.item.tags,function(e){return s("span",{key:e.id,staticClass:"tag",domProps:{textContent:t._s(e.name)}})})],2):t._e()]),t._v(" "),s("div",{staticClass:"footer"},[t.item.is_creator?s("div",[s("i",{staticClass:"iconfont icon-fantuan"}),t._v(" "),s("span",[t._v(t._s(t.$utils.shortenNumber(t.item.reward_count)))])]):s("div",[s("i",{staticClass:"iconfont icon-like"}),t._v(" "),s("span",[t._v(t._s(t.$utils.shortenNumber(t.item.like_count)))])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon--mark"}),t._v(" "),s("span",[t._v(t._s(t.$utils.shortenNumber(t.item.mark_count)))])]),t._v(" "),s("div",[s("i",{staticClass:"iconfont icon-talk"}),t._v(" "),s("span",[t._v(t._s(t.$utils.shortenNumber(t.item.comment_count)))])])])]),t._v(" "),s("div",{staticClass:"hr"})],1)},[],!1,null,null,null);n.options.__file="PostFlowItem.vue";e.a=n.exports},647:function(t,e,s){},816:function(t,e,s){"use strict";var i=s(647);s.n(i).a},975:function(t,e,s){"use strict";s.r(e);s(12);var i=s(2),a=s.n(i),n=s(497),o=s(544),r={name:"UserPost",asyncData:function(){var t=a()(regeneratorRuntime.mark(function t(e){var s,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.store,i=e.params,t.next=3,s.dispatch("flow/initData",{func:"getUserPostReply",sort:"news",type:"page",id:i.zone});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),components:{FlowList:n.a,PostFlowItem:o.a},props:{zone:{type:String,required:!0}},data:function(){return{active:"回帖"}},methods:{switchTab:function(t){"回帖"===t?this.$store.dispatch("flow/initData",{func:"getUserPostReply",sort:"news",type:"page",id:this.zone}):this.$store.dispatch("flow/initData",{func:"getUserPost",sort:"news",type:"page",id:this.zone}),this.active=t},imageFilter:function(t){return t.slice(0,3)}}},l=(s(816),s(1)),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"user-post"}},[s("div",{staticClass:"label"},t._l(["发帖","回帖"],function(e){return s("button",{key:e,class:{active:t.active===e},on:{click:function(s){t.switchTab(e)}}},[t._v(t._s(e))])}),0),t._v(" "),"发帖"===t.active?[s("flow-list",{attrs:{id:t.zone,func:"getUserPost",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.flow;return s("ul",{},t._l(i,function(e){return s("post-flow-item",{key:e.id,attrs:{"user-zone":t.zone,item:e,"bangumi-id":""}})}),1)}}])})]:"回帖"===t.active?[s("flow-list",{attrs:{id:t.zone,func:"getUserPostReply",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.flow;return s("ul",{attrs:{id:"posts-of-reply"}},t._l(i.list,function(e){return s("li",{key:e.id},[s("a",{staticClass:"header",attrs:{href:t.$alias.post(e.post.id)},domProps:{textContent:t._s(e.post.title)}}),t._v(" "),s("a",{staticClass:"origin",attrs:{href:t.$alias.post(e.post.id,{comment:e.post.id})}},[s("div",{staticClass:"content",domProps:{innerHTML:t._s(e.post.content)}}),t._v(" "),e.post.images.length?s("div",{staticClass:"images clearfix"},[1===e.post.images.length?s("v-img",{staticClass:"poster-image",attrs:{src:e.post.images[0].url,width:"100%",height:"190"}}):s("div",{staticClass:"image-list"},t._l(t.imageFilter(e.post.images),function(t,e){return s("v-img",{key:e,staticClass:"image",attrs:{src:t.url,width:"32%",height:"93"}})}),1)],1):t._e()]),t._v(" "),s("a",{staticClass:"reply",attrs:{href:t.$alias.post(e.post.id,{comment:e.post.id,reply:e.id})}},[s("div",{staticClass:"content",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),e.images.length?s("div",{staticClass:"images clearfix"},[1===e.images.length?s("v-img",{staticClass:"poster-image",attrs:{src:e.images[0].url,width:"100%",height:"190"}}):s("div",{staticClass:"image-list"},t._l(t.imageFilter(e.images),function(t,e){return s("v-img",{key:e,staticClass:"image",attrs:{src:t.url,width:"32%",height:"93"}})}),1)],1):t._e()]),t._v(" "),s("a",{staticClass:"footer",attrs:{href:t.$alias.bangumi(e.bangumi.id)}},[t._v("\n            回复于\n            "),s("span",{domProps:{textContent:t._s(e.bangumi.name)}}),t._v(" "),s("v-time",{model:{value:e.created_at,callback:function(s){t.$set(e,"created_at",s)},expression:"item.created_at"}})],1)])}),0)}}])})]:t._e()],2)},[],!1,null,null,null);c.options.__file="post.vue";e.default=c.exports}}]);
//# sourceMappingURL=post.chunk.2b7009d0.js.map