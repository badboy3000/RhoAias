(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{100:function(t,e,n){},101:function(t,e,n){},102:function(t,e,n){},103:function(t,e,n){},104:function(t,e,n){},105:function(t,e,n){},106:function(t,e,n){},107:function(t,e,n){},108:function(t,e,n){},109:function(t,e,n){},110:function(t,e,n){},111:function(t,e,n){t.exports={inline:"inline-2j",avatar:"avatar-GU","image-wrap":"image-wrap-1b",imageWrap:"image-wrap-1b",block:"block-1p",retry:"retry-1N","padding-shim":"padding-shim-3L",paddingShim:"padding-shim-3L",message:"message-5_","load-gif":"load-gif-fE",loadGif:"load-gif-fE",rolling:"rolling-2a",poster:"poster-2J","css-blur":"css-blur-2G",cssBlur:"css-blur-2G","css-fade":"css-fade-1m",cssFade:"css-fade-1m"}},112:function(t,e,n){},113:function(t,e,n){"use strict";n(45);var r={name:"VRadio",props:{title:{type:String,default:""},align:{type:String,default:""},options:{type:Array,required:!0},value:{type:[String,Number],default:""}},data:function(){return{currentValue:this.value}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("input",t)}}},i=(n(310),n(1)),o=Object(i.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mint-radiolist",on:{change:function(e){t.$emit("change",t.currentValue)}}},[t.title?n("label",{staticClass:"mint-radiolist-title",domProps:{textContent:t._s(t.title)}}):t._e(),t._v(" "),t._l(t.options,function(e,r){return n("div",{key:r,staticClass:"mint-radio-wrap"},[n("label",{staticClass:"mint-radiolist-label"},[n("span",{staticClass:"mint-radio",class:{"is-right":"right"===t.align}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"mint-radio-input",attrs:{disabled:e.disabled,type:"radio"},domProps:{value:e.value||e,checked:t._q(t.currentValue,e.value||e)},on:{change:function(n){t.currentValue=e.value||e}}}),t._v(" "),n("span",{staticClass:"mint-radio-core"})]),t._v(" "),n("span",{staticClass:"mint-radio-label",domProps:{textContent:t._s(e.label||e)}})])])})],2)},[],!1,null,null,null);o.options.__file="Radio.vue";e.a=o.exports},115:function(t,e,n){"use strict";n(24),n(10);e.a=function(t){var e="undefined"!=typeof window;if(e&&window.__JWT_TOKEN__)return window.__JWT_TOKEN__;var n="",r=e?document.cookie:t?t.headers.cookie:"";r&&r.split("; ").forEach(function(t){var e=t.split("=");"JWT-TOKEN"===e[0]&&(n=e[1])});var i=t?t.headers.authorization:"";return i&&(n=i.split("Bearer ")[1]),e&&(window.__JWT_TOKEN__=n),n}},122:function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"g",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"e",function(){return s}),n.d(e,"d",function(){return c}),n.d(e,"a",function(){return u}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return d});n(13);var r=function(t,e){var n=e.id;return t.$axios.$get("bangumi/".concat(n,"/show"))},i=function(t){return t.$axios.$get("bangumi/released")},o=function(t){return t.$axios.$get("bangumi/tags")},a=function(t,e){var n=e.tags,r=e.page,i=e.take;return t.$axios.$get("bangumi/category",{params:{id:n,page:r,take:i}})},s=function(t,e){var n=e.id;return t.$axios.$get("bangumi/".concat(n,"/videos"))},c=function(t,e){var n=e.id;return t.$axios.$get("score/bangumis",{params:{id:n}})},u=function(t){return t.$axios.$get("search/bangumis")},l=function(t,e){var n=e.id;return t.$axios.$get("bangumi/".concat(n,"/posts/top"))},d=function(t,e){var n=e.year;return t.$axios.get("bangumi/timeline",{params:{year:n}})}},123:function(t,e,n){"use strict";n.r(e),n.d(e,"users",function(){return r}),n.d(e,"like",function(){return i}),n.d(e,"reward",function(){return o}),n.d(e,"follow",function(){return a}),n.d(e,"mark",function(){return s}),n.d(e,"vote",function(){return c});var r=function(t){var e=t.ctx,n=t.type,r=t.id,i=t.last_id,o=t.take,a=t.model;return e.$axios.$get("toggle/users",{params:{id:r,last_id:i,take:o,model:a,type:n}})},i=function(t){var e=t.ctx,n=t.type,r=t.id;return e.$axios.$post("toggle/like",{type:n,id:r})},o=function(t){var e=t.ctx,n=t.type,r=t.id;return e.$axios.$post("toggle/reward",{type:n,id:r})},a=function(t){var e=t.ctx,n=t.type,r=t.id;return e.$axios.$post("toggle/follow",{type:n,id:r})},s=function(t){var e=t.ctx,n=t.type,r=t.id;return e.$axios.$post("toggle/mark",{type:n,id:r})},c=function(t){var e=t.ctx,n=t.type,r=t.id,i=t.is_agree;return e.$axios.$post("toggle/vote",{type:n,id:r,is_agree:i})}},162:function(t,e,n){"use strict";var r=n(111),i=n.n(r);e.default=i.a},169:function(t,e,n){"use strict";n(13);var r={name:"SearchInput",props:{value:{type:String,default:""},type:{type:String,default:"all"},showSuggestion:{type:Boolean,default:!0}},data:function(){return{word:this.value,selectedType:this.type,cacheKey:"search-history",typing:!1,filteredSelect:[],selectedIndex:-1}},computed:{bangumis:function(){return this.$store.state.bangumi.all},displaySuggestion:function(){return this.showSuggestion&&this.word.length&&this.typing&&this.filteredSelect.length}},mounted:function(){var t=this;this.$watch("value",function(e){t.word=e,t.typing=!0,t.selectedIndex=-1,t.handleEnter(e)}),this.$watch("word",function(e){t.$emit("input",e)}),this.$watch("$route",function(e){"search"===e.name&&(t.word=e.query.q,t.selectedType=e.query.type,setTimeout(function(){t.typing=!1},0))})},methods:{handleInputBlur:function(){this.$emit("input-blur"),document.body.scrollTop=0},handleInputFocus:function(){this.$emit("input-focus"),document.body.scrollTop=0},clear:function(){this.word=""},submit:function(){var t=-1!==this.selectedIndex?this.filteredSelect[this.selectedIndex].name:this.word;t&&(this.setHistory(t),this.$router.push({name:"search",query:{q:t,type:this.selectedType}}))},setHistory:function(t){var e=this;setTimeout(function(){var n=e.getHistory(),r=n.indexOf(t);-1!==r&&n.splice(r,1),n.unshift(t),n.length>10&&n.pop();try{localStorage.setItem(e.cacheKey,JSON.stringify(n))}catch(t){}},0)},getHistory:function(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(t){return[]}},clickToSearch:function(t){this.selectedIndex=t,this.submit()},handleEnter:function(t){this.filteredSelect=t?this.bangumis.filter(function(e){return e.alias.indexOf(t)>-1||e.name.indexOf(t)>-1}):[]}}},i=(n(304),n(1)),o=Object(i.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"search-input-wrap",attrs:{method:"get",action:"#"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t._m(0),t._v(" "),t.word?n("button",{staticClass:"clear-btn",attrs:{type:"button"},on:{click:t.clear}},[t._v("\n    ×\n  ")]):t._e(),t._v(" "),n("div",{staticClass:"input-wrap"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.word,expression:"word",modifiers:{trim:!0}}],attrs:{maxlength:"200",name:"q",type:"search","aria-autocomplete":"both","aria-haspopup":"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",role:"combobox",spellcheck:"false",placeholder:"搜索二次元的一切","aria-label":"搜索"},domProps:{value:t.word},on:{blur:[t.handleInputBlur,function(e){t.$forceUpdate()}],focus:t.handleInputFocus,input:function(e){e.target.composing||(t.word=e.target.value.trim())}}})]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.displaySuggestion,expression:"displaySuggestion"}],staticClass:"search-suggestion"},t._l(t.filteredSelect,function(e,r){return n("li",{key:e.id,class:{active:r===t.selectedIndex},on:{click:function(e){t.clickToSearch(r)}}},[n("img",{attrs:{src:t.$resize(e.avatar,{width:60})}}),t._v(" "),n("span",{domProps:{textContent:t._s(e.name)}})])}),0)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"search-btn",attrs:{type:"submit"}},[e("i",{staticClass:"iconfont icon-sousuo"})])}],!1,null,null,null);o.options.__file="Input.vue";e.a=o.exports},229:function(t,e,n){"use strict";n(12);var r=n(2),i=n.n(r),o=(n(29),n(9)),a={name:"SignUpForm",props:{inviteCode:{type:String,default:""}},data:function(){return{watchPwd:!1,form:{access:"",secret:"",nickname:"",authCode:"",inviteCode:this.inviteCode},rule:{nickname:[{validator:function(t,e,n){if(""===e)return n(new Error("请先给自己起个名字"));var r=e.replace(/([\u4e00-\u9fa5])/g,"aa").trim().length;return r<2?n(new Error("昵称至少是2个字符")):r>14?n(new Error("昵称不能超过14个字符，1个汉字占2个字符")):/^([\u4e00-\u9fa5]|[a-z0-9])+$/i.test(e)?void n():n(new Error("昵称只能包含：中文、数字、字母"))},trigger:"blur"}],access:[{validator:function(t,e,n){return e?11!==e.length?n(new Error("请填写11位手机号")):/^(0|86|17951)?(1)[0-9]{10}$/.test(e)?void n():n(new Error("错误的手机号格式")):n(new Error("请填写手机号"))},trigger:"blur"}],secret:[{validator:function(t,e,n){return""===e?n(new Error("请填写登录密码")):e.length<6?n(new Error("密码不能小于6位")):e.length>16?n(new Error("密码不能大于16位")):void n()},trigger:"blur"}]},step:0,timeout:0}},computed:{ua:function(){return this.$store.state.ua},submitBtnText:function(){return 0===this.step?"注册":1===this.step?"提交中...":2===this.step?"短信已发送":3===this.step?"注册中...":void 0},submitBtnLoading:function(){return 1===this.step||3===this.step},submitBtnDisabled:function(){return 0!==this.timeout&&0===this.step||3===this.step}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;0===t.step&&t.getRegisterAuthCode(),2===t.step&&t.openConfirmModal()})},getRegisterAuthCode:function(){var t=this;this.step=1,this.$captcha({ctx:this,success:function(){var e=i()(regeneratorRuntime.mark(function e(n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,e.prev=1,e.next=4,Object(o.j)(t,{type:"sign_up",phone_number:t.form.access,geetest:r});case 4:t.step=2,t.openConfirmModal(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.step=0;case 11:return e.prev=11,t.timeout=60,i=setInterval(function(){--t.timeout||(t.step=0,clearInterval(i))},1e3),e.finish(11);case 15:case"end":return e.stop()}},e,this,[[1,8,11,15]])}));return function(t){return e.apply(this,arguments)}}(),close:function(){t.step=0}})},openConfirmModal:function(){var t=this;this.$prompt("请输入收到的验证码","短信已发送",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputErrorMessage:"验证码格式不正确"}).then(function(e){var n=e.value;t.form.authCode=n,t.step=3,t.signUp()}).catch(function(){})},signUp:function(){var t=this;Object(o.g)(this,{access:this.form.access,secret:this.form.secret,nickname:this.form.nickname,authCode:this.form.authCode,inviteCode:this.form.inviteCode}).then(function(e){t.$toast.success("注册成功！"),t.$cookie.set("JWT-TOKEN",e),window.location.reload()}).catch(function(){t.step=0})},showOAuth:function(){this.$toast.info("暂未开放第三方注册")},showLogin:function(){this.$emit("to-login"),this.$refs.form.resetFields()}}},s=(n(316),n(1)),c=Object(s.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sign-up-form"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule,"status-icon":""}},[n("el-form-item",{attrs:{prop:"nickname"}},[n("el-input",{attrs:{type:"text",placeholder:"昵称（2-14个字符组成，1个汉字占2个字符）","auto-complete":"off"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机（填写常用手机号，用于登录）","auto-complete":"off"},model:{value:t.form.access,callback:function(e){t.$set(t.form,"access",e)},expression:"form.access"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:t.watchPwd?"text":"password",placeholder:"密码（6-16个字符组成，区分大小写）","auto-complete":"off"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,"secret",e)},expression:"form.secret"}}),t._v(" "),t.form.secret.length>5?n("button",{staticClass:"watch-pwd",attrs:{type:"button"},on:{click:function(e){t.watchPwd=!t.watchPwd}}},[n("i",{staticClass:"iconfont icon-yuedu"})]):t._e()],1),t._v(" "),t.inviteCode?t._e():n("el-form-item",[n("el-input",{attrs:{type:"number",placeholder:"邀请码（可为空）","auto-complete":"off"},model:{value:t.form.inviteCode,callback:function(e){t.$set(t.form,"inviteCode",e)},expression:"form.inviteCode"}})],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.submitBtnLoading,disabled:t.submitBtnDisabled,type:"primary"},on:{click:t.submitForm}},[t._v("\n        "+t._s(t.submitBtnText)+"\n        "),t.timeout?[t._v("\n          （"+t._s(t.timeout)+"s 后可重新获取）\n        ")]:t._e()],2)],1)],1),t._v(" "),n("div",{staticClass:"others"},[n("span",{staticClass:"providers"},[t._m(0),t._v(" "),t.ua.wechat?n("a",{attrs:{href:"https://api.calibur.tv/callback/oauth2/weixin?from=sign"}},[n("i",{staticClass:"iconfont icon-wechat"})]):t._e()]),t._v(" "),t.inviteCode?t._e():n("a",{staticClass:"fr",on:{click:t.showLogin}},[t._v("已有账号»")])]),t._v(" "),n("div",{staticClass:"tip"},[t._v("\n    提示：由于注册时要根据初始昵称为每个用户分配独立域名，因此注册时的昵称不支持日文和特殊符号和标点符号，可在注册完成后在个人设置页面修改昵称\n  ")])],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"https://api.calibur.tv/callback/oauth2/qq?from=sign"}},[e("i",{staticClass:"iconfont icon-qq"})])}],!1,null,null,null);c.options.__file="SignUpForm.vue";e.a=c.exports},230:function(t,e,n){"use strict";n(12);var r=n(2),i=n.n(r),o=(n(45),n(9)),a={name:"UserReportForm",components:{VRadio:n(113).a},props:{id:{type:[Number,String],default:0},model:{type:[Number,String],default:0}},data:function(){return{selectedType:-1,loading:!1,content:""}},computed:{options1:function(){return[{label:"违法违规",value:1},{label:"色情低俗",value:2},{label:"赌博诈骗",value:3}]},options2:function(){return[{label:"人身攻击",value:4},{label:"侵犯隐私",value:5},{label:"内容抄袭",value:6}]},options3:function(){return[{label:"垃圾广告",value:7},{label:"恶意引战",value:8},{label:"重复内容/刷屏",value:9},{label:"内容不相关",value:10},{label:"互刷团子",value:11},{label:"其它",value:99}]},needContent:function(){return 99===this.selectedType||6===this.selectedType}},methods:{submit:function(){var t=i()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.id&&this.model){t.next=3;break}return this.$toast.error("参数错误"),t.abrupt("return");case 3:if(!(this.selectedType<0)){t.next=6;break}return this.$toast.error("请选择正确的分类"),t.abrupt("return");case 6:if(!this.needContent||this.content){t.next=9;break}return this.$toast.error("请填写具体情况"),t.abrupt("return");case 9:if(!this.loading){t.next=11;break}return t.abrupt("return");case 11:this.loading=!0;try{Object(o.h)(this,{id:this.id,message:this.content,type:99===this.selectedType?0:this.selectedType,model:this.model})}finally{this.loading=!1,this.$toast.success("感谢您的反馈！"),this.content="",this.selectedType=-1,this.$emit("success")}case 13:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},s=(n(313),n(1)),c=Object(s.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"user-report-form"}},[n("v-radio",{attrs:{options:t.options1,title:"违反法律法规"},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}}),t._v(" "),n("v-radio",{attrs:{options:t.options2,title:"侵犯个人权益"},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}}),t._v(" "),n("v-radio",{attrs:{options:t.options3,title:"有害社区环境"},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}}),t._v(" "),t.needContent?n("div",[n("p",[t._v("留言：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.content,expression:"content",modifiers:{trim:!0}}],attrs:{placeholder:"请说明情况"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]):t._e(),t._v(" "),n("el-button",{staticClass:"submit-btn",attrs:{loading:t.loading,type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)},[],!1,null,null,null);c.options.__file="UserReportForm.vue";e.a=c.exports},231:function(t,e,n){"use strict";n(45);var r={name:"UserSex",props:{sex:{type:[String,Number],required:!0},secret:{type:Boolean,default:!1}},computed:{convertSex:function(){if("string"==typeof this.sex)return this.sex;var t="";switch(this.sex){case 0:t="未知";break;case 1:t="男";break;case 2:t="女";break;case 3:t="伪娘";break;case 4:t="药娘";break;case 5:t="扶她";break;default:t="未知"}return t}}},i=n(1),o=Object(i.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"user-sex"},[t.secret?n("i",{staticClass:"iconfont icon-simi",staticStyle:{color:"limegreen"}}):"未知"===t.convertSex?n("i",{staticClass:"iconfont icon-unknown",staticStyle:{color:"gold"}}):"男"===t.convertSex?n("i",{staticClass:"iconfont icon-nan",staticStyle:{color:"deepskyblue"}}):"女"===t.convertSex?n("i",{staticClass:"iconfont icon-nv",staticStyle:{color:"hotpink"}}):"伪娘"===t.convertSex?n("i",{staticClass:"iconfont icon-tijianxingbiefenxi",staticStyle:{color:"mediumpurple"}}):"药娘"===t.convertSex?n("i",{staticClass:"iconfont icon-xingbie",staticStyle:{color:"#ff4d51"}}):"扶她"===t.convertSex?n("i",{staticClass:"iconfont icon-intersex",staticStyle:{color:"silver"}}):t._e()])},[],!1,null,null,null);o.options.__file="UserSex.vue";e.a=o.exports},234:function(t,e,n){"use strict";(function(t){var r=n(0),i=n(257),o=(n(302),n(303),n(256)),a=n(258),s={_default:o.a,_empty:a.a};e.a={head:function(){var e=this.$store.state.ua;return{title:"天下漫友是一家",titleTemplate:function(t){return t||"calibur - 天下漫友是一家"},htmlAttrs:{lang:"zh-CN"},bodyAttrs:{id:"calibur-tv"},meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"},{"http-equiv":"X-UA-Compatible",content:"IE=edge,chrome=1"},{name:"force-rendering",content:"webkit"},{hid:"description",name:"description",content:"一个兴趣使然的二次元综合网站"},{hid:"keywords",name:"keywords",content:"calibur，咖喱棒, 动漫，ACG，二次元，视频，番剧，动画，新番，神作, 排行榜, 贴吧, 盖楼, 应援, 帖子, 在线"}],link:[{rel:"shortcut icon",type:"image/x-icon",href:"https://image.calibur.tv/favicon.ico"}],script:[{innerHTML:'var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?c10304a2f70ee2ddf8d2818551d37a4b";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)})();',type:"text/javascript",async:!0},{innerHTML:"(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js'}else{bp.src='http://push.zhanzhang.baidu.com/push.js'}var s=document.getElementsByTagName(\"script\")[0];s.parentNode.insertBefore(bp,s)})();",type:"text/javascript",async:!0},e.ios?{innerHTML:t.env.iPhoneXViewport,type:"text/javascript"}:"",e.qq?{src:"//qzonestyle.gtimg.cn/qzone/qzact/common/share/share.js",type:"text/javascript"}:"",e.wechat?{src:"//res2.wx.qq.com/open/js/jweixin-1.4.0.js",type:"text/javascript"}:""].filter(function(t){return t}),__dangerouslyDisableSanitizers:"script"}},render:function(t,e){var n=t("nuxt-loading",{ref:"loading"}),r=t(this.layout||"nuxt"),i=t("div",{domProps:{id:"__layout"},key:this.layoutName},[r]),o=t("transition",{props:{name:"layout",mode:"out-in"},on:{beforeEnter:function(t){window.$nuxt.$nextTick(function(){window.$nuxt.$emit("triggerScroll")})}}},[i]);return t("div",{domProps:{id:"__nuxt"}},[n,o])},data:function(){return{layout:null,layoutName:""}},beforeCreate:function(){r.default.util.defineReactive(this,"nuxt",this.$options.nuxt)},created:function(){r.default.prototype.$nuxt=this,"undefined"!=typeof window&&(window.$nuxt=this),this.error=this.nuxt.error},mounted:function(){this.$loading=this.$refs.loading},watch:{"nuxt.err":"errorChanged"},methods:{errorChanged:function(){this.nuxt.err&&this.$loading&&(this.$loading.fail&&this.$loading.fail(),this.$loading.finish&&this.$loading.finish())},setLayout:function(t){return t&&s["_"+t]||(t="default"),this.layoutName=t,this.layout=s["_"+t],this.layout},loadLayout:function(t){return t&&s["_"+t]||(t="default"),Promise.resolve(s["_"+t])}},components:{NuxtLoading:i.a}}}).call(this,n(64))},256:function(t,e,n){"use strict";var r=n(169),i={name:"VSearchHistory",data:function(){return{cacheKey:"search-history",list:[],maxLen:10}},mounted:function(){this.list=this.get()},methods:{query:function(t){this.$router.push({name:"search",query:{q:t,type:"all"}})},set:function(t){var e=this;setTimeout(function(){var n=e.get(),r=n.indexOf(t);-1!==r&&n.splice(r,1),n.unshift(t),n.length>e.maxLen&&n.pop(),e.list=n;try{localStorage.setItem(e.cacheKey,JSON.stringify(n))}catch(t){}},0)},get:function(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(t){return[]}},clear:function(){try{localStorage.removeItem(this.cacheKey)}catch(t){}this.list=[]}}},o=(n(305),n(1)),a=Object(o.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length?n("div",{staticClass:"search-history"},[n("p",{staticClass:"title"},[t._v("搜索历史")]),t._v(" "),n("ul",t._l(t.list,function(e,r){return n("li",{key:r,on:{click:function(n){t.query(e)}}},[n("i",{staticClass:"iconfont icon-lishijilu"}),t._v(" "+t._s(e)+"\n    ")])}),0),t._v(" "),n("button",{staticClass:"clear-btn",on:{click:t.clear}},[t._v("清除历史记录")])]):t._e()},[],!1,null,null,null);a.options.__file="History.vue";var s=a.exports,c={name:"VSearchDrawer",components:{vSearch:r.a,vSearchHistory:s},props:{value:{required:!0,type:Boolean}},data:function(){return{open:this.value,query:""}},mounted:function(){var t=this;this.$watch("value",function(e){t.open=e}),this.$watch("open",function(e){t.$emit("input",e)})},methods:{}},u=(n(306),Object(o.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-drawer",{staticClass:"search-drawer",attrs:{from:"bottom",size:"100%","header-text":"搜索"},model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},[n("div",{staticClass:"container"},[n("v-search",{model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),t._v(" "),n("div",{staticClass:"hr"}),t._v(" "),n("v-search-history")],1)])},[],!1,null,null,null));u.options.__file="SearchDrawer.vue";var l={name:"VHeader",components:{SearchDrawer:u.exports},data:function(){return{openSearchDrawer:!1}},computed:{currentUser:function(){return this.$store.state.user},haveAuthToken:function(){return this.$store.state.haveAuthToken},path:function(){return this.$route.path},homePage:function(){return"/"===this.path},worldPage:function(){return/^\/world/.test(this.path)},bangumiPage:function(){return/^\/bangumi/.test(this.path)},rolePage:function(){return/^\/role/.test(this.path)},appPage:function(){return/^\/app/.test(this.path)},noBorderPage:function(){return this.homePage||this.appPage}},methods:{openSignDrawer:function(){this.$channel.$emit("sign-in",!1)},openUserDrawer:function(){this.$channel.$emit("open-user-drawer")}}},d=(n(307),Object(o.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{attrs:{id:"header"}},[n("div",{staticClass:"header-text",class:{"border-header":!t.noBorderPage}},[n("div",{staticClass:"nav-left"},[n("router-link",{attrs:{to:"/"}},[n("img",{staticClass:"logo",attrs:{src:"https://image.calibur.tv/owner/logo/max.png?imageMogr2/auto-orient/strip|imageView2/1/w/80/h/80",alt:"logo"}})]),t._v(" "),n("router-link",{staticClass:"link",class:{active:t.worldPage},attrs:{to:"/world/post"}},[t._v("社区")]),t._v(" "),n("router-link",{staticClass:"link",class:{active:t.bangumiPage},attrs:{to:"/bangumi/news"}},[t._v("番剧")]),t._v(" "),n("router-link",{staticClass:"link",class:{active:t.rolePage},attrs:{to:"/role/trending"}},[t._v("偶像")]),t._v(" "),n("router-link",{staticClass:"link",class:{active:t.appPage},attrs:{to:"/app/download"}},[t._v("APP")])],1),t._v(" "),n("div",{staticClass:"nav-right"},[t.haveAuthToken?[t.currentUser?n("div",{staticClass:"nav-avatar"},[n("button",{on:{click:t.openUserDrawer}},[n("v-img",{attrs:{src:t.currentUser.avatar,avatar:!0,width:"24"}})],1)]):n("img",{staticClass:"faker-user-avatar",attrs:{src:t.$resize("https://image.calibur.tv/default/user-avatar",{width:48})}})]:n("button",{staticClass:"sign-btn",on:{click:t.openSignDrawer}},[t._v("登录")]),t._v(" "),t.homePage?t._e():[n("button",{staticClass:"open-search-btn",on:{click:function(e){t.openSearchDrawer=!0}}},[n("i",{staticClass:"iconfont icon-sousuo"})]),t._v(" "),n("search-drawer",{model:{value:t.openSearchDrawer,callback:function(e){t.openSearchDrawer=e},expression:"openSearchDrawer"}})]],2)])])},[],!1,null,null,null));d.options.__file="Header.vue";var p=d.exports,f=(n(29),n(12),n(2)),h=n.n(f),m=n(9),v={name:"FeedbackDrawer",components:{VRadio:n(113).a},data:function(){return{show:!1,options:[{label:"功能建议",value:1},{label:"遇到错误",value:2},{label:"资源报错",value:4},{label:"求资源",value:5},{label:"求偶像",value:6},{label:"其它问题",value:3}],selectedType:1,placeholder:"",content:"",preContent:""}},mounted:function(){var t=this;this.$channel.$on("open-feedback",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,r=e.desc,i=e.placeholder;t.selectedType=n||1,t.preContent=r||"{?}",t.placeholder=i||"非常感谢您的反馈，请填写详细信息方便我们解决",t.show=!0})},methods:{submitFeedback:function(){var t=h()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.content.length){t.next=3;break}return this.$toast.error("请先填写反馈信息！"),t.abrupt("return");case 3:return t.next=5,Object(m.b)(this,{type:this.selectedType,desc:this.preContent.replace("{?}",this.content),ua:navigator.userAgent});case 5:this.$toast.success("反馈成功，感谢您的反馈！"),this.content="",this.show=!1;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},g=(n(311),Object(o.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-drawer",{staticClass:"feedback-drawer",attrs:{backdrop:!1,from:"bottom",size:"100%","header-text":"反馈"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"desc"},[n("p",[t._v("详细信息")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.content,expression:"content",modifiers:{trim:!0}}],attrs:{placeholder:t.placeholder},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),n("v-radio",{attrs:{options:t.options,title:"反馈类型"},model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}}),t._v(" "),n("button",{staticClass:"btn-submit",on:{click:t.submitFeedback}},[t._v("提交")])],1)])},[],!1,null,null,null));g.options.__file="FeedbackDrawer.vue";var y=g.exports,b=n(235),w=n.n(b),x={name:"ShareDrawer",data:function(){return{show:!1}},mounted:function(){var t=this;this.$channel.$on("open-share",function(){t.show=!0,t.bindShareEvent()})},methods:{bindShareEvent:function(){var t=this;this.$nextTick(function(){var e=new w.a(t.$refs.shareBtn);e.on("success",function(n){t.$toast.success("复制成功"),t.show=!1,e.destroy(),n.clearSelection()})})}}},_=(n(312),Object(o.a)(x,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-drawer",{staticClass:"share-tips-drawer",attrs:{from:"bottom",size:"80%","header-text":"分享语"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"container"},[n("p",[t._v('\n      【calibur.tv】一个纯粹的二次元社区网站，致力于实现"天下漫友是一家"！\n    ')]),t._v(" "),n("p",[t._v("\n      站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送团子（1团子 = 1人民币）！\n    ")]),t._v(" "),n("p",[t._v("\n      快来加入我们吧~\\(^o^)/~ 网址：http://calibur.tv\n    ")]),t._v(" "),n("button",{ref:"shareBtn",staticClass:"btn-submit",attrs:{"data-clipboard-text":"【calibur.tv】一个纯粹的二次元社区网站，致力于实现'天下漫友是一家'！站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送团子（1团子 = 1人民币）！快来加入我们吧~\\(^o^)/~ 网址：http://calibur.tv"}},[t._v("点击复制")])])])},[],!1,null,null,null));_.options.__file="ShareDrawer.vue";var k=_.exports,$={name:"ReportDrawer",components:{UserReportForm:n(230).a},data:function(){return{show:!1,title:"",id:0,model:0,isCreator:!1}},computed:{drawerTitle:function(){return this.title||"举报"}},mounted:function(){var t=this;this.$channel.$on("open-report-drawer",function(e){var n=e.id,r=e.model,i=e.title,o=e.isCreator;t.id=n,t.model=r,t.title=i,t.isCreator=o,t.show=!0})}},C=(n(314),Object(o.a)($,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-drawer",{staticClass:"report-drawer",attrs:{"header-text":t.drawerTitle,backdrop:!1,from:"bottom",size:"100%"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("user-report-form",{attrs:{id:t.id,model:t.model},on:{success:function(e){t.show=!1}}})],1)},[],!1,null,null,null));C.options.__file="ReportDrawer.vue";var S=C.exports,E={name:"SignInForm",data:function(){return{form:{access:"",secret:"",remember:!0},rule:{access:[{validator:function(t,e,n){return e?11!==e.length?n(new Error("请填写11位手机号")):void n():n(new Error("请填写手机号"))},trigger:"blur"}],secret:[{validator:function(t,e,n){return""===e?n(new Error("请填写登录密码")):e.length<6?n(new Error("密码不能小于6位")):e.length>16?n(new Error("密码不能大于16位")):void n()},trigger:"blur"}]},loading:!1,watchPwd:!1}},computed:{ua:function(){return this.$store.state.ua}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.login()})},login:function(){var t=this;this.loading||(this.loading=!0,this.$captcha({ctx:this,success:function(e){var n=e.data;Object(m.e)(t,{access:t.form.access,secret:t.form.secret,remember:t.form.remember,geetest:n}).then(function(e){t.$cookie.set("JWT-TOKEN",e,{expires:365}),window.location.reload()}).catch(function(){t.loading=!1})},close:function(){t.loading=!1}}))},showReset:function(){this.$emit("to-reset"),this.$refs.form.resetFields()},showRegister:function(){this.$emit("to-register"),this.$refs.form.resetFields()},showOAuth:function(){this.$toast.info("暂未开放第三方登录")}}},T=(n(315),Object(o.a)(E,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sign-in-form"},[n("img",{staticClass:"logo",attrs:{src:t.$resize("https://image.calibur.tv/owner/logo/calibur-pink-new.png",{width:500,height:200}),alt:"sign-logo"}}),t._v(" "),n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机（填写常用手机号，用于登录）"},model:{value:t.form.access,callback:function(e){t.$set(t.form,"access",e)},expression:"form.access"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:t.watchPwd?"text":"password",placeholder:"密码（6-16个字符组成，区分大小写）"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,"secret",e)},expression:"form.secret"}}),t._v(" "),t.form.secret.length>5?n("button",{staticClass:"watch-pwd",attrs:{type:"button"},on:{click:function(e){t.watchPwd=!t.watchPwd}}},[n("i",{staticClass:"iconfont icon-yuedu"})]):t._e()],1),t._v(" "),n("div",{staticClass:"providers"},[n("a",{attrs:{href:"https://api.calibur.tv/callback/oauth2/qq?from=sign"}},[n("i",{staticClass:"iconfont icon-qq"})]),t._v(" "),t.ua.wechat?n("a",{attrs:{href:"https://api.calibur.tv/callback/oauth2/weixin?from=sign"}},[n("i",{staticClass:"iconfont icon-wechat"})]):t._e()]),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.loading,type:"primary"},on:{click:t.submitForm}},[t._v("登录")])],1)],1),t._v(" "),n("div",{staticClass:"others"},[n("a",{staticClass:"fl",on:{click:t.showReset}},[t._v("忘记密码?>")]),t._v(" "),n("a",{staticClass:"fr",on:{click:t.showRegister}},[t._v("点击注册»")])])],1)},[],!1,null,null,null));T.options.__file="SignInForm.vue";var R=T.exports,I=n(229),O={name:"ResetPasswordForm",data:function(){return{form:{access:"",secret:"",authCode:""},rule:{access:[{validator:function(t,e,n){return e?11!==e.length?n(new Error("请填写11位手机号")):void n():n(new Error("请填写手机号"))},trigger:"blur"}],secret:[{validator:function(t,e,n){return""===e?n(new Error("请填写登录密码")):e.length<6?n(new Error("密码不能小于6位")):e.length>16?n(new Error("密码不能大于16位")):void n()},trigger:"blur"}]},step:0,timeout:0}},computed:{submitBtnText:function(){return 0===this.step?"立即重置":1===this.step?"提交中...":2===this.step?"短信已发送":3===this.step?"已重置":void 0},submitBtnLoading:function(){return 1===this.step||3===this.step},submitBtnDisabled:function(){return 0!==this.timeout&&0===this.step||3===this.step}},methods:{submitForm:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;0===t.step&&t.getResetAuthCode(),2===t.step&&t.openConfirmModal()})},getResetAuthCode:function(){var t=this;this.step=1,this.$captcha({ctx:this,success:function(){var e=h()(regeneratorRuntime.mark(function e(n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,e.prev=1,e.next=4,Object(m.j)(t,{type:"forgot_password",phone_number:t.form.access,geetest:r});case 4:t.step=2,t.openConfirmModal(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.step=0;case 11:return e.prev=11,t.timeout=60,i=setInterval(function(){--t.timeout||(t.step=0,clearInterval(i))},1e3),e.finish(11);case 15:case"end":return e.stop()}},e,this,[[1,8,11,15]])}));return function(t){return e.apply(this,arguments)}}(),close:function(){t.step=0}})},openConfirmModal:function(){var t=this;this.$prompt("请输入收到的验证码","短信已发送",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputErrorMessage:"验证码格式不正确"}).then(function(e){var n=e.value;t.form.authCode=n,t.step=3,t.signReset()}).catch(function(){})},signReset:function(){var t=h()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.i)(this,{access:this.form.access,authCode:this.form.authCode,secret:this.form.secret});case 3:e=t.sent,this.$toast.success(e),this.showLogin();case 6:return t.prev=6,this.step=0,t.finish(6);case 9:case"end":return t.stop()}},t,this,[[0,,6,9]])}));return function(){return t.apply(this,arguments)}}(),showLogin:function(){this.$emit("to-login"),this.$refs.form.resetFields()},showRegister:function(){this.$emit("to-register"),this.$refs.form.resetFields()}}},A=(n(317),Object(o.a)(O,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reset-password-form"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机号","auto-complete":"off"},model:{value:t.form.access,callback:function(e){t.$set(t.form,"access",e)},expression:"form.access"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:"password",placeholder:"新密码","auto-complete":"off"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,"secret",e)},expression:"form.secret"}})],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.submitBtnLoading,disabled:t.submitBtnDisabled,type:"primary"},on:{click:t.submitForm}},[t._v("\n        "+t._s(t.submitBtnText)+"\n        "),t.timeout?[t._v("\n          （"+t._s(t.timeout)+"s 后可重新获取）\n        ")]:t._e()],2)],1)],1),t._v(" "),n("div",{staticClass:"others"},[n("a",{staticClass:"fl",on:{click:t.showLogin}},[t._v("返回登录>")]),t._v(" "),n("a",{staticClass:"fr",on:{click:t.showRegister}},[t._v("点击注册»")])])],1)},[],!1,null,null,null));A.options.__file="ResetPasswordForm.vue";var M=A.exports,N=(n(24),{name:"VUserDrawer",components:{UserSex:n(231).a},data:function(){return{switchUserDrawer:!1}},computed:{user:function(){return this.$store.state.user},computeUserDrawerBg:function(){return!this.user||this.user.banner.split("/default/user-banner").length>1?{}:{backgroundImage:"url(".concat(this.$resize(this.user.banner,{height:250,mode:2}),")")}},coinCount:function(){return this.user.coin}},mounted:function(){var t=this;this.$channel.$on("open-user-drawer",function(){t.switchUserDrawer=!0})},methods:{logout:function(){this.$cookie.remove("JWT-TOKEN"),Object(m.f)(this),window.location.href="/"}}}),P=(n(318),Object(o.a)(N,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-drawer",{staticClass:"user-drawer",attrs:{id:"user",from:"right",size:"70%"},model:{value:t.switchUserDrawer,callback:function(e){t.switchUserDrawer=e},expression:"switchUserDrawer"}},[n("div",{staticClass:"user-section"},[n("div",{staticClass:"bg",style:t.computeUserDrawerBg}),t._v(" "),n("div",{staticClass:"mask"}),t._v(" "),n("div",{staticClass:"user-info"},[n("a",{staticClass:"avatar",attrs:{href:t.$alias.user(t.user.zone)}},[n("v-img",{attrs:{src:t.user.avatar,lazy:!1,avatar:!0,width:"50"}})],1),t._v(" "),n("div",{staticClass:"panel"},[n("div",{staticClass:"nickname"},[n("a",{staticClass:"oneline",attrs:{href:t.$alias.user(t.user.zone)},domProps:{textContent:t._s(t.user.nickname)}})]),t._v(" "),n("div",[n("user-sex",{attrs:{sex:t.user.sex,secret:t.user.sexSecret}}),t._v("\n          · "),n("span",{staticClass:"level"},[t._v("Lv"+t._s(t.user.exp.level))])],1)])]),t._v(" "),n("span",{staticClass:"badge"},[t._v("团子："+t._s(t.coinCount)+" 个")]),t._v(" "),n("span",{staticClass:"badge"},[t._v("邀请码："+t._s(t.user.id))])]),t._v(" "),n("ul",{staticClass:"routes container",on:{click:function(e){t.switchUserDrawer=!1}}},[n("li",[n("a",{attrs:{href:t.$alias.user(t.user.zone)}},[n("i",{staticClass:"iconfont icon-zhuye"}),t._v(" 个人主页\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"/my/setting"}},[n("i",{staticClass:"iconfont icon-shezhi"}),t._v(" 用户设置\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"/about/hello"}},[n("i",{staticClass:"iconfont icon-bangzhu"}),t._v(" 功能简介\n      ")])]),t._v(" "),n("li",[n("a",{attrs:{href:"/me/invite"}},[n("i",{staticClass:"iconfont icon-yaoqingma"}),t._v(" 我的邀请码\n      ")])]),t._v(" "),n("li",[n("button",{on:{click:t.logout}},[n("i",{staticClass:"iconfont icon-tuichu"}),t._v(" 退出登录\n      ")])])])]):t._e()},[],!1,null,null,null));P.options.__file="UserDrawer.vue";var q=P.exports,U={name:"FirstSignDrawer",data:function(){return{show:!1}},mounted:function(){var t=this;if(!/^\/app\//.test(this.$route.fullPath)&&!this.$cookie.get("display-first-sign-dialog"))try{if(!localStorage.getItem("display-first-sign-dialog")){this.show=!0;var e=this.$backdrop.show({click:function(){t.show=!1,t.$backdrop.hide(e)}});this.$cookie.set("display-first-sign-dialog",1,{expires:7}),localStorage.setItem("display-first-sign-dialog",1)}}catch(t){}}},D=(n(319),Object(o.a)(U,function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("div",{staticClass:"first-sign-drawer"},[this._m(0),this._v(" "),this._m(1),this._v(" "),this._m(2)]):this._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"title"},[this._v("\n    欢迎来到"),e("br"),this._v("\n    「calibur.tv」\n  ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"content"},[this._v("\n    使用你的“邀请码”带朋友一起来玩吧！"),e("br"),this._v("\n    每邀请一个朋友加入"),e("br"),this._v("\n    你就可以获得一个团子"),e("br"),this._v("\n    1团子=1人民币"),e("br"),this._v("\n    满100就可以提现噢！\n  ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"control"},[e("a",{attrs:{href:"/about/hello"}},[e("button",{staticStyle:{"background-color":"#00ce72"}},[this._v("\n        查看团子规则\n      ")])]),this._v(" "),e("a",{attrs:{href:"/me/invite"}},[e("button",{staticStyle:{"background-color":"gold"}},[this._v("\n        我的邀请码\n      ")])])])}],!1,null,null,null));D.options.__file="FirstSignDrawer.vue";var j=D.exports,B={name:"SignDrawer",components:{SignUpForm:I.a,SignInForm:R,ResetPasswordForm:M,UserDrawer:q,FirstSignDrawer:j},data:function(){return{openDrawer:!1,showSignIn:!1,showSignUp:!1,showReset:!1}},computed:{isGuest:function(){return!this.$store.state.login}},mounted:function(){var t=this;this.$channel.$on("sign-up",function(){t.showRegister()}),this.$channel.$on("sign-in",function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&t.$toast.error("请先登录"),t.showLogin()})},methods:{showLogin:function(){this.showReset=!1,this.showSignIn=!0,this.showSignUp=!1,this.openDrawer=!0},showRegister:function(){this.showSignUp=!0,this.showSignIn=!1,this.openDrawer=!0}}},z=(n(320),Object(o.a)(B,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isGuest?n("v-drawer",{staticClass:"sign-drawer",attrs:{"header-text":t.showSignUp?"注册":t.showReset?"找回密码":"登录",from:"bottom",size:"100%"},model:{value:t.openDrawer,callback:function(e){t.openDrawer=e},expression:"openDrawer"}},[n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSignIn,expression:"showSignIn"}]},[n("reset-password-form",{directives:[{name:"show",rawName:"v-show",value:t.showReset,expression:"showReset"}],on:{"to-login":function(e){t.showReset=!1},"to-register":t.showRegister}}),t._v(" "),n("sign-in-form",{directives:[{name:"show",rawName:"v-show",value:!t.showReset,expression:"!showReset"}],on:{"to-reset":function(e){t.showReset=!0},"to-register":t.showRegister}})],1),t._v(" "),n("sign-up-form",{directives:[{name:"show",rawName:"v-show",value:t.showSignUp,expression:"showSignUp"}],on:{"to-login":t.showLogin}})],1)]):[n("user-drawer"),t._v(" "),n("first-sign-drawer")]],2)},[],!1,null,null,null));z.options.__file="Sign.vue";var L={name:"DefaultLayout",components:{vHeader:p,FeedbackDrawer:y,ShareDrawer:k,ReportDrawer:S,SignDrawer:z.exports},mounted:function(){this.$store.dispatch("initAuth")}},F=Object(o.a)(L,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"layout-default"}},[e("v-header"),this._v(" "),e("nuxt",{staticClass:"main-view"}),this._v(" "),e("feedback-drawer"),this._v(" "),e("share-drawer"),this._v(" "),e("report-drawer"),this._v(" "),e("sign-drawer")],1)},[],!1,null,null,null);F.options.__file="default.vue";e.a=F.exports},257:function(t,e,n){"use strict";var r={name:"nuxt-loading",data:function(){return{percent:0,show:!1,canSucceed:!0,reversed:!1,skipTimerCount:0,rtl:!1,throttle:200,duration:5e3,continuous:!1}},computed:{left:function(){return!(!this.continuous&&!this.rtl)&&(this.rtl?this.reversed?"0px":"auto":this.reversed?"auto":"0px")}},beforeDestroy:function(){this.clear()},methods:{clear:function(){clearInterval(this._timer),clearTimeout(this._throttle),this._timer=null},start:function(){var t=this;return this.clear(),this.percent=0,this.reversed=!1,this.skipTimerCount=0,this.canSucceed=!0,this.throttle?this._throttle=setTimeout(function(){return t.startTimer()},this.throttle):this.startTimer(),this},set:function(t){return this.show=!0,this.canSucceed=!0,this.percent=Math.min(100,Math.max(0,Math.floor(t))),this},get:function(){return this.percent},increase:function(t){return this.percent=Math.min(100,Math.floor(this.percent+t)),this},decrease:function(t){return this.percent=Math.max(0,Math.floor(this.percent-t)),this},pause:function(){return clearInterval(this._timer),this},resume:function(){return this.startTimer(),this},finish:function(){return this.percent=this.reversed?0:100,this.hide(),this},hide:function(){var t=this;return this.clear(),setTimeout(function(){t.show=!1,t.$nextTick(function(){t.percent=0,t.reversed=!1})},500),this},fail:function(){return this.canSucceed=!1,this},startTimer:function(){var t=this;this.show||(this.show=!0),void 0===this._cut&&(this._cut=1e4/Math.floor(this.duration)),this._timer=setInterval(function(){t.skipTimerCount>0?t.skipTimerCount--:(t.reversed?t.decrease(t._cut):t.increase(t._cut),t.continuous&&(t.percent>=100?(t.skipTimerCount=1,t.reversed=!t.reversed):t.percent<=0&&(t.skipTimerCount=1,t.reversed=!t.reversed)))},100)}},render:function(t){var e=t(!1);return this.show&&(e=t("div",{staticClass:"nuxt-progress",class:{"nuxt-progress-notransition":this.skipTimerCount>0,"nuxt-progress-failed":!this.canSucceed},style:{width:this.percent+"%",left:this.left}})),e}},i=(n(301),n(1)),o=Object(i.a)(r,void 0,void 0,!1,null,null,null);o.options.__file="nuxt-loading.vue";e.a=o.exports},258:function(t,e,n){"use strict";var r=n(1),i=Object(r.a)({},function(){var t=this.$createElement;return(this._self._c||t)("nuxt")},[],!1,null,null,null);i.options.__file="empty.vue";e.a=i.exports},259:function(t,e,n){t.exports=n.p+"img/aa8b45a.png"},266:function(t,e,n){t.exports=n(489)},291:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=291},300:function(t,e,n){"use strict";var r=n(92);n.n(r).a},301:function(t,e,n){"use strict";var r=n(93);n.n(r).a},302:function(t,e,n){},304:function(t,e,n){"use strict";var r=n(94);n.n(r).a},305:function(t,e,n){"use strict";var r=n(95);n.n(r).a},306:function(t,e,n){"use strict";var r=n(96);n.n(r).a},307:function(t,e,n){"use strict";var r=n(97);n.n(r).a},310:function(t,e,n){"use strict";var r=n(98);n.n(r).a},311:function(t,e,n){"use strict";var r=n(99);n.n(r).a},312:function(t,e,n){"use strict";var r=n(100);n.n(r).a},313:function(t,e,n){"use strict";var r=n(101);n.n(r).a},314:function(t,e,n){"use strict";var r=n(102);n.n(r).a},315:function(t,e,n){"use strict";var r=n(103);n.n(r).a},316:function(t,e,n){"use strict";var r=n(104);n.n(r).a},317:function(t,e,n){"use strict";var r=n(105);n.n(r).a},318:function(t,e,n){"use strict";var r=n(106);n.n(r).a},319:function(t,e,n){"use strict";var r=n(107);n.n(r).a},320:function(t,e,n){"use strict";var r=n(108);n.n(r).a},325:function(t,e,n){var r={"./bangumi.js":326,"./comment.js":493,"./flow.js":492,"./index.js":367,"./search.js":491,"./social.js":371};function i(t){var e=o(t);return n(e)}function o(t){var e=r[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=325},326:function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return a}),n.d(e,"mutations",function(){return s}),n.d(e,"actions",function(){return c}),n.d(e,"getters",function(){return u});n(12);var r=n(2),i=n.n(r),o=n(122),a=function(){return{all:[],timeline:{list:[],year:(new Date).getFullYear(),noMore:!1}}},s={SET_ALL_BANGUMI:function(t,e){t.all=e},SET_TIMELINE:function(t,e){var n=t.timeline;t.timeline.list=n.list.concat(e.list),t.timeline.year=n.year-1,t.timeline.noMore=e.noMore}},c={getAllBangumi:function(){var t=i()(regeneratorRuntime.mark(function t(e){var n,r,i,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state,r=e.commit,i=!0;try{(a=sessionStorage.getItem("all-bangumi-load-at"))&&Date.now()-a<36e5&&((s=JSON.parse(sessionStorage.getItem("all-bangumi-list")))&&r("SET_ALL_BANGUMI",s),i=!(s&&s.length))}catch(t){}if(!n.all.length&&i){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Object(o.a)(this);case 7:c=t.sent,r("SET_ALL_BANGUMI",c);try{sessionStorage.setItem("all-bangumi-load-at",Date.now()),sessionStorage.setItem("all-bangumi-list",JSON.stringify(c))}catch(t){}case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getTimeline:function(){var t=i()(regeneratorRuntime.mark(function t(e){var n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=e.commit,!n.timeline.noMore){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(o.i)(this,{year:n.timeline.year});case 5:i=t.sent,(a=i.data)&&r("SET_TIMELINE",a);case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},u={}},367:function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return u}),n.d(e,"mutations",function(){return l}),n.d(e,"actions",function(){return d});n(12);var r=n(2),i=n.n(r),o=(n(46),n(10),n(0)),a=n(9),s=n(83),c=n(115),u=function(){return{user:null,login:!1,ua:null,haveAuthToken:!1}},l={SET_USER:function(t,e){var n=!!e.id;t.user=e,t.login=n,t.haveAuthToken=n},SET_USER_INFO:function(t,e){Object.keys(e).forEach(function(n){t.user[n]=e[n]})},SET_AUTH_TOKEN:function(t,e){t.haveAuthToken=!!e},SET_UA:function(t,e){var n=e.ua;t.ua={ios:/iphone|ipad|ipod/.test(n),android:/android/.test(n),wechat:/micromessenger/.test(n),qq:/qq/.test(n),tencent:/mqqbrowser|qq|micromessenger/.test(n),alipay:/alipayclient/.test(n),weibo:/weibo/i.test(n),pc:!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n),others:/windows phone|blackberry/.test(n)}},UPDATE_USER_INFO:function(t,e){var n=e.key,r=e.value;o.default.set(t.user,n,r)},UPDATE_USER_EXP:function(t,e){if(t.login&&e)if(e>0)if(t.user.exp.have_exp+e>=t.user.next_level_exp){var n=t.user.exp.level+1;t.user.exp.level=n,t.user.exp.have_exp=t.user.exp.have_exp+e-t.user.next_level_exp,t.user.exp.next_level_exp=n*n+10*n}else t.user.exp.have_exp=t.user.exp.have_exp+e;else if(t.user.exp.have_exp+e<0){var r=t.user.exp.level-1,i=r*r+10*r;t.user.exp.have_exp=i+t.user.exp.have_exp+e,t.user.exp.next_level_exp=i}else t.user.exp.have_exp=t.user.exp.have_exp+e},USE_COIN:function(t){t.login&&t.user.coin--}},d={nuxtServerInit:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.commit,i=n.req,o=i.headers,a=(o["user-agent"]||"").toLowerCase(),r("SET_UA",{ua:a}),r("SET_AUTH_TOKEN",Object(c.a)(i));case 6:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),initAuth:function(){var t=i()(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=e.commit,!n.user){t.next=3;break}return t.abrupt("return");case 3:if(n.haveAuthToken){t.next=6;break}return r("SET_USER",{}),t.abrupt("return");case 6:return t.prev=6,t.next=9,Object(a.c)(this);case 9:i=t.sent,r("SET_USER",i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),r("SET_USER",{});case 16:case"end":return t.stop()}},t,this,[[6,13]])}));return function(e){return t.apply(this,arguments)}}(),getUpToken:function(){var t=i()(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=e.commit,n.login){t.next=3;break}return t.abrupt("return");case 3:if(!(n.user.uptoken.expiredAt<=parseInt(Date.now()/1e3,10))){t.next=8;break}return t.next=6,Object(s.c)();case 6:i=t.sent,r("UPDATE_USER_INFO",{key:"uptoken",value:i});case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},371:function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return u}),n.d(e,"mutations",function(){return l}),n.d(e,"actions",function(){return d}),n.d(e,"getters",function(){return p});n(12);var r=n(2),i=n.n(r),o=(n(25),n(7)),a=n.n(o),s=(n(46),n(10),n(0)),c=n(123),u=function(){return{}},l={SET_STATE:function(t,e){var n=e.type,r=e.data,i=e.id;if(Array.isArray(r))r.forEach(function(e){Object.keys(e).forEach(function(t){e["".concat(t,"_loading")]=!1}),s.default.set(t,"".concat(n,"-").concat(e.id),e)});else{Object.keys(r).forEach(function(t){!function(t){return"object"===a()(t)}(r[t])?r["".concat(t,"_loading")]=!1:r[t]=Object.assign(r[t],{loading:!1,error:!1,nothing:!r[t].total})}),s.default.set(t,"".concat(n,"-").concat(i||r.id),r)}},PUSH_STATE:function(t,e){var n=e.type,r=e.id,i=e.key,o=e.data,a=["".concat(n,"-").concat(r)],s="".concat(i,"_users"),c=t[a][s].list,u=o.list.map(function(t){return t.id});t[a][s].list=c.filter(function(t){return-1===u.indexOf(t.id)}).concat(o.list),t[a][s].total=o.total,t[a][s].noMore=o.noMore,t[a][s].loading=!1},TOGGLE_STATE:function(t,e){var n=e.type,r=e.id,i=e.key,o=e.result,a=e.user,s=["".concat(n,"-").concat(r)],c="".concat(i,"_users");t[s][i]=o,t[s]["".concat(i,"_loading")]=!1,t[s][c]&&(o?(t[s][c].total++,t[s][c].noMore=!1,t[s][c].list.unshift(a)):(t[s][c].total--,t[s][c].list.forEach(function(e,n){e.id===a.id&&t[s][c].list.splice(n,1)})))},SET_PUSH_RUNNING:function(t,e){var n=e.type,r=e.id,i=e.key,o=e.value,a=["".concat(n,"-").concat(r)],s="".concat(i,"_users");t[a][s][o]=!0},SET_TOGGLE_LOADING:function(t,e){var n=e.type,r=e.id,i=e.action,o=e.result;t["".concat(n,"-").concat(r)]["".concat(i,"_loading")]=o}},d={getUsers:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,i=e.commit,o=n.type,a=n.id,s=n.key,!(u=r["".concat(o,"-").concat(a)]["".concat(s,"_users")]).loading&&!u.noMore){t.next=5;break}return t.abrupt("return");case 5:return i("SET_PUSH_RUNNING",{type:o,key:s,id:a,value:"loading"}),t.prev=6,t.next=9,c.users({ctx:this,type:s,id:a,last_id:u.list.length?u.list[u.list.length-1].id:0,model:o,take:15});case 9:l=t.sent,i("PUSH_STATE",{type:o,id:a,key:s,data:l}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),i("SET_PUSH_RUNNING",{type:o,key:s,id:a,value:"error"});case 16:case"end":return t.stop()}},t,this,[[6,13]])}));return function(e,n){return t.apply(this,arguments)}}(),toggleAction:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,u,l,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,i=e.commit,o=e.rootState,a=n.type,s=n.id,u=n.action,!r["".concat(a,"-").concat(s)]["".concat(u,"_loading")]){t.next=5;break}return t.abrupt("return");case 5:return i("SET_TOGGLE_LOADING",{action:u,type:a,id:s,result:!0}),t.prev=6,t.next=9,c[u]({ctx:this,id:s,type:a});case 9:return l=t.sent,d=o.user,i("TOGGLE_STATE",{type:a,key:u,id:s,result:l,user:{id:d.id,nickname:d.nickname,avatar:d.avatar,created_at:parseInt(Date.now()/1e3)}}),t.abrupt("return",{success:!0,result:l});case 15:return t.prev=15,t.t0=t.catch(6),i("SET_TOGGLE_LOADING",{action:u,type:a,id:s,result:!1}),t.abrupt("return",{success:!1});case 19:case"end":return t.stop()}},t,this,[[6,15]])}));return function(e,n){return t.apply(this,arguments)}}()},p={getState:function(t){return function(e,n){return t["".concat(e,"-").concat(n)]}}}},452:function(t,e,n){"use strict";var r=n(109);n.n(r).a},453:function(t,e,n){"use strict";var r=n(110);n.n(r).a},454:function(t,e,n){"use strict";var r=n(112);n.n(r).a},462:function(t,e,n){},489:function(t,e,n){"use strict";n.r(e);n(166),n(74),n(75);var r=n(7),i=n.n(r),o=(n(13),n(12),n(261),n(2)),a=n.n(o),s=(n(179),n(180),n(46),n(10),n(25),n(183),n(278),n(290),n(0)),c=(n(29),n(291)),u=c.keys();function l(t){var e=c(t);return e.default||e}var d={},p=!0,f=!1,h=void 0;try{for(var m,v=u[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var g=m.value;d[g.replace(/^\.\//,"").replace(/\.(js|mjs)$/,"")]=l(g)}}catch(t){f=!0,h=t}finally{try{p||null==v.return||v.return()}finally{if(f)throw h}}var y=d,b=(n(24),n(292),n(293),n(39),n(40),n(263),n(264),n(23)),w=n.n(b),x=function(){return{}};function _(t){return t.then(function(t){return t.default||t})}function k(t,e){var n=t.options.data||x;!e&&t.options.hasAsyncData||(t.options.hasAsyncData=!0,t.options.data=function(){var r=n.call(this);return this.$ssrContext&&(e=this.$ssrContext.asyncData[t.cid]),w()({},r,e)},t._Ctor&&t._Ctor.options&&(t._Ctor.options.data=t.options.data))}function $(t){return t.options&&t._Ctor===t?t:(t.options?(t._Ctor=t,t.extendOptions=t.options):(t=s.default.extend(t))._Ctor=t,!t.options.name&&t.options.__file&&(t.options.name=t.options.__file),t)}function C(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.prototype.concat.apply([],t.matched.map(function(t,n){return Object.keys(t.components).map(function(r){return e&&e.push(n),t.components[r]})}))}function S(t,e){return Array.prototype.concat.apply([],t.matched.map(function(t,n){return Object.keys(t.components).reduce(function(r,i){return t.components[i]?r.push(e(t.components[i],t.instances[i],t,i,n)):delete t.components[i],r},[])}))}function E(t){return Promise.all(S(t,function(){var t=a()(regeneratorRuntime.mark(function t(e,n,r,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof e||e.options){t.next=4;break}return t.next=3,e();case 3:e=t.sent;case 4:return r.components[i]=$(e),t.abrupt("return",r.components[i]);case 6:case"end":return t.stop()}},t,this)}));return function(e,n,r,i){return t.apply(this,arguments)}}()))}function T(t){return R.apply(this,arguments)}function R(){return(R=a()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:return t.abrupt("return",w()({},e,{meta:C(e).map(function(t){return t.options.meta||{}})}));case 3:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function I(t,e){return O.apply(this,arguments)}function O(){return(O=a()(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.context||(e.context={isStatic:!1,isDev:!1,isHMR:!1,app:e,store:e.store,payload:n.payload,error:n.error,base:"/",env:{API_URL:"http://localhost/",API_URL_BROWSER:"https://api.calibur.tv/",SENTRY_URL:"https://63fb1028c6e24cb5be33e8ed64d798e8@sentry.io/1278322",RELEASE:"2019-1-21 22:20:30",injectScript:{baiduStat:'var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?c10304a2f70ee2ddf8d2818551d37a4b";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)})();',baiduPush:"(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js'}else{bp.src='http://push.zhanzhang.baidu.com/push.js'}var s=document.getElementsByTagName(\"script\")[0];s.parentNode.insertBefore(bp,s)})();",iPhoneXViewport:"(function(){var iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;var ratio=window.devicePixelRatio||1;var screen={width:window.screen.width*ratio,height:window.screen.height*ratio};if(iOS&&screen.width===1125&&screen.height===2436){document.querySelector('meta[name=viewport]').content=document.querySelector('meta[name=viewport]').content+',viewport-fit=cover'}}());"}}},n.req&&(e.context.req=n.req),n.res&&(e.context.res=n.res),e.context.redirect=function(t,n,r){if(t){e.context._redirected=!0;var o=i()(n);if("number"==typeof t||"undefined"!==o&&"object"!==o||(r=n||{},n=t,o=i()(n),t=302),"object"===o&&(n=e.router.resolve(n).href),!/(^[.]{1,2}\/)|(^\/(?!\/))/.test(n))throw n=L(n,r),window.location.replace(n),new Error("ERR_REDIRECT");e.context.next({path:n,query:r,status:t})}},e.context.nuxtState=window.__NUXT__),e.context.next=n.next,e.context._redirected=!1,e.context._errored=!1,e.context.isHMR=!!n.isHMR,!n.route){t.next=9;break}return t.next=8,T(n.route);case 8:e.context.route=t.sent;case 9:if(e.context.params=e.context.route.params||{},e.context.query=e.context.route.query||{},!n.from){t.next=15;break}return t.next=14,T(n.from);case 14:e.context.from=t.sent;case 15:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function A(t,e){var n;return(n=2===t.length?new Promise(function(n){t(e,function(t,r){t&&e.error(t),n(r=r||{})})}):t(e))&&(n instanceof Promise||"function"==typeof n.then)||(n=Promise.resolve(n)),n}function N(t,e){var n=window.location.pathname;return"hash"===e?window.location.hash.replace(/^#\//,""):(t&&0===n.indexOf(t)&&(n=n.slice(t.length)),decodeURI(n||"/")+window.location.search+window.location.hash)}function P(t,e){return function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"===i()(t[n])&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",o=n||{},a=r||{},s=a.pretty?j:encodeURIComponent,c=0;c<t.length;c++){var u=t[c];if("string"!=typeof u){var l=o[u.name||"pathMatch"],d=void 0;if(null==l){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(Array.isArray(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var p=0;p<l.length;p++){if(d=s(l[p]),!e[c].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");i+=(0===p?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(l).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}):s(l),!e[c].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');i+=u.prefix+d}}else i+=u}return i}}(function(t,e){var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/";for(;null!=(n=D.exec(t));){var c=n[0],u=n[1],l=n.index;if(a+=t.slice(o,l),o=l+c.length,u)a+=u[1];else{var d=t[o],p=n[2],f=n[3],h=n[4],m=n[5],v=n[6],g=n[7];a&&(r.push(a),a="");var y=null!=p&&null!=d&&d!==p,b="+"===v||"*"===v,w="?"===v||"*"===v,x=n[2]||s,_=h||m;r.push({name:f||i++,prefix:p||"",delimiter:x,optional:w,repeat:b,partial:y,asterisk:!!g,pattern:_?z(_):g?".*":"[^"+B(x)+"]+?"})}}o<t.length&&(a+=t.substr(o));a&&r.push(a);return r}(t,e))}function q(t,e){var n={},r=w()({},t,e);for(var i in r)String(t[i])!==String(e[i])&&(n[i]=!0);return n}function U(t){var e;if(t.message||"string"==typeof t)e=t.message||t;else try{e=JSON.stringify(t,null,2)}catch(n){e="[".concat(t.constructor.name,"]")}return{message:e,statusCode:t.statusCode||t.status||t.response&&t.response.status||500}}window.onNuxtReadyCbs=[],window.onNuxtReady=function(t){window.onNuxtReadyCbs.push(t)};var D=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function j(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function B(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function z(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function L(t,e){var n,r=t.indexOf("://");-1!==r?(n=t.substring(0,r),t=t.substring(r+3)):t.startsWith("//")&&(t=t.substring(2));var i,o=t.split("/"),a=(n?n+"://":"//")+o.shift(),s=o.filter(Boolean).join("/");return 2===(o=s.split("#")).length&&(s=o[0],i=o[1]),a+=s?"/"+s:"",e&&"{}"!==JSON.stringify(e)&&(a+=(2===t.split("?").length?"&":"?")+function(t){return Object.keys(t).sort().map(function(e){var n=t[e];return null==n?"":Array.isArray(n)?n.slice().map(function(t){return[e,"=",t].join("")}).join("&"):e+"="+n}).filter(Boolean).join("&")}(e)),a+=i?"#"+i:""}var F=n(232),G=n.n(F),V=n(158),H=function(){return _(n.e(23).then(n.bind(null,964)))},W=function(){return _(n.e(24).then(n.bind(null,968)))},K=function(){return _(n.e(26).then(n.bind(null,969)))},J=function(){return _(n.e(25).then(n.bind(null,970)))},Q=function(){return _(n.e(40).then(n.bind(null,926)))},X=function(){return _(Promise.all([n.e(63),n.e(52)]).then(n.bind(null,971)))},Y=function(){return _(n.e(53).then(n.bind(null,977)))},Z=function(){return _(n.e(54).then(n.bind(null,967)))},tt=function(){return _(n.e(55).then(n.bind(null,966)))},et=function(){return _(n.e(56).then(n.bind(null,965)))},nt=function(){return _(n.e(57).then(n.bind(null,976)))},rt=function(){return _(n.e(6).then(n.bind(null,959)))},it=function(){return _(Promise.all([n.e(60),n.e(8)]).then(n.bind(null,928)))},ot=function(){return _(n.e(9).then(n.bind(null,957)))},at=function(){return _(n.e(10).then(n.bind(null,954)))},st=function(){return _(n.e(11).then(n.bind(null,953)))},ct=function(){return _(n.e(13).then(n.bind(null,951)))},ut=function(){return _(n.e(27).then(n.bind(null,950)))},lt=function(){return _(n.e(28).then(n.bind(null,949)))},dt=function(){return _(n.e(29).then(n.bind(null,948)))},pt=function(){return _(n.e(30).then(n.bind(null,947)))},ft=function(){return _(Promise.all([n.e(61),n.e(32)]).then(n.bind(null,946)))},ht=function(){return _(Promise.all([n.e(62),n.e(33)]).then(n.bind(null,927)))},mt=function(){return _(n.e(39).then(n.bind(null,944)))},vt=function(){return _(n.e(7).then(n.bind(null,943)))},gt=function(){return _(n.e(12).then(n.bind(null,936)))},yt=function(){return _(n.e(14).then(n.bind(null,930)))},bt=function(){return _(n.e(16).then(n.bind(null,978)))},wt=function(){return _(n.e(15).then(n.bind(null,931)))},xt=function(){return _(n.e(17).then(n.bind(null,974)))},_t=function(){return _(n.e(18).then(n.bind(null,973)))},kt=function(){return _(n.e(19).then(n.bind(null,972)))},$t=function(){return _(n.e(20).then(n.bind(null,933)))},Ct=function(){return _(n.e(21).then(n.bind(null,958)))},St=function(){return _(n.e(22).then(n.bind(null,934)))},Et=function(){return _(Promise.all([n.e(0),n.e(34)]).then(n.bind(null,955)))},Tt=function(){return _(Promise.all([n.e(0),n.e(35)]).then(n.bind(null,929)))},Rt=function(){return _(Promise.all([n.e(0),n.e(2),n.e(36)]).then(n.bind(null,937)))},It=function(){return _(Promise.all([n.e(0),n.e(37)]).then(n.bind(null,938)))},Ot=function(){return _(Promise.all([n.e(0),n.e(38)]).then(n.bind(null,939)))},At=function(){return _(Promise.all([n.e(0),n.e(2),n.e(41)]).then(n.bind(null,935)))},Mt=function(){return _(n.e(42).then(n.bind(null,961)))},Nt=function(){return _(n.e(44).then(n.bind(null,979)))},Pt=function(){return _(n.e(43).then(n.bind(null,945)))},qt=function(){return _(n.e(45).then(n.bind(null,942)))},Ut=function(){return _(n.e(46).then(n.bind(null,941)))},Dt=function(){return _(n.e(47).then(n.bind(null,975)))},jt=function(){return _(n.e(48).then(n.bind(null,960)))},Bt=function(){return _(n.e(49).then(n.bind(null,963)))},zt=function(){return _(n.e(50).then(n.bind(null,962)))},Lt=function(){return _(Promise.all([n.e(0),n.e(51)]).then(n.bind(null,940)))},Ft=function(){return _(n.e(31).then(n.bind(null,932)))};s.default.use(V.a);var Gt=function(t,e,n){if(n)return n;var r={x:0,y:0};return t.hash&&(r={selector:t.hash}),r};var Vt=n(233),Ht=n.n(Vt).a,Wt={name:"nuxt-child",functional:!0,props:{nuxtChildKey:{type:String,default:""},keepAlive:Boolean},render:function(t,e){var n=e.parent,r=e.data,i=e.props;r.nuxtChild=!0;for(var o=n,a=n.$nuxt.nuxt.transitions,s=n.$nuxt.nuxt.defaultTransition,c=0;n;)n.$vnode&&n.$vnode.data.nuxtChild&&c++,n=n.$parent;r.nuxtChildDepth=c;var u=a[c]||s,l={};Kt.forEach(function(t){void 0!==u[t]&&(l[t]=u[t])});var d={};Jt.forEach(function(t){"function"==typeof u[t]&&(d[t]=u[t].bind(o))});var p=d.beforeEnter;d.beforeEnter=function(t){if(window.$nuxt.$nextTick(function(){window.$nuxt.$emit("triggerScroll")}),p)return p.call(o,t)};var f=[t("router-view",r)];return i.keepAlive&&(f=[t("keep-alive",{props:i.keepAliveProps},f)]),t("transition",{props:l,on:d},f)}},Kt=["name","mode","appear","css","type","duration","enterClass","leaveClass","appearClass","enterActiveClass","enterActiveClass","leaveActiveClass","appearActiveClass","enterToClass","leaveToClass","appearToClass"],Jt=["beforeEnter","enter","afterEnter","enterCancelled","beforeLeave","leave","afterLeave","leaveCancelled","beforeAppear","appear","afterAppear","appearCancelled"],Qt={name:"nuxt-link",functional:!0,render:function(t,e){return t("router-link",e.data,e.children)}},Xt={name:"nuxt-error",props:{error:{type:Object,default:null}},head:function(){return{title:this.message,meta:[{name:"viewport",content:"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"}]}},computed:{statusCode:function(){return this.error&&this.error.statusCode||500},message:function(){return this.error.message||"Error"}}},Yt=(n(300),n(1)),Zt=Object(Yt.a)(Xt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"__nuxt-error-page"},[n("div",{staticClass:"error"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"90",height:"90",fill:"#DBE1EC",viewBox:"0 0 48 48"}},[n("path",{attrs:{d:"M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"}})]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.message))]),t._v(" "),404===t.statusCode?n("p",{staticClass:"description"},[n("nuxt-link",{staticClass:"error-link",attrs:{to:"/"}},[t._v("Back to the home page")])],1):t._e(),t._v(" "),t._m(0)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"logo"},[e("a",{attrs:{href:"https://nuxtjs.org",target:"_blank",rel:"noopener"}},[this._v("Nuxt.js")])])}],!1,null,null,null);Zt.options.__file="nuxt-error.vue";var te=Zt.exports,ee={name:"nuxt",props:{nuxtChildKey:String,keepAlive:Boolean},render:function(t){return this.nuxt.err?t("nuxt-error",{props:{error:this.nuxt.err}}):t("nuxt-child",{key:this.routerViewKey,props:this.$props})},beforeCreate:function(){s.default.util.defineReactive(this,"nuxt",this.$root.$options.nuxt)},computed:{routerViewKey:function(){if(void 0!==this.nuxtChildKey||this.$route.matched.length>1)return this.nuxtChildKey||P(this.$route.matched[0].path)(this.$route.params);var t=this.$route.matched[0]&&this.$route.matched[0].components.default;return t&&t.options&&t.options.key?"function"==typeof t.options.key?t.options.key(this.$route):t.options.key:this.$route.path}},components:{NuxtChild:Wt,NuxtError:te}},ne=n(234),re=(n(321),n(159));s.default.use(re.a);var ie=n(325),oe=ie.keys(),ae={},se=oe.find(function(t){return t.includes("./index.")});if(se&&(ae=Ee(se)),"function"!=typeof ae){ae.modules||(ae.modules={});var ce=!0,ue=!1,le=void 0;try{for(var de,pe=oe[Symbol.iterator]();!(ce=(de=pe.next()).done);ce=!0){var fe=de.value,he=fe.replace(/^\.\//,"").replace(/\.(js|mjs)$/,"");if("index"!==he){var me=he.split(/\//);if(he=me[me.length-1],["state","getters","actions","mutations"].includes(he)){Re(Te(ae,me,!0),fe,he)}else{var ve="index"===he;ve&&me.pop();var ge=Te(ae,me),ye=Ee(fe);if(ge[he=me.pop()]=ge[he]||{},ve){var be={};if(ge[he].appends){be.appends=ge[he].appends;var we=!0,xe=!1,_e=void 0;try{for(var ke,$e=ge[he].appends[Symbol.iterator]();!(we=(ke=$e.next()).done);we=!0){var Ce=ke.value;be[Ce]=ge[he][Ce]}}catch(t){xe=!0,_e=t}finally{try{we||null==$e.return||$e.return()}finally{if(xe)throw _e}}}ge[he]=Object.assign({},ge[he],ye,be),ge[he].namespaced=!0}else ge[he]=Object.assign({},ye,ge[he]),ge[he].namespaced=!0}}}}catch(t){ue=!0,le=t}finally{try{ce||null==pe.return||pe.return()}finally{if(ue)throw le}}}var Se=ae instanceof Function?ae:function(){return new re.a.Store(Object.assign({strict:!1},ae,{state:ae.state instanceof Function?ae.state():{}}))};function Ee(t){var e=ie(t),n=e.default||e;if(n.commit)throw new Error("[nuxt] store/"+t.replace("./","")+" should export a method which returns a Vuex instance.");if(n.state&&"function"!=typeof n.state)throw new Error("[nuxt] state should be a function in store/"+t.replace("./",""));return n}function Te(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(1===e.length)return n?t:t.modules;var r=e.shift();return t.modules[r]=t.modules[r]||{},t.modules[r].namespaced=!0,t.modules[r].modules=t.modules[r].modules||{},Te(t.modules[r],e,n)}function Re(t,e,n){var r=ie(e);t.appends=t.appends||[],t.appends.push(n),t[n]=r.default||r}for(var Ie=n(237),Oe=n.n(Ie),Ae={setHeader:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",r=!0,i=!1,o=void 0;try{for(var a,s=(Array.isArray(n)?n:[n])[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if(!e)return void delete this.defaults.headers[c][t];this.defaults.headers[c][t]=e}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}},setToken:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",r=t?(e?e+" ":"")+t:null;this.setHeader("Authorization",r,n)},onRequest:function(t){this.interceptors.request.use(function(e){return t(e)||e})},onResponse:function(t){this.interceptors.response.use(function(e){return t(e)||e})},onRequestError:function(t){this.interceptors.request.use(void 0,function(e){return t(e)||Promise.reject(e)})},onResponseError:function(t){this.interceptors.response.use(void 0,function(e){return t(e)||Promise.reject(e)})},onError:function(t){this.onRequestError(t),this.onResponseError(t)}},Me=["request","delete","get","head","options","post","put","patch"],Ne=function(){var t=Me[Pe];Ae["$"+t]=function(){return this[t].apply(this,arguments).then(function(t){return t&&t.data})}},Pe=0;Pe<Me.length;Pe++)Ne();var qe=function(t,e){var n={baseURL:"http://localhost:3000/",headers:{common:{Accept:"application/json, text/plain, */*"},delete:{},get:{},head:{},post:{},put:{},patch:{}}};n.headers.common=t.req&&t.req.headers?Object.assign({},t.req.headers):{},delete n.headers.common.accept,delete n.headers.common.host,delete n.headers.common["cf-ray"],delete n.headers.common["cf-connecting-ip"];var r=Oe.a.create(n);!function(t){for(var e in Ae)t[e]=Ae[e].bind(t)}(r),t.$axios=r,e("axios",r)},Ue=n(116),De=n.n(Ue),je=n(115),Be=function(t){var e=t.$axios,n=t.app,r="undefined"!=typeof window;e.setHeader("Accept","application/x.api.latest+json"),n.store.state.login?e.setToken(n.store.state.user.token,"Bearer"):e.setToken(Object(je.a)(r?"":n.context.req),"Bearer"),e.onRequest(function(t){t.baseURL=r?"https://api.calibur.tv/":"http://localhost/",t.timeout=1e4;var e=t.method.toLocaleUpperCase();r&&M.sentry.setRequestStack({url:t.url,params:"GET"===e?t.params:t.data,method:e})}),e.onResponse(function(t){r&&M.sentry.setResponseStack({url:t.request.responseURL,requestId:t.headers["x-request-id"],viaId:t.headers["x-via"]||"none",code:200});var e=t.headers.authorization;return e&&Object.assign(t.data.data,{token:e.split("Bearer ").pop()}),t.data}),e.onError(function(t){var e=function(t){return/timeout of/.test(t.message)?(t.statusCode=504,t.message="网络请求超时，请稍候再试！",t):t.response?(t.statusCode=t.response.status,t.message=t.response.data.message,t):(t.statusCode=502,t.message="网络错误，请刷新网页重试！",t)}(t);return r&&(M.sentry.setResponseStack({url:e.request&&e.request.responseURL||"unknown",code:e.statusCode,message:e.message}),/\/door\/refresh/.test(e.config.url)&&De.a.remove("JWT-TOKEN"),M.toast.error(e.message)),Promise.reject(e)})},ze=(n(200),n(3),n(117)),Le=n.n(ze),Fe=(n(394),n(238)),Ge=n.n(Fe),Ve=(n(395),n(239)),He=n.n(Ve),We=(n(396),n(240)),Ke=n.n(We),Je=(n(203),n(118)),Qe=n.n(Je),Xe=(n(214),n(119)),Ye=n.n(Xe),Ze=(n(429),n(241)),tn=n.n(Ze),en=(n(262),n(168)),nn=n.n(en),rn=(n(433),n(157)),on=n.n(rn),an=(n(219),n(69)),sn=n.n(an),cn=(n(434),n(242)),un=n.n(cn),ln=(n(435),n(243)),dn=n.n(ln),pn=(n(436),n(244)),fn=n.n(pn),hn=(n(441),n(245)),mn=n.n(hn),vn=(n(442),n(246)),gn=n.n(vn),yn=(n(443),n(247)),bn=n.n(yn),wn=(n(444),n(248)),xn=n.n(wn),_n=(n(445),n(249)),kn=n.n(_n),$n=(n(222),n(57)),Cn=n.n($n),Sn=(n(446),n(250)),En=n.n(Sn),Tn=(n(447),n(251)),Rn=n.n(Tn),In=(n(448),n(252)),On=n.n(In),An=(n(449),n(253)),Mn=n.n(An),Nn=(n(450),n(254)),Pn=n.n(Nn),qn=(n(260),n(167)),Un=n.n(qn),Dn=n(58),jn=n.n(Dn);s.default.component(jn.a.name,jn.a),s.default.use(Un.a),s.default.use(Pn.a),s.default.use(Mn.a),s.default.use(On.a),s.default.use(Rn.a),s.default.use(En.a),s.default.use(Cn.a),s.default.use(kn.a),s.default.use(xn.a),s.default.use(bn.a),s.default.use(gn.a),s.default.use(mn.a),s.default.use(fn.a),s.default.use(dn.a),s.default.use(un.a),s.default.use(sn.a),s.default.use(on.a),s.default.use(nn.a),s.default.use(tn.a),s.default.use(Ye.a),s.default.use(Qe.a),s.default.use(Ke.a),s.default.use(He.a),s.default.use(Ge.a),s.default.use(Le.a);var Bn={index:"/",__query:function(t,e){if(!e)return t;var n="?";return Object.keys(e).forEach(function(t){n+="".concat(t,"=").concat(e[t],"&")}),"".concat(t.split("?").shift()).concat(n.substring(0,n.length-1))},url:function(t,e){return this.__query(t,e)},user:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"/user/".concat(t,"/").concat(e)},bangumi:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"/bangumi/".concat(t,"/").concat(e)},video:function(t){return"/video/".concat(t)},image:function(t){return"/pin/".concat(t)},score:function(t){return"/review/".concat(t)},post:function(t,e){return this.__query("/post/".concat(t),e)},bangumiTag:function(t){return t?"/bangumi/tags?id=".concat(t):"/bangumi/tags"},bangumiNews:"/bangumi/news",bangumiTimeline:"/bangumi/timeline",postTrending:function(t){return"/post/trending/".concat(t)},world:function(t){return"/world/".concat(t)},editScore:function(t){return"/review/edit/".concat(t)},question:function(t){return"/qaq/".concat(t)},answer:function(t){return"/soga/".concat(t)},roleTrending:"/role/trending",createScore:"/review/create",cartoonRole:function(t){return"/role/".concat(t)}},zn={shortenNumber:function(t){return t>1e3?"".concat(Math.floor(t/1e3*10)/10,"k"):t},timeLong:function(t){var e=/^\d+$/.test(t)?13===t.toString().length?parseInt((t-0)/1e3,10):1e3*t:t.replace(/-/g,"/"),n=new Date(e);return"".concat(n.getFullYear(),"-").concat("0".concat(n.getMonth()+1).substr(-2),"-").concat("0".concat(n.getDate()).substr(-2)," ").concat("0".concat(n.getHours()).substr(-2),":").concat("0".concat(n.getMinutes()).substr(-2),":").concat("0".concat(n.getSeconds()).substr(-2))},throttle:function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var c=function(){s=!1===n.leading?0:Date.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var l=e-(u-s);return r=this,i=arguments,l<=0||l>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(c,l)),o}},createFileName:function(t){var e=t.userId,n=t.type,r=t.file;return"user/".concat(e,"/").concat(n,"/").concat((new Date).getTime(),"-").concat(Math.random().toString(36).substring(3,6),".").concat(r.type.split("/").pop())},getOffsetTop:function(t){var e=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop)}while(t=t.offsetParent);return e},shuffle:function(t){for(var e=t.length;e;e--){var n=Math.floor(Math.random()*e),r=[t[n],t[e-1]];t[e-1]=r[0],t[n]=r[1]}return t}},Ln=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";if(/imageMogr2/.test(t))return t;var n,r,i=/^http/.test(t)?t:"https://image.calibur.tv/".concat(t),o=e.format?"/format/".concat(e.format):function(){if("undefined"==typeof window)return!1;if(void 0!==window.supportWebP)return window.supportWebP;var t=document.createElement("canvas");if(t.getContext&&t.getContext("2d")){var e=0===t.toDataURL("image/webp").indexOf("data:image/webp");return window.supportWebP=e,e}return!1}()?"/format/webp":"",a=void 0===e.mode?1:e.mode;return 1===a&&!e.width||!e.width&&!e.height?"".concat(i,"?imageMogr2/auto-orient/strip").concat(o):(1===a?(n="/w/".concat(e.width),r=e.height?"/h/".concat(e.height):"/h/".concat(e.width)):(n=e.width?"/w/".concat(e.width):"",r=e.height?"/h/".concat(e.height):""),"".concat(i,"?imageMogr2/auto-orient/strip|imageView2/").concat(a).concat(n).concat(r).concat(o))};s.default.use({install:function(t){t.prototype.$channel=new t,t.prototype.$alias=Bn,t.prototype.$utils=zn,t.prototype.$resize=Ln}});var Fn={name:"not-ssr",props:["placeholder"],data:function(){return{canRender:!1}},mounted:function(){this.canRender=!0},render:function(t){return this.canRender?this.$slots.default&&this.$slots.default[0]:t("div",{class:["no-ssr-placeholder"]},this.$slots.placeholder||this.placeholder)}},Gn=n(161),Vn=n.n(Gn),Hn=Vn()(),Wn={name:"v-time",props:{value:{default:parseInt(Date.now()/1e3,10).toString()}},render:function(t){return t("time",{attrs:{datetime:this.$utils.timeLong(this.value)}})},mounted:function(){Hn.render(this.$el,"zh_CN")},beforeDestroy:function(){Vn.a.cancel(this.$el)}},Kn=(n(45),n(5)),Jn={name:"MoreBtn",props:{noMore:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},auto:{type:Boolean,default:!1},length:{type:Number,default:1}},mounted:function(){var t=this;if(this.auto&&!this.noMore)var e=Kn.a.on(document,"scroll",this.$utils.throttle(function(){Kn.a.checkInView(t.$el)&&t.$emit("fetch"),t.noMore&&Kn.a.off(e)},200),!1)},methods:{handleFetch:function(){this.loading||this.noMore||this.$emit("fetch")}}},Qn=(n(452),Object(Yt.a)(Jn,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"nomore-wraper"},[t.noMore?r("div",{staticClass:"nomore"},[t.length?[t._v("\n      没有更多了，休息一下吧\n    ")]:t.loading?t._e():r("div",{staticClass:"nothing"},[r("img",{attrs:{src:n(259),alt:"no-content"}}),t._v(" "),r("p",[t._v("还没有内容")]),t._v(" "),t._t("default")],2)],2):[t.auto?[t.loading?r("div",{staticClass:"loadmore"},[r("div",{staticClass:"rolling"})]):r("span",{staticStyle:{"line-height":"44px"},on:{click:t.handleFetch}},[t._v("点击加载更多")])]:[r("button",{staticClass:"loadmore",on:{click:t.handleFetch}},[t.loading?r("div",{staticClass:"rolling"}):r("span",[t._v("点击加载更多")])])]]],2)},[],!1,null,null,null));Qn.options.__file="MoreBtn.vue";var Xn=Qn.exports,Yn={name:"VDrawer",props:{value:{type:Boolean,default:!1},id:{type:String,default:""},from:{type:String,default:"right",validator:function(t){return~["left","right","top","bottom"].indexOf(t)}},size:{type:String,default:"70%"},headerText:{type:String,default:""},backdrop:{type:Boolean,default:!0},submitText:{type:String,default:""}},data:function(){return{show:this.value,pos:0,backdropId:0}},computed:{position:function(){var t={};return"left"===this.from||"right"===this.from?(t.top=0,t.height="100%",t.width=this.size):(t.left=0,t.width="100%",t.height=this.size),t[this.from]=0,t}},watch:{value:function(t){t?this.open():this.close(),this.show=t},show:function(t){this.$emit("input",t)},$route:function(){this.close()}},mounted:function(){this.id&&(this.$channel.$on("drawer-open-".concat(this.id),this.open),this.$channel.$on("drawer-close-".concat(this.id),this.close))},beforeDestroy:function(){this.id&&(this.$channel.$off("drawer-open-".concat(this.id)),this.$channel.$off("drawer-close-".concat(this.id)))},methods:{open:function(){this.show||(this.pos=window.scrollY,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=0,document.body.style.bottom=0,document.body.style.right=0,document.body.style.left=0,document.body.style.height="".concat(window.innerHeight,"px"),this.show=!0,window.__closeImageLazy__=!0,this.id&&this.$channel.$emit("drawer-open-event-".concat(this.id)),this.backdrop&&(this.backdropId=this.$backdrop.show({ele:this.$el,click:this.close})))},close:function(){document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.bottom="",document.body.style.right="",document.body.style.left="",document.body.style.height="",this.show&&(window.scrollTo(0,this.pos),this.show=!1,window.__closeImageLazy__=!1,this.backdrop&&this.$backdrop.hide(this.backdropId),this.id&&this.$channel.$emit("drawer-close-event-".concat(this.id)),this.$emit("cancel"))},submit:function(){var t=this;this.close(),this.$nextTick(function(){t.$emit("submit")})}}},Zn=(n(453),Object(Yt.a)(Yn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("not-ssr",[n("transition",{attrs:{name:"fade-"+t.from}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"drawer",style:t.position},[t.headerText?n("header",{staticClass:"drawer-header"},[n("button",{staticClass:"close-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.close(e)}}},[t._v("关闭")]),t._v(" "),n("h3",{staticClass:"oneline",domProps:{textContent:t._s(t.headerText)}}),t._v(" "),t.submitText?n("button",{staticClass:"submit-btn",domProps:{textContent:t._s(t.submitText)},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.submit(e)}}}):t._e()]):t._e(),t._v(" "),t._t("default")],2)])],1)},[],!1,null,"caa57984",null));Zn.options.__file="Drawer.vue";var tr=Zn.exports,er={name:"VImg",props:{src:{required:!0,type:String,default:""},width:{type:[Number,String],default:0},height:{type:[Number,String],default:0},full:{type:Boolean,default:!1},mime:{type:String,default:""},lazy:{type:Boolean,default:!0},blur:{type:Boolean,default:!1},poster:{type:Boolean,default:!1},avatar:{type:Boolean,default:!1}},data:function(){return{loaded:!1,error:!1,toggleClick:!1,displayGifMask:!1,retrying:!1,containerWidth:0,placeholderImage:"",errorPlaceholder:"",errorMessage:"",retryMessage:"",heightLimit:0}},computed:{blockModeWrapStyle:function(){return{width:"".concat(this.width,"px")}},blockModeClasses:function(){var t=[];return this.error&&t.push(this.$style.retry),this.poster&&t.pust(this.$style.poster),this.loaded||(this.gifNeedClickToLoad?t.push(this.$style.cssGif):this.blur?t.push(this.$style.cssBlur):t.push(this.$style.cssFade)),t},computeContainerHeight:function(){return this.$isServer?0:this.width>this.containerWidth?parseInt(this.height/this.width*this.containerWidth,10):this.height},blockModeShimPadding:function(){return{paddingTop:"".concat(100*parseFloat(this.height/this.width).toFixed(3),"%")}},computePlaceholder:function(){if(!this.blur)return this.placeholderImage;if(this.full){var t=this.blockModeImageDisplaySize,e=t.width,n=t.height,r=this.gifNeedClickToLoad?.5:5;return this.$resize(this.src,{width:parseInt(e/r),height:parseInt(n/r),format:"png"})}return this.$resize(this.src,"auto"===this.width?{height:parseInt(this.height/5),mode:2,format:"png"}:{width:parseInt(this.inlineModeImageDisplayWidth/5),height:parseInt(this.height/5),format:"png"})},inlineModeImageDisplayWidth:function(){var t=+this.width.toString().replace("px","").replace("%","");return parseInt(/%$/.test(this.width)?this.containerWidth/50*t:2*t,10)},inlineModeWrapStyle:function(){return{width:this.width?this.convertSizeToPx(this.width):"auto",height:this.height?this.convertSizeToPx(this.height):"auto"}},inlineImageStyle:function(){if("auto"===this.width)return{height:"100%",width:"auto"};var t=this.width>this.height;return this.width&&this.height?{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","-webkit-transform":"translate(-50%, -50%)",width:t?"auto":"100%",height:t?"100%":"auto"}:{}},gifNeedClickToLoad:function(){return!(!this.mime||!/gif/i.test(this.mime))},blockModeImageDisplaySize:function(){var t,e;return this.width>2*this.containerWidth?(t=2*this.containerWidth,e=2*this.computeContainerHeight):(t=this.width,e=this.height),t>9999&&(e=parseInt(9999/t*e,10),t=9999),e>9999&&(t=parseInt(9999/e*t,10),e=9999),{width:t,height:e}},blockModeImageSrc:function(){return this.$resize(this.src,this.blockModeImageDisplaySize)},inlineModeImageSrc:function(){return this.$resize(this.src,"auto"===this.width?{height:2*+this.height,mode:2}:{width:this.inlineModeImageDisplayWidth,height:2*+this.height})}},mounted:function(){var t=this;this.containerWidth=this.$el.parentNode.offsetWidth,this.gifNeedClickToLoad?this.displayGifMask=!0:this.$nextTick(function(){!t.lazy||window.__closeImageLazy__||Kn.a.checkInView(t.$el)?t.loaded=!0:t.bindLazyEvent()})},methods:{bindLazyEvent:function(){var t=this,e=Kn.a.on(document,"scroll",this.$utils.throttle(function(){Kn.a.checkInView(t.$el)&&(t.loaded=!0,Kn.a.off(e))},200),!1)},bindRetryEvent:function(){var t=this,e=Kn.a.on(this.$el,"click",function(n){t.loaded=!0,t.retrying=!0,t.error=!1,Kn.a.off(e),n.stopPropagation()},!1)},convertSizeToPx:function(t){return/auto/.test(t)?t:/px$/.test(t)?t:/%$/.test(t)?t:"".concat(t,"px")},handleImageLoadSuccess:function(){this.error=!1,this.retrying=!1,this.toggleClick&&(this.toggleClick=!1,this.displayGifMask=!1,this.bindStopGifEvent())},bindStopGifEvent:function(){var t=this,e=Kn.a.on(this.$el,"click",function(n){t.displayGifMask=!0,t.loaded=!1,Kn.a.off(e),n.stopPropagation()},!1)},handleImageLoadError:function(){this.error=!0,this.retrying=!1,this.full&&this.bindRetryEvent()},clickToLoadGIF:function(){this.toggleClick||(this.toggleClick=!0,this.loaded=!0)}}},nr=n(162);n(454);var rr=Object(Yt.a)(er,function(){var t,e,n=this,r=n.$createElement,i=n._self._c||r;return n.full?i("div",{class:[n.$style.block,n.blockModeClasses],style:n.blockModeWrapStyle},[i("div",{class:n.$style.paddingShim,style:n.blockModeShimPadding}),n._v(" "),i("div",{class:n.$style.imageWrap},[n.error?n._e():i("img",{attrs:{src:n.$isServer?n.placeholderImage:n.loaded?n.blockModeImageSrc:n.computePlaceholder},on:{error:n.handleImageLoadError,load:n.handleImageLoadSuccess}})]),n._v(" "),n.error?i("span",{class:n.$style.message,domProps:{textContent:n._s(n.errorMessage)}}):n._e(),n._v(" "),n.retrying?i("span",{class:n.$style.message,domProps:{textContent:n._s(n.retryMessage)}}):n._e(),n._v(" "),i("transition",{attrs:{name:"img-zoom"}},[n.displayGifMask?i("div",{class:n.$style.loadGif,on:{click:n.clickToLoadGIF}},[i("span",{class:(t={},t[n.$style.rolling]=n.toggleClick,t)},[n._v("GIF")])]):n._e()])],1):i("span",{class:[n.$style.inline,(e={},e[n.$style.cssFade]=!n.loaded&&!n.blur,e[n.$style.cssBlur]=!n.loaded&&n.blur,e[n.$style.avatar]=n.avatar,e[n.$style.poster]=n.poster,e)],style:n.inlineModeWrapStyle},[i("div",{class:n.$style.imageWrap},[i("img",{style:n.inlineImageStyle,attrs:{src:n.error?n.errorPlaceholder:n.$isServer?"":n.loaded?n.inlineModeImageSrc:n.computePlaceholder},on:{error:n.handleImageLoadError}})])])},[],!1,function(t){this.$style=nr.default.locals||nr.default},null,null);rr.options.__file="ImageLazyLoad.vue";var ir=rr.exports,or="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";ir.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.component(ir.name,{extends:ir,data:function(){return{heightLimit:e.heightLimit||0,placeholderImage:e.placeholderImage||or,errorPlaceholder:e.errorPlaceholder||or,errorMessage:e.errorMessage||"图片加载失败，请点击重试",retryMessage:e.retryMessage||"加载中..."}}})};var ar=ir,sr={name:"VLazy",props:{timeout:{type:Number,default:0},scale:{type:Number,default:1.5}},data:function(){return{init:!1}},watch:{$route:function(){var t=this;this.init=!1,this.$nextTick(function(){t.renderComp()})}},mounted:function(){var t=this;this.timeout?setTimeout(function(){t.init=!0},this.timeout):this.renderComp()},methods:{renderComp:function(){var t=this;if(Kn.a.checkInView(this.$el,this.scale))this.init=!0;else var e=Kn.a.on(document,["scroll"],this.$utils.throttle(function(){(Kn.a.checkInView(t.$el,t.scale)||t.init)&&(t.init=!0,Kn.a.off(e))},200))}}},cr=Object(Yt.a)(sr,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("no-ssr",[this.init?this._t("default"):e("div",{staticClass:"v-lazy-shim"})],2)],1)},[],!1,null,null,null);cr.options.__file="LazyComponent.vue";var ur=cr.exports;s.default.use(Le.a),s.default.use(Ye.a),s.default.use(Qe.a),s.default.use(Cn.a),s.default.use(sn.a),s.default.use(ar,{}),s.default.component(ur.name,ur),s.default.component(jn.a.name,jn.a),s.default.component(Fn.name,Fn),s.default.component(Wn.name,Wn),s.default.component(Xn.name,Xn),s.default.component(tr.name,tr);var lr=function(t){var e=t.app,n=t.store.state.ua.wechat;e.router.onReady(function(){e.router.beforeResolve(function(){var t=a()(regeneratorRuntime.mark(function t(e,r,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return window.location=e.fullPath,t.abrupt("return",i(!1));case 3:i();case 4:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()),e.router.afterEach(function(t,e){_hmt.push(["_trackPageview",t.fullPath]),M.sentry.setPageInfo(t.name)})})},dr=(n(455),n(120)),pr=n.n(dr),fr=(n(456),n(163)),hr=n.n(fr),mr=n(36),vr=n.n(mr),gr=n(37),yr=n.n(gr),br=(n(462),function(){function t(){vr()(this,t)}return yr()(t,[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ele,n=t.click,r="backdrop-".concat(Math.random().toString(36).substring(3,6)),i=document.createElement("div");return i.id=r,i.classList.add("backdrop","show"),n&&i.addEventListener("click",function(){n()}),document.body.style.overflowY="hidden",e?e.parentNode.insertBefore(i,e):document.body.appendChild(i),r}},{key:"hide",value:function(t){if(t){var e=document.getElementById(t);e&&(e.classList.add("hide"),e.classList.remove("show"),document.body.style.overflowY="auto",setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},200))}}}]),t}());!function(t){if(void 0===t)throw new Error("Geetest requires browser environment");var e=t.document,n=t.Math,r=e.getElementsByTagName("head")[0];function o(t){this._obj=t}function a(t){var e=this;new o(t)._each(function(t,n){e[t]=n})}o.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},a.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return s(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(t){var e=this;new o(t)._each(function(t,n){e[t]=n})}};var s=function(t){return"string"==typeof t},c=function(t){return"object"===i()(t)&&null!==t},u={},l={},d=function(t,e,n,r){e=function(t){return t.replace(/^https?:\/\/|\/$/g,"")}(e);var i=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t}(n)+function(t){if(!t)return"";var e="?";return new o(t)._each(function(t,n){(s(n)||function(t){return"number"==typeof t}(n)||function(t){return"boolean"==typeof t}(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}),"?"===e&&(e=""),e.replace(/&$/,"")}(r);return e&&(i=t+e+i),i},p=function(t,n,i,o,a){!function s(c){!function(t,n){var i=e.createElement("script");i.charset="UTF-8",i.async=!0,i.onerror=function(){n(!0)};var o=!1;i.onload=i.onreadystatechange=function(){o||i.readyState&&"loaded"!==i.readyState&&"complete"!==i.readyState||(o=!0,setTimeout(function(){n(!1)},0))},i.src=t,r.appendChild(i)}(d(t,n[c],i,o),function(t){t?c>=n.length-1?a(!0):s(c+1):a(!1)})}(0)},f=function(e,r,i,o){if(c(i.getLib))return i._extend(i.getLib),void o(i);if(i.offline)o(i._get_fallback_config());else{var a="geetest_"+(parseInt(1e4*n.random())+(new Date).valueOf());t[a]=function(e){"success"===e.status?o(e.data):e.status?o(i._get_fallback_config()):o(e),t[a]=void 0;try{delete t[a]}catch(t){}},p(i.protocol,e,r,{gt:i.gt,callback:a},function(t){t&&o(i._get_fallback_config())})}},h=function(t,e){var n={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};(t.Geetest||e.getElementById("gt_lib"))&&(l.slide="loaded"),t.initGeetest=function(e,n){var r=new a(e);e.https?r.protocol="https://":e.protocol||(r.protocol=t.location.protocol+"//"),c(e.getType)&&r._extend(e.getType),f([r.api_server||r.apiserver],r.typePath,r,function(e){var i=e.type,o=function(){r._extend(e),n(new t.Geetest(r))};u[i]=u[i]||[];var a=l[i]||"init";"init"===a?(l[i]="loading",u[i].push(o),p(r.protocol,e.static_servers||e.domains,e[i]||e.path,null,function(t){if(t)l[i]="fail",h("networkError",r);else{l[i]="loaded";for(var e=u[i],n=0,o=e.length;n<o;n+=1){var a=e[n];"function"==typeof a&&a()}u[i]=[]}})):"loaded"===a?o():"fail"===a?h("networkError",r):"loading"===a&&u[i].push(o)})}}(window);var wr=n(83),xr=function(t){var e="object"===i()(t)?t:{},n=e.type,r=e.elem,o=e.success,a=e.error,s=e.ready,c=e.async,u=e.close,l=e.ctx,d=n||"bind";Object(wr.a)(l).then(function(e){window.initGeetest?window.initGeetest({gt:e.gt,challenge:e.challenge,offline:!e.success,product:d,width:"100%",new_captcha:1},function(n){n.onReady(function(){s&&s()}),"float"===d?n.appendTo(r):"bind"===d&&(c?r.onclick=function(){n.verify()}:n.onReady(function(){return n.verify()})),n.onSuccess(function(){var r=n.getValidate();"object"===i()(t)?o&&o({data:{geetest_challenge:r.geetest_challenge,geetest_seccode:r.geetest_seccode,geetest_validate:r.geetest_validate,payload:e.payload,success:e.success},captcha:n}):t({data:{geetest_challenge:r.geetest_challenge,geetest_seccode:r.geetest_seccode,geetest_validate:r.geetest_validate,payload:e.payload,success:e.success},captcha:n})}),n.onError(function(){l.$toast.error("图形验证码出错了"),u&&u()}),n.onClose(function(){u&&u()})}):l.$toast.error("验证码加载失败，请刷新网页重试")}).catch(function(t){a&&a(t)})},_r=(n(463),n(164)),kr=n.n(_r),$r=(n(466),n(255)),Cr=n.n($r),Sr=(n(467),n(165)),Er=n.n(Sr),Tr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(e){setTimeout(e,t)})},Rr=function(){function t(){vr()(this,t)}return yr()(t,[{key:"success",value:function(t){this.stop();var e,n="";return"object"===i()(t)?(n=t.tip,e=t.time||1500):(n=t,e=1500),Er()({duration:e,message:n||"操作成功",iconClass:"iconfont icon-caozuochenggong"}),Tr(e)}},{key:"info",value:function(t){this.stop(),Cr()({message:t,center:!0})}},{key:"error",value:function(t){console&&console.log(t),this.stop();var e,n="";return"object"===i()(t)?(n=t.tip,e=t.time||1500):(n=t,e=1500),Er()({duration:e,message:n||"操作失败",iconClass:"iconfont icon-cuowuhttp"}),Tr(e)}},{key:"loading",value:function(t){var e=this;this.stop();var n,r="";if("object"===i()(t)?(r=t.tip,n=t.time):r=t,kr.a.open({text:r||"加载中...",spinnerType:"triple-bounce"}),n)return Tr(n).then(function(){return e.stop()})}},{key:"stop",value:function(){kr.a.close()}}]),t}();s.default.component(hr.a.name,hr.a),s.default.use({install:function(t){t.prototype.$cookie=De.a,t.prototype.$channel=new t,t.prototype.$backdrop=new br,t.prototype.$toast=new Rr,t.prototype.$captcha=xr,t.prototype.$alert=pr.a.alert,t.prototype.$confirm=pr.a.confirm,t.prototype.$prompt=pr.a.prompt}});var Ir=n(121),Or=new(function(){function t(){return vr()(this,t),this.version="2019-1-21 22:20:30",this.env="production",this.url="https://63fb1028c6e24cb5be33e8ed64d798e8@sentry.io/1278322",this.Raven=this.init(),this.setExtrasData(),this}return yr()(t,[{key:"init",value:function(){try{return Ir.init({dsn:this.url,release:this.version,environment:this.env,whitelistUrls:[/calibur\.tv/],ignoreUrls:[/^file:\/\//],shouldSendCallback:function(t){var e=!0;try{e=t.exception.values[0].stacktrace.frames.length>1}catch(t){e=!1}return e},ignoreErrors:["Uncaught TypeError: value.hasOwnProperty is not a function",/网络/],integrations:[new Ir.Integrations.Vue({Vue:s.default})]}),Ir}catch(t){return null}}},{key:"setPageInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{this.Raven.setTagsContext({pageName:t,abTest:e})}catch(t){}}},{key:"setExtrasData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.requestId,n=t.viaId;try{this.Raven.setTagsContext({"Request-Id":e||"none","Via-Id":n||"none","First-Referrer-Host":document.referrer.split("?")[0]||"none"})}catch(t){}}},{key:"setUserInfo",value:function(t){if(t)try{this.Raven.setUserContext(t)}catch(t){}}},{key:"setResponseStack",value:function(t){try{var e=this.Raven.getContext(),n=w()({},e.extra);n["Response-Stack"]?n["Response-Stack"].unshift(t):n["Response-Stack"]=[t],n["Response-Stack"].length>5&&n["Response-Stack"].pop(),this.Raven.setExtraContext(),this.Raven.setExtraContext(n)}catch(t){}}},{key:"setPageViewStack",value:function(t){try{var e=this.Raven.getContext(),n=w()({},e.extra);n["PageView-Stack"]?n["PageView-Stack"].unshift(t):n["PageView-Stack"]=[t],n["PageView-Stack"].length>5&&n["PageView-Stack"].pop(),this.Raven.setExtraContext(),this.Raven.setExtraContext(n)}catch(t){}}},{key:"setRequestStack",value:function(t){try{var e=this.Raven.getContext(),n=w()({},e.extra);n["Request-Stack"]?n["Request-Stack"].unshift(t):n["Request-Stack"]=[t],n["Request-Stack"].length>5&&n["Request-Stack"].pop(),this.Raven.setExtraContext(),this.Raven.setExtraContext(n)}catch(t){}}},{key:"test",value:function(){try{var t=(void 0).getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>0&&t.left<window.innerWidth&&t.right>0}catch(t){t.message="---------- test sentry report ----------",this.Raven.captureException(t)}}}]),t}());window.M=window.M||Object.create(null),M.sentry=Or,M.toast=new Rr,s.default.component(Ht.name,Ht),s.default.component(Wt.name,Wt),s.default.component(Qt.name,Qt),s.default.component(ee.name,ee),s.default.use(G.a,{keyName:"head",attribute:"data-n-head",ssrAttribute:"data-n-head-ssr",tagIDKeyName:"hid"});var Ar={name:"page",mode:"out-in",appear:!1,appearClass:"appear",appearActiveClass:"appear-active",appearToClass:"appear-to"};function Mr(){return(Mr=a()(regeneratorRuntime.mark(function t(e){var n,r,i,o,a,c,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new V.a({mode:"history",base:"/",linkActiveClass:"nuxt-link-active",linkExactActiveClass:"nuxt-link-exact-active",scrollBehavior:Gt,routes:[{path:"/bangumi",component:H,props:!1,name:"bangumi",children:[{path:"news",component:W,props:!1,name:"bangumi-index-news"},{path:"timeline",component:K,props:!1,name:"bangumi-index-timeline"},{path:"tags/:id?",component:J,props:!1,name:"bangumi-index-tags-id"}]},{path:"/search",component:Q,props:!1,name:"search"},{path:"/world",component:X,props:!1,children:[{path:"",component:Y,props:!1,name:"world"},{path:"pins",component:Z,props:!1,name:"world-pins"},{path:"post",component:tt,props:!1,name:"world-post"},{path:"qaq",component:et,props:!1,name:"world-qaq"},{path:"review",component:nt,props:!1,name:"world-review"}]},{path:"/about/hello",component:rt,props:!1,name:"about-hello"},{path:"/app/download",component:it,props:!1,name:"app-download"},{path:"/app/feedback",component:ot,props:!1,name:"app-feedback"},{path:"/app/handbook",component:at,props:!1,name:"app-handbook"},{path:"/app/invite",component:st,props:!1,name:"app-invite"},{path:"/app/report",component:ct,props:!1,name:"app-report"},{path:"/callback/auth-error",component:ut,props:!1,name:"callback-auth-error"},{path:"/callback/auth-redirect",component:lt,props:!1,name:"callback-auth-redirect"},{path:"/callback/auth-success",component:dt,props:!1,name:"callback-auth-success"},{path:"/error/404",component:pt,props:!1,name:"error-404"},{path:"/my/invite",component:ft,props:!1,name:"my-invite"},{path:"/my/setting",component:ht,props:!1,name:"my-setting"},{path:"/role/trending",component:mt,props:!1,name:"role-trending"},{path:"/about/invite/:id?",component:vt,props:!0,name:"about-invite-id"},{path:"/app/notice/:id?",component:gt,props:!0,name:"app-notice-id"},{path:"/bangumi/:id",component:yt,props:!0,children:[{path:"",component:bt,props:!0,name:"bangumi-id"},{path:"cartoon",component:wt,props:!0,name:"bangumi-id-cartoon"},{path:"pins",component:xt,props:!0,name:"bangumi-id-pins"},{path:"post",component:_t,props:!0,name:"bangumi-id-post"},{path:"qaq",component:kt,props:!0,name:"bangumi-id-qaq"},{path:"review",component:$t,props:!0,name:"bangumi-id-review"},{path:"role",component:Ct,props:!0,name:"bangumi-id-role"},{path:"video",component:St,props:!0,name:"bangumi-id-video"}]},{path:"/pin/:id?",component:Et,props:!0,name:"pin-id"},{path:"/post/:id?",component:Tt,props:!0,name:"post-id"},{path:"/qaq/:id?",component:Rt,props:!0,name:"qaq-id"},{path:"/review/:id?",component:It,props:!0,name:"review-id"},{path:"/role/:id?",component:Ot,props:!0,name:"role-id"},{path:"/soga/:id?",component:At,props:!0,name:"soga-id"},{path:"/user/:zone?",component:Mt,props:!0,children:[{path:"",component:Nt,props:!0,name:"user-zone"},{path:"bangumi",component:Pt,props:!0,name:"user-zone-bangumi"},{path:"mark",component:qt,props:!0,name:"user-zone-mark"},{path:"pins",component:Ut,props:!0,name:"user-zone-pins"},{path:"post",component:Dt,props:!0,name:"user-zone-post"},{path:"qaq",component:jt,props:!0,name:"user-zone-qaq"},{path:"review",component:Bt,props:!0,name:"user-zone-review"},{path:"role",component:zt,props:!0,name:"user-zone-role"}]},{path:"/video/:id?",component:Lt,props:!0,name:"video-id"},{path:"/",component:Ft,props:!1,name:"index"},{path:"*",component:pt,name:"error-fallback"}],fallback:!1});case 2:return n=t.sent,(r=Se(e)).$router=n,i=r.registerModule,r.registerModule=function(t,e,n){return i.call(r,t,e,Object.assign({preserveState:!0},n))},o=w()({router:n,store:r,nuxt:{defaultTransition:Ar,transitions:[Ar],setTransitions:function(t){return Array.isArray(t)||(t=[t]),t=t.map(function(t){return t=t?"string"==typeof t?Object.assign({},Ar,{name:t}):Object.assign({},Ar,t):Ar}),this.$options.nuxt.transitions=t,t},err:null,dateErr:null,error:function(t){t=t||null,o.context._errored=!!t,t=t?U(t):null;var n=this.nuxt||this.$options.nuxt;return n.dateErr=Date.now(),n.err=t,e&&(e.nuxt.error=t),t}}},ne.a),r.app=o,a=e?e.next:function(t){return o.router.push(t)},e?c=n.resolve(e.url).route:(u=N(n.options.base),c=n.resolve(u).route),t.next=13,I(o,{route:c,next:a,error:o.nuxt.error.bind(o),store:r,payload:e?e.payload:void 0,req:e?e.req:void 0,res:e?e.res:void 0,beforeRenderFns:e?e.beforeRenderFns:void 0});case 13:if(l=function(t,e){if(!t)throw new Error("inject(key, value) has no key provided");if(void 0===e)throw new Error("inject(key, value) has no value provided");o[t="$"+t]=e,r[t]=o[t];var n="__nuxt_"+t+"_installed__";s.default[n]||(s.default[n]=!0,s.default.use(function(){s.default.prototype.hasOwnProperty(t)||Object.defineProperty(s.default.prototype,t,{get:function(){return this.$root.$options[t]}})}))},window.__NUXT__&&window.__NUXT__.state&&r.replaceState(window.__NUXT__.state),"function"!=typeof qe){t.next=18;break}return t.next=18,qe(o.context,l);case 18:if("function"!=typeof Be){t.next=21;break}return t.next=21,Be(o.context,l);case 21:t.next=24;break;case 24:t.next=27;break;case 27:t.next=30;break;case 30:if("function"!=typeof lr){t.next=34;break}return t.next=34,lr(o.context,l);case 34:t.next=37;break;case 37:t.next=40;break;case 40:t.next=43;break;case 43:return t.abrupt("return",{app:o,store:r,router:n});case 44:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}var Nr,Pr,qr=[],Ur=window.__NUXT__||{};function Dr(t,e,n){var r=function(t){var r=function(t,e){if(!t||!t.options||!t.options[e])return{};var n=t.options[e];if("function"==typeof n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n.apply(void 0,i)}return n}(t,"transition",e,n)||{};return"string"==typeof r?{name:r}:r};return t.map(function(t){var e=Object.assign({},r(t));if(n&&n.matched.length&&n.matched[0].components.default){var i=r(n.matched[0].components.default);Object.keys(i).filter(function(t){return i[t]&&t.toLowerCase().includes("leave")}).forEach(function(t){e[t]=i[t]})}return e})}function jr(t,e,n){return Br.apply(this,arguments)}function Br(){return(Br=a()(regeneratorRuntime.mark(function t(e,n,r){var i,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._pathChanged=!!Nr.nuxt.err||n.path!==e.path,this._queryChanged=JSON.stringify(e.query)!==JSON.stringify(n.query),this._diffQuery=this._queryChanged?q(e.query,n.query):[],this._pathChanged&&this.$loading.start&&!this.$loading.manual&&this.$loading.start(),t.prev=4,t.next=7,E(e);case 7:i=t.sent,!this._pathChanged&&this._queryChanged&&i.some(function(t){var e=t.options.watchQuery;return!0===e||!!Array.isArray(e)&&e.some(function(t){return o._diffQuery[t]})})&&this.$loading.start&&!this.$loading.manual&&this.$loading.start(),r(),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(4),this.error(t.t0),this.$nuxt.$emit("routeChanged",e,n,error),r(!1);case 17:case"end":return t.stop()}},t,this,[[4,12]])}))).apply(this,arguments)}function zr(t,e){return Ur.serverRendered&&e&&k(t,e),t._Ctor=t,t}function Lr(t,e,n){var r=this,i=[],o=!1;if(void 0!==n&&(i=[],n.middleware&&(i=i.concat(n.middleware)),t.forEach(function(t){t.options.middleware&&(i=i.concat(t.options.middleware))})),i=i.map(function(t){return"function"==typeof t?t:("function"!=typeof y[t]&&(o=!0,r.error({statusCode:500,message:"Unknown middleware "+t})),y[t])}),!o)return function t(e,n){return!e.length||n._redirected||n._errored?Promise.resolve():A(e[0],n).then(function(){return t(e.slice(1),n)})}(i,e)}function Fr(t,e,n){return Gr.apply(this,arguments)}function Gr(){return(Gr=a()(regeneratorRuntime.mark(function t(e,n,r){var i,o,a,c,u,l,d,p,f,h,m,v,g,y,b,w,x=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==this._pathChanged||!1!==this._queryChanged){t.next=2;break}return t.abrupt("return",r());case 2:return qr=e===n?[]:C(n,i=[]).map(function(t,e){return P(n.matched[i[e]].path)(n.params)}),o=!1,a=function(t){n.path===t.path&&x.$loading.finish&&x.$loading.finish(),n.path!==t.path&&x.$loading.pause&&x.$loading.pause(),o||(o=!0,r(t))},t.next=7,I(Nr,{route:e,from:n,next:a.bind(this)});case 7:if(this._dateLastError=Nr.nuxt.dateErr,this._hadError=!!Nr.nuxt.err,(u=C(e,c=[])).length){t.next=25;break}return t.next=14,Lr.call(this,u,Nr.context);case 14:if(!o){t.next=16;break}return t.abrupt("return");case 16:return t.next=18,this.loadLayout("function"==typeof te.layout?te.layout(Nr.context):te.layout);case 18:return l=t.sent,t.next=21,Lr.call(this,u,Nr.context,l);case 21:if(!o){t.next=23;break}return t.abrupt("return");case 23:return Nr.context.error({statusCode:404,message:"This page could not be found"}),t.abrupt("return",r());case 25:return u.forEach(function(t){t._Ctor&&t._Ctor.options&&(t.options.asyncData=t._Ctor.options.asyncData,t.options.fetch=t._Ctor.options.fetch)}),this.setTransitions(Dr(u,e,n)),t.prev=27,t.next=30,Lr.call(this,u,Nr.context);case 30:if(!o){t.next=32;break}return t.abrupt("return");case 32:if(!Nr.context._errored){t.next=34;break}return t.abrupt("return",r());case 34:return"function"==typeof(d=u[0].options.layout)&&(d=d(Nr.context)),t.next=38,this.loadLayout(d);case 38:return d=t.sent,t.next=41,Lr.call(this,u,Nr.context,d);case 41:if(!o){t.next=43;break}return t.abrupt("return");case 43:if(!Nr.context._errored){t.next=45;break}return t.abrupt("return",r());case 45:p=!0,t.prev=46,f=!0,h=!1,m=void 0,t.prev=50,v=u[Symbol.iterator]();case 52:if(f=(g=v.next()).done){t.next=64;break}if("function"==typeof(y=g.value).options.validate){t.next=56;break}return t.abrupt("continue",61);case 56:return t.next=58,y.options.validate(Nr.context);case 58:if(p=t.sent){t.next=61;break}return t.abrupt("break",64);case 61:f=!0,t.next=52;break;case 64:t.next=70;break;case 66:t.prev=66,t.t0=t.catch(50),h=!0,m=t.t0;case 70:t.prev=70,t.prev=71,f||null==v.return||v.return();case 73:if(t.prev=73,!h){t.next=76;break}throw m;case 76:return t.finish(73);case 77:return t.finish(70);case 78:t.next=84;break;case 80:return t.prev=80,t.t1=t.catch(46),this.error({statusCode:t.t1.statusCode||"500",message:t.t1.message}),t.abrupt("return",r());case 84:if(p){t.next=87;break}return this.error({statusCode:404,message:"This page could not be found"}),t.abrupt("return",r());case 87:return t.next=89,Promise.all(u.map(function(t,n){if(t._path=P(e.matched[c[n]].path)(e.params),t._dataRefresh=!1,x._pathChanged&&x._queryChanged||t._path!==qr[n])t._dataRefresh=!0;else if(!x._pathChanged&&x._queryChanged){var r=t.options.watchQuery;!0===r?t._dataRefresh=!0:Array.isArray(r)&&(t._dataRefresh=r.some(function(t){return x._diffQuery[t]}))}if(!x._hadError&&x._isMounted&&!t._dataRefresh)return Promise.resolve();var i=[],o=t.options.asyncData&&"function"==typeof t.options.asyncData,a=!!t.options.fetch,s=o&&a?30:45;if(o){var u=A(t.options.asyncData,Nr.context).then(function(e){k(t,e),x.$loading.increase&&x.$loading.increase(s)});i.push(u)}if(x.$loading.manual=!1===t.options.loading,a){var l=t.options.fetch(Nr.context);l&&(l instanceof Promise||"function"==typeof l.then)||(l=Promise.resolve(l)),l.then(function(t){x.$loading.increase&&x.$loading.increase(s)}),i.push(l)}return Promise.all(i)}));case 89:o||(this.$loading.finish&&!this.$loading.manual&&this.$loading.finish(),r()),t.next=106;break;case 92:if(t.prev=92,t.t2=t.catch(27),"ERR_REDIRECT"!==(b=t.t2||{}).message){t.next=97;break}return t.abrupt("return",this.$nuxt.$emit("routeChanged",e,n,b));case 97:return qr=[],_=b,s.default.config.errorHandler&&s.default.config.errorHandler(_),"function"==typeof(w=te.layout)&&(w=w(Nr.context)),t.next=103,this.loadLayout(w);case 103:this.error(b),this.$nuxt.$emit("routeChanged",e,n,b),r(!1);case 106:case"end":return t.stop()}var _},t,this,[[27,92],[46,80],[50,66,70,78],[71,,73,77]])}))).apply(this,arguments)}function Vr(t,e){S(t,function(t,e,n,r){return"object"!==i()(t)||t.options||((t=s.default.extend(t))._Ctor=t,n.components[r]=t),t})}function Hr(t){this._hadError&&this._dateLastError===this.$options.nuxt.dateErr&&this.error();var e=this.$options.nuxt.err?te.layout:t.matched[0].components.default.options.layout;"function"==typeof e&&(e=e(Nr.context)),this.setLayout(e)}function Wr(t,e){var n=this;!1===this._pathChanged&&!1===this._queryChanged||s.default.nextTick(function(){var e=[],r=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.prototype.concat.apply([],t.matched.map(function(t,n){return Object.keys(t.instances).map(function(r){return e&&e.push(n),t.instances[r]})}))}(t,e),i=C(t,e);r.forEach(function(t,e){if(t&&t.constructor._dataRefresh&&i[e]===t.constructor&&"function"==typeof t.constructor.options.data){var n=t.constructor.options.data.call(t);for(var r in n)s.default.set(t.$data,r,n[r])}}),Hr.call(n,t)})}function Kr(t){window.onNuxtReadyCbs.forEach(function(e){"function"==typeof e&&e(t)}),"function"==typeof window._onNuxtLoaded&&window._onNuxtLoaded(t),Pr.afterEach(function(e,n){s.default.nextTick(function(){return t.$nuxt.$emit("routeChanged",e,n)})})}function Jr(){return(Jr=a()(regeneratorRuntime.mark(function t(e){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Nr=e.app,Pr=e.router,e.store,t.next=5,Promise.all((u=void 0,u=N((c=Pr).options.base,c.options.mode),S(c.match(u),function(){var t=a()(regeneratorRuntime.mark(function t(e,n,r,i,o){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof e||e.options){t.next=4;break}return t.next=3,e();case 3:e=t.sent;case 4:return a=zr($(e),Ur.data?Ur.data[o]:null),r.components[i]=a,t.abrupt("return",a);case 7:case"end":return t.stop()}},t,this)}));return function(e,n,r,i,o){return t.apply(this,arguments)}}())));case 5:return n=t.sent,r=new s.default(Nr),i=Ur.layout||"default",t.next=10,r.loadLayout(i);case 10:if(r.setLayout(i),o=function(){r.$mount("#__nuxt"),s.default.nextTick(function(){Kr(r)})},r.setTransitions=r.$options.nuxt.setTransitions.bind(r),n.length&&(r.setTransitions(Dr(n,Pr.currentRoute)),qr=Pr.currentRoute.matched.map(function(t){return P(t.path)(Pr.currentRoute.params)})),r.$loading={},Ur.error&&r.error(Ur.error),Pr.beforeEach(jr.bind(r)),Pr.beforeEach(Fr.bind(r)),Pr.afterEach(Vr),Pr.afterEach(Wr.bind(r)),!Ur.serverRendered){t.next=23;break}return o(),t.abrupt("return");case 23:Fr.call(r,Pr.currentRoute,Pr.currentRoute,function(t){if(!t)return Vr(Pr.currentRoute,Pr.currentRoute),Hr.call(r,Pr.currentRoute),void o();Pr.push(t,function(){return o()},function(t){if(!t)return o();console.error(t)})});case 24:case"end":return t.stop()}var c,u},t,this)}))).apply(this,arguments)}Object.assign(s.default.config,{silent:!0,performance:!1}),function(t){return Mr.apply(this,arguments)}().then(function(t){return Jr.apply(this,arguments)}).catch(function(t){console.error("[nuxt] Error while initializing app",t)})},491:function(t,e,n){"use strict";n.r(e);n(12);var r=n(2),i=n.n(r),o=n(114),a=n.n(o),s=(n(10),n(46),n(25),n(160)),c=n.n(s),u=function(t,e){var n=e.q,r=e.type,i=e.page;return t.$axios.$get("search/new",{params:{q:n,type:r,page:i}})};n.d(e,"state",function(){return d}),n.d(e,"mutations",function(){return p}),n.d(e,"actions",function(){return f});var l={all:"综合",bangumi:"番剧",video:"视频",post:"帖子",score:"漫评",role:"偶像",user:"用户"},d=function(){return{tabs:l,lastSearchKeywords:"",resource:Object.assign.apply(Object,[{}].concat(c()(Object.keys(l).map(function(t){return a()({},t,{list:[],page:0,total:0,noMore:!1,loading:!1})})))),bangumis:[]}},p={RESET_DATA:function(t){t.lastSearchKeywords="",t.resource=Object.assign.apply(Object,[{}].concat(c()(Object.keys(l).map(function(t){return a()({},t,{list:[],page:0,total:0,noMore:!1,loading:!1})}))))},SET_LOADING:function(t,e){var n=e.type,r=e.value;t.resource[n].loading=r},SET_RESOURCE:function(t,e){var n=e.type,r=e.q,i=e.data;t.lastSearchKeywords=r,t.resource[n].list=t.resource[n].list.concat(i.list),t.resource[n].page=t.resource[n].page+1,t.resource[n].noMore=i.noMore,t.resource[n].total=i.total,t.resource[n].loading=!1},SET_BANGUMIS:function(t,e){t.bangumis=e}},f={fetchData:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,i=e.commit,o=n.q,a=n.type,o){t.next=4;break}return t.abrupt("return");case 4:if(r.lastSearchKeywords&&r.lastSearchKeywords!==o&&i("RESET_DATA"),!((s=r.resource[a]).list.length||s.noMore||s.loading)){t.next=8;break}return t.abrupt("return");case 8:return i("SET_LOADING",{type:a,value:!0}),t.next=11,u(this,{q:o,type:a,page:s.page});case 11:c=t.sent,i("SET_RESOURCE",{q:o,type:a,data:c});case 13:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),fetchMore:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,i=e.commit,o=n.type,a=r.lastSearchKeywords){t.next=5;break}return t.abrupt("return");case 5:if(!(s=r.resource[o]).noMore&&!s.loading){t.next=8;break}return t.abrupt("return");case 8:return i("SET_LOADING",{type:o,value:!0}),t.next=11,u(this,{q:a,type:o,page:s.page});case 11:c=t.sent,i("SET_RESOURCE",{q:a,type:o,data:c});case 13:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}},492:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"meta",function(){return c}),n.d(r,"getWorldPost",function(){return u}),n.d(r,"getWorldImage",function(){return l}),n.d(r,"getWorldScore",function(){return d}),n.d(r,"getWorldQAQ",function(){return p}),n.d(r,"getRoleTrending",function(){return f}),n.d(r,"getBangumiPost",function(){return h}),n.d(r,"getBangumiImage",function(){return m}),n.d(r,"getBangumiRole",function(){return v}),n.d(r,"getBangumiScore",function(){return g}),n.d(r,"getBangumiQAQ",function(){return y}),n.d(r,"getBangumiCartoon",function(){return b}),n.d(r,"getUserFollowBangumis",function(){return w}),n.d(r,"getUserPost",function(){return x}),n.d(r,"getUserPostReply",function(){return _}),n.d(r,"getUserImage",function(){return k}),n.d(r,"getUserScore",function(){return $}),n.d(r,"getUserQAQ",function(){return C}),n.d(r,"getUserAnswer",function(){return S}),n.d(r,"getUserRole",function(){return E}),n.d(r,"getUserScoreDrafts",function(){return T}),n.d(r,"getUserAnswerDrafts",function(){return R}),n.d(r,"getUserBookmarks",function(){return I}),n.d(r,"getQuestionAnswers",function(){return O}),n.d(r,"cartoonRoleFans",function(){return A});n(25),n(39),n(40),n(24),n(10),n(12);var i=n(2),o=n.n(i),a=n(0),s=function(t,e){var n=e.sort,r=e.type,i=e.take,o=e.page,a=e.minId,s=e.seenIds,c=e.bangumiId,u=e.userZone;return t.$axios.$get("flow/list",{params:{sort:n,type:r,take:i,page:o,minId:a,seenIds:s,bangumiId:c,userZone:u}})},c=function(t,e){var n=e.type;return t.$axios.$get("flow/meta",{params:{type:n}})},u=function(t){var e=t.ctx,n=t.seen_ids,r=t.count,i=t.max_id,o=t.order_by;return s(e,{type:"post",sort:o,seenIds:n,minId:i,take:r})},l=function(t){var e=t.ctx,n=t.seen_ids,r=t.count,i=t.max_id,o=t.order_by;return s(e,{type:"image",sort:o,seenIds:n,minId:i,take:r})},d=function(t){var e=t.ctx,n=t.seen_ids,r=t.count,i=t.max_id,o=t.order_by;return s(e,{type:"score",sort:o,seenIds:n,minId:i,take:r})},p=function(t){var e=t.ctx,n=t.seen_ids,r=t.count,i=t.max_id,o=t.order_by;return s(e,{type:"question",sort:o,seenIds:n,minId:i,take:r})},f=function(t){var e=t.ctx,n=t.seen_ids,r=t.count,i=t.max_id,o=t.order_by;return s(e,{type:"role",sort:o,seenIds:n,minId:i,take:r})},h=function(t){var e=t.ctx,n=t.id,r=t.seen_ids,i=t.count,o=t.max_id,a=t.order_by;return s(e,{type:"post",bangumiId:n,sort:a,seenIds:r,minId:o,take:i})},m=function(t){var e=t.ctx,n=t.id,r=t.seen_ids,i=t.count,o=t.max_id,a=t.order_by;return s(e,{type:"image",bangumiId:n,sort:a,seenIds:r,minId:o,take:i})},v=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return s(e,{type:"role",bangumiId:n,sort:o,take:i,page:r})},g=function(t){var e=t.ctx,n=t.id,r=t.seen_ids,i=t.count,o=t.max_id,a=t.order_by;return s(e,{type:"score",bangumiId:n,sort:a,seenIds:r,minId:o,take:i})},y=function(t){var e=t.ctx,n=t.id,r=t.seen_ids,i=t.count,o=t.max_id,a=t.order_by;return s(e,{type:"question",bangumiId:n,sort:a,seenIds:r,minId:o,take:i})},b=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return e.$axios.$get("bangumi/".concat(n,"/cartoon"),{params:{page:r,take:i,sort:o}})},w=function(t){var e=t.ctx,n=t.id;return e.$axios.$get("user/".concat(n,"/followed/bangumi"))},x=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return s(e,{type:"post",userZone:n,sort:o,take:i,page:r})},_=function(t){var e=t.ctx,n=t.id,r=t.count,i=t.page;return e.$axios.$get("user/".concat(n,"/posts/reply"),{params:{count:r,page:i}})},k=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return s(e,{type:"image",userZone:n,sort:o,take:i,page:r})},$=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return s(e,{type:"score",userZone:n,sort:o,take:i,page:r})},C=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return s(e,{type:"question",userZone:n,sort:o,take:i,page:r})},S=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return s(e,{type:"answer",userZone:n,sort:o,take:i,page:r})},E=function(t){var e=t.ctx,n=t.id,r=t.page,i=t.count,o=t.order_by;return s(e,{type:"role",userZone:n,sort:o,take:i,page:r})},T=function(t){return t.ctx.$axios.$get("score/drafts")},R=function(t){return t.ctx.$axios.$get("question/soga/drafts")},I=function(t){var e=t.ctx,n=t.page,r=t.take,i=t.order_by;return e.$axios.$get("user/bookmarks",{params:{page:n,take:r,type:i}})},O=function(t){var e=t.ctx,n=t.id,r=t.count,i=t.seen_ids,o=t.order_by;return s(e,{type:"answer",bangumiId:n,sort:o,take:r,seenIds:i})},A=function(t){var e=t.ctx,n=t.id,r=t.seen_ids,i=t.max_id,o=t.order_by;return e.$axios.$get("cartoon_role/".concat(n,"/fans"),{params:{seenIds:r,minId:i,sort:o}})};n.d(e,"state",function(){return N}),n.d(e,"actions",function(){return P}),n.d(e,"mutations",function(){return q}),n.d(e,"getters",function(){return U});var M={list:[],page:0,noMore:!1,nothing:!1,loading:!1,error:!1,init:!1,total:0},N=function(){return{}},P={initData:function(){var t=o()(regeneratorRuntime.mark(function t(e,n){var i,o,a,s,c,u,l,d,p,f,h,m,v,g,y,b,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.state,o=e.commit,a=n.id,s=void 0===a?"":a,c=n.type,u=n.func,l=n.count,d=void 0===l?12:l,p=n.sort,f=n.refresh,h=void 0!==f&&f,m=n.force,v=void 0!==m&&m,g="".concat(u,"-").concat(s,"-").concat(p),!(y=i[g])||!y.error||v){t.next=6;break}return t.abrupt("return");case 6:if(!y||!y.loading){t.next=8;break}return t.abrupt("return");case 8:if(!y||!y.init){t.next=11;break}if(h){t.next=11;break}return t.abrupt("return");case 11:return o("INIT_STATE",g),o("SET_LOADING",g),b={count:d,ctx:this},"page"===c?b.page=0:"seenIds"===c?b.seen_ids="":"maxId"===c&&(b.max_id=""),s&&(b.id=s),p&&(b.order_by=p),t.prev=17,t.next=20,r[u](b);case 20:w=t.sent,o("SET_DATA",{data:w,fieldName:g,count:d}),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(17),o("SET_ERROR",g);case 27:case"end":return t.stop()}},t,this,[[17,24]])}));return function(e,n){return t.apply(this,arguments)}}(),loadMore:function(){var t=o()(regeneratorRuntime.mark(function t(e,n){var i,o,a,s,c,u,l,d,p,f,h,m,v,g,y,b,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.state,o=e.commit,a=n.type,s=n.changing,c=void 0===s?"id":s,u=n.id,l=void 0===u?"":u,d=n.func,p=n.sort,f=n.count,h=void 0===f?12:f,m="".concat(d,"-").concat(l,"-").concat(p),!(v=i[m]).loading&&!v.noMore){t.next=6;break}return t.abrupt("return");case 6:return o("SET_LOADING",m),g={count:h,ctx:this},"page"===a?g.page=v.page:"lastId"===a?(y=v.list[v.list.length-1],/\./.test(c)?(b=y,c.split(".").forEach(function(t){b=b[t]})):b=y[c],g.max=b):"seenIds"===a&&(g.seen_ids=v.list.map(function(t){if(!/\./.test(c))return t[c];var e=t;return c.split(".").forEach(function(t){e=e[t]}),e}).toString()),l&&(g.id=l),p&&(g.order_by=p),t.prev=11,t.next=14,r[d](g);case 14:w=t.sent,o("SET_DATA",{data:w,fieldName:m,count:h}),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),o("SET_ERROR",m);case 21:case"end":return t.stop()}},t,this,[[11,18]])}));return function(e,n){return t.apply(this,arguments)}}()},q={SET_ERROR:function(t,e){t[e].error=!0,t[e].loading=!1},INIT_STATE:function(t,e){a.default.set(t,e,Object.assign({},M))},SET_LOADING:function(t,e){t[e].loading=!0},SET_DATA:function(t,e){var n=e.data,r=e.fieldName,i=e.count;if(t[r]){var o=function(t){return!Array.isArray(t)}(n);t[r].init?t[r].list=o?t[r].list.concat(n.list):t[r].list.concat(n):(t[r].init=!0,t[r].list=o?n.list:n,t[r].nothing=o?0===n.total:0===n.length),t[r].page++,t[r].noMore=o?n.noMore:"seenIds"===t.type?0===n.length:n.length<i,t[r].total=n.total||0,t[r].loading=!1,t[r].error=!1}}},U={getFlow:function(t){return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t["".concat(e,"-").concat(r,"-").concat(n)]}}}},493:function(t,e,n){"use strict";n.r(e);n(12);var r=n(2),i=n.n(r),o=(n(10),n(25),n(236)),a=n.n(o),s=function(t,e){var n=e.type,r=e.id,i=e.fetchId,o=e.onlySeeMaster,a=e.seeReplyId;return t.$axios.$get("comment/main/list",{params:{fetchId:i,onlySeeMaster:o,seeReplyId:a,type:n,id:r}})},c=function(t,e){var n=e.type,r=e.id,i=e.maxId;return t.$axios.$get("comment/sub/list",{params:{maxId:i,type:n,id:r}})},u=function(t,e){var n=e.type,r=e.id,i=e.content,o=e.images;return t.$axios.$post("comment/main/create",{content:i,images:o,type:n,id:r})},l=function(t,e){var n=e.type,r=e.id,i=e.content,o=e.targetUserId;return t.$axios.$post("comment/main/reply",{targetUserId:o,content:i,type:n,id:r})},d=function(t,e){var n=e.type,r=e.id;return t.$axios.$post("comment/sub/delete",{type:n,id:r})},p=function(t,e){var n=e.type,r=e.id;return t.$axios.$post("comment/main/delete",{type:n,id:r})},f=function(t,e){var n=e.type,r=e.id;return t.$axios.$post("comment/main/toggleLike",{type:n,id:r})},h=function(t,e){var n=e.type,r=e.id;return t.$axios.$post("comment/sub/toggleLike",{type:n,id:r})};n.d(e,"state",function(){return m}),n.d(e,"mutations",function(){return v}),n.d(e,"actions",function(){return g}),n.d(e,"getters",function(){return y});var m=function(){return{type:"",sort:"desc",fetchId:0,list:[],total:0,noMore:!1,submitting:!1,id:0}},v={RESET_STATE:function(t,e){var n=e.type;t.type=n,t.sort="post"===n?"asc":"desc",t.fetchId=0,t.list=[],t.total=0,t.noMore=!1,t.submitting=!1,t.id=0},INIT_FETCH_TYPE:function(t,e){var n=e.type;t.type=n,"post"===n&&(t.sort="asc")},SET_MAIN_COMMENTS:function(t,e){var n=e.comments,r=e.seeReplyId,i=e.id;if(t.id=+i,!n.list.length)return t.noMore=n.noMore,void(t.total=n.total);var o=n.list.map(function(t){var e=t.comments.list,n=e.length,r=Object.assign(t.comments,{maxId:n?e[n-1].id:0});return Object.assign(t,{comments:r})});t.fetchId=o[o.length-1].id,!t.list.length&&r&&(t.fetchId=o.map(function(t){return t.id}).filter(function(t){return t!==parseInt(r,10)}).pop());var s=o.map(function(t){return t.id}),c=t.list,u=!!s.filter(function(t){return-1===c.map(function(t){return t.id}).indexOf(t)}).length;t.list=t.list.filter(function(t){return-1===s.indexOf(t.id)}),t.list=a()(t.list.concat(o),"id",t.sort),t.noMore=!u||n.noMore,t.total=u?n.total:t.list.length},SET_SUB_COMMENTS:function(t,e){var n=e.comments,r=e.id,i=null,o=0;if(t.list.forEach(function(t,e){t.id===r&&(i=t,o=e)}),i){t.list[o].comments.maxId=n.list[n.list.length-1].id;var a=n.list.map(function(t){return t.id}),s=i.comments.list,c=!!a.filter(function(t){return-1===s.map(function(t){return t.id}).indexOf(t)}).length;t.list[o].comments.list=s.filter(function(t){return-1===a.indexOf(t.id)}),t.list[o].comments.list=t.list[o].comments.list.concat(n.list),t.list[o].comments.noMore=!c||n.noMore,t.list[o].comments.total=c?n.total:t.list[o].comments.list.length}},CREATE_MAIN_COMMENT:function(t,e){"asc"===t.sort?t.list.push(e):t.list.unshift(e),t.total=t.total+1},CREATE_SUB_COMMENT:function(t,e){var n=e.id,r=e.comment;t.list.forEach(function(e,i){e.id===n&&(t.list[i].comments.list.push(r),t.list[i].comments.total=t.list[i].comments.total+1)})},SET_SUBMITTING:function(t,e){var n=e.result;t.submitting=n},DELETE_SUB_COMMENT:function(t,e){var n=e.parentId,r=e.id;t.list.forEach(function(e,i){e.id===n&&e.comments.list.forEach(function(e,n){e.id===r&&(t.list[i].comments.list.splice(n,1),t.list[i].comments.total=t.list[i].comments.total-1)})})},DELETE_MAIN_COMMENT:function(t,e){var n=e.id;t.list.forEach(function(e,r){e.id===n&&(t.list.splice(r,1),t.total=t.total-1)})},TOGGLE_LIKE_SUB_COMMENT:function(t,e){var n=e.id,r=e.parentId;t.list.forEach(function(e,i){e.id===r&&e.comments.list.forEach(function(e,r){if(e.id===n){var o=!t.list[i].comments[r].liked;t.list[i].comments[r].liked=o,t.list[i].comments[r].like_count=t.list[i].comments[r].like_count+(o?1:-1)}})})},TOGGLE_LIKE_MAIN_COMMENT:function(t,e){var n=e.id;t.list.forEach(function(e,r){if(e.id===n){var i=!t.list[r].liked;t.list[r].liked=i,t.list[r].like_count=t.list[r].like_count+(i?1:-1)}})}},g={getMainComments:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,c,u,l,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,i=e.commit,o=n.type,a=n.id,c=n.onlySeeMaster,u=n.seeReplyId,l=n.firstRequest,!r.type){t.next=18;break}if(r.type!==o){t.next=15;break}if(r.id===+a){t.next=8;break}i("RESET_STATE",{type:o}),t.next=13;break;case 8:if(!r.noMore){t.next=10;break}return t.abrupt("return");case 10:if(!r.list.length||!l){t.next=12;break}return t.abrupt("return");case 12:l&&i("RESET_STATE",{type:o});case 13:t.next=16;break;case 15:i("RESET_STATE",{type:o});case 16:t.next=19;break;case 18:i("INIT_FETCH_TYPE",{type:o});case 19:return t.next=21,s(this,{type:o,id:a,onlySeeMaster:c,seeReplyId:u,fetchId:r.fetchId});case 21:(d=t.sent)&&i("SET_MAIN_COMMENTS",{comments:d,seeReplyId:u,id:a});case 23:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),getSubComments:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state,i=e.commit,o=n.type,a=n.id,!(s=r.list.filter(function(t){return t.id===a})[0].comments).noMore){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,c(this,{type:o,id:a,maxId:s.maxId});case 7:u=t.sent,i("SET_SUB_COMMENTS",{comments:u,id:a});case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),createMainComment:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,i=n.images,o=n.content,a=n.type,s=n.id,t.next=4,u(this,{type:a,id:s,content:o,images:i});case 4:return c=t.sent,r("CREATE_MAIN_COMMENT",c.data),t.abrupt("return",c);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),createSubComment:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,i=n.id,o=n.type,a=n.content,s=n.targetUserId,t.next=4,l(this,{id:i,type:o,content:a,targetUserId:s});case 4:return c=t.sent,r("CREATE_SUB_COMMENT",{id:i,comment:c.data}),t.abrupt("return",c);case 7:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),deleteSubComment:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,i=n.id,o=n.type,a=n.parentId,t.next=4,d(this,{id:i,type:o});case 4:r("DELETE_SUB_COMMENT",{parentId:a,id:i});case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),deleteMainComment:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,i=n.id,o=n.type,t.next=4,p(this,{id:i,type:o});case 4:r("DELETE_MAIN_COMMENT",{id:i});case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),toggleLikeSubComment:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,i=n.type,o=n.id,a=n.parentId,r("TOGGLE_LIKE_SUB_COMMENT",{id:o,parentId:a}),t.next=5,h(this,{type:i,id:o});case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),toggleLikeMainComment:function(){var t=i()(regeneratorRuntime.mark(function t(e,n){var r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.commit,i=n.type,o=n.id,r("TOGGLE_LIKE_MAIN_COMMENT",{id:o}),t.next=5,f(this,{type:i,id:o});case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},y={}},5:function(t,e,n){"use strict";n(10);var r=n(36),i=n.n(r),o=n(37),a=n.n(o),s=function(){function t(){i()(this,t),this.id=0,this.listeners={}}return a()(t,[{key:"checkInView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.3;if("undefined"==typeof window||!(t instanceof Element))return!1;var n=t.getBoundingClientRect();return n.top<window.innerHeight*e&&n.bottom>0&&n.left<window.innerWidth*e&&n.right>0}},{key:"on",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[];return("string"==typeof e?[e]:e).forEach(function(e){var a=r.id++;t.addEventListener(e,n,i),r.listeners[a]={element:t,event:e,handler:n,capture:i},o.push(a)}),o}},{key:"off",value:function(t){var e=this;t.forEach(function(t){if(e.listeners[t]){var n=e.listeners[t];n.element.removeEventListener(n.event,n.handler,n.capture),delete e.listeners[t]}})}}]),t}();e.a=new s},83:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return o}),n.d(e,"b",function(){return a});n(13),n(39),n(40);var r=function(t){return t.$axios.$get("image/captcha?t=".concat(Date.now(),"-").concat(Math.random().toString(36).substring(3,6)))},i=function(t){return t.$axios.$get("image/uptoken")},o=function(t,e){return t.$axios.$post("https://up.qbox.me",e,{"Content-Type":"multipart/form-data"})},a=function(t,e){var n=e.id,r=e.hash,i=e.query;return t.$axios.$get("image/".concat(n,"/show"),{params:{hash:r,query:i}})}},9:function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"l",function(){return i}),n.d(e,"k",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"j",function(){return c}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return l}),n.d(e,"f",function(){return d}),n.d(e,"b",function(){return p}),n.d(e,"h",function(){return f}),n.d(e,"i",function(){return h});var r=function(t){return t.$axios.$post("door/refresh")},i=function(t,e){return t.$axios.$post("user/setting/profile",e)},o=function(t,e){var n=e.type,r=e.url;return t.$axios.$post("user/setting/image",{type:n,url:r})},a=function(t,e){var n=e.zone;return t.$axios.$get("user/".concat(n,"/show"))},s=function(t,e){var n=e.id,r=e.phone,i=e.password,o=e.authCode;return t.$axios.$post("door/bind_phone",{id:n,phone:r,password:i,authCode:o})},c=function(t,e){var n=e.phone_number,r=e.type,i=e.geetest;return t.$axios.$post("door/message",{phone_number:n,type:r,geetest:i})},u=function(t,e){var n=e.access,r=e.secret,i=e.nickname,o=e.authCode,a=e.inviteCode;return t.$axios.$post("door/register",{access:n,secret:r,nickname:i,authCode:o,inviteCode:a})},l=function(t,e){var n=e.access,r=e.secret,i=e.remember,o=e.geetest;return t.$axios.$post("door/login",{access:n,secret:r,remember:i,geetest:o})},d=function(t){return t.$axios.$post("door/logout")},p=function(t,e){var n=e.type,r=e.desc,i=e.ua;return t.$axios.$post("user/feedback",{type:n,desc:r,ua:i})},f=function(t,e){var n=e.id,r=e.type,i=e.model,o=e.message;return t.$axios.$post("report/send",{id:n,type:r,model:i,message:o})},h=function(t,e){var n=e.method,r=e.access,i=e.authCode,o=e.secret;return t.$axios.$post("door/reset",{method:n,access:r,authCode:i,secret:o})}},92:function(t,e,n){},93:function(t,e,n){},94:function(t,e,n){},95:function(t,e,n){},96:function(t,e,n){},97:function(t,e,n){},98:function(t,e,n){},99:function(t,e,n){}},[[266,58,5,59]]]);
//# sourceMappingURL=app.chunk.867772ab.js.map