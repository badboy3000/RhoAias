module.exports=function(e){var t={},n={1:0};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.e=function(t){if(0!==n[t]){var r=require("./"+({2:"pages/about/hello",3:"pages/about/invite/_id",4:"pages/about/reward",5:"pages/app/download",6:"pages/app/feedback",7:"pages/app/handbook",8:"pages/app/invite",9:"pages/app/notice/_id",10:"pages/app/report",11:"pages/bangumi/_id",12:"pages/bangumi/_id/cartoon",13:"pages/bangumi/_id/index",14:"pages/bangumi/_id/pins",15:"pages/bangumi/_id/post",16:"pages/bangumi/_id/qaq",17:"pages/bangumi/_id/review",18:"pages/bangumi/_id/role",19:"pages/bangumi/_id/video",20:"pages/bangumi/index",21:"pages/bangumi/index/news",22:"pages/bangumi/index/tags/_id",23:"pages/bangumi/index/timeline",24:"pages/callback/auth-error",25:"pages/callback/auth-redirect",26:"pages/callback/auth-success",27:"pages/error/404",28:"pages/index",29:"pages/my/invite",30:"pages/my/notification",31:"pages/my/setting",32:"pages/pin/_id",33:"pages/post/_id",34:"pages/qaq/_id",35:"pages/review/_id",36:"pages/review/create",37:"pages/role/_id",38:"pages/role/trending",39:"pages/role/trending/hall",40:"pages/role/trending/index",41:"pages/role/trending/intro",42:"pages/role/trending/listed",43:"pages/role/trending/mine",44:"pages/role/trending/newbie",45:"pages/role/trending/product",46:"pages/search",47:"pages/soga/_id",48:"pages/user/_zone",49:"pages/user/_zone/bangumi",50:"pages/user/_zone/draft",51:"pages/user/_zone/index",52:"pages/user/_zone/mark",53:"pages/user/_zone/pins",54:"pages/user/_zone/post",55:"pages/user/_zone/qaq",56:"pages/user/_zone/review",57:"pages/user/_zone/role",58:"pages/video/_id",59:"pages/world",60:"pages/world/index",61:"pages/world/pins",62:"pages/world/post",63:"pages/world/qaq",64:"pages/world/review"}[t]||t)+".chunk."+{0:"be05dcfa",2:"f8377f36",3:"d40392e2",4:"57569f80",5:"91260b00",6:"845d7ff9",7:"df5177b9",8:"5cdd3061",9:"514523af",10:"7e80ac2b",11:"4da1d3a5",12:"253ea9b1",13:"b62c4672",14:"751e93c8",15:"a67e975f",16:"5c1062cd",17:"b2d45e1a",18:"75fd165a",19:"57a00896",20:"73067710",21:"19659fb1",22:"76a7ba78",23:"24b22f50",24:"559ab750",25:"34e46564",26:"1f418736",27:"e7f23ba4",28:"1572ef8d",29:"86db96d1",30:"d024e574",31:"721788f6",32:"e66e6e55",33:"3ab07440",34:"ad8f6f07",35:"a5e87c08",36:"5d30f2c1",37:"0d305b53",38:"cbc4c498",39:"d8ee3ba8",40:"679e45ef",41:"02c7d3ef",42:"91095f5d",43:"156c2dad",44:"2c51757e",45:"1f5e049c",46:"921c9d89",47:"e88be247",48:"781ea885",49:"fb153384",50:"f3cde234",51:"1ebb40f3",52:"30b966ad",53:"b7f1e15d",54:"53c21005",55:"0c8f4242",56:"dc13337c",57:"abe39d1b",58:"65493524",59:"7e69c515",60:"212f072e",61:"b81fed58",62:"fb87a2c2",63:"34304192",64:"3d2d5263",65:"5277c6a0",66:"9c338e45"}[t]+".js"),o=r.modules,c=r.ids;for(var l in o)e[l]=o[l];for(var i=0;i<c.length;i++)n[c[i]]=0}return Promise.all([])},r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},r.p="https://static.calibur.tv/m/",r.oe=function(e){process.nextTick(function(){throw e})},r(r.s=92)}([function(e,t){e.exports=require("vue")},function(e,t,n){"use strict";function r(e,t,n,r,o,c,l,d){var h,m="function"==typeof e?e.options:e;if(t&&(m.render=t,m.staticRenderFns=n,m._compiled=!0),r&&(m.functional=!0),c&&(m._scopeId="data-v-"+c),l?(h=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},m._ssrRegister=h):o&&(h=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),h)if(m.functional){m._injectStyles=h;var f=m.render;m.render=function(e,t){return h.call(t),f(e,t)}}else{var _=m.beforeCreate;m.beforeCreate=_?[].concat(_,h):[h]}return{exports:e,options:m}}n.d(t,"a",function(){return r})},function(e,t){},function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"o",function(){return o}),n.d(t,"n",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"a",function(){return d}),n.d(t,"m",function(){return h}),n.d(t,"j",function(){return m}),n.d(t,"h",function(){return f}),n.d(t,"i",function(){return _}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"d",function(){return x}),n.d(t,"f",function(){return w}),n.d(t,"k",function(){return $}),n.d(t,"l",function(){return k});const r=e=>e.$axios.$post("door/refresh"),o=(e,t)=>e.$axios.$post("user/setting/profile",t),c=(e,{type:t,url:n})=>e.$axios.$post("user/setting/image",{type:t,url:n}),l=(e,{zone:t})=>e.$axios.$get(`user/${t}/show`),d=(e,{id:t,phone:n,password:r,authCode:o})=>e.$axios.$post("door/bind_phone",{id:t,phone:n,password:r,authCode:o}),h=(e,{phone_number:t,type:n,geetest:r})=>e.$axios.$post("door/message",{phone_number:t,type:n,geetest:r}),m=(e,{access:t,secret:n,nickname:r,authCode:o,inviteCode:c})=>e.$axios.$post("door/register",{access:t,secret:n,nickname:r,authCode:o,inviteCode:c}),f=(e,{access:t,secret:n,remember:r,geetest:o})=>e.$axios.$post("door/login",{access:t,secret:n,remember:r,geetest:o}),_=e=>e.$axios.$post("door/logout"),v=(e,{type:t,desc:desc,ua:n})=>e.$axios.$post("user/feedback",{type:t,desc:desc,ua:n}),y=e=>e.$axios.$post("user/daySign"),x=(e,{zone:t})=>e.$axios.$get(`user/${t}/followed/bangumi`),w=(e,{id:t})=>e.$axios.$get("user/card",{params:{id:t}}),$=(e,{id:t,type:n,model:r,message:o})=>e.$axios.$post("report/send",{id:t,type:n,model:r,message:o}),k=(e,{method:t,access:n,authCode:r,secret:o})=>e.$axios.$post("door/reset",{method:t,access:n,authCode:r,secret:o})},function(e,t,n){"use strict";t.a=new class{constructor(){this.id=0,this.listeners={}}checkInView(e,t=1.3){if("undefined"==typeof window||!(e instanceof Element))return!1;const rect=e.getBoundingClientRect();return rect.top<window.innerHeight*t&&rect.bottom>0&&rect.left<window.innerWidth*t&&rect.right>0}on(element,e,t,n=!1){const r=[];return("string"==typeof e?[e]:e).forEach(e=>{const o=this.id++;element.addEventListener(e,t,n),this.listeners[o]={element:element,event:e,handler:t,capture:n},r.push(o)}),r}off(e){e.forEach(e=>{if(this.listeners[e]){const t=this.listeners[e];t.element.removeEventListener(t.event,t.handler,t.capture),delete this.listeners[e]}})}}},function(e,t){e.exports=require("element-ui/lib/transitions/collapse-transition")},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports={inline:"inline-2j",avatar:"avatar-GU","image-wrap":"image-wrap-1b",imageWrap:"image-wrap-1b",block:"block-1p",retry:"retry-1N","padding-shim":"padding-shim-3L",paddingShim:"padding-shim-3L",message:"message-5_","load-gif":"load-gif-fE",loadGif:"load-gif-fE",rolling:"rolling-2a",poster:"poster-2J","css-blur":"css-blur-2G",cssBlur:"css-blur-2G","css-fade":"css-fade-1m",cssFade:"css-fade-1m"}},function(e,t){},function(e,t,n){"use strict";var r={name:"VRadio",props:{title:{type:String,default:""},align:{type:String,default:""},options:{type:Array,required:!0},value:{type:[String,Number],default:""}},data(){return{currentValue:this.value}},watch:{value(e){this.currentValue=e},currentValue(e){this.$emit("input",e)}}},o=n(1);var component=Object(o.a)(r,function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"mint-radiolist",on:{change:function(t){return e.$emit("change",e.currentValue)}}},[e._ssrNode((e.title?'<label class="mint-radiolist-title">'+e._ssrEscape(e._s(e.title))+"</label>":"\x3c!----\x3e")+" "+e._ssrList(e.options,function(option,t){return'<div class="mint-radio-wrap"><label class="mint-radiolist-label"><span'+e._ssrClass("mint-radio",{"is-right":"right"===e.align})+"><input"+e._ssrAttr("disabled",option.disabled)+' type="radio"'+e._ssrAttr("value",option.value||option)+e._ssrAttr("checked",e._q(e.currentValue,option.value||option))+' class="mint-radio-input"> <span class="mint-radio-core"></span></span> <span class="mint-radio-label">'+e._ssrEscape(e._s(option.label||option))+"</span></label></div>"}))])},[],!1,function(e){var t=n(109);t.__inject__&&t.__inject__(e)},null,"16fdf5a7");t.a=component.exports},function(e,t,n){"use strict";t.a=(e=>{const t="undefined"!=typeof window;if(t&&window.__JWT_TOKEN__)return window.__JWT_TOKEN__;let n="";const r=t?document.cookie:e?e.headers.cookie:"";r&&r.split("; ").forEach(e=>{const t=e.split("=");"JWT-TOKEN"===t[0]&&(n=t[1])});const o=e?e.headers.authorization:"";return o&&(n=o.split("Bearer ")[1]),t&&(window.__JWT_TOKEN__=n),n})},function(e,t){e.exports=require("element-ui/lib/upload")},function(e,t){e.exports=require("element-ui/lib/form-item")},function(e,t){e.exports=require("element-ui/lib/form")},function(e,t){e.exports=require("element-ui/lib/button")},function(e,t){e.exports=require("element-ui/lib/input")},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"g",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"a",function(){return m}),n.d(t,"h",function(){return f}),n.d(t,"i",function(){return _});const r=(e,{id:t})=>e.$axios.$get(`bangumi/${t}/show`),o=e=>e.$axios.$get("bangumi/released"),c=e=>e.$axios.$get("bangumi/tags"),l=(e,{tags:t,page:n,take:r})=>e.$axios.$get("bangumi/category",{params:{id:t,page:n,take:r}}),d=(e,{id:t})=>e.$axios.$get(`bangumi/${t}/videos`),h=(e,{id:t})=>e.$axios.$get("score/bangumis",{params:{id:t}}),m=e=>e.$axios.$get("search/bangumis"),f=(e,{id:t})=>e.$axios.$get(`bangumi/${t}/posts/top`),_=(e,{year:t})=>e.$axios.get("bangumi/timeline",{params:{year:t}})},function(e,t,n){"use strict";n.r(t),n.d(t,"users",function(){return r}),n.d(t,"like",function(){return o}),n.d(t,"reward",function(){return c}),n.d(t,"follow",function(){return l}),n.d(t,"mark",function(){return mark}),n.d(t,"vote",function(){return d});const r=({ctx:e,type:t,id:n,last_id:r,take:o,model:c})=>e.$axios.$get("toggle/users",{params:{id:n,last_id:r,take:o,model:c,type:t}}),o=({ctx:e,type:t,id:n})=>e.$axios.$post("toggle/like",{type:t,id:n}),c=({ctx:e,type:t,id:n})=>e.$axios.$post("toggle/reward",{type:t,id:n}),l=({ctx:e,type:t,id:n})=>e.$axios.$post("toggle/follow",{type:t,id:n}),mark=({ctx:e,type:t,id:n})=>e.$axios.$post("toggle/mark",{type:t,id:n}),d=({ctx:e,type:t,id:n,is_agree:r})=>e.$axios.$post("toggle/vote",{type:t,id:n,is_agree:r})},function(e,t){},function(e,t){e.exports=require("vue-router")},function(e,t){e.exports=require("vuex")},function(e,t){e.exports=require("timeago.js")},function(e,t){e.exports=require("element-ui/lib/popover")},function(e,t){e.exports=require("element-ui/lib/rate")},function(e,t){e.exports=require("element-ui/lib/input-number")},function(e,t,n){"use strict";var r={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},o=n(1);var c=Object(o.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"json-content-txt-parser"},[this._ssrNode("<p>"+this._s(this.item.text)+"</p>")])},[],!1,function(e){var t=n(114);t.__inject__&&t.__inject__(e)},null,"789ba38e").exports,l={name:"JsonContentImgParser",props:{item:{type:Object,required:!0}}};var d=Object(o.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"json-content-img-parser"},[n("v-img",{attrs:{src:e.item.url,width:e.item.width,height:e.item.height,full:!0}}),e._ssrNode(" "+(e.item.text?'<p class="img-tip">'+e._ssrEscape(e._s(e.item.text))+"</p>":"\x3c!----\x3e"))],2)},[],!1,function(e){var t=n(115);t.__inject__&&t.__inject__(e)},null,"c05c9068").exports,h={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}};var m=Object(o.a)(h,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"json-content-txt-parser"},[this._ssrNode("<blockquote>"+this._s(this.item.text)+"</blockquote>")])},[],!1,function(e){var t=n(116);t.__inject__&&t.__inject__(e)},null,"5b52fee0").exports,f={name:"JsonContentListParser",props:{item:{type:Object,required:!0}},computed:{list(){let e=this.item.text;if(!e)return[];for(;/\n\n/.test(e);)e=e.replace(/\n\n/g,"\n");return e.split("\n")}}};var _=Object(o.a)(f,function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"json-content-list-parser"},[e._ssrNode("1"===e.item.sort?"<ol>"+e._ssrList(e.list,function(li,t){return"<li>"+e._ssrEscape(e._s(li))+"</li>"})+"</ol>":"<ul>"+e._ssrList(e.list,function(li,t){return"<li>"+e._ssrEscape(e._s(li))+"</li>"})+"</ul>")])},[],!1,function(e){var t=n(117);t.__inject__&&t.__inject__(e)},null,"29afbf7a").exports,v={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}};var y={name:"JsonContent",components:{TxtParser:c,ImgParser:d,UseParser:m,ListParser:_,TitleParser:Object(o.a)(v,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"json-content-txt-parser"},[this._ssrNode(this.item.text?"<h3>"+this._ssrEscape(this._s(this.item.text))+"</h3>":"\x3c!----\x3e")])},[],!1,function(e){var t=n(118);t.__inject__&&t.__inject__(e)},null,"edaf10be").exports},props:{content:{required:!0,type:Array}}},x=Object(o.a)(y,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"json-content"},this._l(this.content,function(e,n){return t(e.type+"-parser",{key:n,tag:"component",attrs:{item:e}})}),1)},[],!1,null,null,"c1e4f6b2");t.a=x.exports},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"g",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return m});const r=e=>e.$axios.$get("image/uptoken"),o=(e,t)=>e.$axios.$post("https://up.qbox.me",t,{"Content-Type":"multipart/form-data"}),c=(e,{id:t,hash:n,query:r})=>e.$axios.$get(`image/${t}/show`,{params:{hash:n,query:r}}),l=(e,{bangumi_id:t,name:n,url:r,width:o,height:c,size:l,type:d,is_creator:h,is_cartoon:m,part:f})=>e.$axios.$post("image/album/create",{bangumi_id:t,name:n,url:r,width:o,height:c,size:l,type:d,is_creator:h,is_cartoon:m,part:f}),d=(e,{bangumi_id:t,name:n,url:r,width:o,height:c,size:l,type:d,is_creator:h,geetest:m})=>e.$axios.$post("image/single/upload",{bangumi_id:t,name:n,url:r,width:o,height:c,size:l,type:d,is_creator:h,geetest:m}),h=(e,{album_id:t,images:n})=>e.$axios.$post("image/album/upload",{album_id:t,images:n}),m=e=>e.$axios.$get("image/album/users")},function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c});const r=(e,t)=>e.$axios.$get("door/data",{params:{refer:"h5",url:t}}),o=e=>e.$axios.$get("image/banner"),c=e=>e.$axios.$get("cm/loop/list")},function(e,t,n){"use strict";var r={name:"SearchInput",props:{value:{type:String,default:""},type:{type:String,default:"all"},showSuggestion:{type:Boolean,default:!0}},data(){return{word:this.value,selectedType:this.type,cacheKey:"search-history",typing:!1,filteredSelect:[],selectedIndex:-1}},computed:{bangumis(){return this.$store.state.bangumi.all},displaySuggestion(){return this.showSuggestion&&this.word.length&&this.typing&&this.filteredSelect.length}},mounted(){this.$watch("value",e=>{this.word=e,this.typing=!0,this.selectedIndex=-1,this.handleEnter(e)}),this.$watch("word",e=>{this.$emit("input",e)}),this.$watch("$route",e=>{"search"===e.name&&(this.word=e.query.q,this.selectedType=e.query.type,setTimeout(()=>{this.typing=!1},0))})},methods:{handleInputBlur(){this.$emit("input-blur"),document.body.scrollTop=0},handleInputFocus(){this.$emit("input-focus"),document.body.scrollTop=0},clear(){this.word=""},submit(){const q=-1!==this.selectedIndex?this.filteredSelect[this.selectedIndex].name:this.word;q&&(this.setHistory(q),this.$router.push({name:"search",query:{q:q,type:this.selectedType}}))},setHistory(q){setTimeout(()=>{const e=this.getHistory(),t=e.indexOf(q);-1!==t&&e.splice(t,1),e.unshift(q),e.length>10&&e.pop();try{localStorage.setItem(this.cacheKey,JSON.stringify(e))}catch(e){}},0)},getHistory(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(e){return[]}},clickToSearch(e){this.selectedIndex=e,this.submit()},handleEnter(e){this.filteredSelect=e?this.bangumis.filter(option=>option.alias.indexOf(e)>-1||option.name.indexOf(e)>-1):[]}}},o=n(1);var component=Object(o.a)(r,function(){var e=this,t=e.$createElement;return(e._self._c||t)("form",{staticClass:"search-input-wrap",attrs:{method:"get",action:"#"},on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[e._ssrNode('<button type="submit" class="search-btn"><i class="iconfont icon-sousuo"></i></button> <div class="input-wrap"><input maxlength="200" name="q" type="search" aria-autocomplete="both" aria-haspopup="false" autocapitalize="off" autocomplete="off" autocorrect="off" role="combobox" spellcheck="false" placeholder="搜索二次元的一切" aria-label="搜索"'+e._ssrAttr("value",e.word)+'></div> <ul class="search-suggestion"'+e._ssrStyle(null,null,{display:e.displaySuggestion?"":"none"})+">"+e._ssrList(e.filteredSelect,function(t,n){return"<li"+e._ssrClass(null,{active:n===e.selectedIndex})+"><img"+e._ssrAttr("src",e.$resize(t.avatar,{width:60}))+"> <span>"+e._ssrEscape(e._s(t.name))+"</span></li>"})+"</ul>")])},[],!1,function(e){var t=n(105);t.__inject__&&t.__inject__(e)},null,"f4d3a51a");t.a=component.exports},function(e,t,n){e.exports=n.p+"img/b07f58f.jpeg"},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";var r=n(3),o={name:"SignUpForm",props:{inviteCode:{type:String,default:""}},data(){return{watchPwd:!1,form:{access:"",secret:"",nickname:"",authCode:"",inviteCode:this.inviteCode},rule:{nickname:[{validator:(e,t,n)=>{if(""===t)return n(new Error("请先给自己起个名字"));const r=t.replace(/([\u4e00-\u9fa5])/g,"aa").trim().length;return r<2?n(new Error("昵称至少是2个字符")):r>14?n(new Error("昵称不能超过14个字符，1个汉字占2个字符")):/^([\u4e00-\u9fa5]|[a-z0-9])+$/i.test(t)?void n():n(new Error("昵称只能包含：中文、数字、字母"))},trigger:"blur"}],access:[{validator:(e,t,n)=>t?11!==t.length?n(new Error("请填写11位手机号")):/^(0|86|17951)?(1)[0-9]{10}$/.test(t)?void n():n(new Error("错误的手机号格式")):n(new Error("请填写手机号")),trigger:"blur"}],secret:[{validator:(e,t,n)=>""===t?n(new Error("请填写登录密码")):t.length<6?n(new Error("密码不能小于6位")):t.length>16?n(new Error("密码不能大于16位")):void n(),trigger:"blur"}]},step:0,timeout:0}},computed:{ua(){return this.$store.state.ua},qqRegisterLink(){let link="https://api.calibur.tv/callback/oauth2/qq?from=sign";return this.inviteCode&&(link=`${link}&invite=${this.inviteCode}`),link},wechatRegisterLink(){let link="https://api.calibur.tv/callback/oauth2/weixin?from=sign";return this.inviteCode&&(link=`${link}&invite=${this.inviteCode}`),link},submitBtnText(){return 0===this.step?"注册":1===this.step?"提交中...":2===this.step?"短信已发送":3===this.step?"注册中...":"注册"},submitBtnLoading(){return 1===this.step||3===this.step},submitBtnDisabled(){return 0!==this.timeout&&0===this.step||3===this.step}},methods:{submitForm(){this.$refs.form.validate(e=>{if(!e)return!1;0===this.step&&this.getRegisterAuthCode(),2===this.step&&this.openConfirmModal()})},getRegisterAuthCode(){this.step=1,this.$captcha({ctx:this,success:async({data:data})=>{try{await Object(r.m)(this,{type:"sign_up",phone_number:this.form.access,geetest:data}),this.step=2,this.openConfirmModal()}catch(e){this.step=0}finally{this.timeout=60;const e=setInterval(()=>{--this.timeout||(this.step=0,clearInterval(e))},1e3)}},close:()=>{this.step=0}})},openConfirmModal(){this.$prompt("请输入收到的验证码","短信已发送",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputErrorMessage:"验证码格式不正确"}).then(({value:e})=>{this.form.authCode=e,this.step=3,this.signUp()}).catch(()=>{})},signUp(){Object(r.j)(this,{access:this.form.access,secret:this.form.secret,nickname:this.form.nickname,authCode:this.form.authCode,inviteCode:this.form.inviteCode}).then(e=>{this.$toast.success("注册成功！"),this.$cookie.set("JWT-TOKEN",e),window.location="/about/hello"}).catch(()=>{this.step=0})},showOAuth(){this.$toast.info("暂未开放第三方注册")},showLogin(){this.$emit("to-login"),this.$refs.form.resetFields()}}},c=n(1);var component=Object(c.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sign-up-form"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule,"status-icon":""}},[n("el-form-item",{attrs:{prop:"nickname"}},[n("el-input",{attrs:{type:"text",placeholder:"昵称（2-14个字符组成，1个汉字占2个字符）","auto-complete":"off"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机（填写常用手机号，用于登录）","auto-complete":"off"},model:{value:e.form.access,callback:function(t){e.$set(e.form,"access",t)},expression:"form.access"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:e.watchPwd?"text":"password",placeholder:"密码（6-16个字符组成，区分大小写）","auto-complete":"off"},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}}),e._v(" "),e.form.secret.length>5?n("button",{staticClass:"watch-pwd",attrs:{type:"button"},on:{click:function(t){e.watchPwd=!e.watchPwd}}},[n("i",{staticClass:"iconfont icon-yuedu"})]):e._e()],1),e._v(" "),e.inviteCode?e._e():n("el-form-item",[n("el-input",{attrs:{type:"number",placeholder:"邀请码（可为空）","auto-complete":"off"},model:{value:e.form.inviteCode,callback:function(t){e.$set(e.form,"inviteCode",t)},expression:"form.inviteCode"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:e.submitBtnLoading,disabled:e.submitBtnDisabled,type:"primary"},on:{click:e.submitForm}},[e._v("\n        "+e._s(e.submitBtnText)+"\n        "),e.timeout?[e._v("\n          （"+e._s(e.timeout)+"s 后可重新获取）\n        ")]:e._e()],2)],1)],1),e._ssrNode(' <div class="others"><span class="providers"><a'+e._ssrAttr("href",e.qqRegisterLink)+'><i class="iconfont icon-qq"></i></a> '+(e.ua.wechat?"<a"+e._ssrAttr("href",e.wechatRegisterLink)+'><i class="iconfont icon-wechat"></i></a>':"\x3c!----\x3e")+"</span> "+(e.inviteCode?"\x3c!----\x3e":'<a class="fr">已有账号»</a>')+'</div> <div class="tip">\n    提示：由于注册时要根据初始昵称为每个用户分配独立域名，因此注册时的昵称不支持日文和特殊符号和标点符号，可在注册完成后在个人设置页面修改昵称\n  </div>')],2)},[],!1,function(e){var t=n(96);t.__inject__&&t.__inject__(e)},null,"7bf82ee8");t.a=component.exports},function(e,t,n){"use strict";var r={name:"UserSex",props:{sex:{type:[String,Number],required:!0},secret:{type:Boolean,default:!1}},computed:{convertSex(){if("string"==typeof this.sex)return this.sex;let e="";switch(this.sex){case 0:e="未知";break;case 1:e="男";break;case 2:e="女";break;case 3:e="伪娘";break;case 4:e="药娘";break;case 5:e="扶她";break;default:e="未知"}return e}}},o=n(1),component=Object(o.a)(r,function(){var e=this,t=e.$createElement;return(e._self._c||t)("span",{staticClass:"user-sex"},[e._ssrNode(e.secret?'<i class="iconfont icon-simi" style="color: limegreen"></i>':"未知"===e.convertSex?'<i class="iconfont icon-unknown" style="color: gold"></i>':"男"===e.convertSex?'<i class="iconfont icon-nan" style="color: deepskyblue"></i>':"女"===e.convertSex?'<i class="iconfont icon-nv" style="color: hotpink"></i>':"伪娘"===e.convertSex?'<i class="iconfont icon-tijianxingbiefenxi" style="color: mediumpurple"></i>':"药娘"===e.convertSex?'<i class="iconfont icon-xingbie" style="color: #ff4d51;"></i>':"扶她"===e.convertSex?'<i class="iconfont icon-intersex" style="color: silver"></i>':"\x3c!----\x3e")])},[],!1,null,null,"8309f5b2");t.a=component.exports},function(e,t,n){"use strict";var r=n(3),o={name:"UserReportForm",components:{VRadio:n(33).a},props:{id:{type:[Number,String],default:0},model:{type:[Number,String],default:0}},data:()=>({selectedType:-1,loading:!1,content:""}),computed:{options1:()=>[{label:"违法违规",value:1},{label:"色情低俗",value:2},{label:"赌博诈骗",value:3}],options2:()=>[{label:"人身攻击",value:4},{label:"侵犯隐私",value:5},{label:"内容抄袭",value:6}],options3:()=>[{label:"垃圾广告",value:7},{label:"恶意引战",value:8},{label:"重复内容/刷屏",value:9},{label:"内容不相关",value:10},{label:"互刷团子",value:11},{label:"其它",value:99}],needContent(){return 99===this.selectedType||6===this.selectedType}},methods:{async submit(){if(this.id&&this.model)if(this.selectedType<0)this.$toast.error("请选择正确的分类");else if(!this.needContent||this.content){if(!this.loading){this.loading=!0;try{Object(r.k)(this,{id:this.id,message:this.content,type:99===this.selectedType?0:this.selectedType,model:this.model})}finally{this.loading=!1,this.$toast.success("感谢您的反馈！"),this.content="",this.selectedType=-1,this.$emit("success")}}}else this.$toast.error("请填写具体情况");else this.$toast.error("参数错误")}}},c=n(1);var component=Object(c.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",attrs:{id:"user-report-form"}},[n("v-radio",{attrs:{options:e.options1,title:"违反法律法规"},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}}),e._ssrNode(" "),n("v-radio",{attrs:{options:e.options2,title:"侵犯个人权益"},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}}),e._ssrNode(" "),n("v-radio",{attrs:{options:e.options3,title:"有害社区环境"},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}}),e._ssrNode(" "+(e.needContent?'<div><p>留言：</p> <textarea placeholder="请说明情况"></textarea></div>':"\x3c!----\x3e")+" "),n("el-button",{staticClass:"submit-btn",attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("\n    提交\n  ")])],2)},[],!1,function(e){var t=n(111);t.__inject__&&t.__inject__(e)},null,"90844d32");t.a=component.exports},function(e,t){e.exports=require("querystring")},function(e,t){e.exports=require("vue-meta")},function(e,t){e.exports=require("vue-no-ssr")},function(e,t){e.exports=require("lodash/orderBy")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("js-cookie")},function(e,t){e.exports=require("element-ui/lib/col")},function(e,t){e.exports=require("element-ui/lib/row")},function(e,t){e.exports=require("element-ui/lib/alert")},function(e,t){e.exports=require("element-ui/lib/tooltip")},function(e,t){e.exports=require("element-ui/lib/button-group")},function(e,t){e.exports=require("element-ui/lib/option-group")},function(e,t){e.exports=require("element-ui/lib/option")},function(e,t){e.exports=require("element-ui/lib/select")},function(e,t){e.exports=require("element-ui/lib/switch")},function(e,t){e.exports=require("element-ui/lib/radio-button")},function(e,t){e.exports=require("element-ui/lib/radio-group")},function(e,t){e.exports=require("element-ui/lib/radio")},function(e,t){e.exports=require("element-ui/lib/dropdown-item")},function(e,t){e.exports=require("element-ui/lib/dropdown-menu")},function(e,t){e.exports=require("element-ui/lib/dropdown")},function(e,t){e.exports=require("element-ui/lib/tab-pane")},function(e,t){e.exports=require("element-ui/lib/tabs")},function(e,t){e.exports=require("blueimp-md5")},function(e,t){e.exports=require("vue-clipboards")},function(e,t,n){e.exports=n.p+"img/aa8b45a.png"},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){e.exports=n.p+"img/adea640.jpeg"},function(e,t,n){e.exports=n(147)},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=93},function(e,t,n){e.exports=n.p+"img/d465ab1.jpeg"},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(7),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(8),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(9),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(10),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(11),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(13),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(14),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(15),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(16),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(17),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(18),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(19),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(20),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(21),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(22),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(23),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(24),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(25),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(26),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(27),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(28),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){var map={"./bangumi.js":121,"./comment.js":149,"./editor.js":122,"./flow.js":150,"./index.js":123,"./search.js":148,"./social.js":124};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=120},function(e,t,n){"use strict";n.r(t),n.d(t,"state",function(){return c}),n.d(t,"mutations",function(){return l}),n.d(t,"actions",function(){return d}),n.d(t,"getters",function(){return h});var r=n(40),o=n(3);const c=()=>({all:[],timeline:{list:[],year:(new Date).getFullYear(),noMore:!1},currentFollowBangumiFetched:!1,currentFollowBangumis:[]}),l={SET_CURRENT_USER_BANGUMI(e,data){e.currentFollowBangumiFetched=!0,e.currentFollowBangumis=data},SET_ALL_BANGUMI(e,data){e.all=data},SET_TIMELINE(e,data){const t=e.timeline;e.timeline.list=t.list.concat(data.list),e.timeline.year=t.year-1,e.timeline.noMore=data.noMore}},d={async getAllBangumi({state:e,commit:t}){let n=!0;try{const e=localStorage.getItem("all-bangumi-load-at");if(e&&Date.now()-e<36e5){const e=JSON.parse(localStorage.getItem("all-bangumi-list"));e&&t("SET_ALL_BANGUMI",e),n=!(e&&e.length)}}catch(e){}if(e.all.length||!n)return;const data=await Object(r.a)(this);t("SET_ALL_BANGUMI",data);try{localStorage.setItem("all-bangumi-load-at",Date.now()),localStorage.setItem("all-bangumi-list",JSON.stringify(data))}catch(e){}},async getTimeline({state:e,commit:t}){if(e.timeline.noMore)return;const{data:data}=await Object(r.i)(this,{year:e.timeline.year});data&&t("SET_TIMELINE",data)},async getCurrentUserFollowBangumis({state:e,commit:t,rootState:n}){if(e.currentFollowBangumiFetched||!n.user)return e.currentFollowBangumis;const data=await Object(o.d)(this,{zone:n.user.zone});return t("SET_CURRENT_USER_BANGUMI",data),data}},h={}},function(e,t,n){"use strict";n.r(t),n.d(t,"state",function(){return o}),n.d(t,"mutations",function(){return c}),n.d(t,"actions",function(){return l}),n.d(t,"getters",function(){return d});const r={title:{type:"title",text:""},img:{type:"img",url:"",width:0,height:0,mime:"",text:""},txt:{type:"txt",text:""},list:{type:"list",text:"",sort:""},use:{type:"use",text:""}},o=()=>({resource:null,selectedIndex:0,sections:[Object.assign({},r.title,{id:0}),Object.assign({},r.img,{id:1}),Object.assign({},r.txt,{id:2}),Object.assign({},r.list,{id:3}),Object.assign({},r.use,{id:4})]}),c={SWITCH_SECTION(e,{index:t}){e.selectedIndex=t},APPEND_SECTION(e,{type:t,index:n}){const o=r[t],template={id:`${e.sections.length}-${Date.now()}`};Object.keys(o).forEach(e=>{template[e]=o[e]});const c=n+1;e.sections.splice(c,0,template),e.selectedIndex=c},UPDATE_SECTION_TEXT(e,{value:t}){e.sections[e.selectedIndex].text=t},UPDATE_SECTION_SORT(e,{value:t}){e.sections[e.selectedIndex].sort=t},UPDATE_SECTION_IMAGE(e,{url:t,width:n,height:r,size:o,mime:c}){e.sections[e.selectedIndex].url=t,e.sections[e.selectedIndex].width=n,e.sections[e.selectedIndex].height=r,e.sections[e.selectedIndex].mime=c,e.sections[e.selectedIndex].size=o},DELETE_SECTION(e,{index:t}){e.sections.splice(t,1),e.selectedIndex=0},SORT_SECTION(e,{index:t}){e.sections.splice(t-1,1,...e.sections.splice(t,1,e.sections[t-1]))},INIT_SECTION(e,data){const t=[];data.content.forEach((section,e)=>{section.id=`${e}-${Date.now()}`,t.push(section)}),e.sections=t,e.resource=data}},l={async getData({commit:e},{api:t,id:n}){const data=await t.edit({id:n});data&&e("INIT_SECTION",data)}},d={}},function(e,t,n){"use strict";n.r(t),n.d(t,"state",function(){return m}),n.d(t,"mutations",function(){return f}),n.d(t,"actions",function(){return _});var r=n(0),o=n.n(r),c=n(3),l=n(50),d=n(51),h=n(34);const m=()=>({user:null,login:!1,ua:null,haveAuthToken:!1,pageData:null}),f={SET_USER(e,t){const n=!!t.id;e.user=t,e.login=n,e.haveAuthToken=n},SET_USER_INFO(e,data){Object.keys(data).forEach(t=>{e.user[t]=data[t]})},SET_AUTH_TOKEN(e,t){e.haveAuthToken=!!t},SET_UA(e,{ua:t}){e.ua={ios:/iphone|ipad|ipod/.test(t),android:/android/.test(t),wechat:/micromessenger/.test(t),qq:/qq/.test(t),tencent:/mqqbrowser|qq|micromessenger/.test(t),alipay:/alipayclient/.test(t),weibo:/weibo/i.test(t),pc:!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t),others:/windows phone|blackberry/.test(t)}},SET_PAGE_DATA(e,data){e.pageData=data},UPDATE_USER_INFO(e,{key:t,value:n}){o.a.set(e.user,t,n)},UPDATE_USER_EXP(e,t){if(e.login&&t)if(t>0)if(e.user.exp.have_exp+t>=e.user.next_level_exp){const n=e.user.exp.level+1;e.user.exp.level=n,e.user.exp.have_exp=e.user.exp.have_exp+t-e.user.next_level_exp,e.user.exp.next_level_exp=n*n+10*n}else e.user.exp.have_exp=e.user.exp.have_exp+t;else if(e.user.exp.have_exp+t<0){const n=e.user.exp.level-1,r=n*n+10*n;e.user.exp.have_exp=r+e.user.exp.have_exp+t,e.user.exp.next_level_exp=r}else e.user.exp.have_exp=e.user.exp.have_exp+t},USE_COIN(e,t){e.login&&(e.user.pocket-=t)}},_={async nuxtServerInit({commit:e},{req:t}){const n=(t.headers["user-agent"]||"").toLowerCase();if(/mqqbrowser|qq|micromessenger/.test(n)){e("SET_PAGE_DATA",await Object(d.c)(this,`https://m.calibur.tv${t.url}`))}e("SET_UA",{ua:n}),e("SET_AUTH_TOKEN",Object(h.a)(t))},async initAuth({state:e,commit:t}){if(e.user)return!0;if(!e.haveAuthToken)return t("SET_USER",{}),!1;try{return t("SET_USER",await Object(c.e)(this)),!0}catch(e){return t("SET_USER",{}),!1}},async getUpToken({state:e,commit:t}){if(e.login&&e.user.uptoken.expiredAt<=parseInt(Date.now()/1e3,10)){t("UPDATE_USER_INFO",{key:"uptoken",value:await Object(l.c)()})}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"state",function(){return l}),n.d(t,"mutations",function(){return d}),n.d(t,"actions",function(){return h}),n.d(t,"getters",function(){return m});var r=n(0),o=n.n(r),c=n(41);const l=()=>({}),d={SET_STATE(e,{type:t,data:data,id:n}){if(Array.isArray(data))data.forEach(n=>{Object.keys(n).forEach(e=>{n[`${e}_loading`]=!1}),o.a.set(e,`${t}-${n.id}`,n)});else{const r=data=>"object"==typeof data;Object.keys(data).forEach(e=>{r(data[e])?data[e]=Object.assign(data[e],{loading:!1,error:!1,nothing:!data[e].total}):data[`${e}_loading`]=!1}),o.a.set(e,`${t}-${n||data.id}`,data)}},PUSH_STATE(e,{type:t,id:n,key:r,data:data}){const o=[`${t}-${n}`],c=`${r}_users`,l=e[o][c].list,d=data.list.map(e=>e.id);e[o][c].list=l.filter(e=>-1===d.indexOf(e.id)).concat(data.list),e[o][c].total=data.total,e[o][c].noMore=data.noMore,e[o][c].loading=!1},TOGGLE_STATE(e,{type:t,id:n,key:r,result:o,user:c}){const l=[`${t}-${n}`],d=`${r}_users`;e[l][r]=o,e[l][`${r}_loading`]=!1,e[l][d]&&(o?(e[l][d].total++,e[l][d].noMore=!1,e[l][d].list.unshift(c)):(e[l][d].total--,e[l][d].list.forEach((t,n)=>{t.id===c.id&&e[l][d].list.splice(n,1)})))},SET_PUSH_RUNNING(e,{type:t,id:n,key:r,value:o}){const c=`${r}_users`;e[[`${t}-${n}`]][c][o]=!0},SET_TOGGLE_LOADING(e,{type:t,id:n,action:r,result:o}){e[`${t}-${n}`][`${r}_loading`]=o}},h={async getUsers({state:e,commit:t},{type:n,id:r,key:o}){const l=e[`${n}-${r}`][`${o}_users`];if(!l.loading&&!l.noMore){t("SET_PUSH_RUNNING",{type:n,key:o,id:r,value:"loading"});try{t("PUSH_STATE",{type:n,id:r,key:o,data:await c.users({ctx:this,type:o,id:r,last_id:l.list.length?l.list[l.list.length-1].id:0,model:n,take:15})})}catch(e){t("SET_PUSH_RUNNING",{type:n,key:o,id:r,value:"error"})}}},async toggleAction({state:e,commit:t,rootState:n},{type:r,id:o,action:l}){if(!e[`${r}-${o}`][`${l}_loading`]){t("SET_TOGGLE_LOADING",{action:l,type:r,id:o,result:!0});try{const e=await c[l]({ctx:this,id:o,type:r}),{user:d}=n;return t("TOGGLE_STATE",{type:r,key:l,id:o,result:e,user:{id:d.id,nickname:d.nickname,avatar:d.avatar,created_at:parseInt(Date.now()/1e3)}}),{success:!0,result:e}}catch(e){return t("SET_TOGGLE_LOADING",{action:l,type:r,id:o,result:!1}),{success:!1}}}}},m={getState:e=>(t,n)=>e[`${t}-${n}`]}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(29),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(30),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(31),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t,n){"use strict";n.r(t);var r=n(32),o=n.n(r);for(var c in r)"default"!==c&&function(e){n.d(t,e,function(){return r[e]})}(c);t.default=o.a},function(e,t){e.exports=require("debug")},function(e,t,n){"use strict";n.r(t);var r=n(62),o=n(0),c=n.n(o);const l=n(93),d=l.keys();function h(e){const t=l(e);return t.default||t}const m={};for(const e of d){m[e.replace(/^\.\//,"").replace(/\.(js|mjs|ts)$/,"")]=h(e)}var f=m;function _(e){return e.then(e=>e.default||e)}function v(e){return e.options&&e._Ctor===e?e:(e.options?(e._Ctor=e,e.extendOptions=e.options):(e=c.a.extend(e))._Ctor=e,!e.options.name&&e.options.__file&&(e.options.name=e.options.__file),e)}function y(e,t=!1){return Array.prototype.concat.apply([],e.matched.map((e,n)=>Object.keys(e.components).map(r=>(t&&t.push(n),e.components[r]))))}function x(e){return Promise.all(function(e,t){return Array.prototype.concat.apply([],e.matched.map((e,n)=>Object.keys(e.components).reduce((r,o)=>(e.components[o]?r.push(t(e.components[o],e.instances[o],e,o,n)):delete e.components[o],r),[])))}(e,async(e,t,n,r)=>("function"!=typeof e||e.options||(e=await e()),n.components[r]=v(e),n.components[r])))}async function w(e){return await x(e),{...e,meta:y(e).map((t,n)=>({...t.options.meta,...(e.matched[n]||{}).meta}))}}async function $(e,t){e.context||(e.context={isStatic:!1,isDev:!1,isHMR:!1,app:e,store:e.store,payload:t.payload,error:t.error,base:"/",env:{API_URL:"http://localhost/",API_URL_BROWSER:"https://api.calibur.tv/",SENTRY_URL:"https://63fb1028c6e24cb5be33e8ed64d798e8@sentry.io/1278322",RELEASE:"2019-3-6 13:34:59"}},t.req&&(e.context.req=t.req),t.res&&(e.context.res=t.res),e.context.redirect=((t,path,n)=>{if(!t)return;e.context._redirected=!0;let r=typeof path;"number"==typeof t||"undefined"!==r&&"object"!==r||(n=path||{},r=typeof(path=t),t=302),"object"===r&&(path=e.router.resolve(path).href),/(^[.]{1,2}\/)|(^\/(?!\/))/.test(path)?e.context.next({path:path,query:n,status:t}):(path=function(e,t){let n;const r=e.indexOf("://");-1!==r?(n=e.substring(0,r),e=e.substring(r+3)):e.startsWith("//")&&(e=e.substring(2));let o,c=e.split("/"),l=(n?n+"://":"//")+c.shift(),path=c.filter(Boolean).join("/");2===(c=path.split("#")).length&&(path=c[0],o=c[1]);l+=path?"/"+path:"",t&&"{}"!==JSON.stringify(t)&&(l+=(2===e.split("?").length?"&":"?")+function(e){return Object.keys(e).sort().map(t=>{const n=e[t];return null==n?"":Array.isArray(n)?n.slice().map(e=>[t,"=",e].join("")).join("&"):t+"="+n}).filter(Boolean).join("&")}(t));return l+=o?"#"+o:""}(path,n),e.context.next({path:path,status:t}))}),e.context.beforeNuxtRender=(e=>t.beforeRenderFns.push(e))),e.context.next=t.next,e.context._redirected=!1,e.context._errored=!1,e.context.isHMR=!!t.isHMR,t.route&&(e.context.route=await w(t.route)),e.context.params=e.context.route.params||{},e.context.query=e.context.route.query||{},t.from&&(e.context.from=await w(t.from))}function k(e,t){return!e.length||t._redirected||t._errored?Promise.resolve():E(e[0],t).then(()=>k(e.slice(1),t))}function E(e,t){let n;return(n=2===e.length?new Promise(n=>{e(t,function(e,data){e&&t.error(e),n(data=data||{})})}):e(t))&&(n instanceof Promise||"function"==typeof n.then)||(n=Promise.resolve(n)),n}function S(e,t){return function(e){const t=new Array(e.length);for(let i=0;i<e.length;i++)"object"==typeof e[i]&&(t[i]=new RegExp("^(?:"+e[i].pattern+")$"));return function(n,r){let path="";const data=n||{},o=r||{},c=o.pretty?C:encodeURIComponent;for(let i=0;i<e.length;i++){const n=e[i];if("string"==typeof n){path+=n;continue}const r=data[n.name||"pathMatch"];let o;if(null==r){if(n.optional){n.partial&&(path+=n.prefix);continue}throw new TypeError('Expected "'+n.name+'" to be defined')}if(Array.isArray(r)){if(!n.repeat)throw new TypeError('Expected "'+n.name+'" to not repeat, but received `'+JSON.stringify(r)+"`");if(0===r.length){if(n.optional)continue;throw new TypeError('Expected "'+n.name+'" to not be empty')}for(let e=0;e<r.length;e++){if(o=c(r[e]),!t[i].test(o))throw new TypeError('Expected all "'+n.name+'" to match "'+n.pattern+'", but received `'+JSON.stringify(o)+"`");path+=(0===e?n.prefix:n.delimiter)+o}}else{if(o=n.asterisk?encodeURI(r).replace(/[?#]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase()):c(r),!t[i].test(o))throw new TypeError('Expected "'+n.name+'" to match "'+n.pattern+'", but received "'+o+'"');path+=n.prefix+o}}return path}}(function(e,t){const n=[];let r=0,o=0,path="";const c=t&&t.delimiter||"/";let l;for(;null!=(l=T.exec(e));){const t=l[0],d=l[1],h=l.index;if(path+=e.slice(o,h),o=h+t.length,d){path+=d[1];continue}const m=e[o],f=l[2],_=l[3],v=l[4],y=l[5],x=l[6],w=l[7];path&&(n.push(path),path="");const $=null!=f&&null!=m&&m!==f,k="+"===x||"*"===x,E="?"===x||"*"===x,S=l[2]||c,pattern=v||y;n.push({name:_||r++,prefix:f||"",delimiter:S,optional:E,repeat:k,partial:$,asterisk:!!w,pattern:pattern?N(pattern):w?".*":"[^"+I(S)+"]+?"})}o<e.length&&(path+=e.substr(o));path&&n.push(path);return n}(e,t))}const T=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function C(e){return encodeURI(e).replace(/[\/?#]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())}function I(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function N(e){return e.replace(/([=!:$\/()])/g,"\\$1")}var O=n(63),j=n.n(O),A=n(43),R=n.n(A);const P=()=>_(n.e(20).then(n.bind(null,475))),D=()=>_(n.e(21).then(n.bind(null,472))),L=()=>_(n.e(23).then(n.bind(null,462))),U=()=>_(n.e(22).then(n.bind(null,470))),B=()=>_(n.e(46).then(n.bind(null,436))),z=()=>_(n.e(59).then(n.bind(null,434))),F=()=>_(n.e(60).then(n.bind(null,495))),G=()=>_(n.e(61).then(n.bind(null,455))),K=()=>_(n.e(62).then(n.bind(null,447))),W=()=>_(n.e(63).then(n.bind(null,484))),H=()=>_(n.e(64).then(n.bind(null,490))),V=()=>_(n.e(2).then(n.bind(null,491))),J=()=>_(n.e(4).then(n.bind(null,486))),Q=()=>_(n.e(5).then(n.bind(null,438))),Z=()=>_(n.e(6).then(n.bind(null,481))),Y=()=>_(n.e(7).then(n.bind(null,477))),X=()=>_(n.e(8).then(n.bind(null,457))),ee=()=>_(n.e(10).then(n.bind(null,463))),te=()=>_(n.e(24).then(n.bind(null,483))),ne=()=>_(n.e(25).then(n.bind(null,488))),se=()=>_(n.e(26).then(n.bind(null,487))),ie=()=>_(n.e(27).then(n.bind(null,474))),re=()=>_(n.e(29).then(n.bind(null,468))),oe=()=>_(n.e(30).then(n.bind(null,464))),ae=()=>_(n.e(31).then(n.bind(null,437))),ce=()=>_(n.e(36).then(n.bind(null,471))),le=()=>_(n.e(38).then(n.bind(null,448))),ue=()=>_(n.e(40).then(n.bind(null,494))),de=()=>_(n.e(39).then(n.bind(null,450))),pe=()=>_(n.e(41).then(n.bind(null,452))),he=()=>_(n.e(42).then(n.bind(null,453))),me=()=>_(n.e(43).then(n.bind(null,443))),fe=()=>_(n.e(44).then(n.bind(null,456))),ge=()=>_(n.e(45).then(n.bind(null,459))),_e=()=>_(n.e(3).then(n.bind(null,460))),be=()=>_(n.e(9).then(n.bind(null,445))),ve=()=>_(n.e(11).then(n.bind(null,441))),ye=()=>_(n.e(13).then(n.bind(null,492))),xe=()=>_(n.e(12).then(n.bind(null,439))),we=()=>_(n.e(14).then(n.bind(null,467))),$e=()=>_(n.e(15).then(n.bind(null,473))),ke=()=>_(n.e(16).then(n.bind(null,482))),Ee=()=>_(n.e(17).then(n.bind(null,442))),Se=()=>_(n.e(18).then(n.bind(null,479))),Te=()=>_(n.e(19).then(n.bind(null,444))),Ce=()=>_(n.e(32).then(n.bind(null,476))),Ie=()=>_(n.e(33).then(n.bind(null,435))),qe=()=>_(n.e(34).then(n.bind(null,469))),Ne=()=>_(n.e(35).then(n.bind(null,466))),Oe=()=>_(n.e(37).then(n.bind(null,433))),je=()=>_(n.e(47).then(n.bind(null,461))),Ae=()=>_(n.e(48).then(n.bind(null,458))),Me=()=>_(n.e(51).then(n.bind(null,493))),Re=()=>_(n.e(49).then(n.bind(null,454))),Pe=()=>_(n.e(50).then(n.bind(null,451))),De=()=>_(n.e(52).then(n.bind(null,449))),Le=()=>_(n.e(53).then(n.bind(null,480))),Ue=()=>_(n.e(54).then(n.bind(null,465))),Be=()=>_(n.e(55).then(n.bind(null,478))),ze=()=>_(n.e(56).then(n.bind(null,485))),Fe=()=>_(n.e(57).then(n.bind(null,489))),Ge=()=>_(n.e(58).then(n.bind(null,446))),Ke=()=>_(n.e(28).then(n.bind(null,440)));c.a.use(R.a);const We=function(e,t,n){let r=!1;return e.matched.length<2&&e.matched.every(e=>!1!==e.components.default.options.scrollToTop)?r={x:0,y:0}:e.matched.some(e=>e.components.default.options.scrollToTop)&&(r={x:0,y:0}),n&&(r=n),new Promise(t=>{window.$nuxt.$once("triggerScroll",()=>{if(e.hash){let t=e.hash;void 0!==window.CSS&&void 0!==window.CSS.escape&&(t="#"+window.CSS.escape(t.substr(1)));try{document.querySelector(t)&&(r={selector:t})}catch(e){console.warn("Failed to save scroll position. Please add CSS.escape() polyfill (https://github.com/mathiasbynens/CSS.escape).")}}t(r)})})};var He=n(64),Ve={...n.n(He).a,name:"NoSsr"},Je={name:"NuxtChild",functional:!0,props:{nuxtChildKey:{type:String,default:""},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0}},render(e,{parent:t,data:data,props:n}){data.nuxtChild=!0;const r=t,o=t.$nuxt.nuxt.transitions,c=t.$nuxt.nuxt.defaultTransition;let l=0;for(;t;)t.$vnode&&t.$vnode.data.nuxtChild&&l++,t=t.$parent;data.nuxtChildDepth=l;const d=o[l]||c,h={};Qe.forEach(e=>{void 0!==d[e]&&(h[e]=d[e])});const m={};Ze.forEach(e=>{"function"==typeof d[e]&&(m[e]=d[e].bind(r))});const f=m.beforeEnter;m.beforeEnter=(e=>{if(window.$nuxt.$nextTick(()=>{window.$nuxt.$emit("triggerScroll")}),f)return f.call(r,e)});let _=[e("router-view",data)];return n.keepAlive&&(_=[e("keep-alive",{props:n.keepAliveProps},_)]),e("transition",{props:h,on:m},_)}};const Qe=["name","mode","appear","css","type","duration","enterClass","leaveClass","appearClass","enterActiveClass","enterActiveClass","leaveActiveClass","appearActiveClass","enterToClass","leaveToClass","appearToClass"],Ze=["beforeEnter","enter","afterEnter","enterCancelled","beforeLeave","leave","afterLeave","leaveCancelled","beforeAppear","appear","afterAppear","appearCancelled"];var Ye=n(3),Xe={name:"SignInForm",props:{inviteCode:{type:String,default:""}},data:()=>({form:{access:"",secret:"",remember:!0},rule:{access:[{validator:(e,t,n)=>t?11!==t.length?n(new Error("请填写11位手机号")):void n():n(new Error("请填写手机号")),trigger:"blur"}],secret:[{validator:(e,t,n)=>""===t?n(new Error("请填写登录密码")):t.length<6?n(new Error("密码不能小于6位")):t.length>16?n(new Error("密码不能大于16位")):void n(),trigger:"blur"}]},loading:!1,watchPwd:!1}),computed:{ua(){return this.$store.state.ua},qqRegisterLink(){let link="https://api.calibur.tv/callback/oauth2/qq?from=sign";return this.inviteCode&&(link=`${link}&invite=${this.inviteCode}`),link},wechatRegisterLink(){let link="https://api.calibur.tv/callback/oauth2/weixin?from=sign";return this.inviteCode&&(link=`${link}&invite=${this.inviteCode}`),link}},methods:{submitForm(){this.$refs.form.validate(e=>{if(!e)return!1;this.login()})},login(){this.loading||(this.loading=!0,this.$captcha({ctx:this,success:({data:data})=>{Object(Ye.h)(this,{access:this.form.access,secret:this.form.secret,remember:this.form.remember,geetest:data}).then(e=>{this.$cookie.set("JWT-TOKEN",e,{expires:365}),window.location.reload()}).catch(()=>{this.loading=!1})},close:()=>{this.loading=!1}}))},showReset(){this.$emit("to-reset"),this.$refs.form.resetFields()},showRegister(){this.$emit("to-register"),this.$refs.form.resetFields()},showOAuth(){this.$toast.info("暂未开放第三方登录")}}},et=n(1);var tt=Object(et.a)(Xe,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sign-in-form"},[e._ssrNode("<img"+e._ssrAttr("src",e.$resize("https://image.calibur.tv/owner/logo/calibur-pink-new.png",{width:500,height:200}))+' alt="sign-logo" class="logo"> '),n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule}},[n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机（填写常用手机号，用于登录）"},model:{value:e.form.access,callback:function(t){e.$set(e.form,"access",t)},expression:"form.access"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:e.watchPwd?"text":"password",placeholder:"密码（6-16个字符组成，区分大小写）"},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}}),e._v(" "),e.form.secret.length>5?n("button",{staticClass:"watch-pwd",attrs:{type:"button"},on:{click:function(t){e.watchPwd=!e.watchPwd}}},[n("i",{staticClass:"iconfont icon-yuedu"})]):e._e()],1),e._v(" "),n("div",{staticClass:"providers"},[n("a",{attrs:{href:e.qqRegisterLink}},[n("i",{staticClass:"iconfont icon-qq"})]),e._v(" "),e.ua.wechat?n("a",{attrs:{href:e.wechatRegisterLink}},[n("i",{staticClass:"iconfont icon-wechat"})]):e._e()]),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:e.loading,type:"primary"},on:{click:e.submitForm}},[e._v("\n        登录\n      ")])],1)],1),e._ssrNode(' <div class="others"><a class="fl">忘记密码?&gt;</a> <a class="fr">点击注册»</a></div>')],2)},[],!1,function(e){var t=n(95);t.__inject__&&t.__inject__(e)},null,"2609bd16").exports,nt=n(59),st={name:"ResetPasswordForm",data:()=>({form:{access:"",secret:"",authCode:""},rule:{access:[{validator:(e,t,n)=>t?11!==t.length?n(new Error("请填写11位手机号")):void n():n(new Error("请填写手机号")),trigger:"blur"}],secret:[{validator:(e,t,n)=>""===t?n(new Error("请填写登录密码")):t.length<6?n(new Error("密码不能小于6位")):t.length>16?n(new Error("密码不能大于16位")):void n(),trigger:"blur"}]},step:0,timeout:0}),computed:{submitBtnText(){return 0===this.step?"立即重置":1===this.step?"提交中...":2===this.step?"短信已发送":3===this.step?"已重置":"立即重置"},submitBtnLoading(){return 1===this.step||3===this.step},submitBtnDisabled(){return 0!==this.timeout&&0===this.step||3===this.step}},methods:{submitForm(){this.$refs.form.validate(e=>{if(!e)return!1;0===this.step&&this.getResetAuthCode(),2===this.step&&this.openConfirmModal()})},getResetAuthCode(){this.step=1,this.$captcha({ctx:this,success:async({data:data})=>{try{await Object(Ye.m)(this,{type:"forgot_password",phone_number:this.form.access,geetest:data}),this.step=2,this.openConfirmModal()}catch(e){this.step=0}finally{this.timeout=60;const e=setInterval(()=>{--this.timeout||(this.step=0,clearInterval(e))},1e3)}},close:()=>{this.step=0}})},openConfirmModal(){this.$prompt("请输入收到的验证码","短信已发送",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputErrorMessage:"验证码格式不正确"}).then(({value:e})=>{this.form.authCode=e,this.step=3,this.signReset()}).catch(()=>{})},async signReset(){try{const e=await Object(Ye.l)(this,{access:this.form.access,authCode:this.form.authCode,secret:this.form.secret});this.$toast.success(e),this.showLogin()}finally{this.step=0}},showLogin(){this.$emit("to-login"),this.$refs.form.resetFields()},showRegister(){this.$emit("to-register"),this.$refs.form.resetFields()}}};var it=Object(et.a)(st,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reset-password-form"},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rule}},[n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机号","auto-complete":"off"},model:{value:e.form.access,callback:function(t){e.$set(e.form,"access",t)},expression:"form.access"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:"text",placeholder:"新密码","auto-complete":"off"},model:{value:e.form.secret,callback:function(t){e.$set(e.form,"secret",t)},expression:"form.secret"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:e.submitBtnLoading,disabled:e.submitBtnDisabled,type:"primary"},on:{click:e.submitForm}},[e._v("\n        "+e._s(e.submitBtnText)+"\n        "),e.timeout?[e._v("\n          （"+e._s(e.timeout)+"s 后可重新获取）\n        ")]:e._e()],2)],1)],1),e._ssrNode(' <div class="others"><a class="fl">返回登录&gt;</a> <a class="fr">点击注册»</a></div>')],2)},[],!1,function(e){var t=n(97);t.__inject__&&t.__inject__(e)},null,"e7cac0a4").exports,ot={name:"VUserDrawer",components:{UserSex:n(60).a},data:()=>({switchUserDrawer:!1}),computed:{user(){return this.$store.state.user},computeUserDrawerBg(){return!this.user||this.user.banner.split("/default/user-banner").length>1?{}:{backgroundImage:`url(${this.$resize(this.user.banner,{height:250,mode:2})})`}},coinCount(){return this.user.pocket}},mounted(){this.$channel.$on("open-user-drawer",()=>{this.switchUserDrawer=!0})},methods:{logout(){this.$cookie.remove("JWT-TOKEN"),Object(Ye.i)(this),window.location.href="/"}}};var at=Object(et.a)(ot,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("v-drawer",{staticClass:"user-drawer",attrs:{id:"user",from:"right",size:"70%"},model:{value:e.switchUserDrawer,callback:function(t){e.switchUserDrawer=t},expression:"switchUserDrawer"}},[n("div",{staticClass:"user-section"},[n("div",{staticClass:"bg",style:e.computeUserDrawerBg}),e._v(" "),n("div",{staticClass:"mask"}),e._v(" "),n("div",{staticClass:"user-info"},[n("nuxt-link",{staticClass:"avatar",attrs:{to:e.$alias.user(e.user.zone)}},[n("v-img",{attrs:{src:e.user.avatar,lazy:!1,avatar:!0,width:"50"}})],1),e._v(" "),n("div",{staticClass:"panel"},[n("div",{staticClass:"nickname"},[n("nuxt-link",{staticClass:"oneline",attrs:{to:e.$alias.user(e.user.zone)},domProps:{textContent:e._s(e.user.nickname)}})],1),e._v(" "),n("div",[n("user-sex",{attrs:{sex:e.user.sex,secret:e.user.sexSecret}}),e._v("\n          · "),n("span",{staticClass:"level"},[e._v("Lv"+e._s(e.user.exp.level))])],1)])],1),e._v(" "),n("span",{staticClass:"badge"},[e._v("虚拟币："+e._s(e.coinCount))]),e._v("\n    ·\n    "),n("span",{staticClass:"badge"},[e._v("邀请码："+e._s(e.user.id))])]),e._v(" "),n("ul",{staticClass:"routes container",on:{click:function(t){e.switchUserDrawer=!1}}},[n("li",[n("nuxt-link",{attrs:{to:e.$alias.user(e.user.zone)}},[n("i",{staticClass:"iconfont icon-zhuye"}),e._v(" 个人主页\n      ")])],1),e._v(" "),n("li",[n("nuxt-link",{attrs:{to:"/my/setting"}},[n("i",{staticClass:"iconfont icon-shezhi"}),e._v(" 用户设置\n      ")])],1),e._v(" "),n("li",[n("nuxt-link",{attrs:{to:"/about/hello"}},[n("i",{staticClass:"iconfont icon-bangzhu"}),e._v(" 功能简介\n      ")])],1),e._v(" "),n("li",[n("nuxt-link",{attrs:{to:"/my/invite"}},[n("i",{staticClass:"iconfont icon-yaoqingma"}),e._v(" 我的邀请码\n      ")])],1),e._v(" "),n("li",[n("button",{on:{click:e.logout}},[n("i",{staticClass:"iconfont icon-tuichu"}),e._v(" 退出登录\n      ")])])])]):e._e()},[],!1,function(e){var t=n(98);t.__inject__&&t.__inject__(e)},null,"c373211c").exports,ct={name:"FirstSignDrawer",data:()=>({show:!1}),mounted(){if(!/^\/app\//.test(this.$route.fullPath)&&!this.$cookie.get("display-first-sign-dialog"))try{if(!localStorage.getItem("display-first-sign-dialog")){this.show=!0;const e=this.$backdrop.show({click:()=>{this.show=!1,this.$backdrop.hide(e)}});this.$cookie.set("display-first-sign-dialog",1,{expires:7}),localStorage.setItem("display-first-sign-dialog",1)}}catch(e){}}};var lt=Object(et.a)(ct,function(){var e=this.$createElement,t=this._self._c||e;return this.show?t("div",{staticClass:"first-sign-drawer"},[this._ssrNode('<h3 class="title">\n    欢迎来到<br>\n    「calibur.tv」\n  </h3> <p class="content">\n    使用你的“邀请码”带朋友一起来玩吧！<br>\n    每邀请一个朋友加入<br>\n    你就可以获得一个团子<br>\n    满100就可以提现噢！\n  </p> '),this._ssrNode('<div class="control">',"</div>",[t("nuxt-link",{attrs:{to:"/about/hello"}},[t("button",{staticStyle:{"background-color":"#00ce72"}},[this._v("\n        查看团子规则\n      ")])]),this._ssrNode(" "),t("nuxt-link",{attrs:{to:"/my/invite"}},[t("button",{staticStyle:{"background-color":"gold"}},[this._v("\n        我的邀请码\n      ")])])],2)],2):this._e()},[],!1,function(e){var t=n(99);t.__inject__&&t.__inject__(e)},null,"05b5f491").exports,ut={name:"SignDrawer",components:{SignUpForm:nt.a,SignInForm:tt,ResetPasswordForm:it,UserDrawer:at,FirstSignDrawer:lt},data:()=>({openDrawer:!1,showSignIn:!1,showSignUp:!1,showReset:!1}),computed:{isGuest(){return!this.$store.state.login},query(){return this.$route.query},paramsIsOK(){return!!(this.query.uid&&/^\d+$/.test(this.query.uid)&&this.query.time&&/^\d+$/.test(this.query.time)&&Date.now()<=1e3*this.query.time&&this.query.key===this.$md5(`${this.query.uid}-the-world-${this.query.time}`))}},mounted(){this.$channel.$on("sign-up",()=>{this.showRegister()}),this.$channel.$on("sign-in",(e=!0)=>{e&&this.$toast.error("请先登录"),this.showLogin()})},methods:{showLogin(){this.showReset=!1,this.showSignIn=!0,this.showSignUp=!1,this.openDrawer=!0},showRegister(){this.showSignUp=!0,this.showSignIn=!1,this.openDrawer=!0}}};var pt=Object(et.a)(ut,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isGuest?n("v-drawer",{staticClass:"sign-drawer",attrs:{"header-text":e.showSignUp?"注册":e.showReset?"找回密码":"登录",from:"bottom",size:"100%"},model:{value:e.openDrawer,callback:function(t){e.openDrawer=t},expression:"openDrawer"}},[n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showSignIn,expression:"showSignIn"}]},[n("reset-password-form",{directives:[{name:"show",rawName:"v-show",value:e.showReset,expression:"showReset"}],on:{"to-login":function(t){e.showReset=!1},"to-register":e.showRegister}}),e._v(" "),n("sign-in-form",{directives:[{name:"show",rawName:"v-show",value:!e.showReset,expression:"!showReset"}],attrs:{"invite-code":e.paramsIsOK?e.query.uid:""},on:{"to-reset":function(t){e.showReset=!0},"to-register":e.showRegister}})],1),e._v(" "),n("sign-up-form",{directives:[{name:"show",rawName:"v-show",value:e.showSignUp,expression:"showSignUp"}],attrs:{"invite-code":e.paramsIsOK?e.query.uid:""},on:{"to-login":e.showLogin}})],1)]):[n("user-drawer"),e._v(" "),n("first-sign-drawer")]],2)},[],!1,function(e){var t=n(100);t.__inject__&&t.__inject__(e)},null,"59ee3a7e").exports,ht={name:"nuxt-error",components:{SignDrawer:pt},props:{error:{type:Object,default:null}},head:{title:"出错了"},computed:{statusCode(){return"继续操作前请先登录"===this.message?401:"请在APP内打开该页面"===this.message?403:this.error&&this.error.statusCode||404},message(){return this.error&&this.error.message||"您要找的页面不存在"}},methods:{handleLogin(){this.$channel.$emit("sign-in")},toastMessage(){this.$toast.error(this.message)}}};var mt=Object(et.a)(ht,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"error-page"}},[e._ssrNode('<div class="error-main">',"</div>",[401===e.statusCode?e._ssrNode('<div id="error-401">',"</div>",[e._ssrNode("<img"+e._ssrAttr("src",n(94))+' alt="error-401"> <h3>请登录后重新访问</h3> <button class="back">\n        登录\n      </button>')],2):403===e.statusCode?e._ssrNode('<div id="error-403"><img'+e._ssrAttr("src",n(53))+' alt="error-403"> <h3>您没有权限访问该页面</h3> <a href="/" class="back">回到首页</a></div>'):404===e.statusCode?e._ssrNode('<div id="error-404">',"</div>",[e._ssrNode("<img"+e._ssrAttr("src",n(91))+' alt="error-404"> <h3>您要找的页面不存在</h3> <div class="subtitle">\n        不存在的，或者正在审核中。\n      </div> '),r("nuxt-link",{staticClass:"back",attrs:{to:"/"}},[e._v("\n        返回首页\n      ")])],2):500===e.statusCode?e._ssrNode('<div id="error-500">',"</div>",[e._ssrNode("<img"+e._ssrAttr("src",n(53))+' alt="error-500"> <h3>服务器出错了</h3> <div class="subtitle">\n        服务器出了点问题，工程师正在加紧抢修ヽ( ° ▽°)ノ\n      </div> '),r("nuxt-link",{staticClass:"back",attrs:{to:"/"}},[e._v("\n        返回首页\n      ")])],2):e._e()]),e._ssrNode(" "),r("sign-drawer")],2)},[],!1,function(e){var t=n(101);t.__inject__&&t.__inject__(e)},null,"4c7ced59").exports,ft={name:"Nuxt",components:{NuxtChild:Je,NuxtError:mt},props:{nuxtChildKey:{type:String,default:void 0},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0},name:{type:String,default:"default"}},computed:{routerViewKey(){if(void 0!==this.nuxtChildKey||this.$route.matched.length>1)return this.nuxtChildKey||S(this.$route.matched[0].path)(this.$route.params);const e=this.$route.matched[0]&&this.$route.matched[0].components.default;return e&&e.options&&e.options.key?"function"==typeof e.options.key?e.options.key(this.$route):e.options.key:this.$route.path}},beforeCreate(){c.a.util.defineReactive(this,"nuxt",this.$root.$options.nuxt)},render(e){return this.nuxt.err?e("NuxtError",{props:{error:this.nuxt.err}}):e("NuxtChild",{key:this.routerViewKey,props:this.$props})}},gt={name:"NuxtLoading",data:()=>({percent:0,show:!1,canSucceed:!0,reversed:!1,skipTimerCount:0,rtl:!1,throttle:200,duration:5e3,continuous:!1}),computed:{left(){return!(!this.continuous&&!this.rtl)&&(this.rtl?this.reversed?"0px":"auto":this.reversed?"auto":"0px")}},beforeDestroy(){this.clear()},methods:{clear(){clearInterval(this._timer),clearTimeout(this._throttle),this._timer=null},start(){return this.clear(),this.percent=0,this.reversed=!1,this.skipTimerCount=0,this.canSucceed=!0,this.throttle?this._throttle=setTimeout(()=>this.startTimer(),this.throttle):this.startTimer(),this},set(e){return this.show=!0,this.canSucceed=!0,this.percent=Math.min(100,Math.max(0,Math.floor(e))),this},get(){return this.percent},increase(e){return this.percent=Math.min(100,Math.floor(this.percent+e)),this},decrease(e){return this.percent=Math.max(0,Math.floor(this.percent-e)),this},pause(){return clearInterval(this._timer),this},resume(){return this.startTimer(),this},finish(){return this.percent=this.reversed?0:100,this.hide(),this},hide(){return this.clear(),setTimeout(()=>{this.show=!1,this.$nextTick(()=>{this.percent=0,this.reversed=!1})},500),this},fail(){return this.canSucceed=!1,this},startTimer(){this.show||(this.show=!0),void 0===this._cut&&(this._cut=1e4/Math.floor(this.duration)),this._timer=setInterval(()=>{this.skipTimerCount>0?this.skipTimerCount--:(this.reversed?this.decrease(this._cut):this.increase(this._cut),this.continuous&&(this.percent>=100?(this.skipTimerCount=1,this.reversed=!this.reversed):this.percent<=0&&(this.skipTimerCount=1,this.reversed=!this.reversed)))},100)}},render(e){let t=e(!1);return this.show&&(t=e("div",{staticClass:"nuxt-progress",class:{"nuxt-progress-notransition":this.skipTimerCount>0,"nuxt-progress-failed":!this.canSucceed},style:{width:this.percent+"%",left:this.left}})),t}};var _t=Object(et.a)(gt,void 0,void 0,!1,function(e){var t=n(102);t.__inject__&&t.__inject__(e)},null,"32ba1dc4").exports,bt=(n(103),n(104),n(52)),vt={name:"VSearchHistory",data:()=>({cacheKey:"search-history",list:[],maxLen:10}),mounted(){this.list=this.get()},methods:{query(q){this.$router.push({name:"search",query:{q:q,type:"all"}})},set(q){setTimeout(()=>{const e=this.get(),t=e.indexOf(q);-1!==t&&e.splice(t,1),e.unshift(q),e.length>this.maxLen&&e.pop(),this.list=e;try{localStorage.setItem(this.cacheKey,JSON.stringify(e))}catch(e){}},0)},get(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(e){return[]}},clear(){try{localStorage.removeItem(this.cacheKey)}catch(e){}this.list=[]}}};var yt=Object(et.a)(vt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.list.length?n("div",{staticClass:"search-history"},[e._ssrNode('<p class="title">\n    搜索历史\n  </p> <ul>'+e._ssrList(e.list,function(t,n){return'<li><i class="iconfont icon-lishijilu"></i>'+e._ssrEscape(" "+e._s(t)+"\n    ")+"</li>"})+'</ul> <button class="clear-btn">\n    清除历史记录\n  </button>')]):e._e()},[],!1,function(e){var t=n(106);t.__inject__&&t.__inject__(e)},null,"4224f606").exports,xt={name:"VSearchDrawer",components:{vSearch:bt.a,vSearchHistory:yt},props:{value:{required:!0,type:Boolean}},data(){return{open:this.value,query:""}},mounted(){this.$watch("value",e=>{this.open=e}),this.$watch("open",e=>{this.$emit("input",e)})},methods:{}};var wt={name:"VHeader",components:{SearchDrawer:Object(et.a)(xt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-drawer",{staticClass:"search-drawer",attrs:{from:"bottom",size:"100%","header-text":"搜索"},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("div",{staticClass:"container"},[n("v-search",{model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),n("div",{staticClass:"hr"}),e._v(" "),n("v-search-history")],1)])},[],!1,function(e){var t=n(107);t.__inject__&&t.__inject__(e)},null,"04411b96").exports},data:()=>({openSearchDrawer:!1}),computed:{currentUser(){return this.$store.state.user},haveAuthToken(){return this.$store.state.haveAuthToken},path(){return this.$route.path},homePage(){return"/"===this.path},worldPage(){return/^\/world/.test(this.path)},bangumiPage(){return/^\/bangumi/.test(this.path)},rolePage(){return/^\/role\/trending/.test(this.path)},appPage(){return/^\/app/.test(this.path)},rewardPage(){return/^\/about\/reward/.test(this.path)},noBorderPage(){return this.homePage||this.appPage}},methods:{openSignDrawer(){this.$channel.$emit("sign-in",!1)},openUserDrawer(){this.$channel.$emit("open-user-drawer")}}};var $t=Object(et.a)(wt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{attrs:{id:"header"}},[e._ssrNode("<div"+e._ssrClass("header-text",{"border-header":!e.noBorderPage})+">","</div>",[e._ssrNode('<div class="nav-left">',"</div>",[n("router-link",{attrs:{to:"/"}},[n("img",{staticClass:"logo",attrs:{src:"https://image.calibur.tv/owner/logo/max.png?imageMogr2/auto-orient/strip|imageView2/1/w/80/h/80",alt:"logo"}})]),e._ssrNode(" "),n("router-link",{staticClass:"link",class:{active:e.rolePage},attrs:{to:"/role/trending"}},[e._v("\n        股市\n      ")]),e._ssrNode(" "),n("router-link",{staticClass:"link",class:{active:e.worldPage},attrs:{to:"/world/post"}},[e._v("\n        社区\n      ")]),e._ssrNode(" "),n("router-link",{staticClass:"link",class:{active:e.bangumiPage},attrs:{to:"/bangumi/news"}},[e._v("\n        番剧\n      ")]),e._ssrNode(" "),n("router-link",{staticClass:"link",class:{active:e.appPage},attrs:{to:"/app/download"}},[e._v("\n        APP\n      ")]),e._ssrNode(" "),n("router-link",{staticClass:"link",class:{active:e.rewardPage},attrs:{to:"/about/reward"}},[e._v("\n        捐赠\n      ")])],2),e._ssrNode(" "),e._ssrNode('<div class="nav-right">',"</div>",[e.haveAuthToken?[e.currentUser?e._ssrNode('<div class="nav-avatar">',"</div>",[e._ssrNode("<button>","</button>",[n("v-img",{attrs:{src:e.currentUser.avatar,avatar:!0,width:"24"}})],1)]):e._ssrNode("<img"+e._ssrAttr("src",e.$resize("https://image.calibur.tv/default/user-avatar",{width:48}))+' class="faker-user-avatar">')]:e._ssrNode('<button class="sign-btn">\n        登录\n      </button>'),e._ssrNode(" "),e.homePage?e._e():[e._ssrNode('<button class="open-search-btn"><i class="iconfont icon-sousuo"></i></button> '),n("search-drawer",{model:{value:e.openSearchDrawer,callback:function(t){e.openSearchDrawer=t},expression:"openSearchDrawer"}})]],2)],2)])},[],!1,function(e){var t=n(108);t.__inject__&&t.__inject__(e)},null,"399833e3").exports,kt={name:"FeedbackDrawer",components:{VRadio:n(33).a},data:()=>({show:!1,options:[{label:"功能建议",value:1},{label:"遇到错误",value:2},{label:"资源报错",value:4},{label:"求资源",value:5},{label:"求偶像",value:6},{label:"其它问题",value:3}],selectedType:1,placeholder:"",content:"",preContent:""}),mounted(){this.$channel.$on("open-feedback",({type:e,desc:desc,placeholder:t}={})=>{this.selectedType=e||1,this.preContent=desc||"{?}",this.placeholder=t||"非常感谢您的反馈，请填写详细信息方便我们解决",this.show=!0})},methods:{async submitFeedback(){this.content.length?(await Object(Ye.c)(this,{type:this.selectedType,desc:this.preContent.replace("{?}",this.content),ua:navigator.userAgent}),this.$toast.success("反馈成功，感谢您的反馈！"),this.content="",this.show=!1):this.$toast.error("请先填写反馈信息！")}}};var Et=Object(et.a)(kt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-drawer",{staticClass:"feedback-drawer",attrs:{backdrop:!1,from:"bottom",size:"100%","header-text":"反馈"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"container"},[n("div",{staticClass:"desc"},[n("p",[e._v("详细信息")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.content,expression:"content",modifiers:{trim:!0}}],attrs:{placeholder:e.placeholder},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),n("v-radio",{attrs:{options:e.options,title:"反馈类型"},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}}),e._v(" "),n("button",{staticClass:"btn-submit",on:{click:e.submitFeedback}},[e._v("\n      提交\n    ")])],1)])},[],!1,function(e){var t=n(110);t.__inject__&&t.__inject__(e)},null,"42eb93f3").exports,St={name:"ReportDrawer",components:{UserReportForm:n(61).a},data:()=>({show:!1,title:"",id:0,model:0,isCreator:!1}),computed:{drawerTitle(){return this.title||"举报"}},mounted(){this.$channel.$on("open-report-drawer",({id:e,model:t,title:title,isCreator:n})=>{this.id=e,this.model=t,this.title=title,this.isCreator=n,this.show=!0})}};var Tt={name:"GiftModal",data:()=>({user:null,showDialog:!1,backdropId:0}),computed:{query(){return this.$route.query},paramsIsOK(){return!!(this.query.uid&&/^\d+$/.test(this.query.uid)&&this.query.time&&/^\d+$/.test(this.query.time)&&Date.now()<=1e3*this.query.time&&this.query.key===this.$md5(`${this.query.uid}-the-world-${this.query.time}`))},isGuest(){return!this.$store.state.haveAuthToken}},mounted(){this.paramsIsOK&&this.isGuest&&this.getGiftUser()},methods:{getGiftUser(){Object(Ye.f)(this,{id:this.query.uid}).then(data=>{this.user=data,this.showDialog=!0,this.backdropId=this.$backdrop.show({ele:this.$el,click:()=>{this.showDialog=!1,this.$backdrop.hide(this.backdropId)}})})},joinUs(){this.$channel.$emit("sign-in",!1)},abortYou(){this.showDialog=!1,this.$backdrop.hide(this.backdropId),this.$toast.success("哦，好吧...orz")}}};var Ct={name:"DefaultLayout",components:{vHeader:$t,FeedbackDrawer:Et,ReportDrawer:Object(et.a)(St,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-drawer",{staticClass:"report-drawer",attrs:{"header-text":e.drawerTitle,backdrop:!1,from:"bottom",size:"100%"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("user-report-form",{attrs:{id:e.id,model:e.model},on:{success:function(t){e.show=!1}}})],1)},[],!1,function(e){var t=n(112);t.__inject__&&t.__inject__(e)},null,"01460c22").exports,SignDrawer:pt,GiftModal:Object(et.a)(Tt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showDialog?n("div",{staticClass:"gift-modal"},[e.user?e._ssrNode('<div class="content">',"</div>",[e._ssrNode('<div class="avatar"><img'+e._ssrAttr("src",e.$resize(e.user.avatar,{width:200}))+'></div> <div class="tips"><p>'+e._ssrEscape("这个页面是「"+e._s(e.user.nickname)+"」分享给你的")+'</p> <p>在这里注册，你们都将会获得「团子」奖励</p> <p>团子可以用来看视频，为偶像应援</p> <p>或经过转化之后提现，1团子相当于1人民币</p> <p>更重要的是，calibur 的发展需要你</p> <p>请加入我们吧</p></div> <button class="join">\n      可以，我加入！\n    </button> <button class="abort">\n      但是，我拒绝！\n    </button> '),e._ssrNode('<p class="expired">',"</p>",[e._ssrNode("<span>该邀请将于</span> "),n("v-time",{model:{value:e.query.time,callback:function(t){e.$set(e.query,"time",t)},expression:"query.time"}}),e._ssrNode(" <span>失效</span>")],2)],2):e._e()]):e._e()},[],!1,function(e){var t=n(113);t.__inject__&&t.__inject__(e)},null,"5247d609").exports},mounted(){this.$store.dispatch("initAuth"),this.$store.dispatch("bangumi/getAllBangumi")}},It=Object(et.a)(Ct,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"layout-default"}},[t("v-header"),this._ssrNode(" "),t("nuxt",{staticClass:"main-view"}),this._ssrNode(" "),t("feedback-drawer"),this._ssrNode(" "),t("report-drawer"),this._ssrNode(" "),t("sign-drawer"),this._ssrNode(" "),t("gift-modal")],2)},[],!1,null,null,"e9d63a5c").exports,qt={name:"WriteLayout",components:{JsonContent:n(49).a},data:()=>({submitting:!1,preview:!1}),computed:{id(){return this.$route.params.id},user(){return this.$store.state.user},sections(){return this.$store.state.editor.sections},published(){return!!this.$store.state.editor.resource&&!!this.$store.state.editor.resource.published_at}},mounted(){this.$channel.$on("write-submit",e=>{this.submitting=e})},methods:{emitPublish(){this.$channel.$emit("write-publish")},emitSave(){this.$channel.$emit("write-save")},emitPreview(){this.preview=!0},emitDestroy(){this.$channel.$emit("write-destroy")},goHome(){this.$confirm("要离开写作界面吗?").then(async()=>{window.location=this.$alias.user(this.user.zone)}).catch(()=>{})},goIndex(){this.$confirm("要离开写作界面吗?").then(async()=>{window.location="/"}).catch(()=>{})}}};const Nt={_default:It,_write:Object(et.a)(qt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"layout-write"}},[e._ssrNode("<header>","</header>",[e._ssrNode('<button class="calibur"><img'+e._ssrAttr("src",e.$resize("https://image.calibur.tv/owner/logo-new/logo.png",{width:50}))+' alt="logo" class="logo"> <span class="slogan">calibur.tv</span></button> '),e.user?[e._ssrNode('<button class="avatar">',"</button>",[n("v-img",{attrs:{src:e.user.avatar,avatar:!0,width:24,height:24}})],1),e._ssrNode(' <button class="primary">\n        发布\n      </button> '+(e.published?"\x3c!----\x3e":'<button class="warning">\n        保存\n      </button>')+' <button class="success">\n        预览\n      </button>')]:e._e()],2),e._ssrNode(" "),[n("router-view",{staticClass:"main-view"}),e._ssrNode(" "),n("v-drawer",{staticClass:"preview-drawer",attrs:{footer:!1,"header-text":"预览","submit-text":"确认",from:"bottom",size:"100%"},model:{value:e.preview,callback:function(t){e.preview=t},expression:"preview"}},[e.preview?n("json-content",{attrs:{content:e.sections}}):e._e()],1)]],2)},[],!1,function(e){var t=n(119);t.__inject__&&t.__inject__(e)},null,"35f4a0a0").exports};var Ot={head:{titleTemplate:"calibur 二次元股市",htmlAttrs:{lang:"zh-CN"},bodyAttrs:{id:"calibur-tv"},meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"},{"http-equiv":"X-UA-Compatible",content:"IE=edge,chrome=1"},{name:"force-rendering",content:"webkit"},{hid:"description",name:"description",content:"calibur.tv - 二次元股市"},{hid:"keywords",name:"keywords",content:"calibur，C站, 二次元股市"}],link:[{rel:"shortcut icon",type:"image/x-icon",href:"https://image.calibur.tv/favicon.ico"}],script:[{innerHTML:'var _hmt=_hmt||[];(function (){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?c10304a2f70ee2ddf8d2818551d37a4b";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)})();',type:"text/javascript",async:!0},{innerHTML:"(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js'}else{bp.src='http://push.zhanzhang.baidu.com/push.js'}var s=document.getElementsByTagName(\"script\")[0];s.parentNode.insertBefore(bp,s)})();",type:"text/javascript",async:!0},{innerHTML:"(function(){var iOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;var ratio=window.devicePixelRatio||1;var screen={width:window.screen.width*ratio,height:window.screen.height*ratio};if(iOS&&screen.width===1125&&screen.height===2436){document.querySelector('meta[name=viewport]').content=document.querySelector('meta[name=viewport]').content+',viewport-fit=cover'}}());",type:"text/javascript"},{src:"//qzonestyle.gtimg.cn/qzone/qzact/common/share/share.js",type:"text/javascript"},{src:"//res2.wx.qq.com/open/js/jweixin-1.4.0.js",type:"text/javascript"}],__dangerouslyDisableSanitizers:"script",style:[]},render(e,t){const n=e("NuxtLoading",{ref:"loading"}),r=e(this.layout||"nuxt"),o=e("div",{domProps:{id:"__layout"},key:this.layoutName},[r]),c=e("transition",{props:{name:"layout",mode:"out-in"},on:{beforeEnter(e){window.$nuxt.$nextTick(()=>{window.$nuxt.$emit("triggerScroll")})}}},[o]);return e("div",{domProps:{id:"__nuxt"}},[n,c])},data:()=>({isOnline:!0,layout:null,layoutName:""}),beforeCreate(){c.a.util.defineReactive(this,"nuxt",this.$options.nuxt)},created(){c.a.prototype.$nuxt=this,this.error=this.nuxt.error},mounted(){this.$loading=this.$refs.loading},watch:{"nuxt.err":"errorChanged"},computed:{isOffline(){return!this.isOnline}},methods:{refreshOnlineStatus(){0},errorChanged(){this.nuxt.err&&this.$loading&&(this.$loading.fail&&this.$loading.fail(),this.$loading.finish&&this.$loading.finish())},setLayout(e){return e&&Nt["_"+e]||(e="default"),this.layoutName=e,this.layout=Nt["_"+e],this.layout},loadLayout:e=>(e&&Nt["_"+e]||(e="default"),Promise.resolve(Nt["_"+e]))},components:{NuxtLoading:_t}},jt=n(44),At=n.n(jt);c.a.use(At.a);const Mt=console,Rt=["state","getters","actions","mutations"];let Pt,Dt={};!function(){const e=(Pt=n(120)).keys().sort((e,t)=>{let n=e.split("/").length-t.split("/").length;return 0===n&&e.includes("/index.")?n=-1:0===n&&t.includes("/index.")&&(n=1),n}),t=e.find(path=>path.includes("./index."));if(t&&(Dt=Ut(t,{isRoot:!0})),"function"==typeof Dt)return Mt.warn("Classic mode for store/ is deprecated and will be removed in Nuxt 3.");Dt.modules=Dt.modules||{};for(const path of e){const e=path.replace(/^\.\//,"").replace(/\.(js|mjs|ts)$/,"");if("index"===e)continue;const t=e.split("/");let n=t[t.length-1];const r=Ut(path,{isState:"state"===n});if(Rt.includes(n)){const e=n;zt(Bt(Dt,t,{isProperty:!0}),r,e);continue}"index"===n&&(t.pop(),n=t[t.length-1]);const o=Bt(Dt,t);for(const e of Rt)zt(o,r[e],e)}}();const Lt=Dt instanceof Function?Dt:()=>new At.a.Store(Object.assign({strict:!1},Dt));function Ut(path,{isRoot:e=!1,isState:t=!1}={}){const n=Pt(path);let r=n.default||n;if(t&&"function"!=typeof r){Mt.warn(`${path} should export a method that returns an object`);const e=Object.assign({},r);return()=>e}if(e&&r.commit)throw new Error("[nuxt] store/"+path.replace("./","")+" should export a method that returns a Vuex instance.");if(e&&"function"!=typeof r&&(r=Object.assign({},r)),r.state&&"function"!=typeof r.state){Mt.warn(`'state' should be a method that returns an object in ${path}`);const e=Object.assign({},r.state);r=Object.assign({},r,{state:()=>e})}return r}function Bt(e,t,{isProperty:n=!1}={}){if(!t.length||n&&1===t.length)return e;const r=t.shift();return e.modules[r]=e.modules[r]||{},e.modules[r].namespaced=!0,e.modules[r].modules=e.modules[r].modules||{},Bt(e.modules[r],t,{isProperty:n})}function zt(e,t,n){t&&("state"===n?e.state=t||e.state:e[n]=Object.assign({},e[n],t))}var Ft=n(66),Gt=n.n(Ft);const Kt={setHeader(e,t,n="common"){for(let r of Array.isArray(n)?n:[n]){if(!t)return void delete this.defaults.headers[r][e];this.defaults.headers[r][e]=t}},setToken(e,t,n="common"){const r=e?(t?t+" ":"")+e:null;this.setHeader("Authorization",r,n)},onRequest(e){this.interceptors.request.use(t=>e(t)||t)},onResponse(e){this.interceptors.response.use(t=>e(t)||t)},onRequestError(e){this.interceptors.request.use(void 0,t=>e(t)||Promise.reject(t))},onResponseError(e){this.interceptors.response.use(void 0,t=>e(t)||Promise.reject(t))},onError(e){this.onRequestError(e),this.onResponseError(e)}};for(let e of["request","delete","get","head","options","post","put","patch"])Kt["$"+e]=function(){return this[e].apply(this,arguments).then(e=>e&&e.data)};var Wt=(e,t)=>{const n={baseURL:process.env._AXIOS_BASE_URL_||"http://localhost:3000/",headers:{common:{Accept:"application/json, text/plain, */*"},delete:{},get:{},head:{},post:{},put:{},patch:{}}};n.headers.common=e.req&&e.req.headers?Object.assign({},e.req.headers):{},delete n.headers.common.accept,delete n.headers.common.host,delete n.headers.common["cf-ray"],delete n.headers.common["cf-connecting-ip"],n.headers.common["Accept-Encoding"]="gzip, deflate";const r=Gt.a.create(n);(e=>{for(let t in Kt)e[t]=Kt[t].bind(e)})(r),e.$axios=r,t("axios",r)},Ht=n(67),Vt=n.n(Ht),Jt=n(34),Qt=({$axios:e,app:t})=>{const n="undefined"!=typeof window;e.setHeader("Accept","application/x.api.latest+json"),t.store.state.login?e.setToken(t.store.state.user.token,"Bearer"):e.setToken(Object(Jt.a)(n?"":t.context.req),"Bearer"),e.onRequest(e=>{e.baseURL=n?"https://api.calibur.tv/":"http://localhost/",e.timeout=1e4;const t=e.method.toLocaleUpperCase();n&&M.sentry.setRequestStack({url:e.url,params:"GET"===t?e.params:e.data,method:t})}),e.onResponse(e=>{n&&M.sentry.setResponseStack({url:e.request.responseURL,requestId:e.headers["x-request-id"],viaId:e.headers["x-via"]||"none",code:200});const t=e.headers.authorization;return t&&Object.assign(e.data.data,{token:t.split("Bearer ").pop()}),e.data}),e.onError(e=>{const t=(e=>/timeout of/.test(e.message)?(e.statusCode=504,e.message="网络请求超时，请稍候再试！",e):e.response?(e.statusCode=e.response.status,e.message=e.response.data.message,e):(e.statusCode=502,e.message="网络错误，请刷新网页重试！",e))(e);return n&&(M.sentry.setResponseStack({url:t.request&&t.request.responseURL||"unknown",code:t.statusCode,message:t.message}),/\/door\/refresh/.test(t.config.url)&&Vt.a.remove("JWT-TOKEN"),M.toast.error(t.message)),Promise.reject(t)})},Zt=(n(54),n(2),n(35)),Yt=n.n(Zt),Xt=(n(125),n(68)),en=n.n(Xt),tn=(n(126),n(69)),nn=n.n(tn),sn=(n(127),n(70)),rn=n.n(sn),on=(n(55),n(36)),an=n.n(on),cn=(n(56),n(37)),ln=n.n(cn),un=(n(128),n(71)),dn=n.n(un),pn=(n(88),n(46)),hn=n.n(pn),mn=(n(129),n(72)),fn=n.n(mn),gn=(n(57),n(38)),_n=n.n(gn),bn=(n(130),n(73)),vn=n.n(bn),yn=(n(131),n(74)),xn=n.n(yn),wn=(n(132),n(75)),$n=n.n(wn),kn=(n(133),n(76)),En=n.n(kn),Sn=(n(134),n(77)),Tn=n.n(Sn),Cn=(n(135),n(78)),In=n.n(Cn),qn=(n(136),n(79)),Nn=n.n(qn),On=(n(90),n(48)),jn=n.n(On),An=(n(58),n(39)),Mn=n.n(An),Rn=(n(137),n(80)),Pn=n.n(Rn),Dn=(n(138),n(81)),Ln=n.n(Dn),Un=(n(139),n(82)),Bn=n.n(Un),zn=(n(140),n(83)),Fn=n.n(zn),Gn=(n(141),n(84)),Kn=n.n(Gn),Wn=(n(89),n(47)),Hn=n.n(Wn),Vn=n(5),Jn=n.n(Vn);c.a.component(Jn.a.name,Jn.a),c.a.use(Hn.a),c.a.use(Kn.a),c.a.use(Fn.a),c.a.use(Bn.a),c.a.use(Ln.a),c.a.use(Pn.a),c.a.use(Mn.a),c.a.use(jn.a),c.a.use(Nn.a),c.a.use(In.a),c.a.use(Tn.a),c.a.use(En.a),c.a.use($n.a),c.a.use(xn.a),c.a.use(vn.a),c.a.use(_n.a),c.a.use(fn.a),c.a.use(hn.a),c.a.use(dn.a),c.a.use(ln.a),c.a.use(an.a),c.a.use(rn.a),c.a.use(nn.a),c.a.use(en.a),c.a.use(Yt.a);var Qn={index:"/",__query(e,t){if(!t)return e;let n="?";return Object.keys(t).forEach(e=>{n+=`${e}=${t[e]}&`}),`${e.split("?").shift()}${n.substring(0,n.length-1)}`},url(e,t){return this.__query(e,t)},user:(e,path="")=>`/user/${e}/${path}`,bangumi:(e,t="")=>`/bangumi/${e}/${t}`,video:e=>`/video/${e}`,image:e=>`/pin/${e}`,score:e=>`/review/${e}`,post(e,t){return this.__query(`/post/${e}`,t)},bangumiTag:e=>e?`/bangumi/tags?id=${e}`:"/bangumi/tags",bangumiNews:"/bangumi/news",bangumiTimeline:"/bangumi/timeline",postTrending:e=>`/post/trending/${e}`,world:e=>`/world/${e}`,editScore:e=>`/review/create?id=${e}`,question:e=>`/qaq/${e}`,answer:e=>`/soga/${e}`,roleTrending:"/role/trending",createScore:"/review/create",cartoonRole:e=>`/role/${e}`},Zn={shortenNumber:e=>e>1e3?`${Math.floor(e/1e3*10)/10}k`:e,timeLong(time){const e=/^\d+$/.test(time)?13===time.toString().length?parseInt((time-0)/1e3,10):1e3*time:time.replace(/-/g,"/"),t=new Date(e);return`${t.getFullYear()}-${`0${t.getMonth()+1}`.substr(-2)}-${`0${t.getDate()}`.substr(-2)} ${`0${t.getHours()}`.substr(-2)}:${`0${t.getMinutes()}`.substr(-2)}:${`0${t.getSeconds()}`.substr(-2)}`},throttle(e,t,n){let r,o,c,l=null,d=0;n||(n={});let h=function(){d=!1===n.leading?0:Date.now(),l=null,c=e.apply(r,o),l||(r=o=null)};return function(){let m=Date.now();d||!1!==n.leading||(d=m);let f=t-(m-d);return r=this,o=arguments,f<=0||f>t?(l&&(clearTimeout(l),l=null),d=m,c=e.apply(r,o),l||(r=o=null)):l||!1===n.trailing||(l=setTimeout(h,f)),c}},createFileName:({userId:e,type:t,file:n})=>`user/${e}/${t}/${(new Date).getTime()}-${Math.random().toString(36).substring(3,6)}.${n.type.split("/").pop()}`,getOffsetTop(e){let t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t},shuffle(e){for(let i=e.length;i;i--){const t=Math.floor(Math.random()*i);[e[i-1],e[t]]=[e[t],e[i-1]]}return e}},Yn=(e,t={})=>{if(!e)return"";if(/imageMogr2/.test(e))return e;const link=/^http/.test(e)?e:`https://image.calibur.tv/${e}`,n=t.format?`/format/${t.format}`:(()=>{if("undefined"==typeof window)return!1;if(void 0!==window.supportWebP)return window.supportWebP;const e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){const t=0===e.toDataURL("image/webp").indexOf("data:image/webp");return window.supportWebP=t,t}return!1})()?"/format/webp":"",r=void 0===t.mode?1:t.mode;if(1===r&&!t.width||!t.width&&!t.height)return`${link}?imageMogr2/auto-orient/strip${n}`;let o,c;return 1===r?(o=`/w/${t.width}`,c=t.height?`/h/${t.height}`:`/h/${t.width}`):(o=t.width?`/w/${t.width}`:"",c=t.height?`/h/${t.height}`:""),`${link}?imageMogr2/auto-orient/strip|imageView2/${r}${o}${c}${n}`},Xn=n(85),es=n.n(Xn);c.a.use({install(e){e.prototype.$md5=es.a,e.prototype.$alias=Qn,e.prototype.$utils=Zn,e.prototype.$resize=Yn}});var ts={name:"not-ssr",props:["placeholder"],data:()=>({canRender:!1}),mounted(){this.canRender=!0},render(e){return this.canRender?this.$slots.default&&this.$slots.default[0]:e("div",{class:["no-ssr-placeholder"]},this.$slots.placeholder||this.placeholder)}},ns=n(45),ss=n.n(ns);const is=ss()();var rs={name:"v-time",props:{value:{default:parseInt(Date.now()/1e3,10).toString()}},render:function(e){return e("time",{attrs:{datetime:this.$utils.timeLong(this.value)}})},mounted(){is.render(this.$el,"zh_CN")},beforeDestroy(){ss.a.cancel(this.$el)}},os=n(4),as={name:"MoreBtn",props:{noMore:{type:Boolean,required:!0},loading:{type:Boolean,required:!0},auto:{type:Boolean,default:!1},length:{type:Number,default:1}},mounted(){if(this.auto&&!this.noMore){const e=os.a.on(document,"scroll",this.$utils.throttle(()=>{os.a.checkInView(this.$el)&&this.$emit("fetch"),this.noMore&&os.a.off(e)},200),!1)}},methods:{handleFetch(){this.loading||this.noMore||this.$emit("fetch")}}};var cs=Object(et.a)(as,function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"nomore-wraper"},[e.noMore?e._ssrNode('<div class="nomore">',"</div>",[e.length?[e._ssrNode("\n      没有更多了，休息一下吧\n    ")]:e.loading?e._e():e._ssrNode('<div class="nothing">',"</div>",[e._ssrNode("<img"+e._ssrAttr("src",n(87))+' alt="no-content"> <p>还没有内容</p> '),e._t("default")],2)],2):e._ssrNode(e.auto?e.loading?'<div class="loadmore"><div class="rolling"></div></div>':'<span style="line-height: 44px">点击加载更多</span>':'<button class="loadmore">'+(e.loading?'<div class="rolling"></div>':"<span>点击加载更多</span>")+"</button>")],2)},[],!1,function(e){var t=n(142);t.__inject__&&t.__inject__(e)},null,"69875573").exports,ls={name:"VDrawer",props:{value:{type:Boolean,default:!1},id:{type:String,default:""},from:{type:String,default:"right",validator:e=>~["left","right","top","bottom"].indexOf(e)},size:{type:String,default:"70%"},headerText:{type:String,default:""},backdrop:{type:Boolean,default:!0},submitText:{type:String,default:""}},data(){return{show:this.value,pos:0,backdropId:0}},computed:{position(){const style={};return"left"===this.from||"right"===this.from?(style.top=0,style.height="100%",style.width=this.size):(style.left=0,style.width="100%",style.height=this.size),style[this.from]=0,style}},watch:{value(e){e?this.open():this.close(),this.show=e},show(e){this.$emit("input",e)},$route(){this.close()}},mounted(){this.id&&(this.$channel.$on(`drawer-open-${this.id}`,this.open),this.$channel.$on(`drawer-close-${this.id}`,this.close))},beforeDestroy(){this.id&&(this.$channel.$off(`drawer-open-${this.id}`),this.$channel.$off(`drawer-close-${this.id}`))},methods:{open(){this.show||(this.pos=window.scrollY,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=0,document.body.style.bottom=0,document.body.style.right=0,document.body.style.left=0,document.body.style.height=`${window.innerHeight}px`,this.show=!0,window.__closeImageLazy__=!0,this.id&&this.$channel.$emit(`drawer-open-event-${this.id}`),this.backdrop&&(this.backdropId=this.$backdrop.show({ele:this.$el,click:this.close})))},close(){document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.bottom="",document.body.style.right="",document.body.style.left="",document.body.style.height="",this.show&&(window.scrollTo(0,this.pos),this.show=!1,window.__closeImageLazy__=!1,this.backdrop&&this.$backdrop.hide(this.backdropId),this.id&&this.$channel.$emit(`drawer-close-event-${this.id}`),this.$emit("cancel"))},submit(){this.close(),this.$nextTick(()=>{this.$emit("submit")})}}};var us=Object(et.a)(ls,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("not-ssr",[n("transition",{attrs:{name:"fade-"+e.from}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"drawer",style:e.position},[e.headerText?n("header",{staticClass:"drawer-header"},[n("button",{staticClass:"close-btn",on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.close(t)}}},[e._v("\n          关闭\n        ")]),e._v(" "),n("h3",{staticClass:"oneline",domProps:{textContent:e._s(e.headerText)}}),e._v(" "),e.submitText?n("button",{staticClass:"submit-btn",domProps:{textContent:e._s(e.submitText)},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.submit(t)}}}):e._e()]):e._e(),e._v(" "),e._t("default")],2)])],1)},[],!1,function(e){var t=n(143);t.__inject__&&t.__inject__(e)},"01f87a34","366e8e16").exports,ds={name:"VImg",props:{src:{required:!0,type:String,default:""},width:{type:[Number,String],default:0},height:{type:[Number,String],default:0},full:{type:Boolean,default:!1},mime:{type:String,default:""},lazy:{type:Boolean,default:!0},blur:{type:Boolean,default:!1},poster:{type:Boolean,default:!1},avatar:{type:Boolean,default:!1}},data:()=>({loaded:!1,error:!1,toggleClick:!1,displayGifMask:!1,retrying:!1,containerWidth:0,placeholderImage:"",errorPlaceholder:"",errorMessage:"",retryMessage:"",heightLimit:0}),computed:{blockModeWrapStyle(){return{width:`${this.width}px`}},blockModeClasses(){const e=[];return this.error&&e.push(this.$style.retry),this.poster&&e.pust(this.$style.poster),this.loaded||(this.gifNeedClickToLoad?e.push(this.$style.cssGif):this.blur?e.push(this.$style.cssBlur):e.push(this.$style.cssFade)),e},computeContainerHeight(){return this.$isServer?0:this.width>this.containerWidth?parseInt(this.height/this.width*this.containerWidth,10):this.height},blockModeShimPadding(){return{paddingTop:`${100*parseFloat(this.height/this.width).toFixed(3)}%`}},computePlaceholder(){if(!this.blur)return this.placeholderImage;if(this.full){const{width:e,height:t}=this.blockModeImageDisplaySize,n=this.gifNeedClickToLoad?.5:5;return this.$resize(this.src,{width:parseInt(e/n),height:parseInt(t/n),format:"png"})}return this.$resize(this.src,"auto"===this.width?{height:parseInt(this.height/5),mode:2,format:"png"}:{width:parseInt(this.inlineModeImageDisplayWidth/5),height:parseInt(this.height/5),format:"png"})},inlineModeImageDisplayWidth(){const e=+this.width.toString().replace("px","").replace("%","");return parseInt(/%$/.test(this.width)?this.containerWidth/50*e:2*e,10)},inlineModeWrapStyle(){return{width:this.width?this.convertSizeToPx(this.width):"auto",height:this.height?this.convertSizeToPx(this.height):"auto"}},inlineImageStyle(){if("auto"===this.width)return{height:"100%",width:"auto"};const e=this.width>this.height;return this.width&&this.height?{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","-webkit-transform":"translate(-50%, -50%)",width:e?"auto":"100%",height:e?"100%":"auto"}:{}},gifNeedClickToLoad(){return!(!this.mime||!/gif/i.test(this.mime))},blockModeImageDisplaySize(){let e,t;return this.width>2*this.containerWidth?(e=2*this.containerWidth,t=2*this.computeContainerHeight):(e=this.width,t=this.height),e>9999&&(t=parseInt(9999/e*t,10),e=9999),t>9999&&(e=parseInt(9999/t*e,10),t=9999),{width:e,height:t}},blockModeImageSrc(){return this.$resize(this.src,this.blockModeImageDisplaySize)},inlineModeImageSrc(){return this.$resize(this.src,"auto"===this.width?{height:2*+this.height,mode:2}:{width:this.inlineModeImageDisplayWidth,height:2*+this.height})}},mounted(){this.containerWidth=this.$el.parentNode.offsetWidth,this.gifNeedClickToLoad?this.displayGifMask=!0:this.$nextTick(()=>{!this.lazy||window.__closeImageLazy__||os.a.checkInView(this.$el)?this.loaded=!0:this.bindLazyEvent()})},methods:{bindLazyEvent(){const e=os.a.on(document,"scroll",this.$utils.throttle(()=>{os.a.checkInView(this.$el)&&(this.loaded=!0,os.a.off(e))},200),!1)},bindRetryEvent(){const e=os.a.on(this.$el,"click",t=>{this.loaded=!0,this.retrying=!0,this.error=!1,os.a.off(e),t.stopPropagation()},!1)},convertSizeToPx:e=>/auto/.test(e)?e:/px$/.test(e)?e:/%$/.test(e)?e:`${e}px`,handleImageLoadSuccess(){this.error=!1,this.retrying=!1,this.toggleClick&&(this.toggleClick=!1,this.displayGifMask=!1,this.bindStopGifEvent())},bindStopGifEvent(){const e=os.a.on(this.$el,"click",t=>{this.displayGifMask=!0,this.loaded=!1,os.a.off(e),t.stopPropagation()},!1)},handleImageLoadError(){this.error=!0,this.retrying=!1,this.full&&this.bindRetryEvent()},clickToLoadGIF(){this.toggleClick||(this.toggleClick=!0,this.loaded=!0)}}};var ps=Object(et.a)(ds,function(){var e,t,n=this,r=n.$createElement,o=n._self._c||r;return n.full?o("div",{class:[n.$style.block,n.blockModeClasses],style:n.blockModeWrapStyle},[n._ssrNode("<div"+n._ssrClass(null,n.$style.paddingShim)+n._ssrStyle(null,n.blockModeShimPadding,null)+"></div> <div"+n._ssrClass(null,n.$style.imageWrap)+">"+(n.error?"\x3c!----\x3e":"<img"+n._ssrAttr("src",n.$isServer?n.placeholderImage:n.loaded?n.blockModeImageSrc:n.computePlaceholder)+">")+"</div> "+(n.error?"<span"+n._ssrClass(null,n.$style.message)+">"+n._ssrEscape(n._s(n.errorMessage))+"</span>":"\x3c!----\x3e")+" "+(n.retrying?"<span"+n._ssrClass(null,n.$style.message)+">"+n._ssrEscape(n._s(n.retryMessage))+"</span>":"\x3c!----\x3e")+" "),o("transition",{attrs:{name:"img-zoom"}},[n.displayGifMask?o("div",{class:n.$style.loadGif,on:{click:n.clickToLoadGIF}},[o("span",{class:(e={},e[n.$style.rolling]=n.toggleClick,e)},[n._v("GIF")])]):n._e()])],2):o("span",{class:[n.$style.inline,(t={},t[n.$style.cssFade]=!n.loaded&&!n.blur,t[n.$style.cssBlur]=!n.loaded&&n.blur,t[n.$style.avatar]=n.avatar,t[n.$style.poster]=n.poster,t)],style:n.inlineModeWrapStyle},[n._ssrNode("<div"+n._ssrClass(null,n.$style.imageWrap)+"><img"+n._ssrAttr("src",n.error?n.errorPlaceholder:n.$isServer?"":n.loaded?n.inlineModeImageSrc:n.computePlaceholder)+n._ssrStyle(null,n.inlineImageStyle,null)+"></div>")])},[],!1,function(e){var t=n(144);t.__inject__&&t.__inject__(e),this.$style=t.locals||t;var r=n(145);r.__inject__&&r.__inject__(e)},null,"00a6b032").exports;const hs="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";ps.install=function(e,t={}){e.component(ps.name,{extends:ps,data:()=>({heightLimit:t.heightLimit||0,placeholderImage:t.placeholderImage||hs,errorPlaceholder:t.errorPlaceholder||hs,errorMessage:t.errorMessage||"图片加载失败，请点击重试",retryMessage:t.retryMessage||"加载中..."})})};var ms=ps,fs={name:"VLazy",props:{timeout:{type:Number,default:0},scale:{type:Number,default:1.5}},data:()=>({init:!1}),watch:{$route(){this.init=!1,this.$nextTick(()=>{this.renderComp()})}},mounted(){this.timeout?setTimeout(()=>{this.init=!0},this.timeout):this.renderComp()},methods:{renderComp(){if(os.a.checkInView(this.$el,this.scale))this.init=!0;else{const e=os.a.on(document,["scroll"],this.$utils.throttle(()=>{(os.a.checkInView(this.$el,this.scale)||this.init)&&(this.init=!0,os.a.off(e))},200))}}}},gs=Object(et.a)(fs,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("no-ssr",[this.init?this._t("default"):t("div",{staticClass:"v-lazy-shim"})],2)],1)},[],!1,null,null,"13b09ad6").exports,_s=n(86),bs=n.n(_s);c.a.use(bs.a),c.a.use(Yt.a),c.a.use(ln.a),c.a.use(an.a),c.a.use(Mn.a),c.a.use(_n.a),c.a.use(ms,{}),c.a.component(gs.name,gs),c.a.component(Jn.a.name,Jn.a),c.a.component(ts.name,ts),c.a.component(rs.name,rs),c.a.component(cs.name,cs),c.a.component(us.name,us);n(42);c.a.component(Ve.name,Ve),c.a.component(Je.name,Je),c.a.component("NChild",Je),c.a.component(ft.name,ft),c.a.use(j.a,{keyName:"head",attribute:"data-n-head",ssrAttribute:"data-n-head-ssr",tagIDKeyName:"hid"});const vs={name:"page",mode:"out-in",appear:!1,appearClass:"appear",appearActiveClass:"appear-active",appearToClass:"appear-to"};async function ys(e){const t=await new R.a({mode:"history",base:"/",linkActiveClass:"nuxt-link-active",linkExactActiveClass:"nuxt-link-exact-active",scrollBehavior:We,routes:[{path:"/bangumi",component:P,props:!1,name:"bangumi",children:[{path:"news",component:D,props:!1,name:"bangumi-index-news"},{path:"timeline",component:L,props:!1,name:"bangumi-index-timeline"},{path:"tags/:id?",component:U,props:!1,name:"bangumi-index-tags-id"}]},{path:"/search",component:B,props:!1,name:"search"},{path:"/world",component:z,props:!1,children:[{path:"",component:F,props:!1,name:"world"},{path:"pins",component:G,props:!1,name:"world-pins"},{path:"post",component:K,props:!1,name:"world-post"},{path:"qaq",component:W,props:!1,name:"world-qaq"},{path:"review",component:H,props:!1,name:"world-review"}]},{path:"/about/hello",component:V,props:!1,name:"about-hello"},{path:"/about/reward",component:J,props:!1,name:"about-reward"},{path:"/app/download",component:Q,props:!1,name:"app-download"},{path:"/app/feedback",component:Z,props:!1,name:"app-feedback"},{path:"/app/handbook",component:Y,props:!1,name:"app-handbook"},{path:"/app/invite",component:X,props:!1,name:"app-invite"},{path:"/app/report",component:ee,props:!1,name:"app-report"},{path:"/callback/auth-error",component:te,props:!1,name:"callback-auth-error"},{path:"/callback/auth-redirect",component:ne,props:!1,name:"callback-auth-redirect"},{path:"/callback/auth-success",component:se,props:!1,name:"callback-auth-success"},{path:"/error/404",component:ie,props:!1,name:"error-404"},{path:"/my/invite",component:re,props:!1,name:"my-invite"},{path:"/my/notification",component:oe,props:!1,name:"my-notification"},{path:"/my/setting",component:ae,props:!1,name:"my-setting"},{path:"/review/create",component:ce,props:!1,name:"review-create"},{path:"/role/trending",component:le,props:!1,children:[{path:"",component:ue,props:!1,name:"role-trending"},{path:"hall",component:de,props:!1,name:"role-trending-hall"},{path:"intro",component:pe,props:!1,name:"role-trending-intro"},{path:"listed",component:he,props:!1,name:"role-trending-listed"},{path:"mine",component:me,props:!1,name:"role-trending-mine"},{path:"newbie",component:fe,props:!1,name:"role-trending-newbie"},{path:"product",component:ge,props:!1,name:"role-trending-product"}]},{path:"/about/invite/:id?",component:_e,props:!0,name:"about-invite-id"},{path:"/app/notice/:id?",component:be,props:!0,name:"app-notice-id"},{path:"/bangumi/:id",component:ve,props:!0,children:[{path:"",component:ye,props:!0,name:"bangumi-id"},{path:"cartoon",component:xe,props:!0,name:"bangumi-id-cartoon"},{path:"pins",component:we,props:!0,name:"bangumi-id-pins"},{path:"post",component:$e,props:!0,name:"bangumi-id-post"},{path:"qaq",component:ke,props:!0,name:"bangumi-id-qaq"},{path:"review",component:Ee,props:!0,name:"bangumi-id-review"},{path:"role",component:Se,props:!0,name:"bangumi-id-role"},{path:"video",component:Te,props:!0,name:"bangumi-id-video"}]},{path:"/pin/:id?",component:Ce,props:!0,name:"pin-id"},{path:"/post/:id?",component:Ie,props:!0,name:"post-id"},{path:"/qaq/:id?",component:qe,props:!0,name:"qaq-id"},{path:"/review/:id?",component:Ne,props:!0,name:"review-id"},{path:"/role/:id?",component:Oe,props:!0,name:"role-id"},{path:"/soga/:id?",component:je,props:!0,name:"soga-id"},{path:"/user/:zone?",component:Ae,props:!0,children:[{path:"",component:Me,props:!0,name:"user-zone"},{path:"bangumi",component:Re,props:!0,name:"user-zone-bangumi"},{path:"draft",component:Pe,props:!0,name:"user-zone-draft"},{path:"mark",component:De,props:!0,name:"user-zone-mark"},{path:"pins",component:Le,props:!0,name:"user-zone-pins"},{path:"post",component:Ue,props:!0,name:"user-zone-post"},{path:"qaq",component:Be,props:!0,name:"user-zone-qaq"},{path:"review",component:ze,props:!0,name:"user-zone-review"},{path:"role",component:Fe,props:!0,name:"user-zone-role"}]},{path:"/video/:id?",component:Ge,props:!0,name:"video-id"},{path:"/",component:Ke,props:!1,name:"index"},{path:"*",component:ie,name:"error-fallback"}],fallback:!1}),n=Lt(e);n.$router=t;const r=n.registerModule;n.registerModule=((path,e,t)=>r.call(n,path,e,Object.assign({preserveState:!1},t)));const o={router:t,store:n,nuxt:{defaultTransition:vs,transitions:[vs],setTransitions(e){return Array.isArray(e)||(e=[e]),e=e.map(e=>e=e?"string"==typeof e?Object.assign({},vs,{name:e}):Object.assign({},vs,e):vs),this.$options.nuxt.transitions=e,e},err:null,dateErr:null,error(t){t=t||null,o.context._errored=!!t,t=t?function(e){let t;if(e.message||"string"==typeof e)t=e.message||e;else try{t=JSON.stringify(e,null,2)}catch(n){t=`[${e.constructor.name}]`}return{...e,message:t,statusCode:e.statusCode||e.status||e.response&&e.response.status||500}}(t):null;const n=this.nuxt||this.$options.nuxt;return n.dateErr=Date.now(),n.err=t,e&&(e.nuxt.error=t),t}},...Ot};n.app=o;const l=e?e.next:e=>o.router.push(e);let d;if(e)d=t.resolve(e.url).route;else{const path=function(base,e){let path=window.location.pathname;return"hash"===e?window.location.hash.replace(/^#\//,""):(base&&0===path.indexOf(base)&&(path=path.slice(base.length)),decodeURI(path||"/")+window.location.search+window.location.hash)}(t.options.base);d=t.resolve(path).route}await $(o,{route:d,next:l,error:o.nuxt.error.bind(o),store:n,payload:e?e.payload:void 0,req:e?e.req:void 0,res:e?e.res:void 0,beforeRenderFns:e?e.beforeRenderFns:void 0});const h=function(e,t){if(!e)throw new Error("inject(key, value) has no key provided");if(void 0===t)throw new Error("inject(key, value) has no value provided");o[e="$"+e]=t,n[e]=o[e];const r="__nuxt_"+e+"_installed__";c.a[r]||(c.a[r]=!0,c.a.use(()=>{c.a.prototype.hasOwnProperty(e)||Object.defineProperty(c.a.prototype,e,{get(){return this.$root.$options[e]}})}))};return"function"==typeof Wt&&await Wt(o.context,h),"function"==typeof Qt&&await Qt(o.context,h),e&&e.url&&await new Promise((n,r)=>{t.push(e.url,n,()=>{const r=t.afterEach(async(t,c,l)=>{e.url=t.fullPath,o.context.route=await w(t),o.context.params=t.params||{},o.context.query=t.query||{},r(),n()})})}),{app:o,store:n,router:t}}var xs={name:"NuxtLink",extends:c.a.component("RouterLink"),props:{noPrefetch:{type:Boolean,default:!1}}};c.a.component(xs.name,xs),c.a.component("NLink",xs);const ws=n(146)("nuxt:render");ws.color=4;const $s=()=>new c.a({render:e=>e("div")}),ks=e=>t=>{if(e.redirected=t,!e.res)return void(e.nuxt.serverRendered=!1);t.query=Object(r.stringify)(t.query),t.path=t.path+(t.query?"?"+t.query:"");t.path.startsWith("http"),t.path!==e.url?(e.res.writeHead(t.status,{Location:t.path}),e.res.end()):e.redirected=!1};t.default=(async e=>{e.redirected=!1,e.next=ks(e),e.beforeRenderFns=[],e.nuxt={layout:"default",data:[],error:null,state:null,serverRendered:!0};const{app:t,router:n,store:r}=await ys(e),o=new c.a(t);e.meta=o.$meta(),e.asyncData={};const l=async()=>{await Promise.all(e.beforeRenderFns.map(t=>E(t,{Components:m,nuxtState:e.nuxt}))),e.nuxt.state=r.state},d=async()=>{const n="function"==typeof mt.layout?mt.layout(t.context):mt.layout;return e.nuxt.layout=n||"default",await o.loadLayout(n),o.setLayout(n),await l(),o},h=()=>(t.context.error({statusCode:404,path:e.url,message:"This page could not be found"}),d()),m=y(n.match(e.url));if(r._actions&&r._actions.nuxtServerInit)try{await r.dispatch("nuxtServerInit",t.context)}catch(e){throw ws("error occurred when calling nuxtServerInit: ",e.message),e}if(e.redirected)return $s();if(e.nuxt.error)return d();let _=[];if(_=_.map(e=>"function"==typeof e?e:("function"!=typeof f[e]&&t.context.error({statusCode:500,message:"Unknown middleware "+e}),f[e])),await k(_,t.context),e.redirected)return $s();if(e.nuxt.error)return d();let x=m.length?m[0].options.layout:mt.layout;if("function"==typeof x&&(x=x(t.context)),await o.loadLayout(x),e.nuxt.error)return d();if(x=o.setLayout(x),e.nuxt.layout=o.layoutName,_=[],(x=v(x)).options.middleware&&(_=_.concat(x.options.middleware)),m.forEach(e=>{e.options.middleware&&(_=_.concat(e.options.middleware))}),_=_.map(e=>"function"==typeof e?e:("function"!=typeof f[e]&&t.context.error({statusCode:500,message:"Unknown middleware "+e}),f[e])),await k(_,t.context),e.redirected)return $s();if(e.nuxt.error)return d();let w=!0;try{for(const e of m)if("function"==typeof e.options.validate&&!(w=await e.options.validate(t.context)))break}catch(e){return t.context.error({statusCode:e.statusCode||"500",message:e.message}),d()}if(!w)return e._generate&&(e.nuxt.serverRendered=!1),h();if(!m.length)return h();const $=await Promise.all(m.map(n=>{const r=[];if(n.options.asyncData&&"function"==typeof n.options.asyncData){const o=E(n.options.asyncData,t.context);o.then(t=>(e.asyncData[n.cid]=t,function(e,t){if(!t&&e.options.__hasNuxtData)return;const n=e.options._originDataFn||e.options.data||function(){return{}};e.options._originDataFn=n,e.options.data=function(){const data=n.call(this);return this.$ssrContext&&(t=this.$ssrContext.asyncData[e.cid]),{...data,...t}},e.options.__hasNuxtData=!0,e._Ctor&&e._Ctor.options&&(e._Ctor.options.data=e.options.data)}(n),t)),r.push(o)}else r.push(null);return n.options.fetch?r.push(n.options.fetch(t.context)):r.push(null),Promise.all(r)}));return e.nuxt.data=$.map(e=>e[0]||{}),e.redirected?$s():e.nuxt.error?d():(await l(),o)})},function(e,t,n){"use strict";n.r(t);const r=(e,{q:q,type:t,page:n})=>e.$axios.$get("search/new",{params:{q:q,type:t,page:n}});n.d(t,"state",function(){return c}),n.d(t,"mutations",function(){return l}),n.d(t,"actions",function(){return d});const o={all:"综合",bangumi:"番剧",video:"视频",post:"帖子",score:"漫评",role:"偶像",user:"用户"},c=()=>({tabs:o,lastSearchKeywords:"",resource:Object.assign({},...Object.keys(o).map(e=>({[e]:{list:[],page:0,total:0,noMore:!1,loading:!1}}))),bangumis:[]}),l={RESET_DATA(e){e.lastSearchKeywords="",e.resource=Object.assign({},...Object.keys(o).map(e=>({[e]:{list:[],page:0,total:0,noMore:!1,loading:!1}})))},SET_LOADING(e,{type:t,value:n}){e.resource[t].loading=n},SET_RESOURCE(e,{type:t,q:q,data:data}){e.lastSearchKeywords=q,e.resource[t].list=e.resource[t].list.concat(data.list),e.resource[t].page=e.resource[t].page+1,e.resource[t].noMore=data.noMore,e.resource[t].total=data.total,e.resource[t].loading=!1},SET_BANGUMIS(e,data){e.bangumis=data}},d={async fetchData({state:e,commit:t},{q:q,type:n}){if(!q)return;e.lastSearchKeywords&&e.lastSearchKeywords!==q&&t("RESET_DATA");const o=e.resource[n];o.list.length||o.noMore||o.loading||(t("SET_LOADING",{type:n,value:!0}),t("SET_RESOURCE",{q:q,type:n,data:await r(this,{q:q,type:n,page:o.page})}))},async fetchMore({state:e,commit:t},{type:n}){const q=e.lastSearchKeywords;if(!q)return;const o=e.resource[n];o.noMore||o.loading||(t("SET_LOADING",{type:n,value:!0}),t("SET_RESOURCE",{q:q,type:n,data:await r(this,{q:q,type:n,page:o.page})}))}}},function(e,t,n){"use strict";n.r(t);var r=n(65),o=n.n(r);n.d(t,"state",function(){return c}),n.d(t,"mutations",function(){return l}),n.d(t,"actions",function(){return d}),n.d(t,"getters",function(){return h});const c=()=>({type:"",sort:"desc",fetchId:0,list:[],total:0,noMore:!1,submitting:!1,id:0}),l={RESET_STATE(e,{type:t}){e.type=t,e.sort="post"===t?"asc":"desc",e.fetchId=0,e.list=[],e.total=0,e.noMore=!1,e.submitting=!1,e.id=0},INIT_FETCH_TYPE(e,{type:t}){e.type=t,"post"===t&&(e.sort="asc")},SET_MAIN_COMMENTS(e,{comments:t,seeReplyId:n,id:r}){if(e.id=+r,!t.list.length)return e.noMore=t.noMore,void(e.total=t.total);const c=t.list.map(e=>{const t=e.comments.list,n=t.length,r=Object.assign(e.comments,{maxId:n?t[n-1].id:0});return Object.assign(e,{comments:r})});e.fetchId=c[c.length-1].id,!e.list.length&&n&&(e.fetchId=c.map(e=>e.id).filter(e=>e!==parseInt(n,10)).pop());const l=c.map(e=>e.id),d=e.list,h=!!l.filter(e=>-1===d.map(e=>e.id).indexOf(e)).length;e.list=e.list.filter(e=>-1===l.indexOf(e.id)),e.list=o()(e.list.concat(c),"id",e.sort),e.noMore=!h||t.noMore,e.total=h?t.total:e.list.length},SET_SUB_COMMENTS(e,{comments:t,id:n}){let r=null,o=0;if(e.list.forEach((e,t)=>{e.id===n&&(r=e,o=t)}),!r)return;e.list[o].comments.maxId=t.list[t.list.length-1].id;const c=t.list.map(e=>e.id),l=r.comments.list,d=!!c.filter(e=>-1===l.map(e=>e.id).indexOf(e)).length;e.list[o].comments.list=l.filter(e=>-1===c.indexOf(e.id)),e.list[o].comments.list=e.list[o].comments.list.concat(t.list),e.list[o].comments.noMore=!d||t.noMore,e.list[o].comments.total=d?t.total:e.list[o].comments.list.length},CREATE_MAIN_COMMENT(e,t){"asc"===e.sort?e.list.push(t):e.list.unshift(t),e.total=e.total+1},CREATE_SUB_COMMENT(e,{id:t,comment:n}){e.list.forEach((r,o)=>{r.id===t&&(e.list[o].comments.list.push(n),e.list[o].comments.total=e.list[o].comments.total+1)})},SET_SUBMITTING(e,{result:t}){e.submitting=t},DELETE_SUB_COMMENT(e,{parentId:t,id:n}){e.list.forEach((r,o)=>{r.id===t&&r.comments.list.forEach((t,r)=>{t.id===n&&(e.list[o].comments.list.splice(r,1),e.list[o].comments.total=e.list[o].comments.total-1)})})},DELETE_MAIN_COMMENT(e,{id:t}){e.list.forEach((n,r)=>{n.id===t&&(e.list.splice(r,1),e.total=e.total-1)})},TOGGLE_LIKE_SUB_COMMENT(e,{id:t,parentId:n}){e.list.forEach((r,o)=>{r.id===n&&r.comments.list.forEach((n,r)=>{if(n.id===t){const t=!e.list[o].comments[r].liked;e.list[o].comments[r].liked=t,e.list[o].comments[r].like_count=e.list[o].comments[r].like_count+(t?1:-1)}})})},TOGGLE_LIKE_MAIN_COMMENT(e,{id:t}){e.list.forEach((n,r)=>{if(n.id===t){const t=!e.list[r].liked;e.list[r].liked=t,e.list[r].like_count=e.list[r].like_count+(t?1:-1)}})}},d={async getMainComments({state:e,commit:t},{type:n,id:r,onlySeeMaster:o,seeReplyId:c,firstRequest:l}){if(e.type)if(e.type===n)if(e.id!==+r)t("RESET_STATE",{type:n});else{if(e.noMore)return;if(e.list.length&&l)return;l&&t("RESET_STATE",{type:n})}else t("RESET_STATE",{type:n});else t("INIT_FETCH_TYPE",{type:n});const d=await((e,{type:t,id:n,fetchId:r,onlySeeMaster:o,seeReplyId:c})=>e.$axios.$get("comment/main/list",{params:{fetchId:r,onlySeeMaster:o,seeReplyId:c,type:t,id:n}}))(this,{type:n,id:r,onlySeeMaster:o,seeReplyId:c,fetchId:e.fetchId});d&&t("SET_MAIN_COMMENTS",{comments:d,seeReplyId:c,id:r})},async getSubComments({state:e,commit:t},{type:n,id:r}){const o=e.list.filter(e=>e.id===r)[0].comments;o.noMore||t("SET_SUB_COMMENTS",{comments:await((e,{type:t,id:n,maxId:r})=>e.$axios.$get("comment/sub/list",{params:{maxId:r,type:t,id:n}}))(this,{type:n,id:r,maxId:o.maxId}),id:r})},async createMainComment({commit:e},{images:t,content:content,type:n,id:r}){const o=await((e,{type:t,id:n,content:content,images:r})=>e.$axios.$post("comment/main/create",{content:content,images:r,type:t,id:n}))(this,{type:n,id:r,content:content,images:t});return e("CREATE_MAIN_COMMENT",o.data),o},async createSubComment({commit:e},{id:t,type:n,content:content,targetUserId:r}){const o=await((e,{type:t,id:n,content:content,targetUserId:r})=>e.$axios.$post("comment/main/reply",{targetUserId:r,content:content,type:t,id:n}))(this,{id:t,type:n,content:content,targetUserId:r});return e("CREATE_SUB_COMMENT",{id:t,comment:o.data}),o},async deleteSubComment({commit:e},{id:t,type:n,parentId:r}){await((e,{type:t,id:n})=>e.$axios.$post("comment/sub/delete",{type:t,id:n}))(this,{id:t,type:n}),e("DELETE_SUB_COMMENT",{parentId:r,id:t})},async deleteMainComment({commit:e},{id:t,type:n}){await((e,{type:t,id:n})=>e.$axios.$post("comment/main/delete",{type:t,id:n}))(this,{id:t,type:n}),e("DELETE_MAIN_COMMENT",{id:t})},async toggleLikeSubComment({commit:e},{type:t,id:n,parentId:r}){e("TOGGLE_LIKE_SUB_COMMENT",{id:n,parentId:r}),await((e,{type:t,id:n})=>e.$axios.$post("comment/sub/toggleLike",{type:t,id:n}))(this,{type:t,id:n})},async toggleLikeMainComment({commit:e},{type:t,id:n}){e("TOGGLE_LIKE_MAIN_COMMENT",{id:n}),await((e,{type:t,id:n})=>e.$axios.$post("comment/main/toggleLike",{type:t,id:n}))(this,{type:t,id:n})}},h={}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"meta",function(){return meta}),n.d(r,"getWorldPost",function(){return d}),n.d(r,"getWorldImage",function(){return h}),n.d(r,"getWorldScore",function(){return m}),n.d(r,"getWorldQAQ",function(){return f}),n.d(r,"getRoleTrending",function(){return _}),n.d(r,"getBangumiPost",function(){return v}),n.d(r,"getBangumiImage",function(){return y}),n.d(r,"getBangumiRole",function(){return x}),n.d(r,"getBangumiScore",function(){return w}),n.d(r,"getBangumiQAQ",function(){return $}),n.d(r,"getBangumiCartoon",function(){return k}),n.d(r,"getUserFollowBangumis",function(){return E}),n.d(r,"getUserPost",function(){return S}),n.d(r,"getUserPostReply",function(){return T}),n.d(r,"getUserImage",function(){return C}),n.d(r,"getUserScore",function(){return I}),n.d(r,"getUserQAQ",function(){return N}),n.d(r,"getUserAnswer",function(){return O}),n.d(r,"getUserRole",function(){return j}),n.d(r,"getUserScoreDrafts",function(){return A}),n.d(r,"getUserInviteUsers",function(){return M}),n.d(r,"getUserAnswerDrafts",function(){return R}),n.d(r,"getUserBookmarks",function(){return P}),n.d(r,"getQuestionAnswers",function(){return D}),n.d(r,"cartoonRoleFans",function(){return L}),n.d(r,"virtualIdolOwners",function(){return U}),n.d(r,"virtualIdolList",function(){return B}),n.d(r,"getVirtualIdolDealList",function(){return z}),n.d(r,"myVirtualIdolDeals",function(){return F}),n.d(r,"getIdolDraftList",function(){return G}),n.d(r,"getIdolProductOrders",function(){return K}),n.d(r,"getUserProductOrders",function(){return W}),n.d(r,"getIdolProducts",function(){return H});var o=n(0),c=n.n(o);const l=(e,{sort:t,type:n,take:r,page:o,minId:c,seenIds:l,bangumiId:d,userZone:h})=>e.$axios.$get("flow/list",{params:{sort:t,type:n,take:r,page:o,minId:c,seenIds:l,bangumiId:d,userZone:h}}),meta=(e,{type:t})=>e.$axios.$get("flow/meta",{params:{type:t}}),d=({ctx:e,seen_ids:t,count:n,max_id:r,order_by:o})=>l(e,{type:"post",sort:o,seenIds:t,minId:r,take:n}),h=({ctx:e,seen_ids:t,count:n,max_id:r,order_by:o})=>l(e,{type:"image",sort:o,seenIds:t,minId:r,take:n}),m=({ctx:e,seen_ids:t,count:n,max_id:r,order_by:o})=>l(e,{type:"score",sort:o,seenIds:t,minId:r,take:n}),f=({ctx:e,seen_ids:t,count:n,max_id:r,order_by:o})=>l(e,{type:"question",sort:o,seenIds:t,minId:r,take:n}),_=({ctx:e,seen_ids:t,count:n,max_id:r,order_by:o})=>l(e,{type:"role",sort:o,seenIds:t,minId:r,take:n}),v=({ctx:e,id:t,seen_ids:n,count:r,max_id:o,order_by:c})=>l(e,{type:"post",bangumiId:t,sort:c,seenIds:n,minId:o,take:r}),y=({ctx:e,id:t,seen_ids:n,count:r,max_id:o,order_by:c})=>l(e,{type:"image",bangumiId:t,sort:c,seenIds:n,minId:o,take:r}),x=({ctx:e,id:t,page:n,seen_ids:r,count:o,order_by:c})=>l(e,{type:"role",bangumiId:t,sort:c,seenIds:r,take:o,page:n}),w=({ctx:e,id:t,seen_ids:n,count:r,max_id:o,order_by:c})=>l(e,{type:"score",bangumiId:t,sort:c,seenIds:n,minId:o,take:r}),$=({ctx:e,id:t,seen_ids:n,count:r,max_id:o,order_by:c})=>l(e,{type:"question",bangumiId:t,sort:c,seenIds:n,minId:o,take:r}),k=({ctx:e,id:t,page:n,count:r,order_by:o})=>e.$axios.$get(`bangumi/${t}/cartoon`,{params:{page:n,take:r,sort:o}}),E=({ctx:e,id:t})=>e.$axios.$get(`user/${t}/followed/bangumi`),S=({ctx:e,id:t,page:n,count:r,order_by:o})=>l(e,{type:"post",userZone:t,sort:o,take:r,page:n}),T=({ctx:e,id:t,count:n,page:r})=>e.$axios.$get(`user/${t}/posts/reply`,{params:{count:n,page:r}}),C=({ctx:e,id:t,page:n,count:r,order_by:o})=>l(e,{type:"image",userZone:t,sort:o,take:r,page:n}),I=({ctx:e,id:t,page:n,count:r,order_by:o})=>l(e,{type:"score",userZone:t,sort:o,take:r,page:n}),N=({ctx:e,id:t,page:n,count:r,order_by:o})=>l(e,{type:"question",userZone:t,sort:o,take:r,page:n}),O=({ctx:e,id:t,page:n,count:r,order_by:o})=>l(e,{type:"answer",userZone:t,sort:o,take:r,page:n}),j=({ctx:e,id:t,page:n,count:r,order_by:o})=>l(e,{type:"role",userZone:t,sort:o,take:r,page:n}),A=({ctx:e})=>e.$axios.$get("score/drafts"),M=({ctx:e,id:t,page:n,count:r})=>e.$axios.$get("user/invite/users",{params:{id:t,page:n,take:r}}),R=({ctx:e})=>e.$axios.$get("question/soga/drafts"),P=({ctx:e,page:t,take:n,order_by:r})=>e.$axios.$get("user/bookmarks",{params:{page:t,take:n,type:r}}),D=({ctx:e,id:t,count:n,seen_ids:r,order_by:o})=>l(e,{type:"answer",bangumiId:t,sort:o,take:n,seenIds:r}),L=({ctx:e,id:t,seen_ids:n,max_id:r,order_by:o})=>e.$axios.$get(`cartoon_role/${t}/fans`,{params:{seenIds:n,minId:r,sort:o}}),U=({ctx:e,id:t,seen_ids:n,max_id:r,order_by:o})=>e.$axios.$get(`cartoon_role/${t}/owners`,{params:{seenIds:n,minId:r,sort:o}}),B=({ctx:e,id:t,seen_ids:n,order_by:r})=>{const o=r.split("-");return e.$axios.$get("cartoon_role/list/idols",{params:{seenIds:n,type:o[0],sort:o[1],state:o[2],id:t}})},z=({ctx:e,seen_ids:t})=>e.$axios.$get("cartoon_role/deal_list",{params:{seenIds:t}}),F=({ctx:e})=>e.$axios.$get("cartoon_role/my_deal"),G=({ctx:e,page:t,count:n,id:r})=>e.$axios.$get("cartoon_role/market_price_draft_list",{params:{page:t,count:n,idol_id:r}}),K=({ctx:e,page:t,count:n,id:r})=>e.$axios.$get("cartoon_role/get_idol_request_list",{params:{page:t,take:n,idol_id:r}}),W=({ctx:e,page:t,count:n})=>e.$axios.$get("cartoon_role/get_my_product_request_list",{params:{page:t,take:n}}),H=({ctx:e,max_id:t,id:n})=>e.$axios.$get("cartoon_role/products",{params:{last_id:t,idol_id:n}});n.d(t,"state",function(){return J}),n.d(t,"actions",function(){return Q}),n.d(t,"mutations",function(){return Z}),n.d(t,"getters",function(){return Y});const V={list:[],page:0,noMore:!1,nothing:!1,loading:!1,error:!1,init:!1,total:0},J=()=>({}),Q={async initData({state:e,commit:t},{id:n="",type:o,func:c,count:l=12,sort:d="",refresh:h=!1,force:m=!1}){const f=`${c}-${n}-${d}`,_=e[f];if(_&&_.error&&!m)return;if(_&&_.loading)return;if(_&&_.init&&!h)return;t("INIT_STATE",f),t("SET_LOADING",f);const v={count:l,ctx:this};"page"===o?v.page=0:"seenIds"===o?v.seen_ids="":"lastId"===o&&(v.max_id=""),n&&(v.id=n),d&&(v.order_by=d);try{t("SET_DATA",{data:await r[c](v),fieldName:f,count:l})}catch(e){t("SET_ERROR",f)}},async loadMore({state:e,commit:t},{type:n,changing:o="id",id:c="",func:l,sort:d="",count:h=12}){const m=`${l}-${c}-${d}`,f=e[m];if(f.loading||f.noMore)return;t("SET_LOADING",m);const _={count:h,ctx:this};if("page"===n)_.page=f.page;else if("lastId"===n){const e=f.list[f.list.length-1];let t;/\./.test(o)?(t=e,o.split(".").forEach(e=>{t=t[e]})):t=e[o],_.max_id=t}else"seenIds"===n&&(_.seen_ids=f.list.map(e=>{if(!/\./.test(o))return e[o];let t=e;return o.split(".").forEach(e=>{t=t[e]}),t}).toString());c&&(_.id=c),d&&(_.order_by=d);try{t("SET_DATA",{data:await r[l](_),fieldName:m,count:h})}catch(e){t("SET_ERROR",m)}}},Z={SET_ERROR(e,t){e[t].error=!0,e[t].loading=!1},INIT_STATE(e,t){c.a.set(e,t,Object.assign({},V))},SET_LOADING(e,t){e[t].loading=!0},SET_DATA(e,{data:data,fieldName:t,count:n}){if(!e[t])return;const r=(data=>!Array.isArray(data))(data);e[t].init?e[t].list=r?e[t].list.concat(data.list):e[t].list.concat(data):(e[t].init=!0,e[t].list=r?data.list:data,e[t].nothing=r?0===data.total:0===data.length),e[t].page++,e[t].noMore=r?data.noMore:"seenIds"===e.type?0===data.length:data.length<n,e[t].total=data.total||0,e[t].loading=!1,e[t].error=!1}},Y={getFlow:e=>(t,n="",r="")=>e[`${t}-${r}-${n}`]}},function(e,t){e.exports=require("element-ui/lib/tag")},function(e,t){e.exports=require("mint-ui/lib/switch")},function(e,t){e.exports=require("vuetrend")},function(e,t){e.exports=require("mint-ui/lib/picker")},function(e,t){e.exports=require("element-ui/lib/collapse-item")},function(e,t){e.exports=require("element-ui/lib/collapse")},function(e,t){e.exports=require("numerify")},function(e,t){e.exports=require("utils-lite")},function(e,t){e.exports=require("mint-ui/lib/swipe-item")},function(e,t){e.exports=require("mint-ui/lib/swipe")},function(e,t){e.exports=require("mint-ui/lib/palette-button")},function(e,t){e.exports=require("particles.js")},function(e,t){e.exports=require("html2canvas")},function(e,t){e.exports=require("vue-croppa")},function(e,t){e.exports=require("mint-ui/lib/spinner")},function(e,t){e.exports=require("element-ui/lib/step")},function(e,t){e.exports=require("element-ui/lib/steps")},function(e,t){e.exports=require("@antv/f2")},function(e,t){e.exports=require("element-ui/lib/progress")},function(e,t){e.exports=require("echarts/lib/chart/radar")},function(e,t){e.exports=require("echarts/lib/echarts")},function(e,t){e.exports=require("echarts/lib/component/tooltip")},function(e,t){e.exports=require("echarts/lib/component/legend")},function(e,t){e.exports=require("vue-waterfall/lib/waterfall")},function(e,t){e.exports=require("vue-waterfall/lib/waterfall-slot")}]);
//# sourceMappingURL=server.js.map