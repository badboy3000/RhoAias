exports.ids=[70],exports.modules={192:function(t,e,r){"use strict";r.d(e,"i",function(){return o}),r.d(e,"r",function(){return n}),r.d(e,"h",function(){return d}),r.d(e,"c",function(){return c}),r.d(e,"o",function(){return l}),r.d(e,"f",function(){return _}),r.d(e,"m",function(){return f}),r.d(e,"e",function(){return m}),r.d(e,"p",function(){return $}),r.d(e,"a",function(){return h}),r.d(e,"n",function(){return v}),r.d(e,"j",function(){return x}),r.d(e,"d",function(){return y}),r.d(e,"b",function(){return k}),r.d(e,"g",function(){return w}),r.d(e,"q",function(){return N}),r.d(e,"l",function(){return j}),r.d(e,"k",function(){return E});const o=(t,{id:e})=>t.$axios.$get(`cartoon_role/${e}/stock_show`),n=(t,{id:e,amount:r})=>t.$axios.$post(`cartoon_role/${e}/buy_stock`,{amount:r}),d=(t,{id:e})=>t.$axios.$get(`cartoon_role/${e}/get_idol_deal`),c=(t,form)=>t.$axios.$post("cartoon_role/create_deal",form),l=(t,form)=>t.$axios.$post("cartoon_role/make_deal",form),_=(t,{id:e})=>t.$axios.$post("cartoon_role/delete_deal",{id:e}),f=t=>t.$axios.$get("cartoon_role/stock_meta"),m=(t,form)=>t.$axios.$post("cartoon_role/create_market_price_draft",form),$=(t,{is_agree:e,idol_id:r,draft_id:o})=>t.$axios.$post("cartoon_role/vote_market_price_draft",{is_agree:e,idol_id:r,draft_id:o}),h=(t,{idol_id:e,qq_group:r,lover_words:o,manager_id:n})=>t.$axios.$post("cartoon_role/change_idol_profile",{idol_id:e,qq_group:r,lover_words:o,manager_id:n}),v=t=>t.$axios.$get("cartoon_role/user_draft_work"),x=t=>t.$axios.$get("cartoon_role/can_use_income"),y=(t,{product_id:e,product_type:r,amount:o})=>t.$axios.$post("cartoon_role/create_buy_request",{product_id:e,product_type:r,amount:o}),k=(t,{order_id:e,result:r})=>t.$axios.$post("cartoon_role/check_product_request",{order_id:e,result:r}),w=(t,{order_id:e})=>t.$axios.$post("cartoon_role/delete_buy_request",{order_id:e}),N=(t,{order_id:e})=>t.$axios.$post("cartoon_role/over_buy_request",{order_id:e}),j=t=>t.$axios.$get("cartoon_role/get_mine_product_orders"),E=(t,{idol_id:e,days:r})=>t.$axios.$get("cartoon_role/get_idol_days_chart",{params:{idol_id:e,days:r}})},258:function(t,e){},312:function(t,e){},313:function(t,e){},314:function(t,e,r){"use strict";r.r(e);var o=r(258),n=r.n(o);for(var d in o)"default"!==d&&function(t){r.d(e,t,function(){return o[t]})}(d);e.default=n.a},377:function(t,e,r){"use strict";r(312),r(2);var o=r(156),n=r.n(o),d=(r(313),r(157)),c=r.n(d),l=r(192),_={name:"IdolTimeline",components:{"el-steps":c.a,"el-step":n.a},props:{isBoss:{type:Boolean,required:!0},idol:{type:Object,required:!0}},data:()=>({submitting:!1}),computed:{source(){return this.$store.getters["flow/getFlow"]("getIdolDraftList","new",this.idol.id)},draft(){return this.source&&this.source.total?this.source.list[0]:null}},methods:{async submitVote(t){if(this.$store.state.login){if(!this.submitting){this.submitting=!0;try{await Object(l.p)(this,{is_agree:t,idol_id:this.idol.id,draft_id:this.draft.id}),this.$toast.success("投票成功"),setTimeout(()=>{window.location.reload()},1e3)}catch(t){this.$toast.error(t),this.submitting=!1}}}else this.$channel.$emit("sign-in")}}},f=r(1);var component=Object(f.a)(_,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"idol-market-price-draft"}},[t.draft&&0==t.draft.result?t._ssrNode("<div>","</div>",[r("el-alert",{staticStyle:{"margin-top":"15px","margin-bottom":"10px"},attrs:{closable:!1,type:"warning",title:"提案项在通过/反对占比大于「50%」之后，会由系统自动增发股票/关闭提案（最多延迟5分钟）"}}),t._ssrNode(" "),r("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{closable:!1,type:"warning",title:"若股东超过两天仍未投票，则视为弃权，将会用已投票的数据通过或驳回增发提案"}}),t._ssrNode(" "),t._ssrNode('<div class="draft-control">',"</div>",[t._ssrNode('<div class="text-wrap"><p><strong>提案内容：</strong> <span>'+t._ssrEscape("增发"+t._s(t.draft.add_stock_count)+"股，每股￥"+t._s(t.draft.stock_price))+"</span></p> <p><strong>提案董事：</strong> <span>"+t._ssrEscape(t._s(t.draft.user.nickname))+"</span></p> <p><strong>提案时间：</strong> <span>"+t._ssrEscape(t._s(t.draft.created_at))+"</span></p> <p><strong>通过情况：</strong> <span>"+t._ssrEscape(t._s(t.draft.pass_count)+"人投票，占比："+t._s(t.draft.pass_percent)+"%")+"</span></p> <p><strong>反对情况：</strong> <span>"+t._ssrEscape(t._s(t.draft.ban_count)+"人投票，占比："+t._s(t.draft.ban_percent)+"%")+"</span></p> <p><strong>我的选择：</strong> <span>"+t._ssrEscape(t._s(0===t.draft.voted?"未投票":t.draft.voted>0?"赞同票":"反对票"))+"</span></p></div> "),t._ssrNode('<div class="button-wrap">',"</div>",[r("el-button",{attrs:{loading:t.submitting,plain:t.draft.voted>0,type:"success",icon:"el-icon-caret-top"},on:{click:function(e){return t.submitVote(!0)}}},[t._v("\n          赞同\n        ")]),t._ssrNode(" "),r("el-button",{attrs:{loading:t.submitting,plain:t.draft.voted<0,type:"danger"},on:{click:function(e){return t.submitVote(!1)}}},[t._v("\n          反对\n          "),r("i",{staticClass:"el-icon-caret-bottom el-icon--right"})])],2)],2)],2):t._e(),t._ssrNode(" "),t.source&&t.source.noMore?r("el-steps",{attrs:{space:"100px",direction:"vertical"}},[t.idol.ipo_at?t.source.total?[t._l(t.source.list,function(t){return r("el-step",{key:t.id,attrs:{status:0===t.result?"finish":1===t.result?"success":"error",description:t.created_at+" - 本提案由「"+t.user.nickname+"」发起，发行「"+t.add_stock_count+"」股，每股「￥"+t.stock_price+"」，"+(0===t.result?"董事会正在投票":1===t.result?"董事会表决通过":"董事会表决未通过"),title:"增发提案"}})}),t._v(" "),r("el-step",{attrs:{description:t.idol.ipo_at,title:"公司上市",status:"success"}}),t._v(" "),r("el-step",{attrs:{description:t.idol.created_at,title:"公司注册",status:"success"}})]:[r("el-step",{attrs:{title:"增发提案",status:"process",description:"大股东还未发起提案"}}),t._v(" "),r("el-step",{attrs:{description:t.idol.ipo_at,title:"公司上市",status:"success"}}),t._v(" "),r("el-step",{attrs:{description:t.idol.created_at,title:"公司注册",status:"success"}})]:[r("el-step",{attrs:{title:"增发提案",status:"wait",description:"还未选举出大股东"}}),t._v(" "),r("el-step",{attrs:{description:"投资人未满20人，还差"+(20-t.idol.fans_count)+"人",title:"等待上市",status:"process"}}),t._v(" "),r("el-step",{attrs:{description:t.idol.created_at,title:"公司注册",status:"success"}})]],2):t._e()],2)},[],!1,function(t){var e=r(314);e.__inject__&&e.__inject__(t)},null,"6837ba20");e.a=component.exports},519:function(t,e,r){"use strict";r.r(e);var o=r(377),n=r(192),d={name:"WxAppIdolTimeline",components:{IdolTimeline:o.a},data:()=>({idol:null}),computed:{currentUserId(){return this.$store.state.login?this.$store.state.user.id:0},isBoss(){return!!this.idol.boss&&this.idol.boss.id===this.currentUserId}},asyncData({app:t,params:e,error:r}){const{id:o}=e;return Object(n.i)(t,{id:o}).then(data=>({idol:data.role})).catch(t=>{r({statusCode:t.statusCode,message:t.message})})},async fetch({store:t,params:e}){await t.dispatch("flow/initData",{func:"getIdolDraftList",type:"page",sort:"new",id:e.id})}},c=r(1);var component=Object(c.a)(d,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"wx-app-idol-timeline"}},[this._ssrNode('<div class="container">',"</div>",[e("IdolTimeline",{attrs:{"is-boss":this.isBoss,idol:this.idol}})],1)])},[],!1,function(t){},null,"7d3ce3b7");e.default=component.exports}};
//# sourceMappingURL=timeline.chunk.96bae152.js.map