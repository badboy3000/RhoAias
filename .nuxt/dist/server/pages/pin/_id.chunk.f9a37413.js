exports.ids=[32],exports.modules={173:function(t,e){},174:function(t,e,n){t.exports=n.p+"img/aa8b45a.png"},175:function(t,e,n){"use strict";var r=n(4),o={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted(){this.auto&&this.onScroll()},methods:{getTarget(){let t=this.$el;for(;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){const e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll(){if(this.error)return;r.a.checkInView(this.$el)&&this.fetch();const t=r.a.on(this.getTarget(),["scroll"],this.$utils.throttle(()=>{this.error||(!this.noMore&&this.auto?r.a.checkInView(this.$el)&&this.fetch():r.a.off(t))},200))}}},c=n(1);var component=Object(c.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flow-state-wrap"},[t.error?t._ssrNode("<div>","</div>",[t._t("error",[r("div",{staticClass:"state-error"},[r("span",[t._v("出错了，点击重试")])])])],2):t.nothing?t._ssrNode("<div>","</div>",[t._t("nothing",[r("div",{staticClass:"state-nothing"},[r("img",{attrs:{src:n(174),alt:"no-content"}}),t._v(" "),r("span",[t._v("这里什么都没有")])])])],2):t.noMore?t._ssrNode("<div>","</div>",[t._t("no-more",[t.displayNoMore?r("div",{staticClass:"state-no-more"},[r("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?t._ssrNode("<div>","</div>",[t._t("loading",[r("div",{staticClass:"state-loading"},[r("i"),t._v(" "),r("span",[t._v("加载中…")])])])],2):t.auto?t._ssrNode('<div class="state-shim"></div>'):t._ssrNode("<button>","</button>",[t._t("load-btn",[r("div",{staticClass:"state-fetch-btn-text"},[r("span",[t._v("点击加载更多")])])])],2)])},[],!1,function(t){var e=n(176);e.__inject__&&e.__inject__(t)},null,"16540fb2");e.a=component.exports},176:function(t,e,n){"use strict";n.r(e);var r=n(173),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},178:function(t,e){},179:function(t,e){},180:function(t,e){},181:function(t,e){},186:function(t,e){},187:function(t,e){},188:function(t,e){},189:function(t,e){},190:function(t,e){},191:function(t,e){},193:function(t,e,n){"use strict";e.a=((t,e,n,r)=>{let o=0;const element=n?[n]:[document.getElementsByTagName("html")[0],document.body],c=n?n.scrollTop:window.scrollY,l=t||0,m=e||2e3,d=r||"easeOutSine",time=Math.max(.1,Math.min(Math.abs(c-l)/m,.8)),h={easeOutSine:t=>Math.sin(t*(Math.PI/2)),easeInOutSine:t=>-.5*(Math.cos(Math.PI*t)-1),easeInOutQuint:t=>(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)};element.forEach(t=>{t.requestAnimFrame||(t.requestAnimFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window))}),function t(){const p=(o+=1/60)/time,e=h[d](p);element.forEach(n=>{p<1?(n.requestAnimFrame(t),n.scrollTop=c+(l-c)*e):n.scrollTop=l})}()})},194:function(t,e,n){"use strict";n(87),n(2);var r=n(44),o={name:"VPopover",components:{"el-popover":n.n(r).a},props:{width:{type:Number,default:240},actions:{type:Array,default:()=>[]},reportType:{type:String,default:""},reportId:{type:[Number,String],default:0},reportText:{type:String,default:"举报"},isCreator:{type:Boolean,default:!1},className:{type:String,default:""}},data:()=>({show:!1,backdropId:0}),computed:{actionList(){const t=this.actions;return this.reportId&&t.push({name:this.reportText,method:()=>this.$channel.$emit("open-report-drawer",{id:this.reportId,model:this.reportType,title:this.reportText,isCreator:this.isCreator})}),t}},methods:{handleShow(){this.backdropId=this.$backdrop.show()},handleHide(){this.$backdrop.hide(this.backdropId)},handleClick(){this.show=!1}}},c=n(1);var component=Object(c.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:t.className},[n("el-popover",{attrs:{width:t.width,trigger:"click","popper-class":"v-popover"},on:{show:t.handleShow,hide:t.handleHide},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("ul",{on:{click:t.handleClick}},t._l(t.actionList,function(e,r){return n("li",{key:r,on:{click:e.method}},[n("i",{staticClass:"el-icon-arrow-right"}),t._v(" "),n("span",{staticClass:"oneline",domProps:{textContent:t._s(e.name)}})])}),0),t._v(" "),t._t("default",null,{slot:"reference"})],2)],1)},[],!1,function(t){var e=n(199);e.__inject__&&e.__inject__(t)},null,"9847f35e");e.a=component.exports},195:function(t,e,n){"use strict";var r={name:"UserAvatar",props:{user:{type:Object,required:!0},size:{type:Number,default:40}},methods:{toUser(){this.$router.push(this.$alias.user(this.user.zone))}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"user-avatar",style:{width:t.$px2vw(t.size),height:t.$px2vw(t.size)},on:{click:function(e){return e.stopPropagation(),t.toUser(e)}}},[t._ssrNode("<img"+t._ssrAttr("src",t.$resize(t.user.avatar,{width:2*t.size}))+">")])},[],!1,function(t){var e=n(196);e.__inject__&&e.__inject__(t)},null,"16ffe9a8");e.a=component.exports},196:function(t,e,n){"use strict";n.r(e);var r=n(178),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},199:function(t,e,n){"use strict";n.r(e);var r=n(179),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},200:function(t,e,n){"use strict";n.r(e);var r=n(180),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},201:function(t,e,n){"use strict";n.r(e);var r=n(181),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},203:function(t,e){t.exports={"bangumi-panel":"bangumi-panel-b5",bangumiPanel:"bangumi-panel-b5",avatar:"avatar-2K",content:"content-2m",name:"name-5O",controls:"controls-1p",rolling:"rolling-nc"}},204:function(t,e){},205:function(t,e,n){"use strict";var r=n(195),o={name:"UserNickname",props:{user:{type:Object,required:!0},isMaster:{type:Boolean,default:!1}},methods:{toUser(){this.$router.push(this.$alias.user(this.user.zone))}}},c=n(1);var l=Object(c.a)(o,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"user-nickname"},[this._ssrNode('<div class="nickname"><p class="oneline">'+this._ssrEscape(this._s(this.user.nickname))+"</p></div> "+(this.isMaster?'<span class="badge master-badge"><span>楼主</span></span>':"\x3c!----\x3e"))])},[],!1,function(t){var e=n(200);e.__inject__&&e.__inject__(t)},null,"0ad68c7d").exports,m={name:"FlowHeaderUser",components:{UserAvatar:r.a,UserNickname:l},props:{user:{type:Object,required:!0},time:{type:String,required:!0}}};var d=Object(c.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-panel"},[n("UserAvatar",{attrs:{user:t.user}}),t._ssrNode(" "),t._ssrNode('<div class="slot">',"</div>",[t._t("default")],2),t._ssrNode(" "),t._ssrNode('<div class="user-info">',"</div>",[n("UserNickname",{attrs:{user:t.user}}),t._ssrNode(" "),n("VTime",{model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],2)],2)},[],!1,function(t){var e=n(201);e.__inject__&&e.__inject__(t)},null,"7d79de9c");e.a=d.exports},208:function(t,e,n){"use strict";var r=n(193),o={name:"CommentCreateForm",props:{type:{required:!0,type:String},id:{required:!0,type:[Number,String]},masterId:{required:!0,type:Number}},data:()=>({content:""}),computed:{isGuest(){return!this.$store.state.login},submitting(){return this.$store.state.comment.submitting}},methods:{async submit(){if(this.isGuest)this.$channel.$emit("sign-in");else if(this.content){if(!this.submitting){this.$store.commit("comment/SET_SUBMITTING",{result:!0});try{const t=await this.$store.dispatch("comment/createMainComment",{content:this.content,images:[],type:this.type,id:this.id,ctx:this});this.$toast.success(t.message),this.$store.commit("UPDATE_USER_EXP",t.exp),this.$emit("submit"),this.content="",setTimeout(()=>{const e=document.getElementById(`comment-${t.data.id}`);e&&Object(r.a)(this.$utils.getOffsetTop(e)-100,600)},400)}finally{this.$store.commit("comment/SET_SUBMITTING",{result:!1})}}}else this.$emit("close")},handleAreaFocus(){document.body.scrollTop=0}}},c=n(1);var l=Object(c.a)(o,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comment-create-form"},[this._ssrNode('<textarea placeholder="来吧，尽情的（在1000字以内）发挥吧" maxlength="1000" class="content"></textarea> '),e("el-button",{staticClass:"submit-btn",attrs:{loading:this.submitting,type:"primary"},on:{click:this.submit}},[this._v("\n    发布\n  ")])],2)},[],!1,function(t){var e=n(215);e.__inject__&&e.__inject__(t)},null,"8222d2d8").exports,m=n(209),d={name:"CommentCommentItem",components:{VPopover:n(194).a,SubCommentList:m.a},props:{comment:{required:!0,type:Object},masterId:{required:!0,type:Number},type:{required:!0,type:String}},data:()=>({deleting:!1,liking:!1}),computed:{currentUserId(){return this.$store.state.login?this.$store.state.user.id:0},isMine(){return this.currentUserId===this.comment.from_user_id},canDelete(){return this.isMine||this.currentUserId===this.masterId},actions(){const t=[];return this.canDelete&&t.push({name:"删除",method:this.deleteComment}),t.push({name:this.comment.liked?"取消赞":"点赞",method:this.toggleLike}),t}},methods:{async toggleLike(){if(this.currentUserId){if(!this.liking){this.liking=!0;try{await this.$store.dispatch("comment/toggleLikeMainComment",{ctx:this,type:this.type,id:this.comment.id})}finally{this.liking=!1}}}else this.$channel.$emit("sign-in")},deleteComment(){this.deleting||(this.deleting=!0,this.$confirm("删除后无法找回, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("comment/deleteMainComment",{ctx:this,type:this.type,id:this.comment.id}),this.$emit("delete")}).catch(()=>{this.deleting=!1}))},handleCommentBtnClick(){this.$channel.$emit("reply-comment",{id:this.comment.id,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})}}};var h={name:"VCommentMain",components:{CommentCreateForm:l,CommentItem:Object(c.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-item",attrs:{id:"comment-"+t.comment.id}},[n("nuxt-link",{staticClass:"avatar",attrs:{to:t.$alias.user(t.comment.from_user_zone)}},[n("v-img",{attrs:{src:t.comment.from_user_avatar,avatar:!0,width:"35"}})],1),t._ssrNode(" "),t._ssrNode('<div class="content">',"</div>",[t._ssrNode('<div class="header">',"</div>",[n("VPopover",{attrs:{actions:t.actions,"report-id":t.comment.id,"report-type":t.type+"_comment"}},[n("button",{staticClass:"tools-btn"},[t._v("\n          ···\n        ")])]),t._ssrNode(" "),t._ssrNode('<div class="user">',"</div>",[n("nuxt-link",{staticClass:"nickname oneline",attrs:{to:t.$alias.user(t.comment.from_user_zone)}},[n("span",{domProps:{textContent:t._s(t.comment.from_user_name)}}),t._v(" "),t.comment.is_owner?n("span",[t._v("(楼主)")]):t._e(),t._v(" "),t.comment.is_leader?n("i",{staticClass:"iconfont icon-leader"}):t.comment.is_master?n("i",{staticClass:"iconfont icon-master"}):t._e()]),t._ssrNode(" "),t._ssrNode('<div class="info">',"</div>",[t._ssrNode("<span>"+t._ssrEscape("第"+t._s(t.comment.floor_count-1)+"楼")+"</span> <span>·</span> "),n("v-time",{model:{value:t.comment.created_at,callback:function(e){t.$set(t.comment,"created_at",e)},expression:"comment.created_at"}})],2)],2)],2),t._ssrNode(' <div class="main">'+t._s(t.comment.content)+"</div> "),t._ssrNode('<div class="footer">',"</div>",[n("SubCommentList",{attrs:{"parent-comment":t.comment,type:t.type}}),t._ssrNode(' <div class="social"><button'+t._ssrClass(null,[t.comment.liked?"reply-liked-btn":"reply-like-btn"])+'><i class="iconfont icon-icon_good"></i>'+t._ssrEscape("\n          "+t._s(t.comment.liked?"已赞":"赞")+"\n          ")+(t.comment.like_count?"<span>"+t._ssrEscape("("+t._s(t.comment.like_count)+")")+"</span>":"\x3c!----\x3e")+'</button> <button class="reply-btn fr">\n          回复\n        </button></div>')],2)],2)],2)},[],!1,function(t){var e=n(218);e.__inject__&&e.__inject__(t)},null,"6daa4147").exports,FlowState:n(175).a},props:{id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:t=>~["post","video","image","score","question","answer","role"].indexOf(t)},onlySeeMaster:{type:Boolean,default:!1},emptyText:{type:String,default:"暂无评论，快来抢沙发吧╮(￣▽￣)╭！"},masterId:{required:!0,type:Number},bottomAppendComment:{type:Boolean,default:!0},auto:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},data:()=>({loadingMainComment:!1,focusCommentId:0,openFocusCommentDrawer:!1,loadingSubComment:!1,replyForm:{id:"",content:"",targetUserId:0,targetUserName:"",open:!1,replying:!1,liking:!1},openCreateCommentDrawer:!1}),computed:{store(){return this.$store.state.comment},list(){return this.store.list},noMore(){return this.store.noMore},total(){return this.store.total},focusComment(){return this.focusCommentId?this.list.filter(t=>t.id===this.focusCommentId)[0]:null},currentUserId(){return this.$store.state.login?this.$store.state.user.id:0}},mounted(){this.auto?this.$channel.$on(`fire-load-comment-${this.type}-${this.id}`,()=>{this.loadMoreMainComment(!0),this.$channel.$off(`fire-load-comment-${this.type}-${this.id}`)}):this.lazyLoadComment(),this.$channel.$on("load-all-sub-comment",({id:t})=>{this.focusCommentId=t,this.openFocusCommentDrawer=!0}),this.$channel.$on(`open-create-comment-drawer-${this.type}-${this.id}`,()=>{this.currentUserId?this.openCreateCommentDrawer=!0:this.$channel.$emit("sign-in")}),this.$channel.$on("reply-comment",({id:t,targetUserId:e,targetUserName:n})=>{this.handleSubCommentReply({id:t,targetUserId:e,targetUserName:n})}),document.getElementById("comment-wrap").addEventListener("click",t=>{if(/reply-btn/.test(t.target.className)&&this.$el.contains(t.target)){const area=document.getElementById("reply-comment-textarea");area.style.display="block",area.focus()}})},methods:{async lazyLoadComment(){if(!this.lazy)return void this.$nextTick(()=>{this.scrollToReply()});const{query:t}=this.$route;await this.$store.dispatch("comment/getMainComments",{id:this.id,type:this.type,seeReplyId:t["comment-id"],onlySeeMaster:t.only&&parseInt(t.only,10)?1:0}),this.$nextTick(()=>{this.scrollToReply()})},autoLoadMoreMainComment(){this.loadMoreMainComment(!1)},async loadMoreMainComment(t=!1){if(!this.loadingMainComment){this.loadingMainComment=!0;try{await this.$store.dispatch("comment/getMainComments",{ctx:this,type:this.type,id:this.id,onlySeeMaster:this.onlySeeMaster?1:0,firstRequest:t})}finally{this.loadingMainComment=!1}}},async loadMoreSubComment(){if(!this.loadingSubComment){this.loadingSubComment=!0;try{await this.$store.dispatch("comment/getSubComments",{ctx:this,type:this.type,id:this.focusCommentId})}finally{this.loadingSubComment=!1}}},commentToComment(data){this.handleSubCommentReply({id:data.parent_id,targetUserId:data.from_user_id,targetUserName:data.from_user_name})},handleCommentBtnClick(){this.handleSubCommentReply({id:this.focusComment.id,targetUserId:this.focusComment.from_user_id,targetUserName:this.focusComment.from_user_name})},handleSubCommentReply({id:t,targetUserId:e,targetUserName:n}){this.currentUserId?(this.replyForm.id=t,this.replyForm.targetUserId=e,this.replyForm.targetUserName=n,this.replyForm.open=!0,setTimeout(()=>{document.body.scrollTop=0},200)):this.$channel.$emit("sign-in")},async toggleFocusCommentLike(){if(this.currentUserId){if(!this.replyForm.liking){this.replyForm.liking=!0;try{await this.$store.dispatch("comment/toggleLikeMainComment",{ctx:this,type:this.type,id:this.focusCommentId})}finally{this.replyForm.liking=!1}}}else this.$channel.$emit("sign-in")},handleReplyDrawerClose(){document.getElementById("reply-comment-textarea").style.display="none"},async handleReplySubmit(){if(this.currentUserId){if(this.replyForm.content&&!this.replyForm.replying){this.replyForm.replying=!0;try{const t=await this.$store.dispatch("comment/createSubComment",{ctx:this,id:this.replyForm.id,type:this.type,content:this.replyForm.content,targetUserId:this.replyForm.targetUserId});this.replyForm.open=!1,this.replyForm.content="",this.$toast.success(t.message),this.$store.commit("UPDATE_USER_EXP",t.exp)}finally{this.replyForm.replying=!1,this.handleReplyDrawerClose()}}}else this.$channel.$emit("sign-in")},writeComment(){this.$channel.$emit(`open-create-comment-drawer-${this.type}-${this.id}`)},closeCommentDrawer(){this.openCreateCommentDrawer=!1},submitCommentCallback(){this.openCreateCommentDrawer=!1,this.$emit("create-main-comment")},deleteCommentCallback(){this.$emit("delete-main-comment")},scrollToReply(){const t=this.$route.query["comment-id"];if(!t)return;const e=document.getElementById(`comment-${t}`);e&&setTimeout(()=>{Object(r.a)(this.$utils.getOffsetTop(e)-100,600)},400)}}};var _=Object(c.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"comment-wrap"}},[t._t("header",[n("h3",{staticClass:"sub-title"},[t._v("\n      评论"+t._s(t.total?"("+t.total+")":"")+" "),t._t("header-btn"),t._v(" "),n("button",{staticClass:"write-btn",on:{click:t.writeComment}},[t._v("\n        写评论\n      ")])],2)]),t._ssrNode(" "),t.list.length?[t._ssrNode('<div id="comment-list-wrap">',"</div>",t._l(t.list,function(e){return t._ssrNode('<div class="comment-item-wrap">',"</div>",[t._t("comment-item",[n("CommentItem",{attrs:{type:t.type,comment:e,"master-id":t.masterId},on:{delete:t.deleteCommentCallback}})],{comment:e,reply:t.handleSubCommentReply})],2)}),0),t._ssrNode(" "),t._ssrNode('<div id="comment-list-footer">',"</div>",[t._ssrNode((t.bottomAppendComment?'<button class="append-comment-btn">\n        写评论\n      </button>':"\x3c!----\x3e")+" "),n("FlowState",{attrs:{"no-more":t.noMore,loading:t.loadingMainComment,auto:!0,fetch:t.autoLoadMoreMainComment}})],2)]:t.emptyText?t._ssrNode('<p class="no-content">'+t._ssrEscape(t._s(t.emptyText))+"</p>"):t._e(),t._ssrNode(" "),n("v-drawer",{staticClass:"focus-comment-drawer",attrs:{"header-text":"评论列表"+(t.focusComment&&t.focusComment.floor_count?" - "+t.focusComment.floor_count+" 楼":""),backdrop:!1,from:"bottom",size:"100%"},model:{value:t.openFocusCommentDrawer,callback:function(e){t.openFocusCommentDrawer=e},expression:"openFocusCommentDrawer"}},[t.focusComment?[n("div",{staticClass:"container"},[n("div",{staticClass:"reply"},[n("div",{staticClass:"user clearfix"},[n("nuxt-link",{staticClass:"avatar",attrs:{to:t.$alias.user(t.focusComment.from_user_zone)}},[n("v-img",{attrs:{src:t.focusComment.from_user_avatar,avatar:!0,width:"35"}})],1),t._v(" "),n("div",{staticClass:"summary"},[n("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(t.focusComment.from_user_zone)},domProps:{textContent:t._s(t.focusComment.from_user_name)}}),t._v(" "),n("div",{staticClass:"info"},[n("v-time",{model:{value:t.focusComment.created_at,callback:function(e){t.$set(t.focusComment,"created_at",e)},expression:"focusComment.created_at"}})],1)],1)],1),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"text-area",domProps:{innerHTML:t._s(t.focusComment.content)}}),t._v(" "),n("div",{staticClass:"image-area"},t._l(t.focusComment.images,function(img,t){return n("div",{key:t,staticClass:"image-package"},[n("v-img",{attrs:{src:img.url,width:img.width,height:img.height,full:!0}})],1)}),0)]),t._v(" "),n("div",{staticClass:"social"},[n("button",{class:[t.focusComment.liked?"reply-liked-btn":"reply-like-btn"],on:{click:t.toggleFocusCommentLike}},[n("i",{staticClass:"iconfont icon-icon_good"}),t._v("\n              "+t._s(t.focusComment.liked?"已赞":"赞")+"\n              "),t.focusComment.like_count?n("span",[t._v("("+t._s(t.focusComment.like_count)+")")]):t._e()]),t._v(" "),n("button",{staticClass:"reply-btn fr",on:{click:t.handleCommentBtnClick}},[t._v("\n              回复\n            ")])])]),t._v(" "),n("div",{staticClass:"hr"}),t._v(" "),n("p",{staticClass:"total"},[t._v("\n          "+t._s(t.focusComment.comments.total)+"条回复\n        ")]),t._v(" "),n("ul",{staticClass:"comments"},t._l(t.focusComment.comments.list,function(e){return n("li",{key:e.id},[n("div",{staticClass:"from-user"},[n("nuxt-link",{staticClass:"avatar",attrs:{to:t.$alias.user(e.from_user_zone)}},[n("v-img",{attrs:{src:e.from_user_avatar,avatar:!0,width:"35"}})],1),t._v(" "),n("div",{staticClass:"summary"},[n("div",{staticClass:"users oneline"},[n("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(e.from_user_zone)},domProps:{textContent:t._s(e.from_user_name)}}),t._v(" "),e.to_user_zone?[t._v("\n                    回复\n                    "),n("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(e.to_user_zone)},domProps:{textContent:t._s(e.to_user_name)}})]:t._e(),t._v("\n                  :\n                ")],2),t._v(" "),n("div",{staticClass:"info"},[n("v-time",{model:{value:e.created_at,callback:function(n){t.$set(e,"created_at",n)},expression:"item.created_at"}})],1)])],1),t._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"content reply-btn",domProps:{textContent:t._s(e.content)},on:{click:function(n){return t.commentToComment(e)}}})])])}),0)]),t._v(" "),n("FlowState",{attrs:{"no-more":t.focusComment.comments.noMore,loading:t.loadingSubComment,fetch:t.loadMoreSubComment}})]:t._e()],2),t._ssrNode(" "),t._ssrNode('<div class="reply-comment-drawer-wrap">',"</div>",[n("v-drawer",{staticClass:"reply-comment-drawer",attrs:{"header-text":t.currentUserId===t.replyForm.targetUserId?"回复":"回复："+t.replyForm.targetUserName,backdrop:!1,from:"right",size:"100%","submit-text":"发布"},on:{cancel:t.handleReplyDrawerClose,submit:t.handleReplySubmit},model:{value:t.replyForm.open,callback:function(e){t.$set(t.replyForm,"open",e)},expression:"replyForm.open"}}),t._ssrNode(' <textarea id="reply-comment-textarea" placeholder="100字以内任意发挥" maxlength="100"'+t._ssrClass(null,{"fade-in":t.replyForm.open})+"></textarea>")],2),t._ssrNode(" "),n("v-drawer",{attrs:{from:"right",size:"100%","header-text":"发表评论"},model:{value:t.openCreateCommentDrawer,callback:function(e){t.openCreateCommentDrawer=e},expression:"openCreateCommentDrawer"}},[t.openCreateCommentDrawer?n("div",{staticClass:"container"},[t._t("reply-form",[t.openCreateCommentDrawer?n("CommentCreateForm",{attrs:{id:t.id,type:t.type,"master-id":t.masterId},on:{close:t.closeCommentDrawer,submit:t.submitCommentCallback}}):t._e()],{close:t.closeCommentDrawer})],2):t._e()])],2)},[],!1,function(t){var e=n(219);e.__inject__&&e.__inject__(t)},null,"26fa08ed");e.a=_.exports},209:function(t,e,n){"use strict";var r={name:"SubCommentItem",props:{comment:{required:!0,type:Object},parentUserId:{required:!0,type:Number},parentCommentId:{required:!0,type:Number},type:{required:!0,type:String}},data:()=>({deleting:!1}),computed:{currentUserId(){return this.$store.state.login?this.$store.state.user.id:0},isMine(){return this.currentUserId===this.comment.from_user_id},canDelete(){return this.isMine||this.currentUserId===this.parentUserId}},methods:{handleSubCommentClick(){if(this.isMine)return this.deleteComment(),void this.$nextTick(()=>{document.getElementById("reply-comment-textarea").style.display="none"});this.currentUserId&&this.$channel.$emit("reply-comment",{id:this.parentCommentId,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})},deleteComment(){this.canDelete&&(this.deleting||(this.deleting=!0,this.$confirm("删除后无法找回, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("comment/deleteSubComment",{ctx:this,type:this.type,id:this.comment.id,parentId:this.comment.parent_id})}).catch(()=>{this.deleting=!1})))}}},o=n(1);var c={name:"PostSubCommentList",components:{SubCommentItem:Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-comment-item"},[n("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(t.comment.from_user_zone)},domProps:{textContent:t._s(t.comment.from_user_name)}}),t._ssrNode(" "),t.comment.to_user_zone?[t._ssrNode("\n    回复\n    "),n("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(t.comment.to_user_zone)},domProps:{textContent:t._s(t.comment.to_user_name)}})]:t._e(),t._ssrNode('\n  :\n  <span class="reply-btn comment-content">'+t._ssrEscape(t._s(t.comment.content))+"</span>")],2)},[],!1,function(t){var e=n(216);e.__inject__&&e.__inject__(t)},null,"40f00e8d").exports},props:{parentComment:{required:!0,type:Object},type:{required:!0,type:String}},computed:{comments(){return this.parentComment.comments},authorId(){return this.parentComment.from_user_id},hasComment(){return!!this.comments.list.length},filterComments(){const data=this.comments,t=data.list,e=t.slice(0,5);if(t.every(t=>t.id<=data.maxId))return e;const n=e.map(t=>t.id);return e.concat(t.filter(t=>t.id>data.maxId&&-1===n.indexOf(t.id)))}},methods:{loadAllComment(){this.$channel.$emit("load-all-sub-comment",{id:this.parentComment.id})}}};var l=Object(o.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-comment-list-wrap"},[t.hasComment?t._ssrNode('<div class="sub-comment-list">',"</div>",[t._l(t.filterComments,function(e){return n("SubCommentItem",{key:e.id,attrs:{comment:e,"parent-user-id":t.authorId,"parent-comment-id":t.parentComment.id,type:t.type}})}),t._ssrNode(" "+(!t.comments.noMore||t.comments.list.length>5?'<button class="load-all-comment">'+t._ssrEscape("\n      查看全部"+t._s(t.comments.total)+"条评论\n    ")+"</button>":"\x3c!----\x3e"))],2):t._e()])},[],!1,function(t){var e=n(217);e.__inject__&&e.__inject__(t)},null,"4af58698");e.a=l.exports},215:function(t,e,n){"use strict";n.r(e);var r=n(186),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},216:function(t,e,n){"use strict";n.r(e);var r=n(187),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},217:function(t,e,n){"use strict";n.r(e);var r=n(188),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},218:function(t,e,n){"use strict";n.r(e);var r=n(189),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},219:function(t,e,n){"use strict";n.r(e);var r=n(190),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},221:function(t,e,n){"use strict";n.r(e);var r=n(191),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},222:function(t,e){},224:function(t,e,n){"use strict";var r={props:{type:{required:!0,type:String,validator:t=>~["bangumi","user","question"].indexOf(t)},id:{required:!0,type:Number}},computed:{source(){return this.$store.getters["social/getState"](this.type,this.id)}},methods:{toggleFollow(){this.$store.state.login?this.$store.dispatch("social/toggleAction",{id:this.id,type:this.type,action:"follow"}):this.$channel.$emit("sign-in")}}},o=n(1);var component=Object(o.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"follow-button",on:{click:this.toggleFollow}},[this._ssrNode('<i class="iconfont icon-like"></i> <span>'+this._ssrEscape(this._s(this.source.follow?"已关注":"关注"))+"</span>")])},[],!1,function(t){var e=n(221);e.__inject__&&e.__inject__(t)},null,"bf8ea772");e.a=component.exports},230:function(t,e){t.exports={"image-preview":"image-preview-2_",imagePreview:"image-preview-2_",container:"container-34",bar:"bar-1j","top-bar":"top-bar-1d",topBar:"top-bar-1d","foot-bar":"foot-bar-AF",footBar:"foot-bar-AF",wrap:"wrap-tx",item:"item-32",close:"close-27",download:"download-51","next-btn":"next-btn-3T",nextBtn:"next-btn-3T","prev-btn":"prev-btn-12",prevBtn:"prev-btn-12",rolling:"rolling-3m"}},242:function(t,e,n){"use strict";n.r(e);var r=n(203),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},243:function(t,e,n){"use strict";n.r(e);var r=n(204),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},245:function(t,e,n){"use strict";var r={name:"ShareBtn",props:{shareData:{type:Object,required:!0}},data:()=>({showModal:!1,backdropId:0,display:!0}),computed:{login(){return this.$store.state.login},shareLink(){return this.shareData?this.shareData.link:`https://m.calibur.tv${this.route.path}`}},methods:{showIntroModal(){this.showModal=!0,this.backdropId=this.$backdrop.show({ele:this.$el,click:()=>{this.showModal=!1,this.$backdrop.hide(this.backdropId)}})},abort(){this.display=!1,this.$backdrop.hide(this.backdropId),this.$toast.success("好吧...orz")},handleCopyOK(){this.showModal=!1,this.$backdrop.hide(this.backdropId),this.$toast.success("复制成功~快去分享给其他人吧！")}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.login&&t.display?n("div",{staticClass:"fenxiao-btn-container"},[t.showModal?t._ssrNode('<div class="modal-content">',"</div>",[t._ssrNode('<div class="tips"><p>这是你的专属邀请码</p> <p>把它分享给其他人，只要有人注册，那么你将会获得5个团子</p> <p>通过你的邀请码注册的人，将会获得2个团子</p> <p>团子可以用来看视频，为偶像应援等</p> <p>或经过转化之后提现，1团子相当于1人民币</p> <p>更重要的是，calibur 的发展需要你的支持，感谢</p></div> '),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.shareLink,expression:"shareLink"}],staticClass:"join",on:{success:t.handleCopyOK}},[t._ssrNode("\n      获取分享链接\n    ")]),t._ssrNode(' <button class="abort">\n      但是，我拒绝\n    </button>')],2):t._e(),t._ssrNode(' <button class="fenxiao-btn">\n    分享\n  </button>')],2):t._e()},[],!1,function(t){var e=n(243);e.__inject__&&e.__inject__(t)},null,"1e594501");e.a=component.exports},246:function(t,e,n){"use strict";var r={name:"BangumiPanel",components:{FollowButton:n(224).a},props:{id:{required:!0,type:Number},avatar:{required:!0,type:String},name:{required:!0,type:String},showFollow:{default:!0,type:Boolean}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.bangumiPanel},[n("nuxt-link",{class:t.$style.avatar,attrs:{to:t.$alias.bangumi(t.id)}},[n("v-img",{attrs:{src:t.avatar,width:"80",height:"92"}})],1),t._ssrNode(" "),t._ssrNode("<div"+t._ssrClass(null,t.$style.content)+">","</div>",[n("nuxt-link",{attrs:{to:t.$alias.bangumi(t.id)}},[n("h5",{staticClass:"oneline",class:t.$style.name,domProps:{textContent:t._s(t.name)}})]),t._ssrNode(" "),t._ssrNode("<div"+t._ssrClass(null,t.$style.summary)+">","</div>",[t._t("default")],2),t._ssrNode(" "),t.showFollow?t._ssrNode("<div"+t._ssrClass(null,t.$style.controls)+">","</div>",[n("FollowButton",{attrs:{id:t.id,type:"bangumi"}})],1):t._e()],2)],2)},[],!1,function(t){var e=n(242);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"adeff4b4");e.a=component.exports},261:function(t,e,n){"use strict";n.r(e);var r=n(222),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},265:function(t,e,n){"use strict";var r={name:"SocialPanel",props:{isCreator:{required:!0,type:Boolean},isMine:{required:!0,type:Boolean},id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:t=>~["post","video","image","score","answer","video"].indexOf(t)}},computed:{isGuest(){return!this.$store.state.login},source(){return this.$store.getters["social/getState"](this.type,this.id)},displayUsers(){return(this.isCreator?this.source.reward_users.list:this.source.like_users.list).slice(0,this.displayCount)}},methods:{computeTextByAction:t=>"reward"===t?"投食":"like"===t?"喜欢":"mark"===t?"收藏":"操作",toggleAction(t){if(this.isGuest)this.$channel.$emit("sign-in");else if(this.isMine)this.$toast.info(`不能${this.computeTextByAction(t)}自己的内容`);else if("reward"===t){if(this.source.reward)return void this.$toast.info("已投食过");this.$confirm("向TA投食需要消耗你一个团子，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.submitAction("reward")}).catch(()=>{})}else this.submitAction(t)},async submitAction(t){const data=await this.$store.dispatch("social/toggleAction",{type:this.type,id:this.id,action:t});data.success&&this.$emit(`${t}-callback`,{result:data.result})}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.source?n("div",{staticClass:"ours-panel"},[t._ssrNode('<div class="buttons">',"</div>",[t.isCreator?n("el-button",{class:{"is-plain":t.source.reward},attrs:{loading:t.source.reward_loading,type:"warning",icon:"iconfont icon-fantuan",round:"",size:"mini"},on:{click:function(e){return t.toggleAction("reward")}}},[t._v("\n      "+t._s(t.source.reward?"已投食":"投食")+t._s(t.source.reward_users.total?"  |  "+t.source.reward_users.total:"")+"\n    ")]):t._e(),t._ssrNode(" "),n("el-button",{class:{"is-plain":t.source.like},attrs:{loading:t.source.like_loading,type:"danger",icon:"iconfont icon-like",round:"",size:"mini"},on:{click:function(e){return t.toggleAction("like")}}},[t._v("\n      "+t._s(t.source.like?"已喜欢":"喜欢")+t._s(t.source.like_users.total?"  |  "+t.source.like_users.total:"")+"\n    ")]),t._ssrNode(" "),n("el-button",{class:{"is-plain":t.source.mark},attrs:{loading:t.source.mark_loading,type:"success",icon:"iconfont icon-mark",round:"",size:"mini"},on:{click:function(e){return t.toggleAction("mark")}}},[t._v("\n      "+t._s(t.source.mark?"已收藏":"收藏")+t._s(t.source.mark_users.total?"  |  "+t.source.mark_users.total:"")+"\n    ")])],2),t._ssrNode(' <div class="users"><ul>'+t._ssrList(t.displayUsers,function(e){return'<li class="user-face"><img'+t._ssrAttr("src",t.$resize(e.avatar,{width:60}))+"></li>"})+"</ul></div>")],2):t._e()},[],!1,function(t){var e=n(261);e.__inject__&&e.__inject__(t)},null,"379e1343");e.a=component.exports},269:function(t,e,n){"use strict";var r={name:"ImagePreview",props:{images:{type:Array,default:()=>[]},query:{type:String,default:""},download:{type:Boolean,default:!0}},data(){return{show:!1,currentIndex:-1,maxWidth:0,maxHeight:0,displayImages:this.images.map(t=>Object.assign({finalWidth:0,finalHeight:0,loading:!0},t))}},computed:{total(){return this.images.length},currentImage(){return-1===this.currentIndex?null:this.displayImages[this.currentIndex]},isWechat(){return this.$store.state.ua.wechat}},mounted(){this.getScreenSize(),window.addEventListener("resize",this.getScreenSize)},methods:{handleClose(){this.show=!1},handleClick(t){if(this.isWechat)return;if(!this.total)return;const e=t.target,n="img"===e.tagName.toLowerCase();if(!this.query&&!n)return;if(this.query&&-1===e.className.indexOf(this.query))return;let r="";if(n)r=e.getAttribute("src").split("?")[0];else{const img=e.querySelector("img");if(!img)return;r=img.getAttribute("src").split("?")[0]}this.getClickImageIndex(r),this.computeDisplaySize(this.currentIndex),this.show=!0},getClickImageIndex(t){this.images.forEach((image,e)=>{image.url===t&&(this.currentIndex=e)})},getScreenSize(){this.maxWidth=window.innerWidth,this.maxHeight=window.innerHeight-88},switchImage(t){if(t&&this.currentIndex===this.total-1)return;if(!t&&0===this.currentIndex)return;const e=t?this.currentIndex+1:this.currentIndex-1;this.computeDisplaySize(e),this.currentIndex=e},getSiblingsIndex(t){let e,n;return 0===this.currentIndex?(e=this.total-1,n=1):this.currentIndex===this.total-1?(e=this.total-2,n=0):(e=this.currentIndex-1,n=this.currentIndex+1),[e,t,n]},computeDisplaySize(t){if(void 0===this.images[t])return;const image=this.images[t];if(image.finalWidth&&image.finalHeight)return;const e=image.width,n=image.height,r=this.maxWidth,o=this.maxHeight;let c,l;if(r>=e&&o>=n)c=e,l=n;else if(r<e&&o<n){const t=e/o,m=n/o;t>=m?(c=r,l=parseInt(n/t,10)):(c=parseInt(e/m,10),l=o)}else if(n<o){c=r,l=parseInt(n/(e/o),10)}else{c=parseInt(e/(n/o),10),l=o}this.displayImages[t].finalWidth=c||r,this.displayImages[t].finalHeight=l||o},handleSwitch(t,e){this.currentIndex=e}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.$style.imagePreview,on:{click:t.handleClick}},[t._ssrNode((t.show?"<div"+t._ssrClass(null,t.$style.container)+"><div"+t._ssrClass(null,[t.$style.bar,t.$style.topBar])+">"+(t.total?"<span"+t._ssrClass(null,t.$style.total)+">"+t._ssrEscape("\n        "+t._s(t.currentIndex+1)+"/"+t._s(t.total)+"\n      ")+"</span>":"\x3c!----\x3e")+" <span"+t._ssrClass(null,t.$style.close)+"> × </span></div> <div"+t._ssrClass(null,[t.$style.bar,t.$style.footBar])+">"+(t.currentImage&&t.download?"<a"+t._ssrAttr("href",t.currentImage.url)+' target="_blank"'+t._ssrClass(null,t.$style.download)+">\n        下载原图\n      </a>":"\x3c!----\x3e")+"</div> "+(t.currentImage?"<div"+t._ssrClass(null,t.$style.wrap)+"><div"+t._ssrClass(null,t.$style.item)+t._ssrStyle(null,{backgroundImage:"url("+t.$resize(t.currentImage.url,{webP:!t.download})+")",width:""+t.$px2vw(t.currentImage.finalWidth),height:""+t.$px2vw(t.currentImage.finalHeight)},null)+"></div> "+(t.total>1?"<button"+t._ssrClass(null,t.$style.prevBtn)+'><i class="el-icon-caret-left"></i></button> <button'+t._ssrClass(null,t.$style.nextBtn)+'><i class="el-icon-caret-right"></i></button>':"\x3c!----\x3e")+"</div>":"\x3c!----\x3e")+"</div>":"\x3c!----\x3e")+" "),t._t("default")],2)},[],!1,function(t){var e=n(273);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"c07ef6ca");e.a=component.exports},273:function(t,e,n){"use strict";n.r(e);var r=n(230),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},347:function(t,e){},348:function(t,e){},434:function(t,e,n){"use strict";n.r(e);var r=n(347),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},435:function(t,e,n){"use strict";n.r(e);var r=n(348),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},471:function(t,e,n){"use strict";n.r(e);var r=n(48),o=n(208),c=n(265),l=n(246),m=n(269),d={name:"ImageContent",components:{FlowHeaderUser:n(205).a,ImagePreview:m.a},props:{info:{type:Object,required:!0}},data:()=>({take:4,page:0,part:0,showAll:!1}),computed:{cartoon(){return this.info.parts},showMoreBtn(){return this.take<this.cartoon.length},sortCartoons(){const t=(this.page-1)*this.take;return this.showAll?this.cartoon:this.cartoon.slice(t,t+this.take)},nextPartUrl(){if(!this.info.is_cartoon||!this.cartoon.length)return"";let t=0;return this.cartoon.forEach((e,n)=>{e.id===this.info.id&&(t=n)}),t>=this.cartoon.length-1?"":this.$alias.image(this.cartoon[t+1].id)}},mounted(){this.computePage()},methods:{computePage(){this.info.is_cartoon&&(this.cartoon.forEach((meta,t)=>{meta.id===this.info.id&&(this.part=t+1)}),this.page=Math.ceil(this.part/this.take))}}},h=n(1);var _=Object(h.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"image-content"}},[t._ssrNode('<div class="container">',"</div>",[t._ssrNode('<div class="album-header">',"</div>",[t._ssrNode('<h1 class="title oneline">'+t._ssrEscape("\n        ["+t._s(t.info.is_creator?"原创":"转载")+"] ["+t._s(t.info.is_cartoon?"漫画":"相册")+"]\n        "+t._s(t.info.name)+"\n      ")+"</h1> "),n("FlowHeaderUser",{attrs:{user:t.info.user,time:t.info.created_at}})],2)]),t._ssrNode(" "),t._ssrNode('<div class="album-body">',"</div>",[t.info.is_album?n("ImagePreview",{staticClass:"images-wrap",attrs:{images:t.info.images}},[t._l(t.info.images,function(img){return n("div",{key:img.id,staticClass:"image-package"},[n("v-img",{staticClass:"image",attrs:{src:img.url,full:!0,width:img.width,height:img.height}})],1)}),t._v(" "),t.info.image_count?t._e():n("p",{staticClass:"no-image"},[t._v("\n        还没有上传图片\n      ")])],2):n("ImagePreview",{attrs:{images:[t.info.source]}},[n("div",{staticClass:"image-package"},[n("v-img",{staticClass:"image",attrs:{src:t.source.url,width:t.source.width,height:t.source.height,full:!0}})],1)]),t._ssrNode(" "),t.info.is_cartoon?t._ssrNode('<div class="cartoon-list">',"</div>",[t._ssrNode('<h3 class="sub-title">',"</h3>",[t._ssrNode(t._ssrEscape("\n        选集（"+t._s(t.info.parts.length)+"）\n        ")),t.nextPartUrl?n("nuxt-link",{staticClass:"next",attrs:{to:t.nextPartUrl}},[t._v("\n          下一话\n        ")]):t._e(),t._ssrNode(" "+(t.showMoreBtn?'<div class="more">'+t._ssrEscape("\n          "+t._s(t.showAll?"收起":"展开")+"\n        ")+"</div>":"\x3c!----\x3e"))],2),t._ssrNode(" "),t._ssrNode("<ul>","</ul>",t._l(t.sortCartoons,function(e){return t._ssrNode("<li>","</li>",[n("nuxt-link",{staticClass:"oneline",class:{active:e.id===t.id},attrs:{to:t.$alias.image(e.id)},domProps:{textContent:t._s(e.name)}})],1)}),0)],2):t._e()],2)],2)},[],!1,function(t){var e=n(434);e.__inject__&&e.__inject__(t)},null,"0e368662").exports,f=n(245),v={name:"PinShow",components:{SocialPanel:c.a,CommentMain:o.a,BangumiPanel:l.a,ImageContent:_,ShareBtn:f.a},props:{id:{type:String,required:!0}},data:()=>({info:null,user:null,bangumi:null,share_data:null}),computed:{isMine(){return!!this.$store.state.login&&this.info.user.id===this.$store.state.user.id}},asyncData({app:t,store:e,params:n,error:o}){const{id:c}=n;return Object(r.b)(t,{id:c}).then(t=>{const{bangumi:n}=t;return e.commit("social/SET_STATE",{type:"image",id:c,data:{like:t.liked,reward:t.rewarded,mark:t.marked,like_users:t.like_users,mark_users:t.mark_users,reward_users:t.reward_users}}),e.commit("social/SET_STATE",{type:"bangumi",id:n.id,data:{follow:n.followed}}),{info:t,bangumi:n,user:t.user,share_data:t.share_data}}).catch(t=>{o({statusCode:t.statusCode,message:t.message})})},head(){return{title:this.info.name,script:[{hid:"share-data",innerHTML:JSON.stringify(this.share_data),type:"application/json"}]}}};var y=Object(h.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pin-show"}},[n("ImageContent",{attrs:{info:t.info}}),t._ssrNode(" "),n("SocialPanel",{attrs:{id:t.info.id,"is-creator":t.info.is_creator,"is-mine":t.isMine,type:"image"}}),t._ssrNode(' <div class="hr"></div> '),t._ssrNode('<div class="bangumi-panel container">',"</div>",[t._ssrNode('<h3 class="sub-title">\n      所属番剧：\n    </h3> '),n("BangumiPanel",{attrs:{id:t.bangumi.id,name:t.bangumi.name,avatar:t.bangumi.avatar}},[n("p",{staticClass:"summary",domProps:{textContent:t._s(t.bangumi.summary)}})])],2),t._ssrNode(' <div class="hr"></div> '),t._ssrNode('<div class="container">',"</div>",[n("v-lazy",[n("CommentMain",{attrs:{id:t.id,"master-id":t.user.id,type:"image"}})],1)],1),t._ssrNode(" "),n("ShareBtn",{attrs:{"share-data":t.share_data}})],2)},[],!1,function(t){var e=n(435);e.__inject__&&e.__inject__(t)},null,"237b5bcc");e.default=y.exports}};
//# sourceMappingURL=_id.chunk.f9a37413.js.map