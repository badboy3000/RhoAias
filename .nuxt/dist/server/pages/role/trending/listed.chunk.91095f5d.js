exports.ids=[42],exports.modules={176:function(t,e){},177:function(t,e,r){"use strict";var n=r(4),o={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted(){this.auto&&this.onScroll()},methods:{getTarget(){let t=this.$el;for(;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){let e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll(){if(this.error)return;n.a.checkInView(this.$el)&&this.fetch();const t=n.a.on(this.getTarget(),["scroll"],this.$utils.throttle(()=>{this.error||(!this.noMore&&this.auto?n.a.checkInView(this.$el)&&this.fetch():n.a.off(t))},200))}}},l=r(1);var c={name:"FlowList",components:{FlowState:Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flow-state-wrap"},[t.error?t._ssrNode("<div>","</div>",[t._t("error",[n("div",{staticClass:"state-error"},[n("span",[t._v("出错了，点击重试")])])])],2):t.nothing?t._ssrNode("<div>","</div>",[t._t("nothing",[n("div",{staticClass:"state-nothing"},[n("img",{attrs:{src:r(87),alt:"no-content"}}),t._v(" "),n("span",[t._v("这里什么都没有")])])])],2):t.noMore?t._ssrNode("<div>","</div>",[t._t("no-more",[t.displayNoMore?n("div",{staticClass:"state-no-more"},[n("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?t._ssrNode("<div>","</div>",[t._t("loading",[n("div",{staticClass:"state-loading"},[n("i"),t._v(" "),n("span",[t._v("加载中…")])])])],2):t.auto?t._ssrNode('<div class="state-shim"></div>'):t._ssrNode("<button>","</button>",[t._t("load-btn",[n("div",{staticClass:"state-fetch-btn-text"},[n("span",[t._v("点击加载更多")])])])],2)])},[],!1,function(t){var e=r(178);e.__inject__&&e.__inject__(t)},null,"16540fb2").exports},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},count:{type:[String,Number],default:12},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,count:this.count,changing:this.changing,_extra:this.extra})}}},d=Object(l.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.source?r("div",[t._t("header",null,{source:t.source}),t._ssrNode(" "),t._t("default",null,{flow:t.source.list}),t._ssrNode(" "),r("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,"0bee53e6");e.a=d.exports},178:function(t,e,r){"use strict";r.r(e);var n=r(176),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},179:function(t,e){},187:function(t,e,r){"use strict";r(88),r(2);var n=r(46),o={name:"VPopover",components:{"el-popover":r.n(n).a},props:{width:{type:Number,default:240},actions:{type:Array,default:()=>[]},reportType:{type:String,default:""},reportId:{type:[Number,String],default:0},reportText:{type:String,default:"举报"},isCreator:{type:Boolean,default:!1},className:{type:String,default:""}},data:()=>({show:!1,backdropId:0}),computed:{actionList(){const t=this.actions;return this.reportId&&t.push({name:this.reportText,method:()=>this.$channel.$emit("open-report-drawer",{id:this.reportId,model:this.reportType,title:this.reportText,isCreator:this.isCreator})}),t}},methods:{handleShow(){this.backdropId=this.$backdrop.show()},handleHide(){this.$backdrop.hide(this.backdropId)},handleClick(){this.show=!1}}},l=r(1);var component=Object(l.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{class:t.className},[r("el-popover",{attrs:{width:t.width,trigger:"click","popper-class":"v-popover"},on:{show:t.handleShow,hide:t.handleHide},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("ul",{on:{click:t.handleClick}},t._l(t.actionList,function(e,n){return r("li",{key:n,on:{click:e.method}},[r("i",{staticClass:"el-icon-arrow-right"}),t._v(" "),r("span",{staticClass:"oneline",domProps:{textContent:t._s(e.name)}})])}),0),t._v(" "),t._t("default",null,{slot:"reference"})],2)],1)},[],!1,function(t){var e=r(191);e.__inject__&&e.__inject__(t)},null,"9847f35e");e.a=component.exports},191:function(t,e,r){"use strict";r.r(e);var n=r(179),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},197:function(t,e){},204:function(t,e){},234:function(t,e,r){"use strict";r.r(e);var n=r(197),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},240:function(t,e,r){"use strict";r(204),r(2);var n=r(151),o=r.n(n),l=r(153),c=r.n(l),d={name:"VirtualIdolItem",components:{"el-tag":o.a,"v-trend":c.a},props:{item:{type:Object,required:!0},sort:{type:String,required:!0}},computed:{trendData(){return this.item.market_trend.map(t=>+t.value).reverse()},computedPercent(){return`${parseFloat(this.item.has_star/this.item.star_count*100).toFixed(2)}%`}},methods:{createDeal(){this.$emit("create",this.item)}}},_=r(1);var component=Object(_.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"virtual-idol-item"},[r("nuxt-link",{attrs:{to:t.$alias.cartoonRole(t.item.id)}},[r("div",{staticClass:"header"},[r("img",{attrs:{src:t.$resize(t.item.avatar,{width:70,height:70})}}),t._v(" "),r("div",{staticClass:"info"},[r("p",{staticClass:"name oneline",domProps:{textContent:t._s(t.item.name)}}),t._v(" "),r("div",{staticClass:"meta"},[t._v("\n          ￥"+t._s(t.item.stock_price)+"/股，"+t._s(t.item.fans_count)+"人持股，已认购"+t._s(t.item.star_count)+"股\n        ")])])]),t._v(" "),r("div",{staticClass:"body"},[r("p",{staticClass:"price"},[r("span",[t._v("总市值:")]),t._v(" "),r("strong",[t._v(t._s(t.item.company_state?"￥"+t.item.market_price:"未上市"))])]),t._v(" "),t.item.boss?r("p",{staticClass:"owners"},[r("span",[t._v("负责人：")]),t._v(" "),r("span",[t.item.manager?r("img",{staticClass:"manager",attrs:{src:t.$resize(t.item.manager.avatar,{width:50,height:50})}}):t._e(),t._v(" "),r("img",{staticClass:"boss",attrs:{src:t.$resize(t.item.boss.avatar,{width:50,height:50})}})])]):t._e(),t._v(" "),r("div",{staticClass:"trend-placeholder"},[t.trendData.length?r("no-ssr",[r("v-trend",{attrs:{data:t.trendData,gradient:["#ffafc9","#ff8eb3","#f25d8e"],"auto-draw-duration":400,height:42,padding:0,"auto-draw":"",smooth:""}})],1):r("p",[t._v("\n          暂无数据\n        ")])],1),t._v(" "),"mine"===t.sort?r("div",{staticClass:"badges"},[t.item.is_locked?r("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v("\n          已停牌\n        ")]):r("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("\n          挂牌中\n        ")]),t._v(" "),r("el-tag",{attrs:{size:"mini",type:"info"}},[t._v("\n          "+t._s(t.item.company_state?"已上市":"未上市")+"\n        ")])],1):t._e()]),t._v(" "),r("div",{staticClass:"footer"},["mine"===t.sort?r("span",[t._v("\n        持有："+t._s(t.item.has_star)+"股，占比 "+t._s(t.computedPercent)+"\n      ")]):[t.item.ipo_at?r("span",[t._v("上市时间："+t._s(t.item.ipo_at.split(" ")[0]))]):r("span",[t._v("注册时间："+t._s(t.item.created_at.split(" ")[0]))])],t._v(" "),"mine"===t.sort?[t.item.company_state?r("button",{staticClass:"can-deal",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.createDeal(e)}}},[t._v("\n          发起交易\n        ")]):r("button",{staticClass:"mine-btn"},[t._v("\n          查看数据\n        ")])]:r("button",{staticClass:"pub-btn"},[t._v("\n        马上入股\n      ")])],2)])],1)},[],!1,function(t){var e=r(234);e.__inject__&&e.__inject__(t)},null,"1071dae2");e.a=component.exports},302:function(t,e){},388:function(t,e,r){"use strict";r.r(e);var n=r(302),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},453:function(t,e,r){"use strict";r.r(e);var n=r(240),o=r(177),l=r(187),c={name:"RoleTrendingListed",components:{VirtualIdolItem:n.a,FlowList:o.a,VPopover:l.a},data:()=>({sort_selected:"activity",current_sort:"trending-activity-1"}),computed:{selectedLabel(){return this.actions.filter(t=>t.value===this.sort_selected)[0].name},actions(){return[{name:"最高市值",value:"market_price",method:this.showMarketOrder},{name:"最多投资",value:"fans_count",method:this.showFansOrder},{name:"最高股价",value:"stock_price",method:this.showStockOrder},{name:"最近活跃",value:"activity",method:this.showActivityOrder}]}},async asyncData({store:t}){await t.dispatch("flow/initData",{func:"virtualIdolList",type:"seenIds",sort:"trending-activity-1"})},head:{title:"上市公司"},methods:{initTrending(){const t=`trending-${this.sort_selected}-1`;this.$store.dispatch("flow/initData",{func:"virtualIdolList",type:"seenIds",sort:t}),this.current_sort=t},showMarketOrder(){this.sort_selected="market_price",this.initTrending()},showFansOrder(){this.sort_selected="fans_count",this.initTrending()},showStockOrder(){this.sort_selected="stock_price",this.initTrending()},showActivityOrder(){this.sort_selected="activity",this.initTrending()}}},d=r(1);var component=Object(d.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"role-trending-listed"}},[r("flow-list",{attrs:{sort:t.current_sort,func:"virtualIdolList",type:"seenIds"},scopedSlots:t._u([{key:"header",fn:function(e){var source=e.source;return r("div",{staticClass:"role-trending-header"},[r("span",[t._v("总共 "+t._s(source.total)+" 个公司")]),t._v(" "),r("v-popover",{attrs:{actions:t.actions}},[r("span",[r("i",{staticClass:"el-icon-d-caret"}),t._v(t._s(t.selectedLabel))])])],1)}},{key:"default",fn:function(e){var n=e.flow;return r("ul",{},t._l(n,function(e){return r("virtual-idol-item",{key:e.id,attrs:{item:e,sort:t.sort_selected}})}),1)}}])})],1)},[],!1,function(t){var e=r(388);e.__inject__&&e.__inject__(t)},null,"4391991c");e.default=component.exports}};
//# sourceMappingURL=listed.chunk.91095f5d.js.map