exports.ids=[54],exports.modules={178:function(t,e){},179:function(t,e,o){"use strict";var n=o(4),r={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted(){this.auto&&this.onScroll()},methods:{getTarget(){let t=this.$el;for(;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){let e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll(){if(this.error)return;n.a.checkInView(this.$el)&&this.fetch();const t=n.a.on(this.getTarget(),["scroll"],this.$utils.throttle(()=>{this.error||(!this.noMore&&this.auto?n.a.checkInView(this.$el)&&this.fetch():n.a.off(t))},200))}}},l=o(1);var c={name:"FlowList",components:{FlowState:Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flow-state-wrap"},[t.error?t._ssrNode("<div>","</div>",[t._t("error",[n("div",{staticClass:"state-error"},[n("span",[t._v("出错了，点击重试")])])])],2):t.nothing?t._ssrNode("<div>","</div>",[t._t("nothing",[n("div",{staticClass:"state-nothing"},[n("img",{attrs:{src:o(89),alt:"no-content"}}),t._v(" "),n("span",[t._v("这里什么都没有")])])])],2):t.noMore?t._ssrNode("<div>","</div>",[t._t("no-more",[t.displayNoMore?n("div",{staticClass:"state-no-more"},[n("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?t._ssrNode("<div>","</div>",[t._t("loading",[n("div",{staticClass:"state-loading"},[n("i"),t._v(" "),n("span",[t._v("加载中…")])])])],2):t.auto?t._ssrNode('<div class="state-shim"></div>'):t._ssrNode("<button>","</button>",[t._t("load-btn",[n("div",{staticClass:"state-fetch-btn-text"},[n("span",[t._v("点击加载更多")])])])],2)])},[],!1,function(t){var e=o(180);e.__inject__&&e.__inject__(t)},null,"16540fb2").exports},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},count:{type:[String,Number],default:12},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,count:this.count,changing:this.changing,_extra:this.extra})}}},d=Object(l.a)(c,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.source?o("div",[t._t("header",null,{source:t.source}),t._ssrNode(" "),t._t("default",null,{flow:t.source.list}),t._ssrNode(" "),o("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,"0bee53e6");e.a=d.exports},180:function(t,e,o){"use strict";o.r(e);var n=o(178),r=o.n(n);for(var l in n)"default"!==l&&function(t){o.d(e,t,function(){return n[t]})}(l);e.default=r.a},191:function(t,e){},212:function(t,e,o){"use strict";o.r(e);var n=o(191),r=o.n(n);for(var l in n)"default"!==l&&function(t){o.d(e,t,function(){return n[t]})}(l);e.default=r.a},223:function(t,e,o){"use strict";var n={name:"PostFlowItem",props:{item:{required:!0,type:Object},bangumiId:{type:[Number,String],default:0},userZone:{type:String,default:""}},methods:{imageFilter:t=>t.slice(0,3)}},r=o(1);var component=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("li",{staticClass:"post-flow-item"},[o("router-link",{attrs:{to:t.$alias.post(t.item.id),tag:"div"}},[o("div",{staticClass:"header"},[t.userZone?[o("router-link",{staticClass:"bangumi-avatar",attrs:{to:t.$alias.bangumi(t.item.bangumi.id)}},[o("v-img",{attrs:{src:t.item.bangumi.avatar,width:"35",height:"35"}})],1),t._v(" "),o("div",{staticClass:"info"},[o("router-link",{staticClass:"name oneline",attrs:{to:t.$alias.bangumi(t.item.bangumi.id)},domProps:{textContent:t._s(t.item.bangumi.name)}}),t._v(" "),o("v-time",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)]:[o("router-link",{staticClass:"user-avatar",attrs:{to:t.$alias.user(t.item.user.zone)}},[o("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),o("div",{staticClass:"info"},[o("router-link",{staticClass:"name oneline",attrs:{to:t.$alias.user(t.item.user.zone)},domProps:{textContent:t._s(t.item.user.nickname)}}),t._v(" "),o("v-time",{model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1)]],2),t._v(" "),o("div",{staticClass:"body"},[o("div",{staticClass:"title"},[t.item.top_at&&t.bangumiId?o("div",{staticClass:"top_badge"},[t._v("\n          置顶\n        ")]):t._e(),t._v(" "),t.item.is_nice?o("div",{staticClass:"nice_badge"},[t._v("\n          精\n        ")]):t._e(),t._v(" "),t.item.is_creator?o("div",{staticClass:"creator_badge"},[t._v("\n          原创\n        ")]):t._e(),t._v(" "),o("p",{staticClass:"oneline",domProps:{textContent:t._s(t.item.title)}})]),t._v(" "),o("p",{staticClass:"content",domProps:{textContent:t._s(t.item.desc)}}),t._v(" "),t.item.images.length?o("div",{staticClass:"images"},[1===t.item.images.length?o("v-img",{staticClass:"poster-image",attrs:{src:t.item.images[0].url,width:"100%",height:"130"}}):o("div",{staticClass:"image-list"},t._l(t.imageFilter(t.item.images),function(image,t){return o("v-img",{key:t,staticClass:"image",attrs:{src:image.url,width:"32%",height:"93"}})}),1)],1):t._e(),t._v(" "),o("div",{staticClass:"tags"},[t.item.bangumi&&!t.userZone?o("router-link",{attrs:{to:t.$alias.bangumi(t.item.bangumi.id)}},[o("i",{staticClass:"iconfont icon-tag"}),t._v(" "),o("span",{domProps:{textContent:t._s(t.item.bangumi.name)}})]):t._e(),t._v(" "),t.item.idol?o("router-link",{attrs:{to:t.$alias.cartoonRole(t.item.idol.id)}},[o("i",{staticClass:"iconfont icon-tag"}),t._v(" "),o("span",{domProps:{textContent:t._s(t.item.idol.name)}})]):t._e(),t._v(" "),t.item.tags.length?t._l(t.item.tags,function(e){return o("span",{key:e.id,staticClass:"tag",domProps:{textContent:t._s(e.name)}})}):t._e()],2)]),t._v(" "),o("div",{staticClass:"footer"},[t.item.is_creator?o("div",[o("i",{staticClass:"iconfont icon-fantuan"}),t._v(" "),o("span",[t._v(t._s(t.$utils.shortenNumber(t.item.reward_count)))])]):o("div",[o("i",{staticClass:"iconfont icon-like"}),t._v(" "),o("span",[t._v(t._s(t.$utils.shortenNumber(t.item.like_count)))])]),t._v(" "),o("div",[o("i",{staticClass:"iconfont icon-mark"}),t._v(" "),o("span",[t._v(t._s(t.$utils.shortenNumber(t.item.mark_count)))])]),t._v(" "),o("div",[o("i",{staticClass:"iconfont icon-talk"}),t._v(" "),o("span",[t._v(t._s(t.$utils.shortenNumber(t.item.comment_count)))])])])]),t._ssrNode(' <div class="hr"></div>')],2)},[],!1,function(t){var e=o(212);e.__inject__&&e.__inject__(t)},null,"9b8d58e8");e.a=component.exports},340:function(t,e){},426:function(t,e,o){"use strict";o.r(e);var n=o(340),r=o.n(n);for(var l in n)"default"!==l&&function(t){o.d(e,t,function(){return n[t]})}(l);e.default=r.a},467:function(t,e,o){"use strict";o.r(e);var n=o(179),r=o(223),l={name:"UserPost",components:{FlowList:n.a,PostFlowItem:r.a},props:{zone:{type:String,required:!0}},data:()=>({active:"回帖"}),async asyncData({store:t,params:e}){await t.dispatch("flow/initData",{func:"getUserPostReply",sort:"news",type:"page",id:e.zone})},methods:{switchTab(t){"回帖"===t?this.$store.dispatch("flow/initData",{func:"getUserPostReply",sort:"news",type:"page",id:this.zone}):this.$store.dispatch("flow/initData",{func:"getUserPost",sort:"news",type:"page",id:this.zone}),this.active=t},imageFilter:t=>t.slice(0,3)}},c=o(1);var component=Object(c.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"user-post"}},[t._ssrNode('<header class="tab-header">',"</header>",[o("el-radio-group",{attrs:{size:"mini"},on:{change:t.switchTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[o("el-radio-button",{attrs:{label:"发帖"}}),t._v(" "),o("el-radio-button",{attrs:{label:"回帖"}})],1)],1),t._ssrNode(" "),o("flow-list",{directives:[{name:"show",rawName:"v-show",value:"发帖"===t.active,expression:"active === '发帖'"}],attrs:{id:t.zone,func:"getUserPost",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.flow;return o("ul",{},t._l(n,function(e){return o("post-flow-item",{key:e.id,attrs:{"user-zone":t.zone,item:e,"bangumi-id":""}})}),1)}}])}),t._ssrNode(" "),o("flow-list",{directives:[{name:"show",rawName:"v-show",value:"回帖"===t.active,expression:"active === '回帖'"}],attrs:{id:t.zone,func:"getUserPostReply",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.flow;return o("ul",{attrs:{id:"posts-of-reply"}},t._l(n,function(e){return o("li",{key:e.id},[o("nuxt-link",{staticClass:"header",attrs:{to:t.$alias.post(e.post.id)},domProps:{textContent:t._s(e.post.title)}}),t._v(" "),o("nuxt-link",{staticClass:"origin",attrs:{to:t.$alias.post(e.post.id,{comment:e.post.id})}},[o("div",{staticClass:"content",domProps:{innerHTML:t._s(e.post.content)}}),t._v(" "),e.post.images.length?o("div",{staticClass:"images clearfix"},[1===e.post.images.length?o("v-img",{staticClass:"poster-image",attrs:{src:e.post.images[0].url,width:"100%",height:"190"}}):o("div",{staticClass:"image-list"},t._l(t.imageFilter(e.post.images),function(image,t){return o("v-img",{key:t,staticClass:"image",attrs:{src:image.url,width:"32%",height:"93"}})}),1)],1):t._e()]),t._v(" "),o("nuxt-link",{staticClass:"reply",attrs:{to:t.$alias.post(e.post.id,{comment:e.post.id,reply:e.id})}},[o("div",{staticClass:"content",domProps:{innerHTML:t._s(e.content)}}),t._v(" "),e.images.length?o("div",{staticClass:"images clearfix"},[1===e.images.length?o("v-img",{staticClass:"poster-image",attrs:{src:e.images[0].url,width:"100%",height:"190"}}):o("div",{staticClass:"image-list"},t._l(t.imageFilter(e.images),function(image,t){return o("v-img",{key:t,staticClass:"image",attrs:{src:image.url,width:"32%",height:"93"}})}),1)],1):t._e()]),t._v(" "),o("nuxt-link",{staticClass:"footer",attrs:{to:t.$alias.bangumi(e.bangumi.id)}},[t._v("\n          回复于\n          "),o("span",{domProps:{textContent:t._s(e.bangumi.name)}}),t._v(" "),o("v-time",{model:{value:e.created_at,callback:function(o){t.$set(e,"created_at",o)},expression:"item.created_at"}})],1)],1)}),0)}}])})],2)},[],!1,function(t){var e=o(426);e.__inject__&&e.__inject__(t)},null,"cbb50c18");e.default=component.exports}};
//# sourceMappingURL=post.chunk.b2c8aa9b.js.map