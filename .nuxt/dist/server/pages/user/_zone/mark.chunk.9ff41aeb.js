exports.ids=[52],exports.modules={178:function(t,e){},179:function(t,e,o){"use strict";var r=o(4),n={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted(){this.auto&&this.onScroll()},methods:{getTarget(){let t=this.$el;for(;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){const e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll(){if(this.error)return;r.a.checkInView(this.$el)&&this.fetch();const t=r.a.on(this.getTarget(),["scroll"],this.$utils.throttle(()=>{this.error||(!this.noMore&&this.auto?r.a.checkInView(this.$el)&&this.fetch():r.a.off(t))},200))}}},l=o(1);var d={name:"FlowList",components:{FlowState:Object(l.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flow-state-wrap"},[t.error?t._ssrNode("<div>","</div>",[t._t("error",[r("div",{staticClass:"state-error"},[r("span",[t._v("出错了，点击重试")])])])],2):t.nothing?t._ssrNode("<div>","</div>",[t._t("nothing",[r("div",{staticClass:"state-nothing"},[r("img",{attrs:{src:o(89),alt:"no-content"}}),t._v(" "),r("span",[t._v("这里什么都没有")])])])],2):t.noMore?t._ssrNode("<div>","</div>",[t._t("no-more",[t.displayNoMore?r("div",{staticClass:"state-no-more"},[r("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?t._ssrNode("<div>","</div>",[t._t("loading",[r("div",{staticClass:"state-loading"},[r("i"),t._v(" "),r("span",[t._v("加载中…")])])])],2):t.auto?t._ssrNode('<div class="state-shim"></div>'):t._ssrNode("<button>","</button>",[t._t("load-btn",[r("div",{staticClass:"state-fetch-btn-text"},[r("span",[t._v("点击加载更多")])])])],2)])},[],!1,function(t){var e=o(180);e.__inject__&&e.__inject__(t)},null,"16540fb2").exports},mixins:[{props:{func:{required:!0,type:String},type:{required:!0,type:String},id:{type:[Number,String],default:""},sort:{type:String,default:""},auto:{type:Boolean,default:!0},count:{type:[String,Number],default:12},changing:{type:String,default:"id"},displayNoMore:{type:Boolean,default:!0}}}],computed:{source(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,count:this.count,changing:this.changing,_extra:this.extra})}}},c=Object(l.a)(d,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.source?o("div",[t._t("header",null,{source:t.source}),t._ssrNode(" "),t._t("default",null,{flow:t.source.list}),t._ssrNode(" "),o("FlowState",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"display-no-more":t.displayNoMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"}),t._v(" "),t._t("load-btn",null,{slot:"load-btn"})],2)],2):t._e()},[],!1,null,null,"0bee53e6");e.a=c.exports},180:function(t,e,o){"use strict";o.r(e);var r=o(178),n=o.n(r);for(var l in r)"default"!==l&&function(t){o.d(e,t,function(){return r[t]})}(l);e.default=n.a},339:function(t,e){},428:function(t,e,o){"use strict";o.r(e);var r=o(339),n=o.n(r);for(var l in r)"default"!==l&&function(t){o.d(e,t,function(){return r[t]})}(l);e.default=n.a},450:function(t,e,o){"use strict";o.r(e);var r={name:"UserMark",components:{FlowList:o(179).a},data:()=>({active:"帖子",nav:[{label:"帖子",type:"post"},{label:"相册",type:"image"},{label:"答案",type:"answer"},{label:"漫评",type:"score"},{label:"视频",type:"video"}],type:"post"}),async asyncData({store:t}){await t.dispatch("flow/initData",{func:"getUserBookmarks",type:"page",sort:"post",count:9999})},methods:{switchTab(label){let t="";this.nav.forEach(e=>{e.label===label&&(t=e.type)}),this.getData(t)},getData(t){this.$store.dispatch("flow/initData",{func:"getUserBookmarks",type:"page",sort:t,count:9999}),this.type=t}}},n=o(1);var component=Object(n.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"user-mark"}},[t._ssrNode('<header class="tab-header">',"</header>",[o("el-radio-group",{attrs:{size:"mini"},on:{change:t.switchTab},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.nav,function(t){return o("el-radio-button",{key:t.type,attrs:{label:t.label}})}),1)],1),t._ssrNode(" "),t._ssrNode('<main class="user-mark-view">',"</main>",["post"===t.type?o("FlowList",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"post"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return o("ul",{staticClass:"posts"},t._l(r,function(e){return o("li",{key:e.id},[o("a",{class:[e.deleted_at?"deleted":"blue-link"],attrs:{href:e.deleted_at?"javascript:;":t.$alias.post(e.id)},domProps:{textContent:t._s(e.title)}})])}),0)}}],null,!1,3011887061)}):t._e(),t._ssrNode(" "),"image"===t.type?o("FlowList",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"image"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return o("ul",{staticClass:"images"},t._l(r,function(e){return o("li",{key:e.id},[o("a",{attrs:{href:e.deleted_at?"javascript:;":t.$alias.image(e.id)}},[o("v-img",{attrs:{src:e.url,width:140,height:180}}),t._v(" "),e.deleted_at?o("div",{staticClass:"delete-mask"},[t._v("该相册已删除")]):t._e()],1)])}),0)}}],null,!1,3690196555)}):"answer"===t.type?o("FlowList",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"answer"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return o("ul",{staticClass:"answers"},t._l(r,function(e){return o("li",{key:e.id},[o("a",{class:[e.deleted_at?"deleted":"blue-link"],attrs:{href:e.deleted_at?"javascript:;":t.$alias.answer(e.id)},domProps:{textContent:t._s(e.intro||"[图片]")}})])}),0)}}])}):"score"===t.type?o("FlowList",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"score"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return o("ul",{staticClass:"scores"},t._l(r,function(e){return o("li",{key:e.id},[o("a",{class:[e.deleted_at?"deleted":"blue-link"],attrs:{href:e.deleted_at?"javascript:;":t.$alias.score(e.id)},domProps:{textContent:t._s(e.title)}}),t._v(" "),o("p",{domProps:{textContent:t._s(e.intro||"[图片]")}})])}),0)}}])}):"video"===t.type?o("FlowList",{attrs:{"display-no-more":!1,func:"getUserBookmarks",type:"page",sort:"video"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return o("ul",{staticClass:"videos"},t._l(r,function(e){return o("li",{key:e.id},[o("a",{attrs:{href:e.deleted_at?"javascript:;":t.$alias.video(e.id)}},[o("div",{staticClass:"poster"},[o("v-img",{attrs:{src:e.poster,width:120,height:80}}),t._v(" "),e.deleted_at?o("div",{staticClass:"delete-mask"},[t._v("\n                视频已失效\n              ")]):t._e()],1),t._v(" "),o("p",{staticClass:"name",domProps:{textContent:t._s(e.name)}})])])}),0)}}])}):t._e()],2)],2)},[],!1,function(t){var e=o(428);e.__inject__&&e.__inject__(t)},null,"7bb709a1");e.default=component.exports}};
//# sourceMappingURL=mark.chunk.9ff41aeb.js.map