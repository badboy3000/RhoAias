exports.ids=[57],exports.modules={171:function(t,e){},172:function(t,e,n){t.exports=n.p+"img/aa8b45a.png"},173:function(t,e,n){"use strict";var r=n(5),o={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!0}},mounted(){this.auto&&this.onScroll()},methods:{getTarget(){let t=this.$el;for(;"HTML"!==t.tagName&&"BOYD"!==t.tagName&&1===t.nodeType;){const e=window.getComputedStyle(t).overflowY;if("scroll"===e||"auto"===e)return t;t=t.parentNode}return document},onScroll(){if(this.error)return;r.a.checkInView(this.$el)&&this.fetch();const t=r.a.on(this.getTarget(),["scroll"],this.$utils.throttle(()=>{this.error||(!this.noMore&&this.auto?r.a.checkInView(this.$el)&&this.fetch():r.a.off(t))},200))}}},c=n(1);var component=Object(c.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flow-state-wrap"},[t.error?t._ssrNode("<div>","</div>",[t._t("error",[r("div",{staticClass:"state-error"},[r("span",[t._v("出错了，点击重试")])])])],2):t.nothing?t._ssrNode("<div>","</div>",[t._t("nothing",[r("div",{staticClass:"state-nothing"},[r("img",{attrs:{src:n(172),alt:"no-content"}}),t._v(" "),r("span",[t._v("这里什么都没有")])])])],2):t.noMore?t._ssrNode("<div>","</div>",[t._t("no-more",[t.displayNoMore?r("div",{staticClass:"state-no-more"},[r("span",[t._v("没有更多了")])]):t._e()])],2):t.loading?t._ssrNode("<div>","</div>",[t._t("loading",[r("div",{staticClass:"state-loading"},[r("i"),t._v(" "),r("span",[t._v("加载中…")])])])],2):t.auto?t._ssrNode('<div class="state-shim"></div>'):t._ssrNode("<button>","</button>",[t._t("load-btn",[r("div",{staticClass:"state-fetch-btn-text"},[r("span",[t._v("点击加载更多")])])])],2)])},[],!1,function(t){var e=n(175);e.__inject__&&e.__inject__(t)},null,"16540fb2");e.a=component.exports},174:function(t,e){},175:function(t,e,n){"use strict";n.r(e);var r=n(171),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},176:function(t,e){},179:function(t,e,n){"use strict";var r={name:"UserAvatar",props:{user:{type:Object,required:!0},size:{type:Number,default:40}},methods:{toUser(){this.$router.push(this.$alias.user(this.user.zone))}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"user-avatar",style:{width:t.$px2vw(t.size),height:t.$px2vw(t.size)},on:{click:function(e){return e.stopPropagation(),t.toUser(e)}}},[t._ssrNode("<img"+t._ssrAttr("src",t.$resize(t.user.avatar,{width:2*t.size}))+">")])},[],!1,function(t){var e=n(181);e.__inject__&&e.__inject__(t)},null,"16ffe9a8");e.a=component.exports},181:function(t,e,n){"use strict";n.r(e);var r=n(174),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},184:function(t,e){},185:function(t,e){},186:function(t,e){t.exports={item:"item-1M","in-detail":"in-detail-3X",inDetail:"in-detail-3X",avatar:"avatar-1i",main:"main-1x",header:"header-1Z",nickname:"nickname-JF","to-user":"to-user-2r",toUser:"to-user-2r",content:"content-1g",rolling:"rolling-1u"}},187:function(t,e){},188:function(t,e){},189:function(t,e){},190:function(t,e){},191:function(t,e,n){"use strict";var r={name:"UserNickname",props:{user:{type:Object,required:!0},isMaster:{type:Boolean,default:!1}},methods:{toUser(){this.$router.push(this.$alias.user(this.user.zone))}}},o=n(1);var component=Object(o.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"user-nickname"},[this._ssrNode('<div class="nickname"><p class="oneline">'+this._ssrEscape(this._s(this.user.nickname))+"</p></div> "+(this.isMaster?'<span class="badge master-badge"><span>楼主</span></span>':"\x3c!----\x3e"))])},[],!1,function(t){var e=n(194);e.__inject__&&e.__inject__(t)},null,"0ad68c7d");e.a=component.exports},193:function(t,e,n){"use strict";e.a=((t,e,n,r)=>{let o=0;const element=n?[n]:[document.getElementsByTagName("html")[0],document.body],c=n?n.scrollTop:window.scrollY,l=t||0,m=e||2e3,d=r||"easeOutSine",time=Math.max(.1,Math.min(Math.abs(c-l)/m,.8)),h={easeOutSine:t=>Math.sin(t*(Math.PI/2)),easeInOutSine:t=>-.5*(Math.cos(Math.PI*t)-1),easeInOutQuint:t=>(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)};element.forEach(t=>{t.requestAnimFrame||(t.requestAnimFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window))}),function t(){const p=(o+=1/60)/time,e=h[d](p);element.forEach(n=>{p<1?(n.requestAnimFrame(t),n.scrollTop=c+(l-c)*e):n.scrollTop=l})}()})},194:function(t,e,n){"use strict";n.r(e);var r=n(176),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},200:function(t,e){t.exports={"bangumi-panel":"bangumi-panel-b5",bangumiPanel:"bangumi-panel-b5",avatar:"avatar-2K",content:"content-2m",name:"name-5O",summary:"summary-3v",controls:"controls-1p",rolling:"rolling-nc"}},201:function(t,e){},205:function(t,e,n){"use strict";var r=n(193),o={name:"CommentCreateForm",props:{type:{required:!0,type:String},id:{required:!0,type:[Number,String]},masterId:{required:!0,type:Number}},data:()=>({content:""}),computed:{isGuest(){return!this.$store.state.login},submitting(){return this.$store.state.comment.submitting}},methods:{async submit(){if(this.isGuest)this.$channel.$emit("sign-in");else if(this.content){if(!this.submitting){this.$store.commit("comment/SET_SUBMITTING",{result:!0});try{const t=await this.$store.dispatch("comment/createMainComment",{content:this.content,images:[],type:this.type,id:this.id,ctx:this});this.$toast.success(t.message),this.$store.commit("UPDATE_USER_EXP",t.exp),this.$emit("submit"),this.content="",setTimeout(()=>{const e=document.getElementById(`comment-${t.data.id}`);e&&Object(r.a)(this.$utils.getOffsetTop(e)-100,600)},400)}finally{this.$store.commit("comment/SET_SUBMITTING",{result:!1})}}}else this.$emit("close")},handleAreaFocus(){document.body.scrollTop=0}}},c=n(1);var l=Object(c.a)(o,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comment-create-form"},[this._ssrNode('<textarea placeholder="来吧，尽情的（在1000字以内）发挥吧" maxlength="1000" class="content"></textarea> '),e("el-button",{staticClass:"submit-btn",attrs:{loading:this.submitting,type:"primary"},on:{click:this.submit}},[this._v("\n    发布\n  ")])],2)},[],!1,function(t){var e=n(211);e.__inject__&&e.__inject__(t)},null,"8222d2d8").exports,m={name:"SubCommentItem",props:{comment:{required:!0,type:Object},parentUserId:{required:!0,type:Number},parentCommentId:{required:!0,type:Number},type:{required:!0,type:String}},data:()=>({deleting:!1}),computed:{currentUserId(){return this.$store.state.login?this.$store.state.user.id:0},isMine(){return this.currentUserId===this.comment.from_user_id},showToUser(){return this.comment.to_user_id&&this.comment.to_user_id!==this.parentUserId},canDelete(){return this.isMine||this.currentUserId===this.parentUserId}},methods:{handleSubCommentClick(){if(this.isMine)return this.deleteComment(),void this.$nextTick(()=>{document.getElementById("reply-comment-textarea").style.display="none"});this.currentUserId&&this.$channel.$emit("reply-comment",{id:this.parentCommentId,targetUserId:this.comment.from_user_id,targetUserName:this.comment.from_user_name})},deleteComment(){this.canDelete&&(this.deleting||(this.deleting=!0,this.$confirm("删除后无法找回, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("comment/deleteSubComment",{ctx:this,type:this.type,id:this.comment.id,parentId:this.comment.parent_id})}).catch(()=>{this.deleting=!1})))}}};var d={name:"PostSubCommentList",components:{SubCommentItem:Object(c.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.item},[n("nuxt-link",{class:t.$style.avatar,attrs:{to:t.$alias.user(t.comment.from_user_zone),tag:"div"}},[n("v-img",{attrs:{src:t.comment.from_user_avatar,avatar:!0,width:"22",height:"22"}})],1),t._ssrNode(" "),t._ssrNode("<div"+t._ssrClass(null,t.$style.main)+">","</div>",[t._ssrNode("<div"+t._ssrClass("oneline",t.$style.header)+">","</div>",[t.showToUser?[n("nuxt-link",{class:t.$style.nickname,attrs:{to:t.$alias.user(t.comment.from_user_zone),tag:"span"}},[t._v("\n          "+t._s(t.comment.from_user_name)+":\n        ")]),t._ssrNode(" "),n("nuxt-link",{class:t.$style.toUser,attrs:{to:t.$alias.user(t.comment.to_user_zone),tag:"span"}},[t._v("\n          @"+t._s(t.comment.to_user_name)+"\n        ")])]:n("nuxt-link",{class:t.$style.nickname,attrs:{to:t.$alias.user(t.comment.from_user_zone),tag:"span"},domProps:{textContent:t._s(t.comment.from_user_name)}})],2),t._ssrNode(" <p"+t._ssrClass(null,t.$style.content)+">"+t._ssrEscape(t._s(t.comment.content))+"</p>")],2)],2)},[],!1,function(t){var e=n(213);e.__inject__&&e.__inject__(t);var r=n(214);r.__inject__&&r.__inject__(t),this.$style=r.locals||r},null,"40f00e8d").exports},props:{parentComment:{required:!0,type:Object},type:{required:!0,type:String}},computed:{comments(){return this.parentComment.comments},authorId(){return this.parentComment.from_user_id},hasComment(){return!!this.comments.list.length},filterComments(){const data=this.comments,t=data.list,e=t.slice(0,2);if(t.every(t=>t.id<=data.maxId))return e;const n=e.map(t=>t.id);return e.concat(t.filter(t=>t.id>data.maxId&&-1===n.indexOf(t.id)))}},methods:{loadAllComment(){this.$channel.$emit("load-all-sub-comment",{id:this.parentComment.id})}}};var h=Object(c.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasComment?n("div",{staticClass:"sub-comment-list-wrap"},[t._ssrNode('<div class="sub-comment-list">',"</div>",[t._l(t.filterComments,function(e){return n("SubCommentItem",{key:e.id,attrs:{comment:e,"parent-user-id":t.authorId,"parent-comment-id":t.parentComment.id,type:t.type}})}),t._ssrNode(" "+(!t.comments.noMore||t.comments.list.length>2?'<button class="load-all-comment">'+t._ssrEscape("\n      全部"+t._s(t.comments.total)+"条回复\n    ")+"</button>":"\x3c!----\x3e"))],2)]):t._e()},[],!1,function(t){var e=n(215);e.__inject__&&e.__inject__(t)},null,"4af58698").exports,_=n(179),f=n(191),v={name:"CommentCommentItem",components:{SubCommentList:h,UserAvatar:_.a,UserNickname:f.a},props:{comment:{required:!0,type:Object},masterId:{required:!0,type:Number},type:{required:!0,type:String}},data:()=>({deleting:!1,liking:!1}),computed:{currentUserId(){return this.$store.state.login?this.$store.state.user.id:0},isMine(){return this.currentUserId===this.comment.from_user_id},canDelete(){return this.isMine||this.currentUserId===this.masterId},computeFromUser(){return{id:this.comment.from_user_id,avatar:this.comment.from_user_avatar,nickname:this.comment.from_user_name,zone:this.comment.from_user_zone}},imageCount(){return this.comment.images.length},filterImages(){return this.inDetail?this.comment.images:this.comment.images.slice(0,3)}},methods:{async toggleLike(){if(this.currentUserId){if(!this.liking){this.liking=!0;try{await this.$store.dispatch("comment/toggleLikeMainComment",{ctx:this,type:this.type,id:this.comment.id})}finally{this.liking=!1}}}else this.$channel.$emit("sign-in")},deleteComment(){this.deleting||(this.deleting=!0,this.$confirm("删除后无法找回, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("comment/deleteMainComment",{ctx:this,type:this.type,id:this.comment.id}),this.$emit("delete")}).catch(()=>{this.deleting=!1}))},handleCommentBtnClick(){this.$channel.$emit("reply-comment",{id:this.comment.id,targetUserId:this.computeFromUser.id,targetUserName:this.computeFromUser.nickname})}}};var y={name:"VCommentMain",components:{CommentCreateForm:l,CommentItem:Object(c.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"comment-item"},[t._ssrNode('<div class="avatar">',"</div>",[r("UserAvatar",{attrs:{size:35,user:t.computeFromUser}})],1),t._ssrNode(" "),t._ssrNode('<div class="content">',"</div>",[t._ssrNode('<div class="header">',"</div>",[t._ssrNode('<div class="right-btn">'+(t.canDelete?'<div class="tool-btn-wrap"><button><img'+t._ssrAttr("src",n(212))+"></button></div>":"\x3c!----\x3e")+"</div> "),r("UserNickname",{attrs:{user:t.computeFromUser,"is-master":t.comment.is_owner}})],2),t._ssrNode(" "),t._ssrNode('<div class="main">',"</div>",[t._ssrNode('<div class="text-area">'+t._s(t.comment.content)+"</div> "),t.imageCount?t._ssrNode('<div class="image-area">',"</div>",[1===t.imageCount?t._ssrNode("<div>","</div>",t._l(t.comment.images,function(t,e){return r("v-img",{key:e,staticClass:"image",attrs:{src:t.url,"img-width":t.width,"img-height":t.height,height:"106"}})}),1):t._ssrNode("<div>","</div>",[t._ssrNode("<div>","</div>",t._l(t.filterImages,function(t,e){return r("v-img",{key:e,staticClass:"image",attrs:{src:t.url,rect:!0,width:"32%"}})}),1),t._ssrNode(" "+(t.imageCount>3?'<div class="mask"><span>'+t._ssrEscape("共"+t._s(t.imageCount)+"张图片")+"</span></div>":"\x3c!----\x3e"))],2)]):t._e()],2),t._ssrNode(" "),t._t("extra"),t._ssrNode(" "),t._ssrNode('<div class="footer">',"</div>",[t._ssrNode('<div class="info">',"</div>",[t._ssrNode("<span>"+t._ssrEscape(t._s(t.comment.floor_count)+"楼")+"</span> "),r("VTime",{model:{value:t.comment.created_at,callback:function(e){t.$set(t.comment,"created_at",e)},expression:"comment.created_at"}})],2),t._ssrNode(' <div class="social"><button'+t._ssrClass(null,{"is-active":t.comment.liked})+">"+(t.comment.like_count?"<span>"+t._ssrEscape(t._s(t.$utils.shortenNumber(t.comment.like_count)))+"</span>":"\x3c!----\x3e")+' <i class="iconfont icon-icon_good"></i></button></div>')],2),t._ssrNode(" "),r("SubCommentList",{attrs:{"parent-comment":t.comment,type:t.type}})],2)],2)},[],!1,function(t){var e=n(216);e.__inject__&&e.__inject__(t)},null,"6daa4147").exports,FlowState:n(173).a},props:{id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:t=>~["post","video","image","score","question","answer","role"].indexOf(t)},onlySeeMaster:{type:Boolean,default:!1},masterId:{required:!0,type:Number},bottomAppendComment:{type:Boolean,default:!0},auto:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},data:()=>({loadingMainComment:!1,focusCommentId:0,openFocusCommentDrawer:!1,loadingSubComment:!1,replyForm:{id:"",content:"",targetUserId:0,targetUserName:"",open:!1,replying:!1,liking:!1},openCreateCommentDrawer:!1,lastScroll:0,isScrollTop:!0}),computed:{store(){return this.$store.state.comment},list(){return this.store.list},noMore(){return this.store.noMore},total(){return this.store.total},focusComment(){return this.focusCommentId?this.list.filter(t=>t.id===this.focusCommentId)[0]:null},currentUserId(){return this.$store.state.login?this.$store.state.user.id:0}},mounted(){this.auto?this.$channel.$on(`fire-load-comment-${this.type}-${this.id}`,()=>{this.loadMoreMainComment(!0),this.$channel.$off(`fire-load-comment-${this.type}-${this.id}`)}):this.lazyLoadComment(),this.$channel.$on("load-all-sub-comment",({id:t})=>{this.focusCommentId=t,this.openFocusCommentDrawer=!0}),this.$channel.$on(`open-create-comment-drawer-${this.type}-${this.id}`,()=>{this.currentUserId?this.openCreateCommentDrawer=!0:this.$channel.$emit("sign-in")}),this.$channel.$on("reply-comment",({id:t,targetUserId:e,targetUserName:n})=>{this.handleSubCommentReply({id:t,targetUserId:e,targetUserName:n})}),window.addEventListener("scroll",this.$utils.throttle(()=>{const t=document.documentElement.scrollTop||document.body.scrollTop;this.isScrollTop=this.lastScroll>t,this.lastScroll=t},200))},methods:{async lazyLoadComment(){if(!this.lazy)return void this.$nextTick(()=>{this.scrollToReply()});const{query:t}=this.$route;await this.$store.dispatch("comment/getMainComments",{id:this.id,type:this.type,seeReplyId:t["comment-id"],onlySeeMaster:t.only&&parseInt(t.only,10)?1:0}),this.$nextTick(()=>{this.scrollToReply()})},autoLoadMoreMainComment(){this.loadMoreMainComment(!1)},async loadMoreMainComment(t=!1){if(!this.loadingMainComment){this.loadingMainComment=!0;try{await this.$store.dispatch("comment/getMainComments",{ctx:this,type:this.type,id:this.id,onlySeeMaster:this.onlySeeMaster?1:0,firstRequest:t})}finally{this.loadingMainComment=!1}}},async loadMoreSubComment(){if(!this.loadingSubComment){this.loadingSubComment=!0;try{await this.$store.dispatch("comment/getSubComments",{ctx:this,type:this.type,id:this.focusCommentId})}finally{this.loadingSubComment=!1}}},commentToComment(data){this.handleSubCommentReply({id:data.parent_id,targetUserId:data.from_user_id,targetUserName:data.from_user_name})},handleCommentBtnClick(){this.handleSubCommentReply({id:this.focusComment.id,targetUserId:this.focusComment.from_user_id,targetUserName:this.focusComment.from_user_name})},handleSubCommentReply({id:t,targetUserId:e,targetUserName:n}){this.currentUserId?(this.replyForm.id=t,this.replyForm.targetUserId=e,this.replyForm.targetUserName=n,this.replyForm.open=!0,setTimeout(()=>{document.body.scrollTop=0},200)):this.$channel.$emit("sign-in")},async toggleFocusCommentLike(){if(this.currentUserId){if(!this.replyForm.liking){this.replyForm.liking=!0;try{await this.$store.dispatch("comment/toggleLikeMainComment",{ctx:this,type:this.type,id:this.focusCommentId})}finally{this.replyForm.liking=!1}}}else this.$channel.$emit("sign-in")},async handleReplySubmit(){if(this.currentUserId){if(this.replyForm.content&&!this.replyForm.replying){this.replyForm.replying=!0;try{const t=await this.$store.dispatch("comment/createSubComment",{ctx:this,id:this.replyForm.id,type:this.type,content:this.replyForm.content,targetUserId:this.replyForm.targetUserId});this.replyForm.open=!1,this.replyForm.content="",this.$toast.success(t.message),this.$store.commit("UPDATE_USER_EXP",t.exp)}finally{this.replyForm.replying=!1}}}else this.$channel.$emit("sign-in")},writeComment(){this.$channel.$emit(`open-create-comment-drawer-${this.type}-${this.id}`)},closeCommentDrawer(){this.openCreateCommentDrawer=!1},submitCommentCallback(){this.openCreateCommentDrawer=!1,this.$emit("create-main-comment")},deleteCommentCallback(){this.$emit("delete-main-comment")},scrollToReply(){const t=this.$route.query["comment-id"];if(!t)return;const e=document.getElementById(`comment-${t}`);e&&setTimeout(()=>{Object(r.a)(this.$utils.getOffsetTop(e)-100,600)},400)}}};var C=Object(c.a)(y,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"comment-wrap"}},[t._ssrNode('<h3 class="title">\n    评论 '+(t.total?"<span>"+t._ssrEscape(t._s(t.total))+"</span>":"\x3c!----\x3e")+"</h3> "),t.list.length?[t._ssrNode('<div id="comment-list-wrap">',"</div>",t._l(t.list,function(e){return t._ssrNode('<div class="comment-item-wrap">',"</div>",[t._t("comment-item",[r("CommentItem",{attrs:{type:t.type,comment:e,"master-id":t.masterId},on:{delete:t.deleteCommentCallback}})],{comment:e,reply:t.handleSubCommentReply})],2)}),0),t._ssrNode(" "),r("FlowState",{attrs:{"no-more":t.noMore,loading:t.loadingMainComment,auto:!0,fetch:t.autoLoadMoreMainComment}}),t._ssrNode(" <button"+t._ssrClass("comment-fixed-btn",{isScrollTop:t.isScrollTop})+'><i class="iconfont icon-talk"></i> <span>回复</span></button>')]:t._ssrNode('<div class="comment-nothing"><img'+t._ssrAttr("src",n(210))+"> <p>还没有人发言呢！</p> <button>\n      抢沙发\n    </button></div>"),t._ssrNode(" "),r("v-drawer",{staticClass:"focus-comment-drawer",attrs:{"header-text":"评论列表"+(t.focusComment&&t.focusComment.floor_count?" - "+t.focusComment.floor_count+" 楼":""),backdrop:!1,from:"bottom",size:"100%"},model:{value:t.openFocusCommentDrawer,callback:function(e){t.openFocusCommentDrawer=e},expression:"openFocusCommentDrawer"}},[t.focusComment?[r("div",{staticClass:"container"},[r("div",{staticClass:"reply"},[r("div",{staticClass:"user clearfix"},[r("nuxt-link",{staticClass:"avatar",attrs:{to:t.$alias.user(t.focusComment.from_user_zone)}},[r("v-img",{attrs:{src:t.focusComment.from_user_avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),r("div",{staticClass:"summary"},[r("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(t.focusComment.from_user_zone)},domProps:{textContent:t._s(t.focusComment.from_user_name)}}),t._v(" "),r("div",{staticClass:"info"},[r("v-time",{model:{value:t.focusComment.created_at,callback:function(e){t.$set(t.focusComment,"created_at",e)},expression:"focusComment.created_at"}})],1)],1)],1),t._v(" "),r("div",{staticClass:"content"},[r("div",{staticClass:"text-area",domProps:{innerHTML:t._s(t.focusComment.content)}}),t._v(" "),r("div",{staticClass:"image-area"},t._l(t.focusComment.images,function(img,t){return r("div",{key:t,staticClass:"image-package"},[r("v-img",{attrs:{src:img.url,"img-width":img.width,"img-height":img.height}})],1)}),0)]),t._v(" "),r("div",{staticClass:"social"},[r("button",{class:[t.focusComment.liked?"reply-liked-btn":"reply-like-btn"],on:{click:t.toggleFocusCommentLike}},[r("i",{staticClass:"iconfont icon-icon_good"}),t._v(" "),r("span",[t._v(t._s(t.focusComment.liked?"已赞":"赞"))]),t._v(" "),t.focusComment.like_count?r("span",[t._v("("+t._s(t.focusComment.like_count)+")")]):t._e()]),t._v(" "),r("button",{staticClass:"reply-btn fr",on:{click:t.handleCommentBtnClick}},[t._v("\n              回复\n            ")])])]),t._v(" "),r("div",{staticClass:"hr"}),t._v(" "),r("p",{staticClass:"total"},[t._v("\n          "+t._s(t.focusComment.comments.total)+"条回复\n        ")]),t._v(" "),r("ul",{staticClass:"comments"},t._l(t.focusComment.comments.list,function(e){return r("li",{key:e.id},[r("div",{staticClass:"from-user"},[r("nuxt-link",{staticClass:"avatar",attrs:{to:t.$alias.user(e.from_user_zone)}},[r("v-img",{attrs:{src:e.from_user_avatar,avatar:!0,width:"35",height:"35"}})],1),t._v(" "),r("div",{staticClass:"summary"},[r("div",{staticClass:"users oneline"},[r("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(e.from_user_zone)},domProps:{textContent:t._s(e.from_user_name)}}),t._v(" "),e.to_user_zone?[t._v("\n                    回复\n                    "),r("nuxt-link",{staticClass:"nickname",attrs:{to:t.$alias.user(e.to_user_zone)},domProps:{textContent:t._s(e.to_user_name)}})]:t._e(),t._v("\n                  :\n                ")],2),t._v(" "),r("div",{staticClass:"info"},[r("v-time",{model:{value:e.created_at,callback:function(n){t.$set(e,"created_at",n)},expression:"item.created_at"}})],1)])],1),t._v(" "),r("div",{staticClass:"main"},[r("div",{staticClass:"content reply-btn",domProps:{textContent:t._s(e.content)},on:{click:function(n){return t.commentToComment(e)}}})])])}),0)]),t._v(" "),r("FlowState",{attrs:{"no-more":t.focusComment.comments.noMore,loading:t.loadingSubComment,fetch:t.loadMoreSubComment}})]:t._e()],2),t._ssrNode(" "),t._ssrNode('<div class="reply-comment-drawer-wrap">',"</div>",[r("v-drawer",{attrs:{"header-text":t.currentUserId===t.replyForm.targetUserId?"回复":"回复："+t.replyForm.targetUserName,backdrop:!1,from:"right",size:"100%","submit-text":"发送"},on:{submit:t.handleReplySubmit},model:{value:t.replyForm.open,callback:function(e){t.$set(t.replyForm,"open",e)},expression:"replyForm.open"}},[r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.replyForm.content,expression:"replyForm.content",modifiers:{trim:!0}}],attrs:{placeholder:"100字以内任意发挥",maxlength:"100"},domProps:{value:t.replyForm.content},on:{input:function(e){e.target.composing||t.$set(t.replyForm,"content",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])],1),t._ssrNode(" "),r("v-drawer",{attrs:{from:"right",size:"100%","header-text":"发表评论"},model:{value:t.openCreateCommentDrawer,callback:function(e){t.openCreateCommentDrawer=e},expression:"openCreateCommentDrawer"}},[t.openCreateCommentDrawer?r("div",{staticClass:"container"},[t._t("reply-form",[t.openCreateCommentDrawer?r("CommentCreateForm",{attrs:{id:t.id,type:t.type,"master-id":t.masterId},on:{close:t.closeCommentDrawer,submit:t.submitCommentCallback}}):t._e()],{close:t.closeCommentDrawer})],2):t._e()])],2)},[],!1,function(t){var e=n(217);e.__inject__&&e.__inject__(t)},null,"26fa08ed");e.a=C.exports},210:function(t,e,n){t.exports=n.p+"img/e82d3e7.png"},211:function(t,e,n){"use strict";n.r(e);var r=n(184),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},212:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAxElEQVRYR+2UMQ7CMAxFbYmyw9E6ZGlnrgATAxO9AnO7ZOjRYKdIQdkQ8lL9Wkqkn9k/enr+skrhTwvnEwKiG6JBGkQNoHl2kAZRA2ieHaRB1ACar7ODMcb9suxuKckpG1CVR9N8riGEt2XEc940OE3zPSU5/8KoytB17cUC9Jw3AcdxforI4Q/m1fft0QL0nK8T0HNleQNr/jcNepY+A675v84zgx7XLfM0iNqkQRpEDaB5dpAGUQNonh2kQdQAmi++g1+Jsoopr5i4FgAAAABJRU5ErkJggg=="},213:function(t,e,n){"use strict";n.r(e);var r=n(185),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},214:function(t,e,n){"use strict";n.r(e);var r=n(186),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},215:function(t,e,n){"use strict";n.r(e);var r=n(187),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},216:function(t,e,n){"use strict";n.r(e);var r=n(188),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},217:function(t,e,n){"use strict";n.r(e);var r=n(189),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},219:function(t,e,n){"use strict";n.r(e);var r=n(190),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},220:function(t,e){},222:function(t,e,n){"use strict";var r={props:{type:{required:!0,type:String,validator:t=>~["bangumi","user","question"].indexOf(t)},id:{required:!0,type:Number}},computed:{source(){return this.$store.getters["social/getState"](this.type,this.id)}},methods:{toggleFollow(){this.$store.state.login?this.$store.dispatch("social/toggleAction",{id:this.id,type:this.type,action:"follow"}):this.$channel.$emit("sign-in")}}},o=n(1);var component=Object(o.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"follow-button",on:{click:this.toggleFollow}},[this._ssrNode('<i class="iconfont icon-like"></i> <span>'+this._ssrEscape(this._s(this.source.follow?"已关注":"关注"))+"</span>")])},[],!1,function(t){var e=n(219);e.__inject__&&e.__inject__(t)},null,"bf8ea772");e.a=component.exports},241:function(t,e,n){"use strict";n.r(e);var r=n(200),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},242:function(t,e,n){"use strict";n.r(e);var r=n(201),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},244:function(t,e,n){"use strict";var r={name:"ShareBtn",props:{shareData:{type:Object,required:!0}},data:()=>({showModal:!1,backdropId:0,display:!0}),computed:{login(){return this.$store.state.login},shareLink(){return this.shareData?this.shareData.link:`https://m.calibur.tv${this.route.path}`}},methods:{showIntroModal(){this.showModal=!0,this.backdropId=this.$backdrop.show({ele:this.$el,click:()=>{this.showModal=!1,this.$backdrop.hide(this.backdropId)}})},abort(){this.display=!1,this.$backdrop.hide(this.backdropId),this.$toast.success("好吧...orz")},handleCopyOK(){this.showModal=!1,this.$backdrop.hide(this.backdropId),this.$toast.success("复制成功~快去分享给其他人吧！")}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.login&&t.display?n("div",{staticClass:"fenxiao-btn-container"},[t.showModal?t._ssrNode('<div class="modal-content">',"</div>",[t._ssrNode('<div class="tips"><p>这是你的专属邀请码</p> <p>把它分享给其他人，只要有人注册，那么你将会获得5个团子</p> <p>通过你的邀请码注册的人，将会获得2个团子</p> <p>团子可以用来看视频，为偶像应援等</p> <p>或经过转化之后提现，1团子相当于1人民币</p> <p>更重要的是，calibur 的发展需要你的支持，感谢</p></div> '),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.shareLink,expression:"shareLink"}],staticClass:"join",on:{success:t.handleCopyOK}},[t._ssrNode("\n      获取分享链接\n    ")]),t._ssrNode(' <button class="abort">\n      但是，我拒绝\n    </button>')],2):t._e(),t._ssrNode(' <button class="fenxiao-btn">\n    分享\n  </button>')],2):t._e()},[],!1,function(t){var e=n(242);e.__inject__&&e.__inject__(t)},null,"1e594501");e.a=component.exports},245:function(t,e,n){"use strict";var r={name:"BangumiPanel",components:{FollowButton:n(222).a},props:{bangumi:{type:Object,required:!0}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.bangumiPanel},[n("nuxt-link",{class:t.$style.avatar,attrs:{to:t.$alias.bangumi(t.bangumi.id)}},[n("v-img",{attrs:{src:t.bangumi.avatar,width:"80",height:"92"}})],1),t._ssrNode(" "),t._ssrNode("<div"+t._ssrClass(null,t.$style.content)+">","</div>",[n("nuxt-link",{attrs:{to:t.$alias.bangumi(t.bangumi.id)}},[n("h5",{staticClass:"oneline",class:t.$style.name,domProps:{textContent:t._s(t.bangumi.name)}})]),t._ssrNode(" <p"+t._ssrClass(null,t.$style.summary)+">"+t._ssrEscape(t._s(t.bangumi.summary))+"</p> "),t._ssrNode("<div"+t._ssrClass(null,t.$style.controls)+">","</div>",[n("FollowButton",{attrs:{id:t.bangumi.id,type:"bangumi"}})],1)],2)],2)},[],!1,function(t){var e=n(241);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"adeff4b4");e.a=component.exports},260:function(t,e,n){"use strict";n.r(e);var r=n(220),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},264:function(t,e,n){"use strict";var r={name:"SocialPanel",props:{isCreator:{required:!0,type:Boolean},isMine:{required:!0,type:Boolean},id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:t=>~["post","video","image","score","answer","video"].indexOf(t)}},computed:{isGuest(){return!this.$store.state.login},source(){return this.$store.getters["social/getState"](this.type,this.id)},displayUsers(){return(this.isCreator?this.source.reward_users.list:this.source.like_users.list).slice(0,this.displayCount)}},methods:{computeTextByAction:t=>"reward"===t?"投食":"like"===t?"喜欢":"mark"===t?"收藏":"操作",toggleAction(t){if(this.isGuest)this.$channel.$emit("sign-in");else if(this.isMine)this.$toast.info(`不能${this.computeTextByAction(t)}自己的内容`);else if("reward"===t){if(this.source.reward)return void this.$toast.info("已投食过");this.$confirm("向TA投食需要消耗你一个团子，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.submitAction("reward")}).catch(()=>{})}else this.submitAction(t)},async submitAction(t){const data=await this.$store.dispatch("social/toggleAction",{type:this.type,id:this.id,action:t});data.success&&this.$emit(`${t}-callback`,{result:data.result})}}},o=n(1);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.source?n("div",{staticClass:"ours-panel"},[t._ssrNode('<div class="buttons">',"</div>",[t.isCreator?n("el-button",{class:{"is-plain":t.source.reward},attrs:{loading:t.source.reward_loading,type:"warning",icon:"iconfont icon-fantuan",round:"",size:"mini"},on:{click:function(e){return t.toggleAction("reward")}}},[t._v("\n      "+t._s(t.source.reward?"已投食":"投食")+t._s(t.source.reward_users.total?"  |  "+t.source.reward_users.total:"")+"\n    ")]):t._e(),t._ssrNode(" "),n("el-button",{class:{"is-plain":t.source.like},attrs:{loading:t.source.like_loading,type:"danger",icon:"iconfont icon-like",round:"",size:"mini"},on:{click:function(e){return t.toggleAction("like")}}},[t._v("\n      "+t._s(t.source.like?"已喜欢":"喜欢")+t._s(t.source.like_users.total?"  |  "+t.source.like_users.total:"")+"\n    ")]),t._ssrNode(" "),n("el-button",{class:{"is-plain":t.source.mark},attrs:{loading:t.source.mark_loading,type:"success",icon:"iconfont icon-mark",round:"",size:"mini"},on:{click:function(e){return t.toggleAction("mark")}}},[t._v("\n      "+t._s(t.source.mark?"已收藏":"收藏")+t._s(t.source.mark_users.total?"  |  "+t.source.mark_users.total:"")+"\n    ")])],2),t._ssrNode(' <div class="users"><ul>'+t._ssrList(t.displayUsers,function(e){return'<li class="user-face"><img'+t._ssrAttr("src",t.$resize(e.avatar,{width:60}))+"></li>"})+"</ul></div>")],2):t._e()},[],!1,function(t){var e=n(260);e.__inject__&&e.__inject__(t)},null,"379e1343");e.a=component.exports},366:function(t,e){},450:function(t,e,n){"use strict";n.r(e);var r=n(366),o=n.n(r);for(var c in r)"default"!==c&&function(t){n.d(e,t,function(){return r[t]})}(c);e.default=o.a},473:function(t,e,n){"use strict";n.r(e);var r=n(205),o=n(264),c=n(245),l=n(244),m={name:"VideoShow",validate:({params:t})=>/^\d+$/.test(t.id),components:{CommentMain:r.a,SocialPanel:o.a,BangumiPanel:c.a,ShareBtn:l.a},props:{id:{type:String,required:!0}},data:()=>({maxWidth:0,take:4,part:0,page:0,showAll:!1,firstPlay:!0,player:null,playing:!1,notSupport:!1,loading:!1,info:null,bangumi:null,list:[],ip_blocked:!1,must_reward:!1,need_min_level:0,season_id:0,buyed:!1,buying:!1,showRewardDialog:!1,share_data:null}),computed:{isGuest(){return!this.$store.state.login},isMine(){return!this.isGuest&&this.info.user_id===this.$store.state.user.id},videos(){let t=[];return this.list.videos.forEach(e=>{t=t.concat(e.data)}),t},sortVideos(){const t=(this.page-1)*this.take;return this.showAll?this.videos:this.videos.slice(t,t+this.take)},useOtherSiteSource(){return this.info.other_site},videoSrc(){return this.info.src},isFlv(){return!this.useOtherSiteSource&&(!!this.videoSrc&&"flv"===this.videoSrc.split("?")[0].split(".").pop().toLowerCase())},nextPartVideo(){let t=0;const e=+this.id;return this.videos.forEach((video,n)=>{video.id===e&&n!==this.videos.length-1&&(t=this.videos[n+1].id)}),t?this.$alias.video(t):""},showMoreBtn(){return this.take<this.videos.length},showLevelThrottle(){return!!this.isGuest||this.user.exp.level<this.need_min_level},needCoin(){return this.must_reward&&!this.info.rewarded},user(){return this.$store.state.user}},asyncData({app:t,store:e,params:n,error:r}){const{id:o}=n;return((t,{id:e})=>t.$axios.$get(`video/${e}/show?refer=web`))(t,{id:o}).then(data=>{const{bangumi:t,info:n}=data;return e.commit("social/SET_STATE",{type:"video",id:o,data:{like:n.liked,reward:n.rewarded,mark:n.marked,like_users:n.like_users,mark_users:n.mark_users,reward_users:n.reward_users}}),e.commit("social/SET_STATE",{type:"bangumi",id:t.id,data:{follow:t.followed}}),data}).catch(t=>{r({statusCode:t.statusCode,message:t.message})})},head(){const{bangumi:t,info:e,list:n}=this,r=n.has_season,o=t.name,c=e.name;let l=e.part,m="",title="";return r&&n.videos.forEach(t=>{t.data.forEach(r=>{r.id===e.id&&(l=r.part-t.base,m=n.name)})}),{title:title=m?m===c?`${o}：${m}`:`${m}：第${l}话 ${c}`:`${o}：第${l}话 ${c}`,script:[{hid:"share-data",innerHTML:JSON.stringify(this.share_data),type:"application/json"}]}},mounted(){this.computePage();const t=this.$watch("isGuest",()=>{t(),this.initPlayer()})},methods:{initPlayer(){if(this.isFlv)return void(this.notSupport=!0);if(!this.videoSrc||this.useOtherSiteSource||this.showLevelThrottle||this.isGuest||this.ip_blocked)return;this.player=this.$refs.video;try{this.player.load()}catch(t){return void this.$alert(this.errorTips)}const t=this;this.player.addEventListener("pause",()=>{this.playing=!1}),this.player.addEventListener("waiting",()=>{this.loading=!0}),this.player.addEventListener("playing",()=>{this.playing=!0,this.handlePlaying()}),this.player.addEventListener("timeupdate",function(){t.loading=!1,this.currentTime>300&&t.needCoin&&(t.player.pause(),t.showRewardDialog=!0)}),this.player.addEventListener("abort",()=>{this.$alert(this.errorTips)}),this.player.addEventListener("error",()=>{this.$alert(this.errorTips)})},computePage(){this.videos.forEach(meta=>{meta.id===+this.id&&(this.part=meta.part)}),this.page=Math.ceil(this.part/this.take)},handlePlaying(){this.firstPlay&&(this.loading=!0,this.firstPlay=!1,((t,{id:e})=>t.$axios.$post("video/playing",{id:e}))(this,{id:this.id}))},handleVideoReportClick(){this.$channel.$emit("open-feedback",{type:4,desc:`【H5】-《${this.bangumi.name}》第${this.part}话 视频有错误，错误详情为：{?}`,placeholder:"请填写错误详情"})},handleRewardAction(){this.must_reward&&window.location.reload()},handleClickBuy(){this.buyed?this.$toast.success("无需重复购买"):this.buying||this.$confirm("这会消耗你10个虚拟币，确认吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.buying=!0,((t,{season_id:e})=>t.$axios.$post("video/buy",{season_id:e}))(this,{season_id:this.season_id}).then(()=>{this.$toast.success("购买成功，正在刷新页面").then(()=>{window.location.reload()})}).catch(()=>{this.buying=!1})}).catch(()=>{})}}},d=n(1);var component=Object(d.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-show",attrs:{id:"video-show"}},[t._ssrNode('<div class="video">',"</div>",[t.videoSrc?t.useOtherSiteSource?[t.info.is_baidu_cloud?[t._ssrNode("<p>该视频仅提供百度云播放</p> "),n("a",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.videoSrc,expression:"videoSrc"}],attrs:{href:"javascript:;"},on:{success:function(e){return t.$toast.success("复制成功")}}},[t._ssrNode("点击复制链接")]),t._ssrNode(" "+(t.info.baidu_cloud_pwd?'<a href="javascript:;">'+t._ssrEscape("密码："+t._s(t.info.baidu_cloud_pwd))+"</a>":"\x3c!----\x3e"))]:t._ssrNode("<p>应版权方要求 (⇀‸↼‶)，该视频暂不提供站内播放</p> <a"+t._ssrAttr("href",t.videoSrc)+' target="_blank">播放链接</a>')]:t.notSupport?t._ssrNode("<p>该视频格式仅支持在电脑上播放 (눈_눈)</p>"):t.isGuest?t._ssrNode("<p>流量压力太大了 (ಥ_ಥ)，需要登录才能看番</p> <a>立即登录</a>"):t.ip_blocked?t._ssrNode("<p>\n        你已被禁止看视频功能，请加QQ群解禁\n      </p>"):t.showLevelThrottle?t._ssrNode("<p>"+t._ssrEscape("该视频需要你的等级至少 "+t._s(t.need_min_level)+" 才能播放")+'</p> <a href="https://www.calibur.tv/post/2282">  为什么要限流？</a> <a href="https://www.calibur.tv/post/2279">  如何升级？</a>'):t.info?t._ssrNode("<video"+t._ssrAttr("src",t.videoSrc)+t._ssrAttr("poster",t.info.poster)+' preload="none" controls="controls" controlsList="nodownload"></video>'):t._e():[t._ssrNode("<p>这个资源消失了_〆(´Д｀ )</p>")],t._ssrNode(" <img"+t._ssrAttr("src",t.$resize(t.info.poster,{width:200}))+' class="share-poster"> '+(t.showRewardDialog?'<div class="need-coin-bg"><p>该视频需要投食之后才能播放</p></div>':"\x3c!----\x3e"))],2),t._ssrNode(" "),t._ssrNode('<div class="container">',"</div>",[t._ssrNode('<div id="metas"><h3 class="sub-title">'+t._ssrEscape("\n        选集（"+t._s(t.videos.length)+"）\n        ")+(t.nextPartVideo?"<a"+t._ssrAttr("href",t.nextPartVideo)+' class="next">下一话</a>':"\x3c!----\x3e")+" "+(t.showMoreBtn?'<div class="more">'+t._ssrEscape("\n          "+t._s(t.showAll?"收起":"展开")+"\n        ")+"</div>":"\x3c!----\x3e")+"</h3> "+(t.list.has_season&&t.showAll?t._ssrList(t.list.videos,function(e,n){return'<div><h6 class="season-title">'+t._ssrEscape(t._s(e.name))+"</h6> <ul>"+t._ssrList(e.data,function(video){return"<li><a"+t._ssrAttr("href",t.$alias.video(video.id))+t._ssrClass("meta oneline",{"a-active":t.$route.params.id==video.id})+">"+t._ssrEscape("\n                第"+t._s(video.part-e.base)+"话\n              ")+"</a></li>"})+"</ul></div>"}):"<ul>"+t._ssrList(t.sortVideos,function(video){return"<li><a"+t._ssrAttr("href",t.$alias.video(video.id))+t._ssrClass("meta oneline",{"a-active":t.$route.params.id==video.id})+">"+t._ssrEscape("\n            第"+t._s(video.part)+"话\n          ")+"</a></li>"})+"</ul>")+"</div> "),n("SocialPanel",{attrs:{id:t.info.id,"is-creator":t.info.is_creator,"is-mine":t.isMine,type:"video"},on:{"reward-callback":t.handleRewardAction}})],2),t._ssrNode(' <div class="hr"></div> '),t._ssrNode('<div class="container">',"</div>",[t.bangumi?n("BangumiPanel",{attrs:{bangumi:t.bangumi}}):t._e()],1),t._ssrNode(' <div class="hr"></div> '),t._ssrNode('<div class="container">',"</div>",[n("v-lazy",[n("CommentMain",{attrs:{id:t.id,"master-id":t.info.user_id,type:"video"}})],1)],1),t._ssrNode(" "),n("v-drawer",{staticClass:"need-coin-drawer",attrs:{from:"bottom",size:"70%"},model:{value:t.showRewardDialog,callback:function(e){t.showRewardDialog=e},expression:"showRewardDialog"}},[t.isGuest?t._e():n("div",{staticClass:"container"},[n("h2",[t._v("非常抱歉，为了降低流量压力，需要投食才能看番")]),t._v(" "),n("p",[t._v("点击视频下方「投食」按钮即可继续观看")]),t._v(" "),n("p",[t._v("投食会消耗你一枚「团子」")]),t._v(" "),n("p",[t._v("如果你已经没有团子了，你可以：")]),t._v(" "),n("ul",[n("li",[t._v("每天签到可以获得一枚团子")]),t._v(" "),n("li",[t._v("每天在站内发言、活跃就会获得团子")]),t._v(" "),n("li",[t._v("邀请别人注册 calibur，你与注册者都会获得团子")]),t._v(" "),n("li",[t._v("calibur 目前还不支持氪金，请见谅")])]),t._v(" "),n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:"http://calibur.tv/about/invite/"+t.user.id,expression:"`http://calibur.tv/about/invite/${user.id}`"}],staticClass:"invite-btn",on:{success:function(e){return t.$toast.success("复制成功~快去发送给好友吧")}}},[t._v("\n        点击生成你的专属邀请码，获得团子\n      ")])])]),t._ssrNode(" "),n("ShareBtn",{attrs:{"share-data":t.share_data}})],2)},[],!1,function(t){var e=n(450);e.__inject__&&e.__inject__(t)},null,"d3eee89c");e.default=component.exports}};
//# sourceMappingURL=_id.chunk.791927db.js.map