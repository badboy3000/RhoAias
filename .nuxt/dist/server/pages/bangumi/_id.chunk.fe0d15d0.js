exports.ids=[11],exports.modules={182:function(e,t){},188:function(e,t){},200:function(e,t,n){"use strict";n.r(t);var r=n(182),o=n.n(r);for(var l in r)"default"!==l&&function(e){n.d(t,e,function(){return r[e]})}(l);t.default=o.a},208:function(e,t,n){"use strict";n.r(t);var r=n(188),o=n.n(r);for(var l in r)"default"!==l&&function(e){n.d(t,e,function(){return r[e]})}(l);t.default=o.a},209:function(e,t,n){"use strict";var r={props:{type:{required:!0,type:String,validator:e=>~["bangumi","user","question"].indexOf(e)},id:{required:!0,type:Number}},computed:{source(){return this.$store.getters["social/getState"](this.type,this.id)}},methods:{toggleFollow(){this.$store.state.login?this.$store.dispatch("social/toggleAction",{id:this.id,type:this.type,action:"follow"}):this.$channel.$emit("sign-in")}}},o=n(1);var component=Object(o.a)(r,function(){var e=this.$createElement;return(this._self._c||e)("button",{staticClass:"follow-button",on:{click:this.toggleFollow}},[this._ssrNode('<i class="iconfont icon-like"></i>'+this._ssrEscape(" "+this._s(this.source.follow?"已关注":"关注")+"\n"))])},[],!1,function(e){var t=n(208);t.__inject__&&t.__inject__(e)},null,"bf8ea772");t.a=component.exports},210:function(e,t,n){"use strict";var r={name:"TabContainer",props:{headers:{required:!0,type:Array},defIndex:{type:[Number,String],default:"0"},router:{type:Boolean,default:!1}},data(){let e;return{focusIndex:e=this.router?this.headers.map(e=>e.route).indexOf(this.$route.name):+this.defIndex}},watch:{$route(e){this.focusIndex=this.headers.map(e=>e.route).indexOf(e.name)},headers(e){this.focusIndex=e.map(e=>e.route).indexOf(this.$route.name)}},methods:{computeItemText:e=>"string"==typeof e?e:e.label||e.name||e.text,computeItemIcon:e=>!("string"==typeof e||!e.icon)&&`iconfont ic-${e.replace("ic-","")}`,handleTabSwitch(e){this.focusIndex!==e&&(this.router&&this.$router.push({name:this.headers[e].route,params:this.$route.params}),this.focusIndex=e,this.$emit("change",e))}}},o=n(1);var component=Object(o.a)(r,function(){var e=this,t=e.$createElement;return(e._self._c||t)("section",{staticClass:"tab-container"},[e._ssrNode("<header>"+e._ssrList(e.headers,function(t,n){return"<div"+e._ssrClass(null,{"is-active":n===e.focusIndex})+e._ssrStyle(null,{width:100/e.headers.length+"%"},null)+">"+(e.computeItemIcon(t)?"<i"+e._ssrClass(null,e.computeItemIcon(t))+"></i>":"\x3c!----\x3e")+" <span>"+e._ssrEscape(e._s(e.computeItemText(t)))+"</span></div>"})+"</header> "),e.router?e._e():e._ssrNode("<main>","</main>",e._l(e.headers,function(t,n){return e._ssrNode("<div"+e._ssrStyle(null,null,{display:n===e.focusIndex?"":"none"})+">","</div>",[e._t(n)],2)}),0)],2)},[],!1,function(e){var t=n(200);t.__inject__&&t.__inject__(e)},null,"2697cdf0");t.a=component.exports},316:function(e,t){},401:function(e,t,n){"use strict";n.r(t);var r=n(316),o=n.n(r);for(var l in r)"default"!==l&&function(e){n.d(t,e,function(){return r[e]})}(l);t.default=o.a},446:function(e,t,n){"use strict";n.r(t);var r={name:"VBangumiHeader",components:{FollowButton:n(209).a},props:{info:{type:Object,required:!0}}},o=n(1);var l=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{attrs:{id:"bangumi-header"}},[e._ssrNode('<div class="img bg"'+e._ssrStyle(null,{backgroundImage:"url("+e.$resize(e.info.banner,{height:400,mode:2})+")"},null)+'></div> <div class="bangumi-mask"></div> '),e._ssrNode('<div class="info">',"</div>",[e._ssrNode("<img"+e._ssrAttr("src",e.$resize(e.info.avatar,{width:200}))+' alt="avatar" class="avatar"> <img src="https://image.calibur.tv/owner/logo/max.png?imageMogr2/auto-orient/strip|imageView2/1/w/200/h/200" class="share-img"> '),n("FollowButton",{attrs:{id:e.info.id,type:"bangumi"}}),e._ssrNode(' <div class="summary"><p class="title oneline">'+e._ssrEscape(e._s(e.info.name))+"</p> <span>"+e._ssrEscape("关注数 "+e._s(e.$utils.shortenNumber(e.info.follow_users.total)))+"</span> <span>"+e._ssrEscape("活跃度 "+e._s(e.$utils.shortenNumber(e.info.power)))+"</span></div>")],2)],2)},[],!1,function(e){var t=n(401);t.__inject__&&t.__inject__(e)},null,"6d673da0").exports,c=n(210),d=n(40),h={name:"BangumiShowLayout",validate:({params:e})=>/^\d+$/.test(e.id),components:{BangumiHeader:l,TabContainer:c.a},props:{id:{type:String,required:!0}},data:()=>({info:null}),computed:{headers(){if(!this.info)return[];const{has_video:e,has_cartoon:t}=this.info,n=[{label:"帖子",route:"bangumi-id-post"}];return e&&n.push({label:"视频",route:"bangumi-id-video"}),t&&n.push({label:"漫画",route:"bangumi-id-cartoon"}),n.concat([{label:"股市",route:"bangumi-id-role"},{label:"相册",route:"bangumi-id-pins"},{label:"漫评",route:"bangumi-id-review"},{label:"问答",route:"bangumi-id-qaq"}])}},asyncData({app:e,params:t,store:n,error:r}){const{id:o}=t;return Object(d.c)(e,{id:o}).then(e=>(n.commit("social/SET_STATE",{id:o,type:"bangumi",data:{follow:e.followed,follow_users:e.follow_users}}),{info:e})).catch(e=>{r({statusCode:e.statusCode,message:e.message})})},head(){return{title:this.info.name,script:[{hid:"share-data",innerHTML:JSON.stringify(this.info.share_data),type:"application/json"}]}}},f=Object(o.a)(h,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"bangumi-show"}},[t("BangumiHeader",{attrs:{info:this.info}}),this._ssrNode(" "),t("TabContainer",{attrs:{headers:this.headers,router:!0}}),this._ssrNode(" "),t("nuxt-child")],2)},[],!1,null,null,"733b8060");t.default=f.exports}};
//# sourceMappingURL=_id.chunk.fe0d15d0.js.map